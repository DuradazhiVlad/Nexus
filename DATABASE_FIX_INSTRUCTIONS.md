# Інструкції з виправлення помилок бази даних

## Проблеми, які потрібно виправити:

1. ❌ `relation 'public.media' does not exist`
2. ❌ `connection refused` - проблеми з підключенням до Supabase
3. ❌ `Supabase REST API failures`
4. ❌ Відсутні таблиці для завантаження медіа в пости
5. ❌ Проблеми з foreign key зв'язками
6. ❌ Відсутні storage buckets для медіафайлів
7. ❌ Неправильні RLS політики

## Кроки виправлення:

### 1. Відкрийте Supabase Dashboard

1. Перейдіть на [https://supabase.com/dashboard](https://supabase.com/dashboard)
2. Увійдіть в свій акаунт
3. Оберіть проект **Nexus**

### 2. Створіть відсутні таблиці

1. Перейдіть до розділу **SQL Editor** в лівому меню
2. Натисніть **New Query**
3. Скопіюйте весь вміст файлу `fix_missing_tables.sql` та вставте в редактор
4. Натисніть **Run** для виконання

### 3. Створіть Storage Buckets

1. Створіть ще один **New Query** в SQL Editor
2. Скопіюйте весь вміст файлу `create_storage_buckets.sql` та вставте в редактор
3. Натисніть **Run** для виконання

### 4. Перевірте результати

**Таблиці:**
- Перейдіть до **Table Editor**
- Переконайтеся, що створені таблиці: `media`, `friendships`, `posts`
- Перевірте foreign key зв'язки

**Storage:**
- Перейдіть до **Storage**
- Переконайтеся, що створені buckets: `avatar`, `media`, `reels`
- Перевірте політики доступу

### 5. Перевірте підключення

1. Перейдіть до **Settings** → **API**
2. Переконайтеся, що URL та ключі правильні
3. Перевірте файл `.env` в проекті:
   ```
   VITE_SUPABASE_URL=your_project_url
   VITE_SUPABASE_ANON_KEY=your_anon_key
   ```

## Після виправлення:

1. Перезапустіть додаток: `npm run dev`
2. Перевірте консоль браузера на наявність помилок
3. Спробуйте завантажити фото в пост
4. Перевірте роботу профілю

## Файли для виконання:

- `fix_missing_tables.sql` - створює відсутні таблиці
- `create_storage_buckets.sql` - створює storage buckets

⚠️ **Важливо:** Виконуйте скрипти в правильному порядку!

✅ **Після виконання всіх кроків помилки повинні зникнути.**