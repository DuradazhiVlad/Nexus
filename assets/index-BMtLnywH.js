function op(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Rt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function up(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var Zd={exports:{}},Ra={},ef={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ri=Symbol.for("react.element"),dp=Symbol.for("react.portal"),fp=Symbol.for("react.fragment"),hp=Symbol.for("react.strict_mode"),mp=Symbol.for("react.profiler"),pp=Symbol.for("react.provider"),gp=Symbol.for("react.context"),yp=Symbol.for("react.forward_ref"),xp=Symbol.for("react.suspense"),vp=Symbol.for("react.memo"),wp=Symbol.for("react.lazy"),iu=Symbol.iterator;function bp(e){return e===null||typeof e!="object"?null:(e=iu&&e[iu]||e["@@iterator"],typeof e=="function"?e:null)}var tf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rf=Object.assign,nf={};function Yn(e,t,r){this.props=e,this.context=t,this.refs=nf,this.updater=r||tf}Yn.prototype.isReactComponent={};Yn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Yn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function sf(){}sf.prototype=Yn.prototype;function Ko(e,t,r){this.props=e,this.context=t,this.refs=nf,this.updater=r||tf}var Qo=Ko.prototype=new sf;Qo.constructor=Ko;rf(Qo,Yn.prototype);Qo.isPureReactComponent=!0;var au=Array.isArray,af=Object.prototype.hasOwnProperty,Jo={current:null},lf={key:!0,ref:!0,__self:!0,__source:!0};function of(e,t,r){var n,s={},i=null,l=null;if(t!=null)for(n in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)af.call(t,n)&&!lf.hasOwnProperty(n)&&(s[n]=t[n]);var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)s[n]===void 0&&(s[n]=o[n]);return{$$typeof:ri,type:e,key:i,ref:l,props:s,_owner:Jo.current}}function jp(e,t){return{$$typeof:ri,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Xo(e){return typeof e=="object"&&e!==null&&e.$$typeof===ri}function _p(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var lu=/\/+/g;function il(e,t){return typeof e=="object"&&e!==null&&e.key!=null?_p(""+e.key):t.toString(36)}function $i(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case ri:case dp:l=!0}}if(l)return l=e,s=s(l),e=n===""?"."+il(l,0):n,au(s)?(r="",e!=null&&(r=e.replace(lu,"$&/")+"/"),$i(s,t,r,"",function(d){return d})):s!=null&&(Xo(s)&&(s=jp(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(lu,"$&/")+"/")+e)),t.push(s)),1;if(l=0,n=n===""?".":n+":",au(e))for(var o=0;o<e.length;o++){i=e[o];var c=n+il(i,o);l+=$i(i,t,r,c,s)}else if(c=bp(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=n+il(i,o++),l+=$i(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function hi(e,t,r){if(e==null)return e;var n=[],s=0;return $i(e,n,"","",function(i){return t.call(r,i,s++)}),n}function Np(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var at={current:null},Ui={transition:null},kp={ReactCurrentDispatcher:at,ReactCurrentBatchConfig:Ui,ReactCurrentOwner:Jo};function cf(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:hi,forEach:function(e,t,r){hi(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return hi(e,function(){t++}),t},toArray:function(e){return hi(e,function(t){return t})||[]},only:function(e){if(!Xo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ue.Component=Yn;ue.Fragment=fp;ue.Profiler=mp;ue.PureComponent=Ko;ue.StrictMode=hp;ue.Suspense=xp;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kp;ue.act=cf;ue.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=rf({},e.props),s=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=Jo.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)af.call(t,c)&&!lf.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];n.children=o}return{$$typeof:ri,type:e.type,key:s,ref:i,props:n,_owner:l}};ue.createContext=function(e){return e={$$typeof:gp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:pp,_context:e},e.Consumer=e};ue.createElement=of;ue.createFactory=function(e){var t=of.bind(null,e);return t.type=e,t};ue.createRef=function(){return{current:null}};ue.forwardRef=function(e){return{$$typeof:yp,render:e}};ue.isValidElement=Xo;ue.lazy=function(e){return{$$typeof:wp,_payload:{_status:-1,_result:e},_init:Np}};ue.memo=function(e,t){return{$$typeof:vp,type:e,compare:t===void 0?null:t}};ue.startTransition=function(e){var t=Ui.transition;Ui.transition={};try{e()}finally{Ui.transition=t}};ue.unstable_act=cf;ue.useCallback=function(e,t){return at.current.useCallback(e,t)};ue.useContext=function(e){return at.current.useContext(e)};ue.useDebugValue=function(){};ue.useDeferredValue=function(e){return at.current.useDeferredValue(e)};ue.useEffect=function(e,t){return at.current.useEffect(e,t)};ue.useId=function(){return at.current.useId()};ue.useImperativeHandle=function(e,t,r){return at.current.useImperativeHandle(e,t,r)};ue.useInsertionEffect=function(e,t){return at.current.useInsertionEffect(e,t)};ue.useLayoutEffect=function(e,t){return at.current.useLayoutEffect(e,t)};ue.useMemo=function(e,t){return at.current.useMemo(e,t)};ue.useReducer=function(e,t,r){return at.current.useReducer(e,t,r)};ue.useRef=function(e){return at.current.useRef(e)};ue.useState=function(e){return at.current.useState(e)};ue.useSyncExternalStore=function(e,t,r){return at.current.useSyncExternalStore(e,t,r)};ue.useTransition=function(){return at.current.useTransition()};ue.version="18.3.1";ef.exports=ue;var x=ef.exports;const St=cp(x),Sp=op({__proto__:null,default:St},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cp=x,Ep=Symbol.for("react.element"),Pp=Symbol.for("react.fragment"),Tp=Object.prototype.hasOwnProperty,Op=Cp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rp={key:!0,ref:!0,__self:!0,__source:!0};function uf(e,t,r){var n,s={},i=null,l=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)Tp.call(t,n)&&!Rp.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:Ep,type:e,key:i,ref:l,props:s,_owner:Op.current}}Ra.Fragment=Pp;Ra.jsx=uf;Ra.jsxs=uf;Zd.exports=Ra;var a=Zd.exports,df={exports:{}},_t={},ff={exports:{}},hf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,J){var ee=M.length;M.push(J);e:for(;0<ee;){var ne=ee-1>>>1,ie=M[ne];if(0<s(ie,J))M[ne]=J,M[ee]=ie,ee=ne;else break e}}function r(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var J=M[0],ee=M.pop();if(ee!==J){M[0]=ee;e:for(var ne=0,ie=M.length,Ae=ie>>>1;ne<Ae;){var S=2*(ne+1)-1,$=M[S],te=S+1,ae=M[te];if(0>s($,ee))te<ie&&0>s(ae,$)?(M[ne]=ae,M[te]=ee,ne=te):(M[ne]=$,M[S]=ee,ne=S);else if(te<ie&&0>s(ae,ee))M[ne]=ae,M[te]=ee,ne=te;else break e}}return J}function s(M,J){var ee=M.sortIndex-J.sortIndex;return ee!==0?ee:M.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,f=null,h=3,w=!1,b=!1,j=!1,k=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(M){for(var J=r(d);J!==null;){if(J.callback===null)n(d);else if(J.startTime<=M)n(d),J.sortIndex=J.expirationTime,t(c,J);else break;J=r(d)}}function N(M){if(j=!1,g(M),!b)if(r(c)!==null)b=!0,oe(P);else{var J=r(d);J!==null&&pe(N,J.startTime-M)}}function P(M,J){b=!1,j&&(j=!1,p(C),C=-1),w=!0;var ee=h;try{for(g(J),f=r(c);f!==null&&(!(f.expirationTime>J)||M&&!H());){var ne=f.callback;if(typeof ne=="function"){f.callback=null,h=f.priorityLevel;var ie=ne(f.expirationTime<=J);J=e.unstable_now(),typeof ie=="function"?f.callback=ie:f===r(c)&&n(c),g(J)}else n(c);f=r(c)}if(f!==null)var Ae=!0;else{var S=r(d);S!==null&&pe(N,S.startTime-J),Ae=!1}return Ae}finally{f=null,h=ee,w=!1}}var I=!1,_=null,C=-1,L=5,O=-1;function H(){return!(e.unstable_now()-O<L)}function W(){if(_!==null){var M=e.unstable_now();O=M;var J=!0;try{J=_(!0,M)}finally{J?Y():(I=!1,_=null)}}else I=!1}var Y;if(typeof m=="function")Y=function(){m(W)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,ce=F.port2;F.port1.onmessage=W,Y=function(){ce.postMessage(null)}}else Y=function(){k(W,0)};function oe(M){_=M,I||(I=!0,Y())}function pe(M,J){C=k(function(){M(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){b||w||(b=!0,oe(P))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(M){switch(h){case 1:case 2:case 3:var J=3;break;default:J=h}var ee=h;h=J;try{return M()}finally{h=ee}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,J){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var ee=h;h=M;try{return J()}finally{h=ee}},e.unstable_scheduleCallback=function(M,J,ee){var ne=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ne+ee:ne):ee=ne,M){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=ee+ie,M={id:u++,callback:J,priorityLevel:M,startTime:ee,expirationTime:ie,sortIndex:-1},ee>ne?(M.sortIndex=ee,t(d,M),r(c)===null&&M===r(d)&&(j?(p(C),C=-1):j=!0,pe(N,ee-ne))):(M.sortIndex=ie,t(c,M),b||w||(b=!0,oe(P))),M},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(M){var J=h;return function(){var ee=h;h=J;try{return M.apply(this,arguments)}finally{h=ee}}}})(hf);ff.exports=hf;var Ap=ff.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lp=x,jt=Ap;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mf=new Set,$s={};function fn(e,t){Fn(e,t),Fn(e+"Capture",t)}function Fn(e,t){for($s[e]=t,e=0;e<t.length;e++)mf.add(t[e])}var dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ml=Object.prototype.hasOwnProperty,$p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ou={},cu={};function Up(e){return Ml.call(cu,e)?!0:Ml.call(ou,e)?!1:$p.test(e)?cu[e]=!0:(ou[e]=!0,!1)}function Dp(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function zp(e,t,r,n){if(t===null||typeof t>"u"||Dp(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function lt(e,t,r,n,s,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var Qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Qe[e]=new lt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Qe[t]=new lt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Qe[e]=new lt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Qe[e]=new lt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Qe[e]=new lt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Qe[e]=new lt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Qe[e]=new lt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Qe[e]=new lt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Qe[e]=new lt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Yo=/[\-:]([a-z])/g;function Zo(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Yo,Zo);Qe[t]=new lt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Yo,Zo);Qe[t]=new lt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Yo,Zo);Qe[t]=new lt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Qe[e]=new lt(e,1,!1,e.toLowerCase(),null,!1,!1)});Qe.xlinkHref=new lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Qe[e]=new lt(e,1,!1,e.toLowerCase(),null,!0,!0)});function ec(e,t,r,n){var s=Qe.hasOwnProperty(t)?Qe[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(zp(t,r,s,n)&&(r=null),n||s===null?Up(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var gr=Lp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mi=Symbol.for("react.element"),bn=Symbol.for("react.portal"),jn=Symbol.for("react.fragment"),tc=Symbol.for("react.strict_mode"),Bl=Symbol.for("react.profiler"),pf=Symbol.for("react.provider"),gf=Symbol.for("react.context"),rc=Symbol.for("react.forward_ref"),Vl=Symbol.for("react.suspense"),ql=Symbol.for("react.suspense_list"),nc=Symbol.for("react.memo"),wr=Symbol.for("react.lazy"),yf=Symbol.for("react.offscreen"),uu=Symbol.iterator;function is(e){return e===null||typeof e!="object"?null:(e=uu&&e[uu]||e["@@iterator"],typeof e=="function"?e:null)}var Ce=Object.assign,al;function gs(e){if(al===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);al=t&&t[1]||""}return`
`+al+e}var ll=!1;function ol(e,t){if(!e||ll)return"";ll=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=n.stack.split(`
`),l=s.length-1,o=i.length-1;1<=l&&0<=o&&s[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(s[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||s[l]!==i[o]){var c=`
`+s[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{ll=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?gs(e):""}function Ip(e){switch(e.tag){case 5:return gs(e.type);case 16:return gs("Lazy");case 13:return gs("Suspense");case 19:return gs("SuspenseList");case 0:case 2:case 15:return e=ol(e.type,!1),e;case 11:return e=ol(e.type.render,!1),e;case 1:return e=ol(e.type,!0),e;default:return""}}function Gl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case jn:return"Fragment";case bn:return"Portal";case Bl:return"Profiler";case tc:return"StrictMode";case Vl:return"Suspense";case ql:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case gf:return(e.displayName||"Context")+".Consumer";case pf:return(e._context.displayName||"Context")+".Provider";case rc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case nc:return t=e.displayName||null,t!==null?t:Gl(e.type)||"Memo";case wr:t=e._payload,e=e._init;try{return Gl(e(t))}catch{}}return null}function Fp(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gl(t);case 8:return t===tc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Fr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function xf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Mp(e){var t=xf(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(l){n=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function pi(e){e._valueTracker||(e._valueTracker=Mp(e))}function vf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=xf(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Qi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Hl(e,t){var r=t.checked;return Ce({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function du(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Fr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function wf(e,t){t=t.checked,t!=null&&ec(e,"checked",t,!1)}function Wl(e,t){wf(e,t);var r=Fr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Kl(e,t.type,r):t.hasOwnProperty("defaultValue")&&Kl(e,t.type,Fr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function fu(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Kl(e,t,r){(t!=="number"||Qi(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ys=Array.isArray;function An(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Fr(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Ql(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return Ce({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hu(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(D(92));if(ys(r)){if(1<r.length)throw Error(D(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Fr(r)}}function bf(e,t){var r=Fr(t.value),n=Fr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function mu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function jf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?jf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var gi,_f=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(gi=gi||document.createElement("div"),gi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=gi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Us(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var bs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bp=["Webkit","ms","Moz","O"];Object.keys(bs).forEach(function(e){Bp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),bs[t]=bs[e]})});function Nf(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||bs.hasOwnProperty(e)&&bs[e]?(""+t).trim():t+"px"}function kf(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Nf(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Vp=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xl(e,t){if(t){if(Vp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function Yl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zl=null;function sc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var eo=null,Ln=null,$n=null;function pu(e){if(e=ii(e)){if(typeof eo!="function")throw Error(D(280));var t=e.stateNode;t&&(t=Da(t),eo(e.stateNode,e.type,t))}}function Sf(e){Ln?$n?$n.push(e):$n=[e]:Ln=e}function Cf(){if(Ln){var e=Ln,t=$n;if($n=Ln=null,pu(e),t)for(e=0;e<t.length;e++)pu(t[e])}}function Ef(e,t){return e(t)}function Pf(){}var cl=!1;function Tf(e,t,r){if(cl)return e(t,r);cl=!0;try{return Ef(e,t,r)}finally{cl=!1,(Ln!==null||$n!==null)&&(Pf(),Cf())}}function Ds(e,t){var r=e.stateNode;if(r===null)return null;var n=Da(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(D(231,t,typeof r));return r}var to=!1;if(dr)try{var as={};Object.defineProperty(as,"passive",{get:function(){to=!0}}),window.addEventListener("test",as,as),window.removeEventListener("test",as,as)}catch{to=!1}function qp(e,t,r,n,s,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var js=!1,Ji=null,Xi=!1,ro=null,Gp={onError:function(e){js=!0,Ji=e}};function Hp(e,t,r,n,s,i,l,o,c){js=!1,Ji=null,qp.apply(Gp,arguments)}function Wp(e,t,r,n,s,i,l,o,c){if(Hp.apply(this,arguments),js){if(js){var d=Ji;js=!1,Ji=null}else throw Error(D(198));Xi||(Xi=!0,ro=d)}}function hn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Of(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function gu(e){if(hn(e)!==e)throw Error(D(188))}function Kp(e){var t=e.alternate;if(!t){if(t=hn(e),t===null)throw Error(D(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return gu(s),e;if(i===n)return gu(s),t;i=i.sibling}throw Error(D(188))}if(r.return!==n.return)r=s,n=i;else{for(var l=!1,o=s.child;o;){if(o===r){l=!0,r=s,n=i;break}if(o===n){l=!0,n=s,r=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===r){l=!0,r=i,n=s;break}if(o===n){l=!0,n=i,r=s;break}o=o.sibling}if(!l)throw Error(D(189))}}if(r.alternate!==n)throw Error(D(190))}if(r.tag!==3)throw Error(D(188));return r.stateNode.current===r?e:t}function Rf(e){return e=Kp(e),e!==null?Af(e):null}function Af(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Af(e);if(t!==null)return t;e=e.sibling}return null}var Lf=jt.unstable_scheduleCallback,yu=jt.unstable_cancelCallback,Qp=jt.unstable_shouldYield,Jp=jt.unstable_requestPaint,Oe=jt.unstable_now,Xp=jt.unstable_getCurrentPriorityLevel,ic=jt.unstable_ImmediatePriority,$f=jt.unstable_UserBlockingPriority,Yi=jt.unstable_NormalPriority,Yp=jt.unstable_LowPriority,Uf=jt.unstable_IdlePriority,Aa=null,Zt=null;function Zp(e){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(Aa,e,void 0,(e.current.flags&128)===128)}catch{}}var Vt=Math.clz32?Math.clz32:r0,e0=Math.log,t0=Math.LN2;function r0(e){return e>>>=0,e===0?32:31-(e0(e)/t0|0)|0}var yi=64,xi=4194304;function xs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Zi(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,l=r&268435455;if(l!==0){var o=l&~s;o!==0?n=xs(o):(i&=l,i!==0&&(n=xs(i)))}else l=r&~s,l!==0?n=xs(l):i!==0&&(n=xs(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Vt(t),s=1<<r,n|=e[r],t&=~s;return n}function n0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function s0(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-Vt(i),o=1<<l,c=s[l];c===-1?(!(o&r)||o&n)&&(s[l]=n0(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function no(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Df(){var e=yi;return yi<<=1,!(yi&4194240)&&(yi=64),e}function ul(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ni(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Vt(t),e[t]=r}function i0(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Vt(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function ac(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Vt(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var me=0;function zf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var If,lc,Ff,Mf,Bf,so=!1,vi=[],Tr=null,Or=null,Rr=null,zs=new Map,Is=new Map,_r=[],a0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xu(e,t){switch(e){case"focusin":case"focusout":Tr=null;break;case"dragenter":case"dragleave":Or=null;break;case"mouseover":case"mouseout":Rr=null;break;case"pointerover":case"pointerout":zs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Is.delete(t.pointerId)}}function ls(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=ii(t),t!==null&&lc(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function l0(e,t,r,n,s){switch(t){case"focusin":return Tr=ls(Tr,e,t,r,n,s),!0;case"dragenter":return Or=ls(Or,e,t,r,n,s),!0;case"mouseover":return Rr=ls(Rr,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return zs.set(i,ls(zs.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Is.set(i,ls(Is.get(i)||null,e,t,r,n,s)),!0}return!1}function Vf(e){var t=en(e.target);if(t!==null){var r=hn(t);if(r!==null){if(t=r.tag,t===13){if(t=Of(r),t!==null){e.blockedOn=t,Bf(e.priority,function(){Ff(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Di(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=io(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Zl=n,r.target.dispatchEvent(n),Zl=null}else return t=ii(r),t!==null&&lc(t),e.blockedOn=r,!1;t.shift()}return!0}function vu(e,t,r){Di(e)&&r.delete(t)}function o0(){so=!1,Tr!==null&&Di(Tr)&&(Tr=null),Or!==null&&Di(Or)&&(Or=null),Rr!==null&&Di(Rr)&&(Rr=null),zs.forEach(vu),Is.forEach(vu)}function os(e,t){e.blockedOn===t&&(e.blockedOn=null,so||(so=!0,jt.unstable_scheduleCallback(jt.unstable_NormalPriority,o0)))}function Fs(e){function t(s){return os(s,e)}if(0<vi.length){os(vi[0],e);for(var r=1;r<vi.length;r++){var n=vi[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Tr!==null&&os(Tr,e),Or!==null&&os(Or,e),Rr!==null&&os(Rr,e),zs.forEach(t),Is.forEach(t),r=0;r<_r.length;r++)n=_r[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<_r.length&&(r=_r[0],r.blockedOn===null);)Vf(r),r.blockedOn===null&&_r.shift()}var Un=gr.ReactCurrentBatchConfig,ea=!0;function c0(e,t,r,n){var s=me,i=Un.transition;Un.transition=null;try{me=1,oc(e,t,r,n)}finally{me=s,Un.transition=i}}function u0(e,t,r,n){var s=me,i=Un.transition;Un.transition=null;try{me=4,oc(e,t,r,n)}finally{me=s,Un.transition=i}}function oc(e,t,r,n){if(ea){var s=io(e,t,r,n);if(s===null)wl(e,t,n,ta,r),xu(e,n);else if(l0(s,e,t,r,n))n.stopPropagation();else if(xu(e,n),t&4&&-1<a0.indexOf(e)){for(;s!==null;){var i=ii(s);if(i!==null&&If(i),i=io(e,t,r,n),i===null&&wl(e,t,n,ta,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else wl(e,t,n,null,r)}}var ta=null;function io(e,t,r,n){if(ta=null,e=sc(n),e=en(e),e!==null)if(t=hn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Of(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ta=e,null}function qf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xp()){case ic:return 1;case $f:return 4;case Yi:case Yp:return 16;case Uf:return 536870912;default:return 16}default:return 16}}var Cr=null,cc=null,zi=null;function Gf(){if(zi)return zi;var e,t=cc,r=t.length,n,s="value"in Cr?Cr.value:Cr.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var l=r-e;for(n=1;n<=l&&t[r-n]===s[i-n];n++);return zi=s.slice(e,1<n?1-n:void 0)}function Ii(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function wi(){return!0}function wu(){return!1}function Nt(e){function t(r,n,s,i,l){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?wi:wu,this.isPropagationStopped=wu,this}return Ce(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=wi)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=wi)},persist:function(){},isPersistent:wi}),t}var Zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uc=Nt(Zn),si=Ce({},Zn,{view:0,detail:0}),d0=Nt(si),dl,fl,cs,La=Ce({},si,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cs&&(cs&&e.type==="mousemove"?(dl=e.screenX-cs.screenX,fl=e.screenY-cs.screenY):fl=dl=0,cs=e),dl)},movementY:function(e){return"movementY"in e?e.movementY:fl}}),bu=Nt(La),f0=Ce({},La,{dataTransfer:0}),h0=Nt(f0),m0=Ce({},si,{relatedTarget:0}),hl=Nt(m0),p0=Ce({},Zn,{animationName:0,elapsedTime:0,pseudoElement:0}),g0=Nt(p0),y0=Ce({},Zn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),x0=Nt(y0),v0=Ce({},Zn,{data:0}),ju=Nt(v0),w0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},b0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},j0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=j0[e])?!!t[e]:!1}function dc(){return _0}var N0=Ce({},si,{key:function(e){if(e.key){var t=w0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ii(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?b0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dc,charCode:function(e){return e.type==="keypress"?Ii(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ii(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),k0=Nt(N0),S0=Ce({},La,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_u=Nt(S0),C0=Ce({},si,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dc}),E0=Nt(C0),P0=Ce({},Zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),T0=Nt(P0),O0=Ce({},La,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),R0=Nt(O0),A0=[9,13,27,32],fc=dr&&"CompositionEvent"in window,_s=null;dr&&"documentMode"in document&&(_s=document.documentMode);var L0=dr&&"TextEvent"in window&&!_s,Hf=dr&&(!fc||_s&&8<_s&&11>=_s),Nu=" ",ku=!1;function Wf(e,t){switch(e){case"keyup":return A0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _n=!1;function $0(e,t){switch(e){case"compositionend":return Kf(t);case"keypress":return t.which!==32?null:(ku=!0,Nu);case"textInput":return e=t.data,e===Nu&&ku?null:e;default:return null}}function U0(e,t){if(_n)return e==="compositionend"||!fc&&Wf(e,t)?(e=Gf(),zi=cc=Cr=null,_n=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Hf&&t.locale!=="ko"?null:t.data;default:return null}}var D0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Su(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!D0[e.type]:t==="textarea"}function Qf(e,t,r,n){Sf(n),t=ra(t,"onChange"),0<t.length&&(r=new uc("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Ns=null,Ms=null;function z0(e){ah(e,0)}function $a(e){var t=Sn(e);if(vf(t))return e}function I0(e,t){if(e==="change")return t}var Jf=!1;if(dr){var ml;if(dr){var pl="oninput"in document;if(!pl){var Cu=document.createElement("div");Cu.setAttribute("oninput","return;"),pl=typeof Cu.oninput=="function"}ml=pl}else ml=!1;Jf=ml&&(!document.documentMode||9<document.documentMode)}function Eu(){Ns&&(Ns.detachEvent("onpropertychange",Xf),Ms=Ns=null)}function Xf(e){if(e.propertyName==="value"&&$a(Ms)){var t=[];Qf(t,Ms,e,sc(e)),Tf(z0,t)}}function F0(e,t,r){e==="focusin"?(Eu(),Ns=t,Ms=r,Ns.attachEvent("onpropertychange",Xf)):e==="focusout"&&Eu()}function M0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $a(Ms)}function B0(e,t){if(e==="click")return $a(t)}function V0(e,t){if(e==="input"||e==="change")return $a(t)}function q0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Gt=typeof Object.is=="function"?Object.is:q0;function Bs(e,t){if(Gt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Ml.call(t,s)||!Gt(e[s],t[s]))return!1}return!0}function Pu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Tu(e,t){var r=Pu(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Pu(r)}}function Yf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Yf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Zf(){for(var e=window,t=Qi();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Qi(e.document)}return t}function hc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function G0(e){var t=Zf(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Yf(r.ownerDocument.documentElement,r)){if(n!==null&&hc(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Tu(r,i);var l=Tu(r,n);s&&l&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var H0=dr&&"documentMode"in document&&11>=document.documentMode,Nn=null,ao=null,ks=null,lo=!1;function Ou(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;lo||Nn==null||Nn!==Qi(n)||(n=Nn,"selectionStart"in n&&hc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ks&&Bs(ks,n)||(ks=n,n=ra(ao,"onSelect"),0<n.length&&(t=new uc("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Nn)))}function bi(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var kn={animationend:bi("Animation","AnimationEnd"),animationiteration:bi("Animation","AnimationIteration"),animationstart:bi("Animation","AnimationStart"),transitionend:bi("Transition","TransitionEnd")},gl={},eh={};dr&&(eh=document.createElement("div").style,"AnimationEvent"in window||(delete kn.animationend.animation,delete kn.animationiteration.animation,delete kn.animationstart.animation),"TransitionEvent"in window||delete kn.transitionend.transition);function Ua(e){if(gl[e])return gl[e];if(!kn[e])return e;var t=kn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in eh)return gl[e]=t[r];return e}var th=Ua("animationend"),rh=Ua("animationiteration"),nh=Ua("animationstart"),sh=Ua("transitionend"),ih=new Map,Ru="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Br(e,t){ih.set(e,t),fn(t,[e])}for(var yl=0;yl<Ru.length;yl++){var xl=Ru[yl],W0=xl.toLowerCase(),K0=xl[0].toUpperCase()+xl.slice(1);Br(W0,"on"+K0)}Br(th,"onAnimationEnd");Br(rh,"onAnimationIteration");Br(nh,"onAnimationStart");Br("dblclick","onDoubleClick");Br("focusin","onFocus");Br("focusout","onBlur");Br(sh,"onTransitionEnd");Fn("onMouseEnter",["mouseout","mouseover"]);Fn("onMouseLeave",["mouseout","mouseover"]);Fn("onPointerEnter",["pointerout","pointerover"]);Fn("onPointerLeave",["pointerout","pointerover"]);fn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fn("onBeforeInput",["compositionend","keypress","textInput","paste"]);fn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Q0=new Set("cancel close invalid load scroll toggle".split(" ").concat(vs));function Au(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Wp(n,t,void 0,e),e.currentTarget=null}function ah(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var l=n.length-1;0<=l;l--){var o=n[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&s.isPropagationStopped())break e;Au(s,o,d),i=c}else for(l=0;l<n.length;l++){if(o=n[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&s.isPropagationStopped())break e;Au(s,o,d),i=c}}}if(Xi)throw e=ro,Xi=!1,ro=null,e}function be(e,t){var r=t[ho];r===void 0&&(r=t[ho]=new Set);var n=e+"__bubble";r.has(n)||(lh(t,e,2,!1),r.add(n))}function vl(e,t,r){var n=0;t&&(n|=4),lh(r,e,n,t)}var ji="_reactListening"+Math.random().toString(36).slice(2);function Vs(e){if(!e[ji]){e[ji]=!0,mf.forEach(function(r){r!=="selectionchange"&&(Q0.has(r)||vl(r,!1,e),vl(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ji]||(t[ji]=!0,vl("selectionchange",!1,t))}}function lh(e,t,r,n){switch(qf(t)){case 1:var s=c0;break;case 4:s=u0;break;default:s=oc}r=s.bind(null,t,r,e),s=void 0,!to||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function wl(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var o=n.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(l===4)for(l=n.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;l=l.return}for(;o!==null;){if(l=en(o),l===null)return;if(c=l.tag,c===5||c===6){n=i=l;continue e}o=o.parentNode}}n=n.return}Tf(function(){var d=i,u=sc(r),f=[];e:{var h=ih.get(e);if(h!==void 0){var w=uc,b=e;switch(e){case"keypress":if(Ii(r)===0)break e;case"keydown":case"keyup":w=k0;break;case"focusin":b="focus",w=hl;break;case"focusout":b="blur",w=hl;break;case"beforeblur":case"afterblur":w=hl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=bu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=h0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=E0;break;case th:case rh:case nh:w=g0;break;case sh:w=T0;break;case"scroll":w=d0;break;case"wheel":w=R0;break;case"copy":case"cut":case"paste":w=x0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=_u}var j=(t&4)!==0,k=!j&&e==="scroll",p=j?h!==null?h+"Capture":null:h;j=[];for(var m=d,g;m!==null;){g=m;var N=g.stateNode;if(g.tag===5&&N!==null&&(g=N,p!==null&&(N=Ds(m,p),N!=null&&j.push(qs(m,N,g)))),k)break;m=m.return}0<j.length&&(h=new w(h,b,null,r,u),f.push({event:h,listeners:j}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",h&&r!==Zl&&(b=r.relatedTarget||r.fromElement)&&(en(b)||b[fr]))break e;if((w||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,w?(b=r.relatedTarget||r.toElement,w=d,b=b?en(b):null,b!==null&&(k=hn(b),b!==k||b.tag!==5&&b.tag!==6)&&(b=null)):(w=null,b=d),w!==b)){if(j=bu,N="onMouseLeave",p="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(j=_u,N="onPointerLeave",p="onPointerEnter",m="pointer"),k=w==null?h:Sn(w),g=b==null?h:Sn(b),h=new j(N,m+"leave",w,r,u),h.target=k,h.relatedTarget=g,N=null,en(u)===d&&(j=new j(p,m+"enter",b,r,u),j.target=g,j.relatedTarget=k,N=j),k=N,w&&b)t:{for(j=w,p=b,m=0,g=j;g;g=pn(g))m++;for(g=0,N=p;N;N=pn(N))g++;for(;0<m-g;)j=pn(j),m--;for(;0<g-m;)p=pn(p),g--;for(;m--;){if(j===p||p!==null&&j===p.alternate)break t;j=pn(j),p=pn(p)}j=null}else j=null;w!==null&&Lu(f,h,w,j,!1),b!==null&&k!==null&&Lu(f,k,b,j,!0)}}e:{if(h=d?Sn(d):window,w=h.nodeName&&h.nodeName.toLowerCase(),w==="select"||w==="input"&&h.type==="file")var P=I0;else if(Su(h))if(Jf)P=V0;else{P=M0;var I=F0}else(w=h.nodeName)&&w.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(P=B0);if(P&&(P=P(e,d))){Qf(f,P,r,u);break e}I&&I(e,h,d),e==="focusout"&&(I=h._wrapperState)&&I.controlled&&h.type==="number"&&Kl(h,"number",h.value)}switch(I=d?Sn(d):window,e){case"focusin":(Su(I)||I.contentEditable==="true")&&(Nn=I,ao=d,ks=null);break;case"focusout":ks=ao=Nn=null;break;case"mousedown":lo=!0;break;case"contextmenu":case"mouseup":case"dragend":lo=!1,Ou(f,r,u);break;case"selectionchange":if(H0)break;case"keydown":case"keyup":Ou(f,r,u)}var _;if(fc)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else _n?Wf(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(Hf&&r.locale!=="ko"&&(_n||C!=="onCompositionStart"?C==="onCompositionEnd"&&_n&&(_=Gf()):(Cr=u,cc="value"in Cr?Cr.value:Cr.textContent,_n=!0)),I=ra(d,C),0<I.length&&(C=new ju(C,e,null,r,u),f.push({event:C,listeners:I}),_?C.data=_:(_=Kf(r),_!==null&&(C.data=_)))),(_=L0?$0(e,r):U0(e,r))&&(d=ra(d,"onBeforeInput"),0<d.length&&(u=new ju("onBeforeInput","beforeinput",null,r,u),f.push({event:u,listeners:d}),u.data=_))}ah(f,t)})}function qs(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ra(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ds(e,r),i!=null&&n.unshift(qs(e,i,s)),i=Ds(e,t),i!=null&&n.push(qs(e,i,s))),e=e.return}return n}function pn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Lu(e,t,r,n,s){for(var i=t._reactName,l=[];r!==null&&r!==n;){var o=r,c=o.alternate,d=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&d!==null&&(o=d,s?(c=Ds(r,i),c!=null&&l.unshift(qs(r,c,o))):s||(c=Ds(r,i),c!=null&&l.push(qs(r,c,o)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var J0=/\r\n?/g,X0=/\u0000|\uFFFD/g;function $u(e){return(typeof e=="string"?e:""+e).replace(J0,`
`).replace(X0,"")}function _i(e,t,r){if(t=$u(t),$u(e)!==t&&r)throw Error(D(425))}function na(){}var oo=null,co=null;function uo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var fo=typeof setTimeout=="function"?setTimeout:void 0,Y0=typeof clearTimeout=="function"?clearTimeout:void 0,Uu=typeof Promise=="function"?Promise:void 0,Z0=typeof queueMicrotask=="function"?queueMicrotask:typeof Uu<"u"?function(e){return Uu.resolve(null).then(e).catch(eg)}:fo;function eg(e){setTimeout(function(){throw e})}function bl(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Fs(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Fs(t)}function Ar(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Du(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var es=Math.random().toString(36).slice(2),Xt="__reactFiber$"+es,Gs="__reactProps$"+es,fr="__reactContainer$"+es,ho="__reactEvents$"+es,tg="__reactListeners$"+es,rg="__reactHandles$"+es;function en(e){var t=e[Xt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[fr]||r[Xt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Du(e);e!==null;){if(r=e[Xt])return r;e=Du(e)}return t}e=r,r=e.parentNode}return null}function ii(e){return e=e[Xt]||e[fr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Sn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function Da(e){return e[Gs]||null}var mo=[],Cn=-1;function Vr(e){return{current:e}}function je(e){0>Cn||(e.current=mo[Cn],mo[Cn]=null,Cn--)}function ve(e,t){Cn++,mo[Cn]=e.current,e.current=t}var Mr={},et=Vr(Mr),ht=Vr(!1),ln=Mr;function Mn(e,t){var r=e.type.contextTypes;if(!r)return Mr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function mt(e){return e=e.childContextTypes,e!=null}function sa(){je(ht),je(et)}function zu(e,t,r){if(et.current!==Mr)throw Error(D(168));ve(et,t),ve(ht,r)}function oh(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(D(108,Fp(e)||"Unknown",s));return Ce({},r,n)}function ia(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Mr,ln=et.current,ve(et,e),ve(ht,ht.current),!0}function Iu(e,t,r){var n=e.stateNode;if(!n)throw Error(D(169));r?(e=oh(e,t,ln),n.__reactInternalMemoizedMergedChildContext=e,je(ht),je(et),ve(et,e)):je(ht),ve(ht,r)}var ir=null,za=!1,jl=!1;function ch(e){ir===null?ir=[e]:ir.push(e)}function ng(e){za=!0,ch(e)}function qr(){if(!jl&&ir!==null){jl=!0;var e=0,t=me;try{var r=ir;for(me=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}ir=null,za=!1}catch(s){throw ir!==null&&(ir=ir.slice(e+1)),Lf(ic,qr),s}finally{me=t,jl=!1}}return null}var En=[],Pn=0,aa=null,la=0,Ct=[],Et=0,on=null,lr=1,or="";function Jr(e,t){En[Pn++]=la,En[Pn++]=aa,aa=e,la=t}function uh(e,t,r){Ct[Et++]=lr,Ct[Et++]=or,Ct[Et++]=on,on=e;var n=lr;e=or;var s=32-Vt(n)-1;n&=~(1<<s),r+=1;var i=32-Vt(t)+s;if(30<i){var l=s-s%5;i=(n&(1<<l)-1).toString(32),n>>=l,s-=l,lr=1<<32-Vt(t)+s|r<<s|n,or=i+e}else lr=1<<i|r<<s|n,or=e}function mc(e){e.return!==null&&(Jr(e,1),uh(e,1,0))}function pc(e){for(;e===aa;)aa=En[--Pn],En[Pn]=null,la=En[--Pn],En[Pn]=null;for(;e===on;)on=Ct[--Et],Ct[Et]=null,or=Ct[--Et],Ct[Et]=null,lr=Ct[--Et],Ct[Et]=null}var bt=null,wt=null,Ne=!1,It=null;function dh(e,t){var r=Pt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Fu(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,bt=e,wt=Ar(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,bt=e,wt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=on!==null?{id:lr,overflow:or}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Pt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,bt=e,wt=null,!0):!1;default:return!1}}function po(e){return(e.mode&1)!==0&&(e.flags&128)===0}function go(e){if(Ne){var t=wt;if(t){var r=t;if(!Fu(e,t)){if(po(e))throw Error(D(418));t=Ar(r.nextSibling);var n=bt;t&&Fu(e,t)?dh(n,r):(e.flags=e.flags&-4097|2,Ne=!1,bt=e)}}else{if(po(e))throw Error(D(418));e.flags=e.flags&-4097|2,Ne=!1,bt=e}}}function Mu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;bt=e}function Ni(e){if(e!==bt)return!1;if(!Ne)return Mu(e),Ne=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!uo(e.type,e.memoizedProps)),t&&(t=wt)){if(po(e))throw fh(),Error(D(418));for(;t;)dh(e,t),t=Ar(t.nextSibling)}if(Mu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){wt=Ar(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}wt=null}}else wt=bt?Ar(e.stateNode.nextSibling):null;return!0}function fh(){for(var e=wt;e;)e=Ar(e.nextSibling)}function Bn(){wt=bt=null,Ne=!1}function gc(e){It===null?It=[e]:It.push(e)}var sg=gr.ReactCurrentBatchConfig;function us(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(D(309));var n=r.stateNode}if(!n)throw Error(D(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=s.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(D(284));if(!r._owner)throw Error(D(290,e))}return e}function ki(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Bu(e){var t=e._init;return t(e._payload)}function hh(e){function t(p,m){if(e){var g=p.deletions;g===null?(p.deletions=[m],p.flags|=16):g.push(m)}}function r(p,m){if(!e)return null;for(;m!==null;)t(p,m),m=m.sibling;return null}function n(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function s(p,m){return p=Dr(p,m),p.index=0,p.sibling=null,p}function i(p,m,g){return p.index=g,e?(g=p.alternate,g!==null?(g=g.index,g<m?(p.flags|=2,m):g):(p.flags|=2,m)):(p.flags|=1048576,m)}function l(p){return e&&p.alternate===null&&(p.flags|=2),p}function o(p,m,g,N){return m===null||m.tag!==6?(m=Pl(g,p.mode,N),m.return=p,m):(m=s(m,g),m.return=p,m)}function c(p,m,g,N){var P=g.type;return P===jn?u(p,m,g.props.children,N,g.key):m!==null&&(m.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===wr&&Bu(P)===m.type)?(N=s(m,g.props),N.ref=us(p,m,g),N.return=p,N):(N=Hi(g.type,g.key,g.props,null,p.mode,N),N.ref=us(p,m,g),N.return=p,N)}function d(p,m,g,N){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=Tl(g,p.mode,N),m.return=p,m):(m=s(m,g.children||[]),m.return=p,m)}function u(p,m,g,N,P){return m===null||m.tag!==7?(m=an(g,p.mode,N,P),m.return=p,m):(m=s(m,g),m.return=p,m)}function f(p,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Pl(""+m,p.mode,g),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case mi:return g=Hi(m.type,m.key,m.props,null,p.mode,g),g.ref=us(p,null,m),g.return=p,g;case bn:return m=Tl(m,p.mode,g),m.return=p,m;case wr:var N=m._init;return f(p,N(m._payload),g)}if(ys(m)||is(m))return m=an(m,p.mode,g,null),m.return=p,m;ki(p,m)}return null}function h(p,m,g,N){var P=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return P!==null?null:o(p,m,""+g,N);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case mi:return g.key===P?c(p,m,g,N):null;case bn:return g.key===P?d(p,m,g,N):null;case wr:return P=g._init,h(p,m,P(g._payload),N)}if(ys(g)||is(g))return P!==null?null:u(p,m,g,N,null);ki(p,g)}return null}function w(p,m,g,N,P){if(typeof N=="string"&&N!==""||typeof N=="number")return p=p.get(g)||null,o(m,p,""+N,P);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case mi:return p=p.get(N.key===null?g:N.key)||null,c(m,p,N,P);case bn:return p=p.get(N.key===null?g:N.key)||null,d(m,p,N,P);case wr:var I=N._init;return w(p,m,g,I(N._payload),P)}if(ys(N)||is(N))return p=p.get(g)||null,u(m,p,N,P,null);ki(m,N)}return null}function b(p,m,g,N){for(var P=null,I=null,_=m,C=m=0,L=null;_!==null&&C<g.length;C++){_.index>C?(L=_,_=null):L=_.sibling;var O=h(p,_,g[C],N);if(O===null){_===null&&(_=L);break}e&&_&&O.alternate===null&&t(p,_),m=i(O,m,C),I===null?P=O:I.sibling=O,I=O,_=L}if(C===g.length)return r(p,_),Ne&&Jr(p,C),P;if(_===null){for(;C<g.length;C++)_=f(p,g[C],N),_!==null&&(m=i(_,m,C),I===null?P=_:I.sibling=_,I=_);return Ne&&Jr(p,C),P}for(_=n(p,_);C<g.length;C++)L=w(_,p,C,g[C],N),L!==null&&(e&&L.alternate!==null&&_.delete(L.key===null?C:L.key),m=i(L,m,C),I===null?P=L:I.sibling=L,I=L);return e&&_.forEach(function(H){return t(p,H)}),Ne&&Jr(p,C),P}function j(p,m,g,N){var P=is(g);if(typeof P!="function")throw Error(D(150));if(g=P.call(g),g==null)throw Error(D(151));for(var I=P=null,_=m,C=m=0,L=null,O=g.next();_!==null&&!O.done;C++,O=g.next()){_.index>C?(L=_,_=null):L=_.sibling;var H=h(p,_,O.value,N);if(H===null){_===null&&(_=L);break}e&&_&&H.alternate===null&&t(p,_),m=i(H,m,C),I===null?P=H:I.sibling=H,I=H,_=L}if(O.done)return r(p,_),Ne&&Jr(p,C),P;if(_===null){for(;!O.done;C++,O=g.next())O=f(p,O.value,N),O!==null&&(m=i(O,m,C),I===null?P=O:I.sibling=O,I=O);return Ne&&Jr(p,C),P}for(_=n(p,_);!O.done;C++,O=g.next())O=w(_,p,C,O.value,N),O!==null&&(e&&O.alternate!==null&&_.delete(O.key===null?C:O.key),m=i(O,m,C),I===null?P=O:I.sibling=O,I=O);return e&&_.forEach(function(W){return t(p,W)}),Ne&&Jr(p,C),P}function k(p,m,g,N){if(typeof g=="object"&&g!==null&&g.type===jn&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case mi:e:{for(var P=g.key,I=m;I!==null;){if(I.key===P){if(P=g.type,P===jn){if(I.tag===7){r(p,I.sibling),m=s(I,g.props.children),m.return=p,p=m;break e}}else if(I.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===wr&&Bu(P)===I.type){r(p,I.sibling),m=s(I,g.props),m.ref=us(p,I,g),m.return=p,p=m;break e}r(p,I);break}else t(p,I);I=I.sibling}g.type===jn?(m=an(g.props.children,p.mode,N,g.key),m.return=p,p=m):(N=Hi(g.type,g.key,g.props,null,p.mode,N),N.ref=us(p,m,g),N.return=p,p=N)}return l(p);case bn:e:{for(I=g.key;m!==null;){if(m.key===I)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){r(p,m.sibling),m=s(m,g.children||[]),m.return=p,p=m;break e}else{r(p,m);break}else t(p,m);m=m.sibling}m=Tl(g,p.mode,N),m.return=p,p=m}return l(p);case wr:return I=g._init,k(p,m,I(g._payload),N)}if(ys(g))return b(p,m,g,N);if(is(g))return j(p,m,g,N);ki(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(r(p,m.sibling),m=s(m,g),m.return=p,p=m):(r(p,m),m=Pl(g,p.mode,N),m.return=p,p=m),l(p)):r(p,m)}return k}var Vn=hh(!0),mh=hh(!1),oa=Vr(null),ca=null,Tn=null,yc=null;function xc(){yc=Tn=ca=null}function vc(e){var t=oa.current;je(oa),e._currentValue=t}function yo(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Dn(e,t){ca=e,yc=Tn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ft=!0),e.firstContext=null)}function At(e){var t=e._currentValue;if(yc!==e)if(e={context:e,memoizedValue:t,next:null},Tn===null){if(ca===null)throw Error(D(308));Tn=e,ca.dependencies={lanes:0,firstContext:e}}else Tn=Tn.next=e;return t}var tn=null;function wc(e){tn===null?tn=[e]:tn.push(e)}function ph(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,wc(t)):(r.next=s.next,s.next=r),t.interleaved=r,hr(e,n)}function hr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var br=!1;function bc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function cr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Lr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,fe&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,hr(e,r)}return s=n.interleaved,s===null?(t.next=t,wc(n)):(t.next=s.next,s.next=t),n.interleaved=t,hr(e,r)}function Fi(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,ac(e,r)}}function Vu(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ua(e,t,r,n){var s=e.updateQueue;br=!1;var i=s.firstBaseUpdate,l=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var u=e.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;l=0,u=d=c=null,o=i;do{var h=o.lane,w=o.eventTime;if((n&h)===h){u!==null&&(u=u.next={eventTime:w,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var b=e,j=o;switch(h=t,w=r,j.tag){case 1:if(b=j.payload,typeof b=="function"){f=b.call(w,f,h);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=j.payload,h=typeof b=="function"?b.call(w,f,h):b,h==null)break e;f=Ce({},f,h);break e;case 2:br=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[o]:h.push(o))}else w={eventTime:w,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=w,c=f):u=u.next=w,l|=h;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;h=o,o=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=f),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=u,t=s.shared.interleaved,t!==null){s=t;do l|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);un|=l,e.lanes=l,e.memoizedState=f}}function qu(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(D(191,s));s.call(n)}}}var ai={},er=Vr(ai),Hs=Vr(ai),Ws=Vr(ai);function rn(e){if(e===ai)throw Error(D(174));return e}function jc(e,t){switch(ve(Ws,t),ve(Hs,e),ve(er,ai),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Jl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Jl(t,e)}je(er),ve(er,t)}function qn(){je(er),je(Hs),je(Ws)}function yh(e){rn(Ws.current);var t=rn(er.current),r=Jl(t,e.type);t!==r&&(ve(Hs,e),ve(er,r))}function _c(e){Hs.current===e&&(je(er),je(Hs))}var ke=Vr(0);function da(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _l=[];function Nc(){for(var e=0;e<_l.length;e++)_l[e]._workInProgressVersionPrimary=null;_l.length=0}var Mi=gr.ReactCurrentDispatcher,Nl=gr.ReactCurrentBatchConfig,cn=0,Se=null,De=null,Be=null,fa=!1,Ss=!1,Ks=0,ig=0;function Xe(){throw Error(D(321))}function kc(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Gt(e[r],t[r]))return!1;return!0}function Sc(e,t,r,n,s,i){if(cn=i,Se=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Mi.current=e===null||e.memoizedState===null?cg:ug,e=r(n,s),Ss){i=0;do{if(Ss=!1,Ks=0,25<=i)throw Error(D(301));i+=1,Be=De=null,t.updateQueue=null,Mi.current=dg,e=r(n,s)}while(Ss)}if(Mi.current=ha,t=De!==null&&De.next!==null,cn=0,Be=De=Se=null,fa=!1,t)throw Error(D(300));return e}function Cc(){var e=Ks!==0;return Ks=0,e}function Qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?Se.memoizedState=Be=e:Be=Be.next=e,Be}function Lt(){if(De===null){var e=Se.alternate;e=e!==null?e.memoizedState:null}else e=De.next;var t=Be===null?Se.memoizedState:Be.next;if(t!==null)Be=t,De=e;else{if(e===null)throw Error(D(310));De=e,e={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},Be===null?Se.memoizedState=Be=e:Be=Be.next=e}return Be}function Qs(e,t){return typeof t=="function"?t(e):t}function kl(e){var t=Lt(),r=t.queue;if(r===null)throw Error(D(311));r.lastRenderedReducer=e;var n=De,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var l=s.next;s.next=i.next,i.next=l}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((cn&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var f={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=f,l=n):c=c.next=f,Se.lanes|=u,un|=u}d=d.next}while(d!==null&&d!==i);c===null?l=n:c.next=o,Gt(n,t.memoizedState)||(ft=!0),t.memoizedState=n,t.baseState=l,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,Se.lanes|=i,un|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Sl(e){var t=Lt(),r=t.queue;if(r===null)throw Error(D(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var l=s=s.next;do i=e(i,l.action),l=l.next;while(l!==s);Gt(i,t.memoizedState)||(ft=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function xh(){}function vh(e,t){var r=Se,n=Lt(),s=t(),i=!Gt(n.memoizedState,s);if(i&&(n.memoizedState=s,ft=!0),n=n.queue,Ec(jh.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Be!==null&&Be.memoizedState.tag&1){if(r.flags|=2048,Js(9,bh.bind(null,r,n,s,t),void 0,null),qe===null)throw Error(D(349));cn&30||wh(r,t,s)}return s}function wh(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Se.updateQueue,t===null?(t={lastEffect:null,stores:null},Se.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function bh(e,t,r,n){t.value=r,t.getSnapshot=n,_h(t)&&Nh(e)}function jh(e,t,r){return r(function(){_h(t)&&Nh(e)})}function _h(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Gt(e,r)}catch{return!0}}function Nh(e){var t=hr(e,1);t!==null&&qt(t,e,1,-1)}function Gu(e){var t=Qt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:e},t.queue=e,e=e.dispatch=og.bind(null,Se,e),[t.memoizedState,e]}function Js(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Se.updateQueue,t===null?(t={lastEffect:null,stores:null},Se.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function kh(){return Lt().memoizedState}function Bi(e,t,r,n){var s=Qt();Se.flags|=e,s.memoizedState=Js(1|t,r,void 0,n===void 0?null:n)}function Ia(e,t,r,n){var s=Lt();n=n===void 0?null:n;var i=void 0;if(De!==null){var l=De.memoizedState;if(i=l.destroy,n!==null&&kc(n,l.deps)){s.memoizedState=Js(t,r,i,n);return}}Se.flags|=e,s.memoizedState=Js(1|t,r,i,n)}function Hu(e,t){return Bi(8390656,8,e,t)}function Ec(e,t){return Ia(2048,8,e,t)}function Sh(e,t){return Ia(4,2,e,t)}function Ch(e,t){return Ia(4,4,e,t)}function Eh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ph(e,t,r){return r=r!=null?r.concat([e]):null,Ia(4,4,Eh.bind(null,t,e),r)}function Pc(){}function Th(e,t){var r=Lt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&kc(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Oh(e,t){var r=Lt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&kc(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Rh(e,t,r){return cn&21?(Gt(r,t)||(r=Df(),Se.lanes|=r,un|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ft=!0),e.memoizedState=r)}function ag(e,t){var r=me;me=r!==0&&4>r?r:4,e(!0);var n=Nl.transition;Nl.transition={};try{e(!1),t()}finally{me=r,Nl.transition=n}}function Ah(){return Lt().memoizedState}function lg(e,t,r){var n=Ur(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Lh(e))$h(t,r);else if(r=ph(e,t,r,n),r!==null){var s=it();qt(r,e,n,s),Uh(r,t,n)}}function og(e,t,r){var n=Ur(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Lh(e))$h(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,r);if(s.hasEagerState=!0,s.eagerState=o,Gt(o,l)){var c=t.interleaved;c===null?(s.next=s,wc(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=ph(e,t,s,n),r!==null&&(s=it(),qt(r,e,n,s),Uh(r,t,n))}}function Lh(e){var t=e.alternate;return e===Se||t!==null&&t===Se}function $h(e,t){Ss=fa=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Uh(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,ac(e,r)}}var ha={readContext:At,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useInsertionEffect:Xe,useLayoutEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useMutableSource:Xe,useSyncExternalStore:Xe,useId:Xe,unstable_isNewReconciler:!1},cg={readContext:At,useCallback:function(e,t){return Qt().memoizedState=[e,t===void 0?null:t],e},useContext:At,useEffect:Hu,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Bi(4194308,4,Eh.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Bi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bi(4,2,e,t)},useMemo:function(e,t){var r=Qt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Qt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=lg.bind(null,Se,e),[n.memoizedState,e]},useRef:function(e){var t=Qt();return e={current:e},t.memoizedState=e},useState:Gu,useDebugValue:Pc,useDeferredValue:function(e){return Qt().memoizedState=e},useTransition:function(){var e=Gu(!1),t=e[0];return e=ag.bind(null,e[1]),Qt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Se,s=Qt();if(Ne){if(r===void 0)throw Error(D(407));r=r()}else{if(r=t(),qe===null)throw Error(D(349));cn&30||wh(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Hu(jh.bind(null,n,i,e),[e]),n.flags|=2048,Js(9,bh.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Qt(),t=qe.identifierPrefix;if(Ne){var r=or,n=lr;r=(n&~(1<<32-Vt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Ks++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=ig++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ug={readContext:At,useCallback:Th,useContext:At,useEffect:Ec,useImperativeHandle:Ph,useInsertionEffect:Sh,useLayoutEffect:Ch,useMemo:Oh,useReducer:kl,useRef:kh,useState:function(){return kl(Qs)},useDebugValue:Pc,useDeferredValue:function(e){var t=Lt();return Rh(t,De.memoizedState,e)},useTransition:function(){var e=kl(Qs)[0],t=Lt().memoizedState;return[e,t]},useMutableSource:xh,useSyncExternalStore:vh,useId:Ah,unstable_isNewReconciler:!1},dg={readContext:At,useCallback:Th,useContext:At,useEffect:Ec,useImperativeHandle:Ph,useInsertionEffect:Sh,useLayoutEffect:Ch,useMemo:Oh,useReducer:Sl,useRef:kh,useState:function(){return Sl(Qs)},useDebugValue:Pc,useDeferredValue:function(e){var t=Lt();return De===null?t.memoizedState=e:Rh(t,De.memoizedState,e)},useTransition:function(){var e=Sl(Qs)[0],t=Lt().memoizedState;return[e,t]},useMutableSource:xh,useSyncExternalStore:vh,useId:Ah,unstable_isNewReconciler:!1};function Ut(e,t){if(e&&e.defaultProps){t=Ce({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function xo(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ce({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Fa={isMounted:function(e){return(e=e._reactInternals)?hn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=it(),s=Ur(e),i=cr(n,s);i.payload=t,r!=null&&(i.callback=r),t=Lr(e,i,s),t!==null&&(qt(t,e,s,n),Fi(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=it(),s=Ur(e),i=cr(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Lr(e,i,s),t!==null&&(qt(t,e,s,n),Fi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=it(),n=Ur(e),s=cr(r,n);s.tag=2,t!=null&&(s.callback=t),t=Lr(e,s,n),t!==null&&(qt(t,e,n,r),Fi(t,e,n))}};function Wu(e,t,r,n,s,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,l):t.prototype&&t.prototype.isPureReactComponent?!Bs(r,n)||!Bs(s,i):!0}function Dh(e,t,r){var n=!1,s=Mr,i=t.contextType;return typeof i=="object"&&i!==null?i=At(i):(s=mt(t)?ln:et.current,n=t.contextTypes,i=(n=n!=null)?Mn(e,s):Mr),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Fa,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Ku(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Fa.enqueueReplaceState(t,t.state,null)}function vo(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},bc(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=At(i):(i=mt(t)?ln:et.current,s.context=Mn(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(xo(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Fa.enqueueReplaceState(s,s.state,null),ua(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Gn(e,t){try{var r="",n=t;do r+=Ip(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Cl(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function wo(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var fg=typeof WeakMap=="function"?WeakMap:Map;function zh(e,t,r){r=cr(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){pa||(pa=!0,To=n),wo(e,t)},r}function Ih(e,t,r){r=cr(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){wo(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){wo(e,t),typeof n!="function"&&($r===null?$r=new Set([this]):$r.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function Qu(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new fg;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=Sg.bind(null,e,t,r),t.then(e,e))}function Ju(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Xu(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=cr(-1,1),t.tag=2,Lr(r,t,1))),r.lanes|=1),e)}var hg=gr.ReactCurrentOwner,ft=!1;function nt(e,t,r,n){t.child=e===null?mh(t,null,r,n):Vn(t,e.child,r,n)}function Yu(e,t,r,n,s){r=r.render;var i=t.ref;return Dn(t,s),n=Sc(e,t,r,n,i,s),r=Cc(),e!==null&&!ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,mr(e,t,s)):(Ne&&r&&mc(t),t.flags|=1,nt(e,t,n,s),t.child)}function Zu(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!Dc(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Fh(e,t,i,n,s)):(e=Hi(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:Bs,r(l,n)&&e.ref===t.ref)return mr(e,t,s)}return t.flags|=1,e=Dr(i,n),e.ref=t.ref,e.return=t,t.child=e}function Fh(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Bs(i,n)&&e.ref===t.ref)if(ft=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(ft=!0);else return t.lanes=e.lanes,mr(e,t,s)}return bo(e,t,r,n,s)}function Mh(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(Rn,vt),vt|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ve(Rn,vt),vt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,ve(Rn,vt),vt|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,ve(Rn,vt),vt|=n;return nt(e,t,s,r),t.child}function Bh(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function bo(e,t,r,n,s){var i=mt(r)?ln:et.current;return i=Mn(t,i),Dn(t,s),r=Sc(e,t,r,n,i,s),n=Cc(),e!==null&&!ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,mr(e,t,s)):(Ne&&n&&mc(t),t.flags|=1,nt(e,t,r,s),t.child)}function ed(e,t,r,n,s){if(mt(r)){var i=!0;ia(t)}else i=!1;if(Dn(t,s),t.stateNode===null)Vi(e,t),Dh(t,r,n),vo(t,r,n,s),n=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,d=r.contextType;typeof d=="object"&&d!==null?d=At(d):(d=mt(r)?ln:et.current,d=Mn(t,d));var u=r.getDerivedStateFromProps,f=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";f||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==n||c!==d)&&Ku(t,l,n,d),br=!1;var h=t.memoizedState;l.state=h,ua(t,n,l,s),c=t.memoizedState,o!==n||h!==c||ht.current||br?(typeof u=="function"&&(xo(t,r,u,n),c=t.memoizedState),(o=br||Wu(t,r,o,n,h,c,d))?(f||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),l.props=n,l.state=c,l.context=d,n=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{l=t.stateNode,gh(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:Ut(t.type,o),l.props=d,f=t.pendingProps,h=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=At(c):(c=mt(r)?ln:et.current,c=Mn(t,c));var w=r.getDerivedStateFromProps;(u=typeof w=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==f||h!==c)&&Ku(t,l,n,c),br=!1,h=t.memoizedState,l.state=h,ua(t,n,l,s);var b=t.memoizedState;o!==f||h!==b||ht.current||br?(typeof w=="function"&&(xo(t,r,w,n),b=t.memoizedState),(d=br||Wu(t,r,d,n,h,b,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,b,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,b,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=b),l.props=n,l.state=b,l.context=c,n=d):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return jo(e,t,r,n,i,s)}function jo(e,t,r,n,s,i){Bh(e,t);var l=(t.flags&128)!==0;if(!n&&!l)return s&&Iu(t,r,!1),mr(e,t,i);n=t.stateNode,hg.current=t;var o=l&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&l?(t.child=Vn(t,e.child,null,i),t.child=Vn(t,null,o,i)):nt(e,t,o,i),t.memoizedState=n.state,s&&Iu(t,r,!0),t.child}function Vh(e){var t=e.stateNode;t.pendingContext?zu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&zu(e,t.context,!1),jc(e,t.containerInfo)}function td(e,t,r,n,s){return Bn(),gc(s),t.flags|=256,nt(e,t,r,n),t.child}var _o={dehydrated:null,treeContext:null,retryLane:0};function No(e){return{baseLanes:e,cachePool:null,transitions:null}}function qh(e,t,r){var n=t.pendingProps,s=ke.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(s&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ve(ke,s&1),e===null)return go(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=n.children,e=n.fallback,i?(n=t.mode,i=t.child,l={mode:"hidden",children:l},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Va(l,n,0,null),e=an(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=No(r),t.memoizedState=_o,e):Tc(t,l));if(s=e.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return mg(e,t,l,n,o,s,r);if(i){i=n.fallback,l=t.mode,s=e.child,o=s.sibling;var c={mode:"hidden",children:n.children};return!(l&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Dr(s,c),n.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=Dr(o,i):(i=an(i,l,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,l=e.child.memoizedState,l=l===null?No(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~r,t.memoizedState=_o,n}return i=e.child,e=i.sibling,n=Dr(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Tc(e,t){return t=Va({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Si(e,t,r,n){return n!==null&&gc(n),Vn(t,e.child,null,r),e=Tc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function mg(e,t,r,n,s,i,l){if(r)return t.flags&256?(t.flags&=-257,n=Cl(Error(D(422))),Si(e,t,l,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=Va({mode:"visible",children:n.children},s,0,null),i=an(i,s,l,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Vn(t,e.child,null,l),t.child.memoizedState=No(l),t.memoizedState=_o,i);if(!(t.mode&1))return Si(e,t,l,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(D(419)),n=Cl(i,n,void 0),Si(e,t,l,n)}if(o=(l&e.childLanes)!==0,ft||o){if(n=qe,n!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|l)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,hr(e,s),qt(n,e,s,-1))}return Uc(),n=Cl(Error(D(421))),Si(e,t,l,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Cg.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,wt=Ar(s.nextSibling),bt=t,Ne=!0,It=null,e!==null&&(Ct[Et++]=lr,Ct[Et++]=or,Ct[Et++]=on,lr=e.id,or=e.overflow,on=t),t=Tc(t,n.children),t.flags|=4096,t)}function rd(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),yo(e.return,t,r)}function El(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function Gh(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(nt(e,t,n.children,r),n=ke.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&rd(e,r,t);else if(e.tag===19)rd(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ve(ke,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&da(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),El(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&da(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}El(t,!0,r,null,i);break;case"together":El(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function mr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),un|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,r=Dr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Dr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function pg(e,t,r){switch(t.tag){case 3:Vh(t),Bn();break;case 5:yh(t);break;case 1:mt(t.type)&&ia(t);break;case 4:jc(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;ve(oa,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ve(ke,ke.current&1),t.flags|=128,null):r&t.child.childLanes?qh(e,t,r):(ve(ke,ke.current&1),e=mr(e,t,r),e!==null?e.sibling:null);ve(ke,ke.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Gh(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ve(ke,ke.current),n)break;return null;case 22:case 23:return t.lanes=0,Mh(e,t,r)}return mr(e,t,r)}var Hh,ko,Wh,Kh;Hh=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};ko=function(){};Wh=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,rn(er.current);var i=null;switch(r){case"input":s=Hl(e,s),n=Hl(e,n),i=[];break;case"select":s=Ce({},s,{value:void 0}),n=Ce({},n,{value:void 0}),i=[];break;case"textarea":s=Ql(e,s),n=Ql(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=na)}Xl(r,n);var l;r=null;for(d in s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var o=s[d];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&($s.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(o=s!=null?s[d]:void 0,n.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&($s.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&be("scroll",e),i||o===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Kh=function(e,t,r,n){r!==n&&(t.flags|=4)};function ds(e,t){if(!Ne)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ye(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function gg(e,t,r){var n=t.pendingProps;switch(pc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(t),null;case 1:return mt(t.type)&&sa(),Ye(t),null;case 3:return n=t.stateNode,qn(),je(ht),je(et),Nc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ni(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,It!==null&&(Ao(It),It=null))),ko(e,t),Ye(t),null;case 5:_c(t);var s=rn(Ws.current);if(r=t.type,e!==null&&t.stateNode!=null)Wh(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(D(166));return Ye(t),null}if(e=rn(er.current),Ni(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Xt]=t,n[Gs]=i,e=(t.mode&1)!==0,r){case"dialog":be("cancel",n),be("close",n);break;case"iframe":case"object":case"embed":be("load",n);break;case"video":case"audio":for(s=0;s<vs.length;s++)be(vs[s],n);break;case"source":be("error",n);break;case"img":case"image":case"link":be("error",n),be("load",n);break;case"details":be("toggle",n);break;case"input":du(n,i),be("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},be("invalid",n);break;case"textarea":hu(n,i),be("invalid",n)}Xl(r,i),s=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&_i(n.textContent,o,e),s=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&_i(n.textContent,o,e),s=["children",""+o]):$s.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&be("scroll",n)}switch(r){case"input":pi(n),fu(n,i,!0);break;case"textarea":pi(n),mu(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=na)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=jf(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),r==="select"&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[Xt]=t,e[Gs]=n,Hh(e,t,!1,!1),t.stateNode=e;e:{switch(l=Yl(r,n),r){case"dialog":be("cancel",e),be("close",e),s=n;break;case"iframe":case"object":case"embed":be("load",e),s=n;break;case"video":case"audio":for(s=0;s<vs.length;s++)be(vs[s],e);s=n;break;case"source":be("error",e),s=n;break;case"img":case"image":case"link":be("error",e),be("load",e),s=n;break;case"details":be("toggle",e),s=n;break;case"input":du(e,n),s=Hl(e,n),be("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Ce({},n,{value:void 0}),be("invalid",e);break;case"textarea":hu(e,n),s=Ql(e,n),be("invalid",e);break;default:s=n}Xl(r,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?kf(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&_f(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Us(e,c):typeof c=="number"&&Us(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&($s.hasOwnProperty(i)?c!=null&&i==="onScroll"&&be("scroll",e):c!=null&&ec(e,i,c,l))}switch(r){case"input":pi(e),fu(e,n,!1);break;case"textarea":pi(e),mu(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Fr(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?An(e,!!n.multiple,i,!1):n.defaultValue!=null&&An(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=na)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ye(t),null;case 6:if(e&&t.stateNode!=null)Kh(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(D(166));if(r=rn(Ws.current),rn(er.current),Ni(t)){if(n=t.stateNode,r=t.memoizedProps,n[Xt]=t,(i=n.nodeValue!==r)&&(e=bt,e!==null))switch(e.tag){case 3:_i(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&_i(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Xt]=t,t.stateNode=n}return Ye(t),null;case 13:if(je(ke),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ne&&wt!==null&&t.mode&1&&!(t.flags&128))fh(),Bn(),t.flags|=98560,i=!1;else if(i=Ni(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(D(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(D(317));i[Xt]=t}else Bn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ye(t),i=!1}else It!==null&&(Ao(It),It=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ke.current&1?ze===0&&(ze=3):Uc())),t.updateQueue!==null&&(t.flags|=4),Ye(t),null);case 4:return qn(),ko(e,t),e===null&&Vs(t.stateNode.containerInfo),Ye(t),null;case 10:return vc(t.type._context),Ye(t),null;case 17:return mt(t.type)&&sa(),Ye(t),null;case 19:if(je(ke),i=t.memoizedState,i===null)return Ye(t),null;if(n=(t.flags&128)!==0,l=i.rendering,l===null)if(n)ds(i,!1);else{if(ze!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=da(e),l!==null){for(t.flags|=128,ds(i,!1),n=l.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ve(ke,ke.current&1|2),t.child}e=e.sibling}i.tail!==null&&Oe()>Hn&&(t.flags|=128,n=!0,ds(i,!1),t.lanes=4194304)}else{if(!n)if(e=da(l),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ds(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Ne)return Ye(t),null}else 2*Oe()-i.renderingStartTime>Hn&&r!==1073741824&&(t.flags|=128,n=!0,ds(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(r=i.last,r!==null?r.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Oe(),t.sibling=null,r=ke.current,ve(ke,n?r&1|2:r&1),t):(Ye(t),null);case 22:case 23:return $c(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?vt&1073741824&&(Ye(t),t.subtreeFlags&6&&(t.flags|=8192)):Ye(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function yg(e,t){switch(pc(t),t.tag){case 1:return mt(t.type)&&sa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return qn(),je(ht),je(et),Nc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return _c(t),null;case 13:if(je(ke),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));Bn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return je(ke),null;case 4:return qn(),null;case 10:return vc(t.type._context),null;case 22:case 23:return $c(),null;case 24:return null;default:return null}}var Ci=!1,Ze=!1,xg=typeof WeakSet=="function"?WeakSet:Set,Q=null;function On(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Pe(e,t,n)}else r.current=null}function So(e,t,r){try{r()}catch(n){Pe(e,t,n)}}var nd=!1;function vg(e,t){if(oo=ea,e=Zf(),hc(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,o=-1,c=-1,d=0,u=0,f=e,h=null;t:for(;;){for(var w;f!==r||s!==0&&f.nodeType!==3||(o=l+s),f!==i||n!==0&&f.nodeType!==3||(c=l+n),f.nodeType===3&&(l+=f.nodeValue.length),(w=f.firstChild)!==null;)h=f,f=w;for(;;){if(f===e)break t;if(h===r&&++d===s&&(o=l),h===i&&++u===n&&(c=l),(w=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=w}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(co={focusedElem:e,selectionRange:r},ea=!1,Q=t;Q!==null;)if(t=Q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Q=e;else for(;Q!==null;){t=Q;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var j=b.memoizedProps,k=b.memoizedState,p=t.stateNode,m=p.getSnapshotBeforeUpdate(t.elementType===t.type?j:Ut(t.type,j),k);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(N){Pe(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,Q=e;break}Q=t.return}return b=nd,nd=!1,b}function Cs(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&So(t,r,i)}s=s.next}while(s!==n)}}function Ma(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Co(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Qh(e){var t=e.alternate;t!==null&&(e.alternate=null,Qh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Xt],delete t[Gs],delete t[ho],delete t[tg],delete t[rg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Jh(e){return e.tag===5||e.tag===3||e.tag===4}function sd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Jh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Eo(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=na));else if(n!==4&&(e=e.child,e!==null))for(Eo(e,t,r),e=e.sibling;e!==null;)Eo(e,t,r),e=e.sibling}function Po(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Po(e,t,r),e=e.sibling;e!==null;)Po(e,t,r),e=e.sibling}var We=null,Dt=!1;function yr(e,t,r){for(r=r.child;r!==null;)Xh(e,t,r),r=r.sibling}function Xh(e,t,r){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(Aa,r)}catch{}switch(r.tag){case 5:Ze||On(r,t);case 6:var n=We,s=Dt;We=null,yr(e,t,r),We=n,Dt=s,We!==null&&(Dt?(e=We,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):We.removeChild(r.stateNode));break;case 18:We!==null&&(Dt?(e=We,r=r.stateNode,e.nodeType===8?bl(e.parentNode,r):e.nodeType===1&&bl(e,r),Fs(e)):bl(We,r.stateNode));break;case 4:n=We,s=Dt,We=r.stateNode.containerInfo,Dt=!0,yr(e,t,r),We=n,Dt=s;break;case 0:case 11:case 14:case 15:if(!Ze&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&So(r,t,l),s=s.next}while(s!==n)}yr(e,t,r);break;case 1:if(!Ze&&(On(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Pe(r,t,o)}yr(e,t,r);break;case 21:yr(e,t,r);break;case 22:r.mode&1?(Ze=(n=Ze)||r.memoizedState!==null,yr(e,t,r),Ze=n):yr(e,t,r);break;default:yr(e,t,r)}}function id(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new xg),t.forEach(function(n){var s=Eg.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function $t(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:We=o.stateNode,Dt=!1;break e;case 3:We=o.stateNode.containerInfo,Dt=!0;break e;case 4:We=o.stateNode.containerInfo,Dt=!0;break e}o=o.return}if(We===null)throw Error(D(160));Xh(i,l,s),We=null,Dt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Pe(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Yh(t,e),t=t.sibling}function Yh(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if($t(t,e),Wt(e),n&4){try{Cs(3,e,e.return),Ma(3,e)}catch(j){Pe(e,e.return,j)}try{Cs(5,e,e.return)}catch(j){Pe(e,e.return,j)}}break;case 1:$t(t,e),Wt(e),n&512&&r!==null&&On(r,r.return);break;case 5:if($t(t,e),Wt(e),n&512&&r!==null&&On(r,r.return),e.flags&32){var s=e.stateNode;try{Us(s,"")}catch(j){Pe(e,e.return,j)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,l=r!==null?r.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&wf(s,i),Yl(o,l);var d=Yl(o,i);for(l=0;l<c.length;l+=2){var u=c[l],f=c[l+1];u==="style"?kf(s,f):u==="dangerouslySetInnerHTML"?_f(s,f):u==="children"?Us(s,f):ec(s,u,f,d)}switch(o){case"input":Wl(s,i);break;case"textarea":bf(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?An(s,!!i.multiple,w,!1):h!==!!i.multiple&&(i.defaultValue!=null?An(s,!!i.multiple,i.defaultValue,!0):An(s,!!i.multiple,i.multiple?[]:"",!1))}s[Gs]=i}catch(j){Pe(e,e.return,j)}}break;case 6:if($t(t,e),Wt(e),n&4){if(e.stateNode===null)throw Error(D(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(j){Pe(e,e.return,j)}}break;case 3:if($t(t,e),Wt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Fs(t.containerInfo)}catch(j){Pe(e,e.return,j)}break;case 4:$t(t,e),Wt(e);break;case 13:$t(t,e),Wt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Ac=Oe())),n&4&&id(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Ze=(d=Ze)||u,$t(t,e),Ze=d):$t(t,e),Wt(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(Q=e,u=e.child;u!==null;){for(f=Q=u;Q!==null;){switch(h=Q,w=h.child,h.tag){case 0:case 11:case 14:case 15:Cs(4,h,h.return);break;case 1:On(h,h.return);var b=h.stateNode;if(typeof b.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(j){Pe(n,r,j)}}break;case 5:On(h,h.return);break;case 22:if(h.memoizedState!==null){ld(f);continue}}w!==null?(w.return=h,Q=w):ld(f)}u=u.sibling}e:for(u=null,f=e;;){if(f.tag===5){if(u===null){u=f;try{s=f.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=f.stateNode,c=f.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Nf("display",l))}catch(j){Pe(e,e.return,j)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(j){Pe(e,e.return,j)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:$t(t,e),Wt(e),n&4&&id(e);break;case 21:break;default:$t(t,e),Wt(e)}}function Wt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Jh(r)){var n=r;break e}r=r.return}throw Error(D(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Us(s,""),n.flags&=-33);var i=sd(e);Po(e,i,s);break;case 3:case 4:var l=n.stateNode.containerInfo,o=sd(e);Eo(e,o,l);break;default:throw Error(D(161))}}catch(c){Pe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function wg(e,t,r){Q=e,Zh(e)}function Zh(e,t,r){for(var n=(e.mode&1)!==0;Q!==null;){var s=Q,i=s.child;if(s.tag===22&&n){var l=s.memoizedState!==null||Ci;if(!l){var o=s.alternate,c=o!==null&&o.memoizedState!==null||Ze;o=Ci;var d=Ze;if(Ci=l,(Ze=c)&&!d)for(Q=s;Q!==null;)l=Q,c=l.child,l.tag===22&&l.memoizedState!==null?od(s):c!==null?(c.return=l,Q=c):od(s);for(;i!==null;)Q=i,Zh(i),i=i.sibling;Q=s,Ci=o,Ze=d}ad(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Q=i):ad(e)}}function ad(e){for(;Q!==null;){var t=Q;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ze||Ma(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ze)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Ut(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&qu(t,i,n);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}qu(t,l,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Fs(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}Ze||t.flags&512&&Co(t)}catch(h){Pe(t,t.return,h)}}if(t===e){Q=null;break}if(r=t.sibling,r!==null){r.return=t.return,Q=r;break}Q=t.return}}function ld(e){for(;Q!==null;){var t=Q;if(t===e){Q=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Q=r;break}Q=t.return}}function od(e){for(;Q!==null;){var t=Q;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ma(4,t)}catch(c){Pe(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){Pe(t,s,c)}}var i=t.return;try{Co(t)}catch(c){Pe(t,i,c)}break;case 5:var l=t.return;try{Co(t)}catch(c){Pe(t,l,c)}}}catch(c){Pe(t,t.return,c)}if(t===e){Q=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Q=o;break}Q=t.return}}var bg=Math.ceil,ma=gr.ReactCurrentDispatcher,Oc=gr.ReactCurrentOwner,Ot=gr.ReactCurrentBatchConfig,fe=0,qe=null,Ue=null,Ke=0,vt=0,Rn=Vr(0),ze=0,Xs=null,un=0,Ba=0,Rc=0,Es=null,ut=null,Ac=0,Hn=1/0,nr=null,pa=!1,To=null,$r=null,Ei=!1,Er=null,ga=0,Ps=0,Oo=null,qi=-1,Gi=0;function it(){return fe&6?Oe():qi!==-1?qi:qi=Oe()}function Ur(e){return e.mode&1?fe&2&&Ke!==0?Ke&-Ke:sg.transition!==null?(Gi===0&&(Gi=Df()),Gi):(e=me,e!==0||(e=window.event,e=e===void 0?16:qf(e.type)),e):1}function qt(e,t,r,n){if(50<Ps)throw Ps=0,Oo=null,Error(D(185));ni(e,r,n),(!(fe&2)||e!==qe)&&(e===qe&&(!(fe&2)&&(Ba|=r),ze===4&&Nr(e,Ke)),pt(e,n),r===1&&fe===0&&!(t.mode&1)&&(Hn=Oe()+500,za&&qr()))}function pt(e,t){var r=e.callbackNode;s0(e,t);var n=Zi(e,e===qe?Ke:0);if(n===0)r!==null&&yu(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&yu(r),t===1)e.tag===0?ng(cd.bind(null,e)):ch(cd.bind(null,e)),Z0(function(){!(fe&6)&&qr()}),r=null;else{switch(zf(n)){case 1:r=ic;break;case 4:r=$f;break;case 16:r=Yi;break;case 536870912:r=Uf;break;default:r=Yi}r=lm(r,em.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function em(e,t){if(qi=-1,Gi=0,fe&6)throw Error(D(327));var r=e.callbackNode;if(zn()&&e.callbackNode!==r)return null;var n=Zi(e,e===qe?Ke:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=ya(e,n);else{t=n;var s=fe;fe|=2;var i=rm();(qe!==e||Ke!==t)&&(nr=null,Hn=Oe()+500,sn(e,t));do try{Ng();break}catch(o){tm(e,o)}while(!0);xc(),ma.current=i,fe=s,Ue!==null?t=0:(qe=null,Ke=0,t=ze)}if(t!==0){if(t===2&&(s=no(e),s!==0&&(n=s,t=Ro(e,s))),t===1)throw r=Xs,sn(e,0),Nr(e,n),pt(e,Oe()),r;if(t===6)Nr(e,n);else{if(s=e.current.alternate,!(n&30)&&!jg(s)&&(t=ya(e,n),t===2&&(i=no(e),i!==0&&(n=i,t=Ro(e,i))),t===1))throw r=Xs,sn(e,0),Nr(e,n),pt(e,Oe()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(D(345));case 2:Xr(e,ut,nr);break;case 3:if(Nr(e,n),(n&130023424)===n&&(t=Ac+500-Oe(),10<t)){if(Zi(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){it(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=fo(Xr.bind(null,e,ut,nr),t);break}Xr(e,ut,nr);break;case 4:if(Nr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var l=31-Vt(n);i=1<<l,l=t[l],l>s&&(s=l),n&=~i}if(n=s,n=Oe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*bg(n/1960))-n,10<n){e.timeoutHandle=fo(Xr.bind(null,e,ut,nr),n);break}Xr(e,ut,nr);break;case 5:Xr(e,ut,nr);break;default:throw Error(D(329))}}}return pt(e,Oe()),e.callbackNode===r?em.bind(null,e):null}function Ro(e,t){var r=Es;return e.current.memoizedState.isDehydrated&&(sn(e,t).flags|=256),e=ya(e,t),e!==2&&(t=ut,ut=r,t!==null&&Ao(t)),e}function Ao(e){ut===null?ut=e:ut.push.apply(ut,e)}function jg(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Gt(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Nr(e,t){for(t&=~Rc,t&=~Ba,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Vt(t),n=1<<r;e[r]=-1,t&=~n}}function cd(e){if(fe&6)throw Error(D(327));zn();var t=Zi(e,0);if(!(t&1))return pt(e,Oe()),null;var r=ya(e,t);if(e.tag!==0&&r===2){var n=no(e);n!==0&&(t=n,r=Ro(e,n))}if(r===1)throw r=Xs,sn(e,0),Nr(e,t),pt(e,Oe()),r;if(r===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Xr(e,ut,nr),pt(e,Oe()),null}function Lc(e,t){var r=fe;fe|=1;try{return e(t)}finally{fe=r,fe===0&&(Hn=Oe()+500,za&&qr())}}function dn(e){Er!==null&&Er.tag===0&&!(fe&6)&&zn();var t=fe;fe|=1;var r=Ot.transition,n=me;try{if(Ot.transition=null,me=1,e)return e()}finally{me=n,Ot.transition=r,fe=t,!(fe&6)&&qr()}}function $c(){vt=Rn.current,je(Rn)}function sn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Y0(r)),Ue!==null)for(r=Ue.return;r!==null;){var n=r;switch(pc(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&sa();break;case 3:qn(),je(ht),je(et),Nc();break;case 5:_c(n);break;case 4:qn();break;case 13:je(ke);break;case 19:je(ke);break;case 10:vc(n.type._context);break;case 22:case 23:$c()}r=r.return}if(qe=e,Ue=e=Dr(e.current,null),Ke=vt=t,ze=0,Xs=null,Rc=Ba=un=0,ut=Es=null,tn!==null){for(t=0;t<tn.length;t++)if(r=tn[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var l=i.next;i.next=s,n.next=l}r.pending=n}tn=null}return e}function tm(e,t){do{var r=Ue;try{if(xc(),Mi.current=ha,fa){for(var n=Se.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}fa=!1}if(cn=0,Be=De=Se=null,Ss=!1,Ks=0,Oc.current=null,r===null||r.return===null){ze=1,Xs=t,Ue=null;break}e:{var i=e,l=r.return,o=r,c=t;if(t=Ke,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var w=Ju(l);if(w!==null){w.flags&=-257,Xu(w,l,o,i,t),w.mode&1&&Qu(i,d,t),t=w,c=d;var b=t.updateQueue;if(b===null){var j=new Set;j.add(c),t.updateQueue=j}else b.add(c);break e}else{if(!(t&1)){Qu(i,d,t),Uc();break e}c=Error(D(426))}}else if(Ne&&o.mode&1){var k=Ju(l);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Xu(k,l,o,i,t),gc(Gn(c,o));break e}}i=c=Gn(c,o),ze!==4&&(ze=2),Es===null?Es=[i]:Es.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=zh(i,c,t);Vu(i,p);break e;case 1:o=c;var m=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&($r===null||!$r.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var N=Ih(i,o,t);Vu(i,N);break e}}i=i.return}while(i!==null)}sm(r)}catch(P){t=P,Ue===r&&r!==null&&(Ue=r=r.return);continue}break}while(!0)}function rm(){var e=ma.current;return ma.current=ha,e===null?ha:e}function Uc(){(ze===0||ze===3||ze===2)&&(ze=4),qe===null||!(un&268435455)&&!(Ba&268435455)||Nr(qe,Ke)}function ya(e,t){var r=fe;fe|=2;var n=rm();(qe!==e||Ke!==t)&&(nr=null,sn(e,t));do try{_g();break}catch(s){tm(e,s)}while(!0);if(xc(),fe=r,ma.current=n,Ue!==null)throw Error(D(261));return qe=null,Ke=0,ze}function _g(){for(;Ue!==null;)nm(Ue)}function Ng(){for(;Ue!==null&&!Qp();)nm(Ue)}function nm(e){var t=am(e.alternate,e,vt);e.memoizedProps=e.pendingProps,t===null?sm(e):Ue=t,Oc.current=null}function sm(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=yg(r,t),r!==null){r.flags&=32767,Ue=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ze=6,Ue=null;return}}else if(r=gg(r,t,vt),r!==null){Ue=r;return}if(t=t.sibling,t!==null){Ue=t;return}Ue=t=e}while(t!==null);ze===0&&(ze=5)}function Xr(e,t,r){var n=me,s=Ot.transition;try{Ot.transition=null,me=1,kg(e,t,r,n)}finally{Ot.transition=s,me=n}return null}function kg(e,t,r,n){do zn();while(Er!==null);if(fe&6)throw Error(D(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(i0(e,i),e===qe&&(Ue=qe=null,Ke=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ei||(Ei=!0,lm(Yi,function(){return zn(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Ot.transition,Ot.transition=null;var l=me;me=1;var o=fe;fe|=4,Oc.current=null,vg(e,r),Yh(r,e),G0(co),ea=!!oo,co=oo=null,e.current=r,wg(r),Jp(),fe=o,me=l,Ot.transition=i}else e.current=r;if(Ei&&(Ei=!1,Er=e,ga=s),i=e.pendingLanes,i===0&&($r=null),Zp(r.stateNode),pt(e,Oe()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(pa)throw pa=!1,e=To,To=null,e;return ga&1&&e.tag!==0&&zn(),i=e.pendingLanes,i&1?e===Oo?Ps++:(Ps=0,Oo=e):Ps=0,qr(),null}function zn(){if(Er!==null){var e=zf(ga),t=Ot.transition,r=me;try{if(Ot.transition=null,me=16>e?16:e,Er===null)var n=!1;else{if(e=Er,Er=null,ga=0,fe&6)throw Error(D(331));var s=fe;for(fe|=4,Q=e.current;Q!==null;){var i=Q,l=i.child;if(Q.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(Q=d;Q!==null;){var u=Q;switch(u.tag){case 0:case 11:case 15:Cs(8,u,i)}var f=u.child;if(f!==null)f.return=u,Q=f;else for(;Q!==null;){u=Q;var h=u.sibling,w=u.return;if(Qh(u),u===d){Q=null;break}if(h!==null){h.return=w,Q=h;break}Q=w}}}var b=i.alternate;if(b!==null){var j=b.child;if(j!==null){b.child=null;do{var k=j.sibling;j.sibling=null,j=k}while(j!==null)}}Q=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,Q=l;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Cs(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,Q=p;break e}Q=i.return}}var m=e.current;for(Q=m;Q!==null;){l=Q;var g=l.child;if(l.subtreeFlags&2064&&g!==null)g.return=l,Q=g;else e:for(l=m;Q!==null;){if(o=Q,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Ma(9,o)}}catch(P){Pe(o,o.return,P)}if(o===l){Q=null;break e}var N=o.sibling;if(N!==null){N.return=o.return,Q=N;break e}Q=o.return}}if(fe=s,qr(),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(Aa,e)}catch{}n=!0}return n}finally{me=r,Ot.transition=t}}return!1}function ud(e,t,r){t=Gn(r,t),t=zh(e,t,1),e=Lr(e,t,1),t=it(),e!==null&&(ni(e,1,t),pt(e,t))}function Pe(e,t,r){if(e.tag===3)ud(e,e,r);else for(;t!==null;){if(t.tag===3){ud(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&($r===null||!$r.has(n))){e=Gn(r,e),e=Ih(t,e,1),t=Lr(t,e,1),e=it(),t!==null&&(ni(t,1,e),pt(t,e));break}}t=t.return}}function Sg(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=it(),e.pingedLanes|=e.suspendedLanes&r,qe===e&&(Ke&r)===r&&(ze===4||ze===3&&(Ke&130023424)===Ke&&500>Oe()-Ac?sn(e,0):Rc|=r),pt(e,t)}function im(e,t){t===0&&(e.mode&1?(t=xi,xi<<=1,!(xi&130023424)&&(xi=4194304)):t=1);var r=it();e=hr(e,t),e!==null&&(ni(e,t,r),pt(e,r))}function Cg(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),im(e,r)}function Eg(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(D(314))}n!==null&&n.delete(t),im(e,r)}var am;am=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ht.current)ft=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ft=!1,pg(e,t,r);ft=!!(e.flags&131072)}else ft=!1,Ne&&t.flags&1048576&&uh(t,la,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Vi(e,t),e=t.pendingProps;var s=Mn(t,et.current);Dn(t,r),s=Sc(null,t,n,e,s,r);var i=Cc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,mt(n)?(i=!0,ia(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,bc(t),s.updater=Fa,t.stateNode=s,s._reactInternals=t,vo(t,n,e,r),t=jo(null,t,n,!0,i,r)):(t.tag=0,Ne&&i&&mc(t),nt(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Vi(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=Tg(n),e=Ut(n,e),s){case 0:t=bo(null,t,n,e,r);break e;case 1:t=ed(null,t,n,e,r);break e;case 11:t=Yu(null,t,n,e,r);break e;case 14:t=Zu(null,t,n,Ut(n.type,e),r);break e}throw Error(D(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ut(n,s),bo(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ut(n,s),ed(e,t,n,s,r);case 3:e:{if(Vh(t),e===null)throw Error(D(387));n=t.pendingProps,i=t.memoizedState,s=i.element,gh(e,t),ua(t,n,null,r);var l=t.memoizedState;if(n=l.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Gn(Error(D(423)),t),t=td(e,t,n,r,s);break e}else if(n!==s){s=Gn(Error(D(424)),t),t=td(e,t,n,r,s);break e}else for(wt=Ar(t.stateNode.containerInfo.firstChild),bt=t,Ne=!0,It=null,r=mh(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Bn(),n===s){t=mr(e,t,r);break e}nt(e,t,n,r)}t=t.child}return t;case 5:return yh(t),e===null&&go(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,l=s.children,uo(n,s)?l=null:i!==null&&uo(n,i)&&(t.flags|=32),Bh(e,t),nt(e,t,l,r),t.child;case 6:return e===null&&go(t),null;case 13:return qh(e,t,r);case 4:return jc(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Vn(t,null,n,r):nt(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ut(n,s),Yu(e,t,n,s,r);case 7:return nt(e,t,t.pendingProps,r),t.child;case 8:return nt(e,t,t.pendingProps.children,r),t.child;case 12:return nt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,l=s.value,ve(oa,n._currentValue),n._currentValue=l,i!==null)if(Gt(i.value,l)){if(i.children===s.children&&!ht.current){t=mr(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=cr(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),yo(i.return,r,t),o.lanes|=r;break}c=c.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(D(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),yo(l,r,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}nt(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Dn(t,r),s=At(s),n=n(s),t.flags|=1,nt(e,t,n,r),t.child;case 14:return n=t.type,s=Ut(n,t.pendingProps),s=Ut(n.type,s),Zu(e,t,n,s,r);case 15:return Fh(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ut(n,s),Vi(e,t),t.tag=1,mt(n)?(e=!0,ia(t)):e=!1,Dn(t,r),Dh(t,n,s),vo(t,n,s,r),jo(null,t,n,!0,e,r);case 19:return Gh(e,t,r);case 22:return Mh(e,t,r)}throw Error(D(156,t.tag))};function lm(e,t){return Lf(e,t)}function Pg(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(e,t,r,n){return new Pg(e,t,r,n)}function Dc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Tg(e){if(typeof e=="function")return Dc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===rc)return 11;if(e===nc)return 14}return 2}function Dr(e,t){var r=e.alternate;return r===null?(r=Pt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Hi(e,t,r,n,s,i){var l=2;if(n=e,typeof e=="function")Dc(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case jn:return an(r.children,s,i,t);case tc:l=8,s|=8;break;case Bl:return e=Pt(12,r,t,s|2),e.elementType=Bl,e.lanes=i,e;case Vl:return e=Pt(13,r,t,s),e.elementType=Vl,e.lanes=i,e;case ql:return e=Pt(19,r,t,s),e.elementType=ql,e.lanes=i,e;case yf:return Va(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case pf:l=10;break e;case gf:l=9;break e;case rc:l=11;break e;case nc:l=14;break e;case wr:l=16,n=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=Pt(l,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function an(e,t,r,n){return e=Pt(7,e,n,t),e.lanes=r,e}function Va(e,t,r,n){return e=Pt(22,e,n,t),e.elementType=yf,e.lanes=r,e.stateNode={isHidden:!1},e}function Pl(e,t,r){return e=Pt(6,e,null,t),e.lanes=r,e}function Tl(e,t,r){return t=Pt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Og(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ul(0),this.expirationTimes=ul(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ul(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function zc(e,t,r,n,s,i,l,o,c){return e=new Og(e,t,r,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Pt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},bc(i),e}function Rg(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bn,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function om(e){if(!e)return Mr;e=e._reactInternals;e:{if(hn(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(mt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var r=e.type;if(mt(r))return oh(e,r,t)}return t}function cm(e,t,r,n,s,i,l,o,c){return e=zc(r,n,!0,e,s,i,l,o,c),e.context=om(null),r=e.current,n=it(),s=Ur(r),i=cr(n,s),i.callback=t??null,Lr(r,i,s),e.current.lanes=s,ni(e,s,n),pt(e,n),e}function qa(e,t,r,n){var s=t.current,i=it(),l=Ur(s);return r=om(r),t.context===null?t.context=r:t.pendingContext=r,t=cr(i,l),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Lr(s,t,l),e!==null&&(qt(e,s,l,i),Fi(e,s,l)),l}function xa(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function dd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Ic(e,t){dd(e,t),(e=e.alternate)&&dd(e,t)}function Ag(){return null}var um=typeof reportError=="function"?reportError:function(e){console.error(e)};function Fc(e){this._internalRoot=e}Ga.prototype.render=Fc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));qa(e,t,null,null)};Ga.prototype.unmount=Fc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;dn(function(){qa(null,e,null,null)}),t[fr]=null}};function Ga(e){this._internalRoot=e}Ga.prototype.unstable_scheduleHydration=function(e){if(e){var t=Mf();e={blockedOn:null,target:e,priority:t};for(var r=0;r<_r.length&&t!==0&&t<_r[r].priority;r++);_r.splice(r,0,e),r===0&&Vf(e)}};function Mc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ha(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function fd(){}function Lg(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var d=xa(l);i.call(d)}}var l=cm(t,n,e,0,null,!1,!1,"",fd);return e._reactRootContainer=l,e[fr]=l.current,Vs(e.nodeType===8?e.parentNode:e),dn(),l}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var o=n;n=function(){var d=xa(c);o.call(d)}}var c=zc(e,0,!1,null,null,!1,!1,"",fd);return e._reactRootContainer=c,e[fr]=c.current,Vs(e.nodeType===8?e.parentNode:e),dn(function(){qa(t,c,r,n)}),c}function Wa(e,t,r,n,s){var i=r._reactRootContainer;if(i){var l=i;if(typeof s=="function"){var o=s;s=function(){var c=xa(l);o.call(c)}}qa(t,l,e,s)}else l=Lg(r,t,e,s,n);return xa(l)}If=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=xs(t.pendingLanes);r!==0&&(ac(t,r|1),pt(t,Oe()),!(fe&6)&&(Hn=Oe()+500,qr()))}break;case 13:dn(function(){var n=hr(e,1);if(n!==null){var s=it();qt(n,e,1,s)}}),Ic(e,1)}};lc=function(e){if(e.tag===13){var t=hr(e,134217728);if(t!==null){var r=it();qt(t,e,134217728,r)}Ic(e,134217728)}};Ff=function(e){if(e.tag===13){var t=Ur(e),r=hr(e,t);if(r!==null){var n=it();qt(r,e,t,n)}Ic(e,t)}};Mf=function(){return me};Bf=function(e,t){var r=me;try{return me=e,t()}finally{me=r}};eo=function(e,t,r){switch(t){case"input":if(Wl(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Da(n);if(!s)throw Error(D(90));vf(n),Wl(n,s)}}}break;case"textarea":bf(e,r);break;case"select":t=r.value,t!=null&&An(e,!!r.multiple,t,!1)}};Ef=Lc;Pf=dn;var $g={usingClientEntryPoint:!1,Events:[ii,Sn,Da,Sf,Cf,Lc]},fs={findFiberByHostInstance:en,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ug={bundleType:fs.bundleType,version:fs.version,rendererPackageName:fs.rendererPackageName,rendererConfig:fs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Rf(e),e===null?null:e.stateNode},findFiberByHostInstance:fs.findFiberByHostInstance||Ag,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pi.isDisabled&&Pi.supportsFiber)try{Aa=Pi.inject(Ug),Zt=Pi}catch{}}_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$g;_t.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mc(t))throw Error(D(200));return Rg(e,t,null,r)};_t.createRoot=function(e,t){if(!Mc(e))throw Error(D(299));var r=!1,n="",s=um;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=zc(e,1,!1,null,null,r,!1,n,s),e[fr]=t.current,Vs(e.nodeType===8?e.parentNode:e),new Fc(t)};_t.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=Rf(t),e=e===null?null:e.stateNode,e};_t.flushSync=function(e){return dn(e)};_t.hydrate=function(e,t,r){if(!Ha(t))throw Error(D(200));return Wa(null,e,t,!0,r)};_t.hydrateRoot=function(e,t,r){if(!Mc(e))throw Error(D(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",l=um;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=cm(t,null,e,1,r??null,s,!1,i,l),e[fr]=t.current,Vs(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Ga(t)};_t.render=function(e,t,r){if(!Ha(t))throw Error(D(200));return Wa(null,e,t,!1,r)};_t.unmountComponentAtNode=function(e){if(!Ha(e))throw Error(D(40));return e._reactRootContainer?(dn(function(){Wa(null,null,e,!1,function(){e._reactRootContainer=null,e[fr]=null})}),!0):!1};_t.unstable_batchedUpdates=Lc;_t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Ha(r))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return Wa(e,t,r,!1,n)};_t.version="18.3.1-next-f1338f8080-20240426";function dm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dm)}catch(e){console.error(e)}}dm(),df.exports=_t;var Dg=df.exports,fm,hd=Dg;fm=hd.createRoot,hd.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ys(){return Ys=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ys.apply(this,arguments)}var Pr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Pr||(Pr={}));const md="popstate";function zg(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:l,hash:o}=n.location;return Lo("",{pathname:i,search:l,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:va(s)}return Fg(t,r,null,e)}function Te(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function hm(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Ig(){return Math.random().toString(36).substr(2,8)}function pd(e,t){return{usr:e.state,key:e.key,idx:t}}function Lo(e,t,r,n){return r===void 0&&(r=null),Ys({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ts(t):t,{state:r,key:t&&t.key||n||Ig()})}function va(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ts(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Fg(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,l=s.history,o=Pr.Pop,c=null,d=u();d==null&&(d=0,l.replaceState(Ys({},l.state,{idx:d}),""));function u(){return(l.state||{idx:null}).idx}function f(){o=Pr.Pop;let k=u(),p=k==null?null:k-d;d=k,c&&c({action:o,location:j.location,delta:p})}function h(k,p){o=Pr.Push;let m=Lo(j.location,k,p);d=u()+1;let g=pd(m,d),N=j.createHref(m);try{l.pushState(g,"",N)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;s.location.assign(N)}i&&c&&c({action:o,location:j.location,delta:1})}function w(k,p){o=Pr.Replace;let m=Lo(j.location,k,p);d=u();let g=pd(m,d),N=j.createHref(m);l.replaceState(g,"",N),i&&c&&c({action:o,location:j.location,delta:0})}function b(k){let p=s.location.origin!=="null"?s.location.origin:s.location.href,m=typeof k=="string"?k:va(k);return m=m.replace(/ $/,"%20"),Te(p,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,p)}let j={get action(){return o},get location(){return e(s,l)},listen(k){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(md,f),c=k,()=>{s.removeEventListener(md,f),c=null}},createHref(k){return t(s,k)},createURL:b,encodeLocation(k){let p=b(k);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:w,go(k){return l.go(k)}};return j}var gd;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(gd||(gd={}));function Mg(e,t,r){return r===void 0&&(r="/"),Bg(e,t,r,!1)}function Bg(e,t,r,n){let s=typeof t=="string"?ts(t):t,i=Wn(s.pathname||"/",r);if(i==null)return null;let l=mm(e);Vg(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let d=ey(i);o=Yg(l[c],d,n)}return o}function mm(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,l,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};c.relativePath.startsWith("/")&&(Te(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=zr([n,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(Te(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),mm(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:Jg(d,i.index),routesMeta:u})};return e.forEach((i,l)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))s(i,l);else for(let c of pm(i.path))s(i,l,c)}),t}function pm(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let l=pm(n.join("/")),o=[];return o.push(...l.map(c=>c===""?i:[i,c].join("/"))),s&&o.push(...l),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function Vg(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Xg(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const qg=/^:[\w-]+$/,Gg=3,Hg=2,Wg=1,Kg=10,Qg=-2,yd=e=>e==="*";function Jg(e,t){let r=e.split("/"),n=r.length;return r.some(yd)&&(n+=Qg),t&&(n+=Hg),r.filter(s=>!yd(s)).reduce((s,i)=>s+(qg.test(i)?Gg:i===""?Wg:Kg),n)}function Xg(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function Yg(e,t,r){let{routesMeta:n}=e,s={},i="/",l=[];for(let o=0;o<n.length;++o){let c=n[o],d=o===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",f=wa({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),h=c.route;if(!f&&d&&r&&!n[n.length-1].route.index&&(f=wa({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!f)return null;Object.assign(s,f.params),l.push({params:s,pathname:zr([i,f.pathname]),pathnameBase:sy(zr([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=zr([i,f.pathnameBase]))}return l}function wa(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Zg(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],l=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((d,u,f)=>{let{paramName:h,isOptional:w}=u;if(h==="*"){let j=o[f]||"";l=i.slice(0,i.length-j.length).replace(/(.)\/+$/,"$1")}const b=o[f];return w&&!b?d[h]=void 0:d[h]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:l,pattern:e}}function Zg(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),hm(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function ey(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return hm(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Wn(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function ty(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?ts(e):e;return{pathname:r?r.startsWith("/")?r:ry(r,t):t,search:iy(n),hash:ay(s)}}function ry(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Ol(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ny(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function gm(e,t){let r=ny(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function ym(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=ts(e):(s=Ys({},e),Te(!s.pathname||!s.pathname.includes("?"),Ol("?","pathname","search",s)),Te(!s.pathname||!s.pathname.includes("#"),Ol("#","pathname","hash",s)),Te(!s.search||!s.search.includes("#"),Ol("#","search","hash",s)));let i=e===""||s.pathname==="",l=i?"/":s.pathname,o;if(l==null)o=r;else{let f=t.length-1;if(!n&&l.startsWith("..")){let h=l.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}o=f>=0?t[f]:"/"}let c=ty(s,o),d=l&&l!=="/"&&l.endsWith("/"),u=(i||l===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const zr=e=>e.join("/").replace(/\/\/+/g,"/"),sy=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),iy=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ay=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ly(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const xm=["post","put","patch","delete"];new Set(xm);const oy=["get",...xm];new Set(oy);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zs(){return Zs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zs.apply(this,arguments)}const Ka=x.createContext(null),vm=x.createContext(null),Gr=x.createContext(null),Qa=x.createContext(null),Hr=x.createContext({outlet:null,matches:[],isDataRoute:!1}),wm=x.createContext(null);function cy(e,t){let{relative:r}=t===void 0?{}:t;li()||Te(!1);let{basename:n,navigator:s}=x.useContext(Gr),{hash:i,pathname:l,search:o}=Ja(e,{relative:r}),c=l;return n!=="/"&&(c=l==="/"?n:zr([n,l])),s.createHref({pathname:c,search:o,hash:i})}function li(){return x.useContext(Qa)!=null}function rs(){return li()||Te(!1),x.useContext(Qa).location}function bm(e){x.useContext(Gr).static||x.useLayoutEffect(e)}function Ht(){let{isDataRoute:e}=x.useContext(Hr);return e?_y():uy()}function uy(){li()||Te(!1);let e=x.useContext(Ka),{basename:t,future:r,navigator:n}=x.useContext(Gr),{matches:s}=x.useContext(Hr),{pathname:i}=rs(),l=JSON.stringify(gm(s,r.v7_relativeSplatPath)),o=x.useRef(!1);return bm(()=>{o.current=!0}),x.useCallback(function(d,u){if(u===void 0&&(u={}),!o.current)return;if(typeof d=="number"){n.go(d);return}let f=ym(d,JSON.parse(l),i,u.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:zr([t,f.pathname])),(u.replace?n.replace:n.push)(f,u.state,u)},[t,n,l,i,e])}function dy(){let{matches:e}=x.useContext(Hr),t=e[e.length-1];return t?t.params:{}}function Ja(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=x.useContext(Gr),{matches:s}=x.useContext(Hr),{pathname:i}=rs(),l=JSON.stringify(gm(s,n.v7_relativeSplatPath));return x.useMemo(()=>ym(e,JSON.parse(l),i,r==="path"),[e,l,i,r])}function fy(e,t){return hy(e,t)}function hy(e,t,r,n){li()||Te(!1);let{navigator:s,static:i}=x.useContext(Gr),{matches:l}=x.useContext(Hr),o=l[l.length-1],c=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let u=rs(),f;if(t){var h;let p=typeof t=="string"?ts(t):t;d==="/"||(h=p.pathname)!=null&&h.startsWith(d)||Te(!1),f=p}else f=u;let w=f.pathname||"/",b=w;if(d!=="/"){let p=d.replace(/^\//,"").split("/");b="/"+w.replace(/^\//,"").split("/").slice(p.length).join("/")}let j=!i&&r&&r.matches&&r.matches.length>0?r.matches:Mg(e,{pathname:b}),k=xy(j&&j.map(p=>Object.assign({},p,{params:Object.assign({},c,p.params),pathname:zr([d,s.encodeLocation?s.encodeLocation(p.pathname).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?d:zr([d,s.encodeLocation?s.encodeLocation(p.pathnameBase).pathname:p.pathnameBase])})),l,r,n);return t&&k?x.createElement(Qa.Provider,{value:{location:Zs({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Pr.Pop}},k):k}function my(){let e=jy(),t=ly(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),r?x.createElement("pre",{style:s},r):null,null)}const py=x.createElement(my,null);class gy extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?x.createElement(Hr.Provider,{value:this.props.routeContext},x.createElement(wm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function yy(e){let{routeContext:t,match:r,children:n}=e,s=x.useContext(Ka);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),x.createElement(Hr.Provider,{value:t},n)}function xy(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,o=(s=r)==null?void 0:s.errors;if(o!=null){let u=l.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);u>=0||Te(!1),l=l.slice(0,Math.min(l.length,u+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<l.length;u++){let f=l[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=u),f.route.id){let{loaderData:h,errors:w}=r,b=f.route.loader&&h[f.route.id]===void 0&&(!w||w[f.route.id]===void 0);if(f.route.lazy||b){c=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((u,f,h)=>{let w,b=!1,j=null,k=null;r&&(w=o&&f.route.id?o[f.route.id]:void 0,j=f.route.errorElement||py,c&&(d<0&&h===0?(b=!0,k=null):d===h&&(b=!0,k=f.route.hydrateFallbackElement||null)));let p=t.concat(l.slice(0,h+1)),m=()=>{let g;return w?g=j:b?g=k:f.route.Component?g=x.createElement(f.route.Component,null):f.route.element?g=f.route.element:g=u,x.createElement(yy,{match:f,routeContext:{outlet:u,matches:p,isDataRoute:r!=null},children:g})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?x.createElement(gy,{location:r.location,revalidation:r.revalidation,component:j,error:w,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var jm=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(jm||{}),ba=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ba||{});function vy(e){let t=x.useContext(Ka);return t||Te(!1),t}function wy(e){let t=x.useContext(vm);return t||Te(!1),t}function by(e){let t=x.useContext(Hr);return t||Te(!1),t}function _m(e){let t=by(),r=t.matches[t.matches.length-1];return r.route.id||Te(!1),r.route.id}function jy(){var e;let t=x.useContext(wm),r=wy(ba.UseRouteError),n=_m(ba.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function _y(){let{router:e}=vy(jm.UseNavigateStable),t=_m(ba.UseNavigateStable),r=x.useRef(!1);return bm(()=>{r.current=!0}),x.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Zs({fromRouteId:t},i)))},[e,t])}function Ny(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function yt(e){Te(!1)}function ky(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Pr.Pop,navigator:i,static:l=!1,future:o}=e;li()&&Te(!1);let c=t.replace(/^\/*/,"/"),d=x.useMemo(()=>({basename:c,navigator:i,static:l,future:Zs({v7_relativeSplatPath:!1},o)}),[c,o,i,l]);typeof n=="string"&&(n=ts(n));let{pathname:u="/",search:f="",hash:h="",state:w=null,key:b="default"}=n,j=x.useMemo(()=>{let k=Wn(u,c);return k==null?null:{location:{pathname:k,search:f,hash:h,state:w,key:b},navigationType:s}},[c,u,f,h,w,b,s]);return j==null?null:x.createElement(Gr.Provider,{value:d},x.createElement(Qa.Provider,{children:r,value:j}))}function Sy(e){let{children:t,location:r}=e;return fy($o(t),r)}new Promise(()=>{});function $o(e,t){t===void 0&&(t=[]);let r=[];return x.Children.forEach(e,(n,s)=>{if(!x.isValidElement(n))return;let i=[...t,s];if(n.type===x.Fragment){r.push.apply(r,$o(n.props.children,i));return}n.type!==yt&&Te(!1),!n.props.index||!n.props.children||Te(!1);let l={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=$o(n.props.children,i)),r.push(l)}),r}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ja(){return ja=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ja.apply(this,arguments)}function Nm(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function Cy(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Ey(e,t){return e.button===0&&(!t||t==="_self")&&!Cy(e)}const Py=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ty=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Oy="6";try{window.__reactRouterVersion=Oy}catch{}const Ry=x.createContext({isTransitioning:!1}),Ay="startTransition",xd=Sp[Ay];function Ly(e){let{basename:t,children:r,future:n,window:s}=e,i=x.useRef();i.current==null&&(i.current=zg({window:s,v5Compat:!0}));let l=i.current,[o,c]=x.useState({action:l.action,location:l.location}),{v7_startTransition:d}=n||{},u=x.useCallback(f=>{d&&xd?xd(()=>c(f)):c(f)},[c,d]);return x.useLayoutEffect(()=>l.listen(u),[l,u]),x.useEffect(()=>Ny(n),[n]),x.createElement(ky,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:l,future:n})}const $y=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Uy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ei=x.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:l,state:o,target:c,to:d,preventScrollReset:u,viewTransition:f}=t,h=Nm(t,Py),{basename:w}=x.useContext(Gr),b,j=!1;if(typeof d=="string"&&Uy.test(d)&&(b=d,$y))try{let g=new URL(window.location.href),N=d.startsWith("//")?new URL(g.protocol+d):new URL(d),P=Wn(N.pathname,w);N.origin===g.origin&&P!=null?d=P+N.search+N.hash:j=!0}catch{}let k=cy(d,{relative:s}),p=zy(d,{replace:l,state:o,target:c,preventScrollReset:u,relative:s,viewTransition:f});function m(g){n&&n(g),g.defaultPrevented||p(g)}return x.createElement("a",ja({},h,{href:b||k,onClick:j||i?n:m,ref:r,target:c}))}),Kr=x.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:s=!1,className:i="",end:l=!1,style:o,to:c,viewTransition:d,children:u}=t,f=Nm(t,Ty),h=Ja(c,{relative:f.relative}),w=rs(),b=x.useContext(vm),{navigator:j,basename:k}=x.useContext(Gr),p=b!=null&&Iy(h)&&d===!0,m=j.encodeLocation?j.encodeLocation(h).pathname:h.pathname,g=w.pathname,N=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;s||(g=g.toLowerCase(),N=N?N.toLowerCase():null,m=m.toLowerCase()),N&&k&&(N=Wn(N,k)||N);const P=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let I=g===m||!l&&g.startsWith(m)&&g.charAt(P)==="/",_=N!=null&&(N===m||!l&&N.startsWith(m)&&N.charAt(m.length)==="/"),C={isActive:I,isPending:_,isTransitioning:p},L=I?n:void 0,O;typeof i=="function"?O=i(C):O=[i,I?"active":null,_?"pending":null,p?"transitioning":null].filter(Boolean).join(" ");let H=typeof o=="function"?o(C):o;return x.createElement(ei,ja({},f,{"aria-current":L,className:O,ref:r,style:H,to:c,viewTransition:d}),typeof u=="function"?u(C):u)});var Uo;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Uo||(Uo={}));var vd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(vd||(vd={}));function Dy(e){let t=x.useContext(Ka);return t||Te(!1),t}function zy(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:l,viewTransition:o}=t===void 0?{}:t,c=Ht(),d=rs(),u=Ja(e,{relative:l});return x.useCallback(f=>{if(Ey(f,r)){f.preventDefault();let h=n!==void 0?n:va(d)===va(u);c(e,{replace:h,state:s,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,u,n,s,r,e,i,l,o])}function Iy(e,t){t===void 0&&(t={});let r=x.useContext(Ry);r==null&&Te(!1);let{basename:n}=Dy(Uo.useViewTransitionState),s=Ja(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=Wn(r.currentLocation.pathname,n)||r.currentLocation.pathname,l=Wn(r.nextLocation.pathname,n)||r.nextLocation.pathname;return wa(s.pathname,l)!=null||wa(s.pathname,i)!=null}const Fy="modulepreload",My=function(e){return"/Nexus/"+e},wd={},Kn=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=My(c),c in wd)return;wd[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":Fy,d||(f.as="script"),f.crossOrigin="",f.href=c,o&&f.setAttribute("nonce",o),document.head.appendChild(f),d)return new Promise((h,w)=>{f.addEventListener("load",h),f.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return s.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})},By=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Kn(async()=>{const{default:n}=await Promise.resolve().then(()=>ns);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Bc extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Vy extends Bc{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class qy extends Bc{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Gy extends Bc{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Do;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Do||(Do={}));var Hy=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(f){l(f)}}function c(u){try{d(n.throw(u))}catch(f){l(f)}}function d(u){u.done?i(u.value):s(u.value).then(o,c)}d((n=n.apply(e,t||[])).next())})};class Wy{constructor(t,{headers:r={},customFetch:n,region:s=Do.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=By(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return Hy(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:l}=r;let o={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(o["x-region"]=c);let d;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",d=l):typeof l=="string"?(o["Content-Type"]="text/plain",d=l):typeof FormData<"u"&&l instanceof FormData?d=l:(o["Content-Type"]="application/json",d=JSON.stringify(l)));const u=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),s),body:d}).catch(b=>{throw new Vy(b)}),f=u.headers.get("x-relay-error");if(f&&f==="true")throw new qy(u);if(!u.ok)throw new Gy(u);let h=((n=u.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),w;return h==="application/json"?w=yield u.json():h==="application/octet-stream"?w=yield u.blob():h==="text/event-stream"?w=u:h==="multipart/form-data"?w=yield u.formData():w=yield u.text(),{data:w,error:null}}catch(s){return{data:null,error:s}}})}}var dt={},Vc={},Xa={},oi={},Ya={},Za={},Ky=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Qn=Ky();const Qy=Qn.fetch,km=Qn.fetch.bind(Qn),Sm=Qn.Headers,Jy=Qn.Request,Xy=Qn.Response,ns=Object.freeze(Object.defineProperty({__proto__:null,Headers:Sm,Request:Jy,Response:Xy,default:km,fetch:Qy},Symbol.toStringTag,{value:"Module"})),Yy=up(ns);var el={};Object.defineProperty(el,"__esModule",{value:!0});let Zy=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};el.default=Zy;var Cm=Rt&&Rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Za,"__esModule",{value:!0});const ex=Cm(Yy),tx=Cm(el);let rx=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=ex.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var l,o,c;let d=null,u=null,f=null,h=i.status,w=i.statusText;if(i.ok){if(this.method!=="HEAD"){const p=await i.text();p===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=p:u=JSON.parse(p))}const j=(l=this.headers.Prefer)===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),k=(o=i.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");j&&k&&k.length>1&&(f=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,h=406,w="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const j=await i.text();try{d=JSON.parse(j),Array.isArray(d)&&i.status===404&&(u=[],d=null,h=200,w="OK")}catch{i.status===404&&j===""?(h=204,w="No Content"):d={message:j}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,h=200,w="OK"),d&&this.shouldThrowOnError)throw new tx.default(d)}return{error:d,data:u,count:f,status:h,statusText:w}});return this.shouldThrowOnError||(s=s.catch(i=>{var l,o,c;return{error:{message:`${(l=i==null?void 0:i.name)!==null&&l!==void 0?l:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};Za.default=rx;var nx=Rt&&Rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ya,"__esModule",{value:!0});const sx=nx(Za);let ix=class extends sx.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const l=i?`${i}.order`:"order",o=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${o?`${o},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(l,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:l="text"}={}){var o;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${l}; for="${d}"; options=${c};`,l==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Ya.default=ix;var ax=Rt&&Rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(oi,"__esModule",{value:!0});const lx=ax(Ya);let ox=class extends lx.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const l=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${l}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};oi.default=ox;var cx=Rt&&Rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xa,"__esModule",{value:!0});const hs=cx(oi);let ux=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=r,this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const l=(t??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",l),n&&(this.headers.Prefer=`count=${n}`),new hs.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const l=t.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(l.length>0){const o=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new hs.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){const l="POST",o=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&o.push(this.headers.Prefer),s&&o.push(`count=${s}`),i||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const c=t.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new hs.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new hs.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new hs.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Xa.default=ux;var tl={},rl={};Object.defineProperty(rl,"__esModule",{value:!0});rl.version=void 0;rl.version="0.0.0-automated";Object.defineProperty(tl,"__esModule",{value:!0});tl.DEFAULT_HEADERS=void 0;const dx=rl;tl.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${dx.version}`};var Em=Rt&&Rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vc,"__esModule",{value:!0});const fx=Em(Xa),hx=Em(oi),mx=tl;let px=class Pm{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},mx.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new fx.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Pm(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){let l;const o=new URL(`${this.url}/rpc/${t}`);let c;n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([u,f])=>f!==void 0).map(([u,f])=>[u,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([u,f])=>{o.searchParams.append(u,f)})):(l="POST",c=r);const d=Object.assign({},this.headers);return i&&(d.Prefer=`count=${i}`),new hx.default({method:l,url:o,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Vc.default=px;var ss=Rt&&Rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dt,"__esModule",{value:!0});dt.PostgrestError=dt.PostgrestBuilder=dt.PostgrestTransformBuilder=dt.PostgrestFilterBuilder=dt.PostgrestQueryBuilder=dt.PostgrestClient=void 0;const Tm=ss(Vc);dt.PostgrestClient=Tm.default;const Om=ss(Xa);dt.PostgrestQueryBuilder=Om.default;const Rm=ss(oi);dt.PostgrestFilterBuilder=Rm.default;const Am=ss(Ya);dt.PostgrestTransformBuilder=Am.default;const Lm=ss(Za);dt.PostgrestBuilder=Lm.default;const $m=ss(el);dt.PostgrestError=$m.default;var gx=dt.default={PostgrestClient:Tm.default,PostgrestQueryBuilder:Om.default,PostgrestFilterBuilder:Rm.default,PostgrestTransformBuilder:Am.default,PostgrestBuilder:Lm.default,PostgrestError:$m.default};const{PostgrestClient:yx,PostgrestQueryBuilder:N1,PostgrestFilterBuilder:k1,PostgrestTransformBuilder:S1,PostgrestBuilder:C1,PostgrestError:E1}=gx,xx="2.11.2",vx={"X-Client-Info":`realtime-js/${xx}`},wx="1.0.0",Um=1e4,bx=1e3;var In;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(In||(In={}));var xt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(xt||(xt={}));var zt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(zt||(zt={}));var zo;(function(e){e.websocket="websocket"})(zo||(zo={}));var Zr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Zr||(Zr={}));class jx{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let l=this.HEADER_LENGTH+2;const o=n.decode(t.slice(l,l+s));l=l+s;const c=n.decode(t.slice(l,l+i));l=l+i;const d=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{ref:null,topic:o,event:c,payload:d}}}class Dm{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var xe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(xe||(xe={}));const bd=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,l)=>(i[l]=_x(l,e,t,s),i),{})},_x=(e,t,r,n)=>{const s=t.find(o=>o.name===e),i=s==null?void 0:s.type,l=r[e];return i&&!n.includes(i)?zm(i,l):Io(l)},zm=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Cx(t,r)}switch(e){case xe.bool:return Nx(t);case xe.float4:case xe.float8:case xe.int2:case xe.int4:case xe.int8:case xe.numeric:case xe.oid:return kx(t);case xe.json:case xe.jsonb:return Sx(t);case xe.timestamp:return Ex(t);case xe.abstime:case xe.date:case xe.daterange:case xe.int4range:case xe.int8range:case xe.money:case xe.reltime:case xe.text:case xe.time:case xe.timestamptz:case xe.timetz:case xe.tsrange:case xe.tstzrange:return Io(t);default:return Io(t)}},Io=e=>e,Nx=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},kx=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Sx=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Cx=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const l=e.slice(1,r);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(o=>zm(t,o))}return e},Ex=e=>typeof e=="string"?e.replace(" ","T"):e,Im=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Rl{constructor(t,r,n={},s=Um){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var jd;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(jd||(jd={}));class Ts{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ts.syncState(this.state,s,i,l),this.pendingDiffs.forEach(c=>{this.state=Ts.syncDiff(this.state,c,i,l)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ts.syncDiff(this.state,s,i,l),o())}),this.onJoin((s,i,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:l})}),this.onLeave((s,i,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),l=this.transformState(r),o={},c={};return this.map(i,(d,u)=>{l[d]||(c[d]=u)}),this.map(l,(d,u)=>{const f=i[d];if(f){const h=u.map(k=>k.presence_ref),w=f.map(k=>k.presence_ref),b=u.filter(k=>w.indexOf(k.presence_ref)<0),j=f.filter(k=>h.indexOf(k.presence_ref)<0);b.length>0&&(o[d]=b),j.length>0&&(c[d]=j)}else o[d]=u}),this.syncDiff(i,{joins:o,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(o,c)=>{var d;const u=(d=t[o])!==null&&d!==void 0?d:[];if(t[o]=this.cloneDeep(c),u.length>0){const f=t[o].map(w=>w.presence_ref),h=u.filter(w=>f.indexOf(w.presence_ref)<0);t[o].unshift(...h)}n(o,u,c)}),this.map(l,(o,c)=>{let d=t[o];if(!d)return;const u=c.map(f=>f.presence_ref);d=d.filter(f=>u.indexOf(f.presence_ref)<0),t[o]=d,s(o,d,c),d.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _d;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(_d||(_d={}));var Nd;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Nd||(Nd={}));var sr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(sr||(sr={}));class qc{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=xt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Rl(this,zt.join,this.params,this.timeout),this.rejoinTimer=new Dm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=xt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=xt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=xt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=xt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(zt.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Ts(this),this.broadcastEndpointURL=Im(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:l,private:o}}=this.params;this._onError(u=>t==null?void 0:t(sr.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(sr.CLOSED));const c={},d={broadcast:i,presence:l,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&s!==void 0?s:[],private:o};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:u})=>{var f;if(this.socket.setAuth(),u===void 0){t==null||t(sr.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,w=(f=h==null?void 0:h.length)!==null&&f!==void 0?f:0,b=[];for(let j=0;j<w;j++){const k=h[j],{filter:{event:p,schema:m,table:g,filter:N}}=k,P=u&&u[j];if(P&&P.event===p&&P.schema===m&&P.table===g&&P.filter===N)b.push(Object.assign(Object.assign({},k),{id:P.id}));else{this.unsubscribe(),t==null||t(sr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(sr.SUBSCRIBED);return}}).receive("error",u=>{t==null||t(sr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(sr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:l}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=d.body)===null||s===void 0?void 0:s.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,o,c;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=xt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(zt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const s=new Rl(this,zt.leave,{},t);s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),l}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Rl(this,t,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const l=t.toLocaleLowerCase(),{close:o,error:c,leave:d,join:u}=zt;if(n&&[o,c,d,u].indexOf(l)>=0&&n!==this._joinRef())return;let h=this._onMessage(l,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(w=>{var b,j,k;return((b=w.filter)===null||b===void 0?void 0:b.event)==="*"||((k=(j=w.filter)===null||j===void 0?void 0:j.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===l}).map(w=>w.callback(h,n)):(i=this.bindings[l])===null||i===void 0||i.filter(w=>{var b,j,k,p,m,g;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in w){const N=w.id,P=(b=w.filter)===null||b===void 0?void 0:b.event;return N&&((j=r.ids)===null||j===void 0?void 0:j.includes(N))&&(P==="*"||(P==null?void 0:P.toLocaleLowerCase())===((k=r.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const N=(m=(p=w==null?void 0:w.filter)===null||p===void 0?void 0:p.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return N==="*"||N===((g=r==null?void 0:r.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===l}).map(w=>{if(typeof h=="object"&&"ids"in h){const b=h.data,{schema:j,table:k,commit_timestamp:p,type:m,errors:g}=b;h=Object.assign(Object.assign({},{schema:j,table:k,commit_timestamp:p,eventType:m,new:{},old:{},errors:g}),this._getPayloadRecords(b))}w.callback(h,n)})}_isClosed(){return this.state===xt.closed}_isJoined(){return this.state===xt.joined}_isJoining(){return this.state===xt.joining}_isLeaving(){return this.state===xt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&qc.isEqual(s.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(zt.close,{},t)}_onError(t){this._on(zt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=xt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=bd(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=bd(t.columns,t.old_record)),r}}const Px=()=>{},Tx=typeof WebSocket<"u",Ox=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Rx{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=vx,this.params={},this.timeout=Um,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Px,this.conn=null,this.sendBuffer=[],this.serializer=new jx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let l;return i?l=i:typeof fetch>"u"?l=(...o)=>Kn(async()=>{const{default:c}=await Promise.resolve().then(()=>ns);return{default:c}},void 0).then(({default:c})=>c(...o)):l=fetch,(...o)=>l(...o)},this.endPoint=`${t}/${zo.websocket}`,this.httpEndpoint=Im(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,l)=>l(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Dm(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(Tx){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Ax(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Kn(async()=>{const{default:t}=await import("./browser-Dp136jTY.js").then(r=>r.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:wx}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case In.connecting:return Zr.Connecting;case In.open:return Zr.Open;case In.closing:return Zr.Closing;default:return Zr.Closed}}isConnected(){return this.connectionState()===Zr.Open}channel(t,r={config:{}}){const n=new qc(`realtime:${t}`,r,this);return this.channels.push(n),n}push(t){const{topic:r,event:n,payload:s,ref:i}=t,l=()=>{this.encode(t,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(r){let n=null;try{n=JSON.parse(atob(r.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=r,this.channels.forEach(s=>{r&&s.updateJoinPayload({access_token:r}),s.joinedOnce&&s._isJoined()&&s._push(zt.access_token,{access_token:r})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(bx,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:s,payload:i,ref:l}=r;l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${s} ${l&&"("+l+")"||""}`,i),this.channels.filter(o=>o._isMember(n)).forEach(o=>o._trigger(s,i,l)),this.stateChangeCallbacks.message.forEach(o=>o(r))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(zt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Ox],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class Ax{constructor(t,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=In.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}}class Gc extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Me(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Lx extends Gc{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Fo extends Gc{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var $x=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(f){l(f)}}function c(u){try{d(n.throw(u))}catch(f){l(f)}}function d(u){u.done?i(u.value):s(u.value).then(o,c)}d((n=n.apply(e,t||[])).next())})};const Fm=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Kn(async()=>{const{default:n}=await Promise.resolve().then(()=>ns);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},Ux=()=>$x(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Kn(()=>Promise.resolve().then(()=>ns),void 0)).Response:Response}),Mo=e=>{if(Array.isArray(e))return e.map(r=>Mo(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Mo(n)}),t};var mn=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(f){l(f)}}function c(u){try{d(n.throw(u))}catch(f){l(f)}}function d(u){u.done?i(u.value):s(u.value).then(o,c)}d((n=n.apply(e,t||[])).next())})};const Al=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Dx=(e,t,r)=>mn(void 0,void 0,void 0,function*(){const n=yield Ux();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{t(new Lx(Al(s),e.status||500))}).catch(s=>{t(new Fo(Al(s),s))}):t(new Fo(Al(e),e))}),zx=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))};function ci(e,t,r,n,s,i){return mn(this,void 0,void 0,function*(){return new Promise((l,o)=>{e(r,zx(t,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>Dx(c,o,n))})})}function _a(e,t,r,n){return mn(this,void 0,void 0,function*(){return ci(e,"GET",t,r,n)})}function jr(e,t,r,n,s){return mn(this,void 0,void 0,function*(){return ci(e,"POST",t,n,s,r)})}function Ix(e,t,r,n,s){return mn(this,void 0,void 0,function*(){return ci(e,"PUT",t,n,s,r)})}function Fx(e,t,r,n){return mn(this,void 0,void 0,function*(){return ci(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Mm(e,t,r,n,s){return mn(this,void 0,void 0,function*(){return ci(e,"DELETE",t,n,s,r)})}var ot=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(f){l(f)}}function c(u){try{d(n.throw(u))}catch(f){l(f)}}function d(u){u.done?i(u.value):s(u.value).then(o,c)}d((n=n.apply(e,t||[])).next())})};const Mx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},kd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Bx{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=Fm(s)}uploadOrUpdate(t,r,n,s){return ot(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},kd),s);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",l.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(o=Object.assign(Object.assign({},o),s.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),f=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:i,headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{})),h=yield f.json();return f.ok?{data:{path:d,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(Me(i))return{data:null,error:i};throw i}})}upload(t,r,n){return ot(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return ot(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),l=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${l}`);o.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:kd.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const f=yield this.fetch(o.toString(),{method:"PUT",body:c,headers:u}),h=yield f.json();return f.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(c){if(Me(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return ot(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield jr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),l=new URL(this.url+i.url),o=l.searchParams.get("token");if(!o)throw new Gc("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:o},error:null}}catch(n){if(Me(n))return{data:null,error:n};throw n}})}update(t,r,n){return ot(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return ot(this,void 0,void 0,function*(){try{return{data:yield jr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Me(s))return{data:null,error:s};throw s}})}copy(t,r,n){return ot(this,void 0,void 0,function*(){try{return{data:{path:(yield jr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Me(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return ot(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield jr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(s){if(Me(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return ot(this,void 0,void 0,function*(){try{const s=yield jr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(s){if(Me(s))return{data:null,error:s};throw s}})}download(t,r){return ot(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=i?`?${i}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield _a(this.fetch,`${this.url}/${s}/${o}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(Me(o))return{data:null,error:o};throw o}})}info(t){return ot(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield _a(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Mo(n),error:null}}catch(n){if(Me(n))return{data:null,error:n};throw n}})}exists(t){return ot(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield Fx(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Me(n)&&n instanceof Fo){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${d}`)}}}remove(t){return ot(this,void 0,void 0,function*(){try{return{data:yield Mm(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(Me(r))return{data:null,error:r};throw r}})}list(t,r,n){return ot(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Mx),r),{prefix:t||""});return{data:yield jr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(Me(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const Vx="2.7.1",qx={"X-Client-Info":`storage-js/${Vx}`};var gn=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(f){l(f)}}function c(u){try{d(n.throw(u))}catch(f){l(f)}}function d(u){u.done?i(u.value):s(u.value).then(o,c)}d((n=n.apply(e,t||[])).next())})};class Gx{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},qx),r),this.fetch=Fm(n)}listBuckets(){return gn(this,void 0,void 0,function*(){try{return{data:yield _a(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Me(t))return{data:null,error:t};throw t}})}getBucket(t){return gn(this,void 0,void 0,function*(){try{return{data:yield _a(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(Me(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return gn(this,void 0,void 0,function*(){try{return{data:yield jr(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Me(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return gn(this,void 0,void 0,function*(){try{return{data:yield Ix(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Me(n))return{data:null,error:n};throw n}})}emptyBucket(t){return gn(this,void 0,void 0,function*(){try{return{data:yield jr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Me(r))return{data:null,error:r};throw r}})}deleteBucket(t){return gn(this,void 0,void 0,function*(){try{return{data:yield Mm(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(Me(r))return{data:null,error:r};throw r}})}}class Hx extends Gx{constructor(t,r={},n){super(t,r,n)}from(t){return new Bx(this.url,this.headers,t,this.fetch)}}const Wx="2.49.4";let ws="";typeof Deno<"u"?ws="deno":typeof document<"u"?ws="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ws="react-native":ws="node";const Kx={"X-Client-Info":`supabase-js-${ws}/${Wx}`},Qx={headers:Kx},Jx={schema:"public"},Xx={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Yx={};var Zx=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(f){l(f)}}function c(u){try{d(n.throw(u))}catch(f){l(f)}}function d(u){u.done?i(u.value):s(u.value).then(o,c)}d((n=n.apply(e,t||[])).next())})};const ev=e=>{let t;return e?t=e:typeof fetch>"u"?t=km:t=fetch,(...r)=>t(...r)},tv=()=>typeof Headers>"u"?Sm:Headers,rv=(e,t,r)=>{const n=ev(r),s=tv();return(i,l)=>Zx(void 0,void 0,void 0,function*(){var o;const c=(o=yield t())!==null&&o!==void 0?o:e;let d=new s(l==null?void 0:l.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},l),{headers:d}))})};var nv=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(f){l(f)}}function c(u){try{d(n.throw(u))}catch(f){l(f)}}function d(u){u.done?i(u.value):s(u.value).then(o,c)}d((n=n.apply(e,t||[])).next())})};function sv(e){return e.replace(/\/$/,"")}function iv(e,t){const{db:r,auth:n,realtime:s,global:i}=e,{db:l,auth:o,realtime:c,global:d}=t,u={db:Object.assign(Object.assign({},l),r),auth:Object.assign(Object.assign({},o),n),realtime:Object.assign(Object.assign({},c),s),global:Object.assign(Object.assign({},d),i),accessToken:()=>nv(this,void 0,void 0,function*(){return""})};return e.accessToken?u.accessToken=e.accessToken:delete u.accessToken,u}const Bm="2.69.1",wn=30*1e3,Bo=3,Ll=Bo*wn,av="http://localhost:9999",lv="supabase.auth.token",ov={"X-Client-Info":`gotrue-js/${Bm}`},Vo="X-Supabase-Api-Version",Vm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},cv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,uv=6e5;class Hc extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function le(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class dv extends Hc{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function fv(e){return le(e)&&e.name==="AuthApiError"}class qm extends Hc{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Wr extends Hc{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class xr extends Wr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function hv(e){return le(e)&&e.name==="AuthSessionMissingError"}class $l extends Wr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ti extends Wr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Oi extends Wr{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function mv(e){return le(e)&&e.name==="AuthImplicitGrantRedirectError"}class Sd extends Wr{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class qo extends Wr{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Ul(e){return le(e)&&e.name==="AuthRetryableFetchError"}class Cd extends Wr{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Os extends Wr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ed="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Pd=` 	
\r=`.split(""),pv=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Pd.length;t+=1)e[Pd[t].charCodeAt(0)]=-2;for(let t=0;t<Ed.length;t+=1)e[Ed[t].charCodeAt(0)]=t;return e})();function Gm(e,t,r){const n=pv[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Td(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=l=>{xv(l,n,r)};for(let l=0;l<e.length;l+=1)Gm(e.charCodeAt(l),s,i);return t.join("")}function gv(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function yv(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}gv(n,t)}}function xv(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function vv(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Gm(e.charCodeAt(s),r,n);return new Uint8Array(t)}function wv(e){const t=[];return yv(e,r=>t.push(r)),new Uint8Array(t)}function bv(e){return Math.round(Date.now()/1e3)+e}function jv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Kt=()=>typeof window<"u"&&typeof document<"u",Qr={tested:!1,writable:!1},Rs=()=>{if(!Kt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Qr.tested)return Qr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Qr.tested=!0,Qr.writable=!0}catch{Qr.tested=!0,Qr.writable=!1}return Qr.writable};function _v(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const Hm=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Kn(async()=>{const{default:n}=await Promise.resolve().then(()=>ns);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},Nv=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Wm=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Ri=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ai=async(e,t)=>{await e.removeItem(t)};class nl{constructor(){this.promise=new nl.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}nl.promiseConstructor=Promise;function Dl(e){const t=e.split(".");if(t.length!==3)throw new Os("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!cv.test(t[n]))throw new Os("JWT not in base64url format");return{header:JSON.parse(Td(t[0])),payload:JSON.parse(Td(t[1])),signature:vv(t[2]),raw:{header:t[0],payload:t[1]}}}async function kv(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Sv(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){n(l);return}}catch(l){if(!t(i,l)){s(l);return}}})()})}function Cv(e){return("0"+e.toString(16)).substr(-2)}function Ev(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,Cv).join("")}async function Pv(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function Tv(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Pv(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yn(e,t,r=!1){const n=Ev();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Wm(e,`${t}-code-verifier`,s);const i=await Tv(n);return[i,n===i?"plain":"s256"]}const Ov=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Rv(e){const t=e.headers.get(Vo);if(!t||!t.match(Ov))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Av(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Lv(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var $v=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const Yr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Uv=[502,503,504];async function Od(e){var t;if(!Nv(e))throw new qo(Yr(e),0);if(Uv.includes(e.status))throw new qo(Yr(e),e.status);let r;try{r=await e.json()}catch(i){throw new qm(Yr(i),i)}let n;const s=Rv(e);if(s&&s.getTime()>=Vm["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Cd(Yr(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new xr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new Cd(Yr(r),e.status,r.weak_password.reasons);throw new dv(Yr(r),e.status||500,n)}const Dv=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function de(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Vo]||(i[Vo]=Vm["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const l=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await zv(e,t,r+o,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function zv(e,t,r,n,s,i){const l=Dv(t,n,s,i);let o;try{o=await e(r,Object.assign({},l))}catch(c){throw console.error(c),new qo(Yr(c),0)}if(o.ok||await Od(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(c){await Od(c)}}function vr(e){var t;let r=null;Bv(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=bv(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Rd(e){const t=vr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function kr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Iv(e){return{data:e,error:null}}function Fv(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,l=$v(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},l);return{data:{properties:o,user:c},error:null}}function Mv(e){return e}function Bv(e){return e.access_token&&e.refresh_token&&e.expires_in}var Vv=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class qv{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Hm(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r="global"){try{return await de(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(le(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await de(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:kr})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Vv(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await de(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Fv,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(le(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await de(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:kr})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,l,o,c;try{const d={nextPage:null,lastPage:0,total:0},u=await de(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Mv});if(u.error)throw u.error;const f=await u.json(),h=(l=u.headers.get("x-total-count"))!==null&&l!==void 0?l:0,w=(c=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return w.length>0&&(w.forEach(b=>{const j=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(b.split(";")[1].split("=")[1]);d[`${k}Page`]=j}),d.total=parseInt(h)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(le(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){try{return await de(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:kr})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){try{return await de(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:kr})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){try{return await de(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:kr})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){try{const{data:r,error:n}=await de(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(le(r))return{data:null,error:r};throw r}}async _deleteFactor(t){try{return{data:await de(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(le(r))return{data:null,error:r};throw r}}}const Gv={getItem:e=>Rs()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Rs()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Rs()&&globalThis.localStorage.removeItem(e)}};function Ad(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function Hv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const xn={debug:!!(globalThis&&Rs()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Km extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Wv extends Km{}async function Kv(e,t,r){xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),xn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Wv(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(xn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Hv();const Qv={url:av,storageKey:lv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ov,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ld(e,t,r){return await r()}class ti{constructor(t){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ti.nextInstanceID,ti.nextInstanceID+=1,this.instanceID>0&&Kt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Qv),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new qv({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Hm(s.fetch),this.lock=s.lock||Ld,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Kt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Kv:this.lock=Ld,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Rs()?this.storage=Gv:(this.memoryStorage={},this.storage=Ad(this.memoryStorage)):(this.memoryStorage={},this.storage=Ad(this.memoryStorage)),Kt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Bm}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=_v(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Kt()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),mv(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return le(r)?{error:r}:{error:new qm("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await de(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:vr}),{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(le(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:u,password:f,options:h}=t;let w=null,b=null;this.flowType==="pkce"&&([w,b]=await yn(this.storage,this.storageKey)),i=await de(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:w,code_challenge_method:b},xform:vr})}else if("phone"in t){const{phone:u,password:f,options:h}=t;i=await de(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:vr})}else throw new Ti("You must provide either an email or phone number and a password");const{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(le(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:l,options:o}=t;r=await de(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Rd})}else if("phone"in t){const{phone:i,password:l,options:o}=t;r=await de(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Rd})}else throw new Ti("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new $l}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(le(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const r=await Ri(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:l}=await de(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:vr});if(await Ai(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new $l}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:l})}catch(i){if(le(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:l}=t,o=await de(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:vr}),{data:c,error:d}=o;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new $l}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if(le(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,l;try{if("email"in t){const{email:o,options:c}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await yn(this.storage,this.storageKey));const{error:f}=await de(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:o,options:c}=t,{data:d,error:u}=await de(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Ti("You must provide either an email or phone number.")}catch(o){if(le(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:o}=await de(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:vr});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,d=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(s){if(le(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await yn(this.storage,this.storageKey)),await de(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:Iv})}catch(i){if(le(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new xr;const{error:s}=await de(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(le(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:l}=await de(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:l,error:o}=await de(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o}}throw new Ti("You must provide either an email or phone number and a type")}catch(r){if(le(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Ri(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Ll:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,u)=>(!l&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await de(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:kr}):await this._useSession(async r=>{var n,s,i;const{data:l,error:o}=r;if(o)throw o;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new xr}:await de(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:kr})})}catch(r){if(le(r))return hv(r)&&(await this._removeSession(),await Ai(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new xr;const l=s.session;let o=null,c=null;this.flowType==="pkce"&&t.email!=null&&([o,c]=await yn(this.storage,this.storageKey));const{data:d,error:u}=await de(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:c}),jwt:l.access_token,xform:kr});if(u)throw u;return l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new xr;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:l}=Dl(t.access_token);if(l.exp&&(n=l.exp,s=n<=r),s){const{session:o,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(le(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:l,error:o}=r;if(o)throw o;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new xr;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(le(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Kt())throw new Oi("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Oi(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Sd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Oi("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Sd("No code detected.");const{data:m,error:g}=await this._exchangeCodeForSession(t.code);if(g)throw g;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:l,expires_in:o,expires_at:c,token_type:d}=t;if(!i||!o||!l||!d)throw new Oi("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(o);let h=u+f;c&&(h=parseInt(c));const w=h-u;w*1e3<=wn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${f}s`);const b=h-f;u-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,h,u):u-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,h,u);const{data:j,error:k}=await this._getUser(i);if(k)throw k;const p={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:h,refresh_token:l,token_type:d,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:t.type},error:null}}catch(n){if(le(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Ri(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const l=(n=s.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:o}=await this.admin.signOut(l,t);if(o&&!(fv(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return t!=="others"&&(await this._removeSession(),await Ai(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=jv(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await yn(this.storage,this.storageKey,!0));try{return await de(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(le(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(le(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var l,o,c,d,u;const{data:f,error:h}=i;if(h)throw h;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await de(this.fetch,"GET",w,{headers:this.headers,jwt:(u=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Kt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(le(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:l}=r;if(l)throw l;return await de(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(le(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Sv(async s=>(s>0&&await kv(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await de(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:vr})),(s,i)=>{const l=200*Math.pow(2,s);return i&&Ul(i)&&Date.now()+l-n<wn})}catch(n){if(this._debug(r,"error",n),le(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Kt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Ri(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const s=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Ll;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Ll}s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Ul(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new xr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new nl;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new xr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(s,"error",i),le(i)){const l={session:null,error:i};return Ul(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(l),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Wm(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Ai(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Kt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),wn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/wn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${wn}ms, refresh threshold is ${Bo} ticks`),s<=Bo&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Km)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Kt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,l]=await yn(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(o.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await de(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(le(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:l}=r;if(l)return{data:null,error:l};const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await de(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(le(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:l,error:o}=await de(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(r){if(le(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await de(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(le(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(l=>l.factor_type==="totp"&&l.status==="verified"),i=n.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Dl(s.access_token);let o=null;l.aal&&(o=l.aal);let c=o;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=l.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n||(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+uv>Date.now()))return n;const{data:s,error:i}=await de(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new Os("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),n=s.keys.find(l=>l.kid===t),!n)throw new Os("No matching signing key found in JWKS");return n}async getClaims(t,r={keys:[]}){try{let n=t;if(!n){const{data:w,error:b}=await this.getSession();if(b||!w.session)return{data:null,error:b};n=w.session.access_token}const{header:s,payload:i,signature:l,raw:{header:o,payload:c}}=Dl(n);if(Av(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:w}=await this.getUser(n);if(w)throw w;return{data:{claims:i,header:s,signature:l},error:null}}const d=Lv(s.alg),u=await this.fetchJwk(s.kid,r),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,l,wv(`${o}.${c}`)))throw new Os("Invalid JWT signature");return{data:{claims:i,header:s,signature:l},error:null}}catch(n){if(le(n))return{data:null,error:n};throw n}}}ti.nextInstanceID=0;const Jv=ti;class Xv extends Jv{constructor(t){super(t)}}var Yv=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(f){l(f)}}function c(u){try{d(n.throw(u))}catch(f){l(f)}}function d(u){u.done?i(u.value):s(u.value).then(o,c)}d((n=n.apply(e,t||[])).next())})};class Zv{constructor(t,r,n){var s,i,l;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const o=sv(t);this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,d={db:Jx,realtime:Yx,auth:Object.assign(Object.assign({},Xx),{storageKey:c}),global:Qx},u=iv(n??{},d);this.storageKey=(s=u.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=u.auth)!==null&&l!==void 0?l:{},this.headers,u.global.fetch),this.fetch=rv(r,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new yx(`${o}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new Wy(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Hx(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return Yv(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:l,lock:o,debug:c},d,u){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Xv({url:this.authUrl,headers:Object.assign(Object.assign({},f),d),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:l,lock:o,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Rx(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ew=(e,t,r)=>new Zv(e,t,r),tw="https://gtfgvqttfydelzgvgwly.supabase.co",rw="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0Zmd2cXR0ZnlkZWx6Z3Znd2x5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQwMjE0OTEsImV4cCI6MjA1OTU5NzQ5MX0.nBdVMHZ6LJ8ZvdSuXk_uDVMb6DxB5iTeFdc0dM7zolI",V=ew(tw,rw);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var nw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),re=(e,t)=>{const r=x.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:o="",children:c,...d},u)=>x.createElement("svg",{ref:u,...nw,width:s,height:s,stroke:n,strokeWidth:l?Number(i)*24/Number(s):i,className:["lucide",`lucide-${sw(e)}`,o].join(" "),...d},[...t.map(([f,h])=>x.createElement(f,h)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=re("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=re("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=re("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=re("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=re("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=re("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=re("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=re("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=re("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=re("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=re("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=re("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=re("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=re("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=re("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=re("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=re("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=re("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=re("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=re("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=re("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jm=re("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=re("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=re("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=re("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=re("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=re("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=re("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=re("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=re("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=re("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=re("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=re("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Il=re("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xm=re("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym=re("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=re("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=re("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=re("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=re("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=re("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zm=re("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=re("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=re("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=re("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=re("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=re("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=re("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=re("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Tw(){const[e,t]=x.useState(""),[r,n]=x.useState(""),[s,i]=x.useState(""),[l,o]=x.useState(!1),c=Ht(),d=async f=>{f.preventDefault(),i(""),o(!0);try{const{error:h}=await V.auth.signInWithPassword({email:e,password:r});if(h)throw h;c("/profile")}catch(h){console.error("Login error:",h),i(h.message||"Помилка входу")}finally{o(!1)}},u=async()=>{try{const{error:f}=await V.auth.signInWithOAuth({provider:"github",options:{redirectTo:`${window.location.origin}/profile`,queryParams:{access_type:"offline",prompt:"consent"}}});if(f)throw f}catch(f){console.error("GitHub login error:",f),i(f.message||"Помилка входу через GitHub")}};return a.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[a.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Вхід до аккаунту"}),a.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Або"," ",a.jsx(ei,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"створіть новий аккаунт"})]})]}),a.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:a.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[s&&a.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg",children:s}),a.jsxs("button",{onClick:u,className:"w-full flex justify-center items-center gap-2 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-800 hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 mb-6",children:[a.jsx(pw,{size:20}),"Увійти через GitHub"]}),a.jsxs("div",{className:"relative my-6",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Або увійдіть за допомогою email"})})]}),a.jsxs("form",{onSubmit:d,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx(Kc,{className:"absolute left-3 top-3 text-gray-400",size:20}),a.jsx("input",{id:"email",type:"email",value:e,onChange:f=>t(f.target.value),className:"appearance-none block w-full px-10 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Введіть email",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Пароль"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx(pr,{className:"absolute left-3 top-3 text-gray-400",size:20}),a.jsx("input",{id:"password",type:"password",value:r,onChange:f=>n(f.target.value),className:"appearance-none block w-full px-10 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Введіть пароль",required:!0})]})]}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Завантаження...":"Увійти"})})]})]})})]})}function Ow(){const[e,t]=x.useState(""),[r,n]=x.useState(""),[s,i]=x.useState(""),[l,o]=x.useState(""),[c,d]=x.useState(""),[u,f]=x.useState(!1),h=Ht(),w=async b=>{b.preventDefault(),d(""),f(!0);try{const{data:j,error:k}=await V.auth.signUp({email:s,password:l});if(k)throw k;if(j.user){const{error:p}=await V.from("users").insert([{auth_user_id:j.user.id,name:e,lastName:r,email:s,date:new Date().toISOString()}]);if(p)throw p;h("/profile/confirm")}}catch(j){console.error("Registration error:",j),d(j.message||"Помилка реєстрації")}finally{f(!1)}};return a.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[a.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Створення нового аккаунту"}),a.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Або"," ",a.jsx(ei,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"увійдіть в існуючий аккаунт"})]})]}),a.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:a.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[c&&a.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg",children:c}),a.jsxs("form",{onSubmit:w,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Ім'я"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx(Ho,{className:"absolute left-3 top-3 text-gray-400",size:20}),a.jsx("input",{id:"name",type:"text",value:e,onChange:b=>t(b.target.value),className:"appearance-none block w-full px-10 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Введіть ім'я",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:"Прізвище"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx(Ho,{className:"absolute left-3 top-3 text-gray-400",size:20}),a.jsx("input",{id:"lastName",type:"text",value:r,onChange:b=>n(b.target.value),className:"appearance-none block w-full px-10 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Введіть прізвище",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx(Kc,{className:"absolute left-3 top-3 text-gray-400",size:20}),a.jsx("input",{id:"email",type:"email",value:s,onChange:b=>i(b.target.value),className:"appearance-none block w-full px-10 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Введіть email",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Пароль"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx(pr,{className:"absolute left-3 top-3 text-gray-400",size:20}),a.jsx("input",{id:"password",type:"password",value:l,onChange:b=>o(b.target.value),className:"appearance-none block w-full px-10 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Введіть пароль",required:!0,minLength:6})]})]}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:u,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Завантаження...":"Зареєструватися"})})]})]})})]})}function Ve(){const e=Ht(),t=async()=>{try{const{error:r}=await V.auth.signOut();if(r)throw r;e("/login")}catch(r){console.error("Error logging out:",r)}};return a.jsxs("div",{className:"w-64 bg-white h-screen fixed left-0 top-0 border-r border-gray-200",children:[a.jsx("div",{className:"p-4",children:a.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Соціальна мережа"})}),a.jsxs("nav",{className:"mt-8",children:[a.jsxs(Kr,{to:"/profile",className:({isActive:r})=>`flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 ${r?"bg-gray-100":""}`,children:[a.jsx(ka,{className:"w-5 h-5 mr-3"}),"Профіль"]}),a.jsxs(Kr,{to:"/people",className:({isActive:r})=>`flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 ${r?"bg-gray-100":""}`,children:[a.jsx(Ir,{className:"w-5 h-5 mr-3"}),"Люди"]}),a.jsxs(Kr,{to:"/users",className:({isActive:r})=>`flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 ${r?"bg-gray-100":""}`,children:[a.jsx(Ir,{className:"w-5 h-5 mr-3"}),"Користувачі"]}),a.jsxs(Kr,{to:"/messages",className:({isActive:r})=>`flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 ${r?"bg-gray-100":""}`,children:[a.jsx(ur,{className:"w-5 h-5 mr-3"}),"Повідомлення"]}),a.jsxs(Kr,{to:"/friends",className:({isActive:r})=>`flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 ${r?"bg-gray-100":""}`,children:[a.jsx(Ir,{className:"w-5 h-5 mr-3"}),"Друзі"]}),a.jsxs(Kr,{to:"/groups",className:({isActive:r})=>`flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 ${r?"bg-gray-100":""}`,children:[a.jsx(Ew,{className:"w-5 h-5 mr-3"}),"Групи"]}),a.jsxs(Kr,{to:"/settings",className:({isActive:r})=>`flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 ${r?"bg-gray-100":""}`,children:[a.jsx(Qc,{className:"w-5 h-5 mr-3"}),"Налаштування"]})]}),a.jsx("div",{className:"absolute bottom-0 w-full p-4 border-t border-gray-200",children:a.jsxs("button",{onClick:t,className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 w-full",children:[a.jsx(vw,{className:"w-5 h-5 mr-3"}),"Вийти"]})})]})}class Ft{static async getCurrentUserProfile(){try{const{data:{user:t}}=await V.auth.getUser();if(!(t!=null&&t.email))return console.log("No authenticated user found"),null;const{data:r,error:n}=await V.from("users").select("*").eq("email",t.email).single();return n?n.code==="PGRST116"?await this.createUserProfile(t):(console.error("Error fetching user profile:",n),null):r}catch(t){return console.error("Error getting current user profile:",t),null}}static async createUserProfile(t){var r,n,s,i,l,o;try{const c={email:t.email,name:((r=t.user_metadata)==null?void 0:r.name)||((s=(n=t.user_metadata)==null?void 0:n.full_name)==null?void 0:s.split(" ")[0])||t.email.split("@")[0]||"User",lastName:((i=t.user_metadata)==null?void 0:i.lastName)||((o=(l=t.user_metadata)==null?void 0:l.full_name)==null?void 0:o.split(" ").slice(1).join(" "))||"",date:new Date().toISOString(),notifications:{email:!0,messages:!0,friendRequests:!0},privacy:{profileVisibility:"public",showBirthDate:!0,showEmail:!1}},{data:d,error:u}=await V.from("users").insert([c]).select().single();return u?(console.error("Error creating user profile:",u),null):d}catch(c){return console.error("Error creating user profile:",c),null}}static async searchUsers(t){try{if(t.length<2)return[];const{data:r,error:n}=await V.from("users").select("id, name, lastName, avatar, email").or(`name.ilike.%${t}%, lastName.ilike.%${t}%`).limit(10);if(n)throw n;return r||[]}catch(r){return console.error("Error searching users:",r),[]}}static async getUserFriends(){try{const t=await this.getCurrentUserProfile();if(!t)return[];const{data:r,error:n}=await V.from("friends").select(`
          friend_id,
          friend:users!friend_id (
            id,
            name,
            lastName,
            avatar,
            email
          )
        `).eq("user_id",t.id);if(n)throw n;return(r==null?void 0:r.map(s=>s.friend).filter(Boolean))||[]}catch(t){return console.error("Error fetching friends:",t),[]}}static async addFriend(t){try{const r=await this.getCurrentUserProfile();if(!r)return!1;const{error:n}=await V.from("friends").insert([{user_id:r.id,friend_id:t}]);if(n)throw n;return!0}catch(r){return console.error("Error adding friend:",r),!1}}static async updateUserProfile(t){try{const{data:{user:r}}=await V.auth.getUser();if(!(r!=null&&r.email))return!1;const{error:n}=await V.from("users").update(t).eq("email",r.email);if(n)throw n;return!0}catch(r){return console.error("Error updating user profile:",r),!1}}static async getUserMedia(){try{const t=await this.getCurrentUserProfile();if(!t)return[];const{data:r,error:n}=await V.from("media").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});if(n)throw n;return r||[]}catch(t){return console.error("Error loading media:",t),[]}}static async createPost(t,r){try{const n=await this.getCurrentUserProfile();if(!n)return!1;const{error:s}=await V.from("posts").insert([{user_id:n.id,content:t,images:r,created_at:new Date().toISOString()}]);if(s)throw s;return!0}catch(n){return console.error("Error creating post:",n),!1}}}const Fd=[{name:"Оригінал",filter:"none",css:""},{name:"Сепія",filter:"sepia",css:"sepia(100%)"},{name:"Ч/Б",filter:"grayscale",css:"grayscale(100%)"},{name:"Інверсія",filter:"invert",css:"invert(100%)"},{name:"Яскравість",filter:"brightness",css:"brightness(150%)"},{name:"Контраст",filter:"contrast",css:"contrast(150%)"},{name:"Насиченість",filter:"saturate",css:"saturate(200%)"},{name:"Розмиття",filter:"blur",css:"blur(2px)"},{name:"Тепло",filter:"warm",css:"sepia(30%) saturate(120%) brightness(110%)"},{name:"Холод",filter:"cool",css:"hue-rotate(180deg) saturate(120%)"},{name:"Вінтаж",filter:"vintage",css:"sepia(50%) contrast(120%) brightness(90%)"},{name:"Драма",filter:"dramatic",css:"contrast(150%) brightness(90%) saturate(150%)"}];function Rw({imageUrl:e,onApplyFilter:t,onClose:r}){const n=x.useRef(null),[s,i]=x.useState("none"),[l,o]=x.useState(100),[c,d]=x.useState(100),[u,f]=x.useState(100),[h,w]=x.useState(0),[b,j]=x.useState(0),[k,p]=x.useState(0),m=()=>`
      brightness(${l}%) 
      contrast(${c}%) 
      saturate(${u}%) 
      blur(${h}px) 
      sepia(${b}%) 
      grayscale(${k}%)
    `.trim(),g=()=>{if(s==="custom")return m();const _=Fd.find(C=>C.filter===s);return _?_.css:""},N=async _=>{const C=n.current;if(!C)return null;const L=C.getContext("2d");return L?new Promise(O=>{const H=new Image;H.crossOrigin="anonymous",H.onload=()=>{C.width=H.width,C.height=H.height,L.filter=_,L.drawImage(H,0,0);const W=C.toDataURL("image/jpeg",.9);O(W)},H.src=e}):null},P=async()=>{const _=g(),C=await N(_);C&&t(C)},I=()=>{i("none"),o(100),d(100),f(100),w(0),j(0),p(0)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl mx-4 max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Редагування фото"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("button",{onClick:I,className:"flex items-center px-3 py-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg",children:[a.jsx(Xm,{size:18,className:"mr-1"}),"Скинути"]}),a.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:"✕"})]})]}),a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-1 bg-gray-100 p-6 flex items-center justify-center",children:a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:e,alt:"Preview",className:"max-w-full max-h-96 object-contain rounded-lg",style:{filter:g()}}),a.jsx("canvas",{ref:n,className:"hidden"})]})}),a.jsxs("div",{className:"w-80 border-l border-gray-200 bg-gray-50 overflow-y-auto",children:[a.jsxs("div",{className:"p-4 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Фільтри"}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:Fd.map(_=>a.jsxs("button",{onClick:()=>i(_.filter),className:`relative p-2 rounded-lg border-2 transition-colors ${s===_.filter?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[a.jsx("div",{className:"w-full h-16 bg-gray-200 rounded mb-1 overflow-hidden",children:a.jsx("img",{src:e,alt:_.name,className:"w-full h-full object-cover",style:{filter:_.css}})}),a.jsx("span",{className:"text-xs text-gray-700",children:_.name}),s===_.filter&&a.jsx("div",{className:"absolute top-1 right-1 w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:a.jsx(uw,{size:12,className:"text-white"})})]},_.filter))})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Налаштування"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Яскравість: ",l,"%"]}),a.jsx("input",{type:"range",min:"50",max:"200",value:l,onChange:_=>{o(Number(_.target.value)),i("custom")},className:"w-full"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Контраст: ",c,"%"]}),a.jsx("input",{type:"range",min:"50",max:"200",value:c,onChange:_=>{d(Number(_.target.value)),i("custom")},className:"w-full"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Насиченість: ",u,"%"]}),a.jsx("input",{type:"range",min:"0",max:"300",value:u,onChange:_=>{f(Number(_.target.value)),i("custom")},className:"w-full"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Розмиття: ",h,"px"]}),a.jsx("input",{type:"range",min:"0",max:"10",value:h,onChange:_=>{w(Number(_.target.value)),i("custom")},className:"w-full"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Сепія: ",b,"%"]}),a.jsx("input",{type:"range",min:"0",max:"100",value:b,onChange:_=>{j(Number(_.target.value)),i("custom")},className:"w-full"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Ч/Б: ",k,"%"]}),a.jsx("input",{type:"range",min:"0",max:"100",value:k,onChange:_=>{p(Number(_.target.value)),i("custom")},className:"w-full"})]})]})]})]}),a.jsx("div",{className:"border-t border-gray-200 p-4",children:a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Скасувати"}),a.jsx("button",{onClick:P,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Застосувати"})]})})]})]})]})})}var di=e=>e.type==="checkbox",nn=e=>e instanceof Date,st=e=>e==null;const ep=e=>typeof e=="object";var Re=e=>!st(e)&&!Array.isArray(e)&&ep(e)&&!nn(e),Aw=e=>Re(e)&&e.target?di(e.target)?e.target.checked:e.target.value:e,Lw=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,$w=(e,t)=>e.has(Lw(t)),Uw=e=>{const t=e.constructor&&e.constructor.prototype;return Re(t)&&t.hasOwnProperty("isPrototypeOf")},Yc=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Fe(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(Yc&&(e instanceof Blob||n))&&(r||Re(e)))if(t=r?[]:{},!r&&!Uw(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=Fe(e[s]));else return e;return t}var sl=e=>/^\w*$/.test(e),$e=e=>e===void 0,Zc=e=>Array.isArray(e)?e.filter(Boolean):[],eu=e=>Zc(e.replace(/["|']|\]/g,"").split(/\.|\[/)),X=(e,t,r)=>{if(!t||!Re(e))return r;const n=(sl(t)?[t]:eu(t)).reduce((s,i)=>st(s)?s:s[i],e);return $e(n)||n===e?$e(e[t])?r:e[t]:n},Jt=e=>typeof e=="boolean",_e=(e,t,r)=>{let n=-1;const s=sl(t)?[t]:eu(t),i=s.length,l=i-1;for(;++n<i;){const o=s[n];let c=r;if(n!==l){const d=e[o];c=Re(d)||Array.isArray(d)?d:isNaN(+s[n+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;e[o]=c,e=e[o]}};const Md={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Mt={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},rr={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Dw=St.createContext(null);Dw.displayName="HookFormContext";var zw=(e,t,r,n=!0)=>{const s={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(s,i,{get:()=>{const l=i;return t._proxyFormState[l]!==Mt.all&&(t._proxyFormState[l]=!n||Mt.all),e[l]}});return s};const Iw=typeof window<"u"?x.useLayoutEffect:x.useEffect;var Yt=e=>typeof e=="string",Fw=(e,t,r,n,s)=>Yt(e)?(n&&t.watch.add(e),X(r,e,s)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),X(r,i))):(n&&(t.watchAll=!0),r),Mw=(e,t,r,n,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:s||!0}}:{},As=e=>Array.isArray(e)?e:[e],Bd=()=>{let e=[];return{get observers(){return e},next:s=>{for(const i of e)i.next&&i.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(i=>i!==s)}}),unsubscribe:()=>{e=[]}}},Wo=e=>st(e)||!ep(e);function Sr(e,t,r=new WeakSet){if(Wo(e)||Wo(t))return e===t;if(nn(e)&&nn(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of n){const l=e[i];if(!s.includes(i))return!1;if(i!=="ref"){const o=t[i];if(nn(l)&&nn(o)||Re(l)&&Re(o)||Array.isArray(l)&&Array.isArray(o)?!Sr(l,o,r):l!==o)return!1}}return!0}var ct=e=>Re(e)&&!Object.keys(e).length,tu=e=>e.type==="file",Bt=e=>typeof e=="function",Pa=e=>{if(!Yc)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},tp=e=>e.type==="select-multiple",ru=e=>e.type==="radio",Bw=e=>ru(e)||di(e),Fl=e=>Pa(e)&&e.isConnected;function Vw(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=$e(e)?n++:e[t[n++]];return e}function qw(e){for(const t in e)if(e.hasOwnProperty(t)&&!$e(e[t]))return!1;return!0}function Le(e,t){const r=Array.isArray(t)?t:sl(t)?[t]:eu(t),n=r.length===1?e:Vw(e,r),s=r.length-1,i=r[s];return n&&delete n[i],s!==0&&(Re(n)&&ct(n)||Array.isArray(n)&&qw(n))&&Le(e,r.slice(0,-1)),e}var rp=e=>{for(const t in e)if(Bt(e[t]))return!0;return!1};function Ta(e,t={}){const r=Array.isArray(e);if(Re(e)||r)for(const n in e)Array.isArray(e[n])||Re(e[n])&&!rp(e[n])?(t[n]=Array.isArray(e[n])?[]:{},Ta(e[n],t[n])):st(e[n])||(t[n]=!0);return t}function np(e,t,r){const n=Array.isArray(e);if(Re(e)||n)for(const s in e)Array.isArray(e[s])||Re(e[s])&&!rp(e[s])?$e(t)||Wo(r[s])?r[s]=Array.isArray(e[s])?Ta(e[s],[]):{...Ta(e[s])}:np(e[s],st(t)?{}:t[s],r[s]):r[s]=!Sr(e[s],t[s]);return r}var ms=(e,t)=>np(e,t,Ta(t));const Vd={value:!1,isValid:!1},qd={value:!0,isValid:!0};var sp=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!$e(e[0].attributes.value)?$e(e[0].value)||e[0].value===""?qd:{value:e[0].value,isValid:!0}:qd:Vd}return Vd},ip=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>$e(e)?e:t?e===""?NaN:e&&+e:r&&Yt(e)?new Date(e):n?n(e):e;const Gd={isValid:!1,value:null};var ap=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,Gd):Gd;function Hd(e){const t=e.ref;return tu(t)?t.files:ru(t)?ap(e.refs).value:tp(t)?[...t.selectedOptions].map(({value:r})=>r):di(t)?sp(e.refs).value:ip($e(t.value)?e.ref.value:t.value,e)}var Gw=(e,t,r,n)=>{const s={};for(const i of e){const l=X(t,i);l&&_e(s,i,l._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}},Oa=e=>e instanceof RegExp,ps=e=>$e(e)?e:Oa(e)?e.source:Re(e)?Oa(e.value)?e.value.source:e.value:e,Wd=e=>({isOnSubmit:!e||e===Mt.onSubmit,isOnBlur:e===Mt.onBlur,isOnChange:e===Mt.onChange,isOnAll:e===Mt.all,isOnTouch:e===Mt.onTouched});const Kd="AsyncFunction";var Hw=e=>!!e&&!!e.validate&&!!(Bt(e.validate)&&e.validate.constructor.name===Kd||Re(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Kd)),Ww=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Qd=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const Ls=(e,t,r,n)=>{for(const s of r||Object.keys(e)){const i=X(e,s);if(i){const{_f:l,...o}=i;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],s)&&!n)return!0;if(l.ref&&t(l.ref,l.name)&&!n)return!0;if(Ls(o,t))break}else if(Re(o)&&Ls(o,t))break}}};function Jd(e,t,r){const n=X(e,r);if(n||sl(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const i=s.join("."),l=X(t,i),o=X(e,i);if(l&&!Array.isArray(l)&&r!==i)return{name:r};if(o&&o.type)return{name:i,error:o};if(o&&o.root&&o.root.type)return{name:`${i}.root`,error:o.root};s.pop()}return{name:r}}var Kw=(e,t,r,n)=>{r(e);const{name:s,...i}=e;return ct(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(l=>t[l]===(!n||Mt.all))},Qw=(e,t,r)=>!e||!t||e===t||As(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),Jw=(e,t,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:(r?n.isOnChange:s.isOnChange)?e:!0,Xw=(e,t)=>!Zc(X(e,t)).length&&Le(e,t),Yw=(e,t,r)=>{const n=As(X(e,r));return _e(n,"root",t[r]),_e(e,r,n),e},Ki=e=>Yt(e);function Xd(e,t,r="validate"){if(Ki(e)||Array.isArray(e)&&e.every(Ki)||Jt(e)&&!e)return{type:r,message:Ki(e)?e:"",ref:t}}var vn=e=>Re(e)&&!Oa(e)?e:{value:e,message:""},Yd=async(e,t,r,n,s,i)=>{const{ref:l,refs:o,required:c,maxLength:d,minLength:u,min:f,max:h,pattern:w,validate:b,name:j,valueAsNumber:k,mount:p}=e._f,m=X(r,j);if(!p||t.has(j))return{};const g=o?o[0]:l,N=W=>{s&&g.reportValidity&&(g.setCustomValidity(Jt(W)?"":W||""),g.reportValidity())},P={},I=ru(l),_=di(l),C=I||_,L=(k||tu(l))&&$e(l.value)&&$e(m)||Pa(l)&&l.value===""||m===""||Array.isArray(m)&&!m.length,O=Mw.bind(null,j,n,P),H=(W,Y,F,ce=rr.maxLength,oe=rr.minLength)=>{const pe=W?Y:F;P[j]={type:W?ce:oe,message:pe,ref:l,...O(W?ce:oe,pe)}};if(i?!Array.isArray(m)||!m.length:c&&(!C&&(L||st(m))||Jt(m)&&!m||_&&!sp(o).isValid||I&&!ap(o).isValid)){const{value:W,message:Y}=Ki(c)?{value:!!c,message:c}:vn(c);if(W&&(P[j]={type:rr.required,message:Y,ref:g,...O(rr.required,Y)},!n))return N(Y),P}if(!L&&(!st(f)||!st(h))){let W,Y;const F=vn(h),ce=vn(f);if(!st(m)&&!isNaN(m)){const oe=l.valueAsNumber||m&&+m;st(F.value)||(W=oe>F.value),st(ce.value)||(Y=oe<ce.value)}else{const oe=l.valueAsDate||new Date(m),pe=ee=>new Date(new Date().toDateString()+" "+ee),M=l.type=="time",J=l.type=="week";Yt(F.value)&&m&&(W=M?pe(m)>pe(F.value):J?m>F.value:oe>new Date(F.value)),Yt(ce.value)&&m&&(Y=M?pe(m)<pe(ce.value):J?m<ce.value:oe<new Date(ce.value))}if((W||Y)&&(H(!!W,F.message,ce.message,rr.max,rr.min),!n))return N(P[j].message),P}if((d||u)&&!L&&(Yt(m)||i&&Array.isArray(m))){const W=vn(d),Y=vn(u),F=!st(W.value)&&m.length>+W.value,ce=!st(Y.value)&&m.length<+Y.value;if((F||ce)&&(H(F,W.message,Y.message),!n))return N(P[j].message),P}if(w&&!L&&Yt(m)){const{value:W,message:Y}=vn(w);if(Oa(W)&&!m.match(W)&&(P[j]={type:rr.pattern,message:Y,ref:l,...O(rr.pattern,Y)},!n))return N(Y),P}if(b){if(Bt(b)){const W=await b(m,r),Y=Xd(W,g);if(Y&&(P[j]={...Y,...O(rr.validate,Y.message)},!n))return N(Y.message),P}else if(Re(b)){let W={};for(const Y in b){if(!ct(W)&&!n)break;const F=Xd(await b[Y](m,r),g,Y);F&&(W={...F,...O(Y,F.message)},N(F.message),n&&(P[j]=W))}if(!ct(W)&&(P[j]={ref:g,...W},!n))return P}}return N(!0),P};const Zw={mode:Mt.onSubmit,reValidateMode:Mt.onChange,shouldFocusError:!0};function e1(e={}){let t={...Zw,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Bt(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},s=Re(t.defaultValues)||Re(t.values)?Fe(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Fe(s),l={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...u};const h={array:Bd(),state:Bd()},w=t.criteriaMode===Mt.all,b=v=>E=>{clearTimeout(d),d=setTimeout(v,E)},j=async v=>{if(!t.disabled&&(u.isValid||f.isValid||v)){const E=t.resolver?ct((await _()).errors):await L(n,!0);E!==r.isValid&&h.state.next({isValid:E})}},k=(v,E)=>{!t.disabled&&(u.isValidating||u.validatingFields||f.isValidating||f.validatingFields)&&((v||Array.from(o.mount)).forEach(R=>{R&&(E?_e(r.validatingFields,R,E):Le(r.validatingFields,R))}),h.state.next({validatingFields:r.validatingFields,isValidating:!ct(r.validatingFields)}))},p=(v,E=[],R,q,B=!0,z=!0)=>{if(q&&R&&!t.disabled){if(l.action=!0,z&&Array.isArray(X(n,v))){const Z=R(X(n,v),q.argA,q.argB);B&&_e(n,v,Z)}if(z&&Array.isArray(X(r.errors,v))){const Z=R(X(r.errors,v),q.argA,q.argB);B&&_e(r.errors,v,Z),Xw(r.errors,v)}if((u.touchedFields||f.touchedFields)&&z&&Array.isArray(X(r.touchedFields,v))){const Z=R(X(r.touchedFields,v),q.argA,q.argB);B&&_e(r.touchedFields,v,Z)}(u.dirtyFields||f.dirtyFields)&&(r.dirtyFields=ms(s,i)),h.state.next({name:v,isDirty:H(v,E),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else _e(i,v,E)},m=(v,E)=>{_e(r.errors,v,E),h.state.next({errors:r.errors})},g=v=>{r.errors=v,h.state.next({errors:r.errors,isValid:!1})},N=(v,E,R,q)=>{const B=X(n,v);if(B){const z=X(i,v,$e(R)?X(s,v):R);$e(z)||q&&q.defaultChecked||E?_e(i,v,E?z:Hd(B._f)):F(v,z),l.mount&&j()}},P=(v,E,R,q,B)=>{let z=!1,Z=!1;const A={name:v};if(!t.disabled){if(!R||q){(u.isDirty||f.isDirty)&&(Z=r.isDirty,r.isDirty=A.isDirty=H(),z=Z!==A.isDirty);const K=Sr(X(s,v),E);Z=!!X(r.dirtyFields,v),K?Le(r.dirtyFields,v):_e(r.dirtyFields,v,!0),A.dirtyFields=r.dirtyFields,z=z||(u.dirtyFields||f.dirtyFields)&&Z!==!K}if(R){const K=X(r.touchedFields,v);K||(_e(r.touchedFields,v,R),A.touchedFields=r.touchedFields,z=z||(u.touchedFields||f.touchedFields)&&K!==R)}z&&B&&h.state.next(A)}return z?A:{}},I=(v,E,R,q)=>{const B=X(r.errors,v),z=(u.isValid||f.isValid)&&Jt(E)&&r.isValid!==E;if(t.delayError&&R?(c=b(()=>m(v,R)),c(t.delayError)):(clearTimeout(d),c=null,R?_e(r.errors,v,R):Le(r.errors,v)),(R?!Sr(B,R):B)||!ct(q)||z){const Z={...q,...z&&Jt(E)?{isValid:E}:{},errors:r.errors,name:v};r={...r,...Z},h.state.next(Z)}},_=async v=>{k(v,!0);const E=await t.resolver(i,t.context,Gw(v||o.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return k(v),E},C=async v=>{const{errors:E}=await _(v);if(v)for(const R of v){const q=X(E,R);q?_e(r.errors,R,q):Le(r.errors,R)}else r.errors=E;return E},L=async(v,E,R={valid:!0})=>{for(const q in v){const B=v[q];if(B){const{_f:z,...Z}=B;if(z){const A=o.array.has(z.name),K=B._f&&Hw(B._f);K&&u.validatingFields&&k([q],!0);const y=await Yd(B,o.disabled,i,w,t.shouldUseNativeValidation&&!E,A);if(K&&u.validatingFields&&k([q]),y[z.name]&&(R.valid=!1,E))break;!E&&(X(y,z.name)?A?Yw(r.errors,y,z.name):_e(r.errors,z.name,y[z.name]):Le(r.errors,z.name))}!ct(Z)&&await L(Z,E,R)}}return R.valid},O=()=>{for(const v of o.unMount){const E=X(n,v);E&&(E._f.refs?E._f.refs.every(R=>!Fl(R)):!Fl(E._f.ref))&&ae(v)}o.unMount=new Set},H=(v,E)=>!t.disabled&&(v&&E&&_e(i,v,E),!Sr(ee(),s)),W=(v,E,R)=>Fw(v,o,{...l.mount?i:$e(E)?s:Yt(v)?{[v]:E}:E},R,E),Y=v=>Zc(X(l.mount?i:s,v,t.shouldUnregister?X(s,v,[]):[])),F=(v,E,R={})=>{const q=X(n,v);let B=E;if(q){const z=q._f;z&&(!z.disabled&&_e(i,v,ip(E,z)),B=Pa(z.ref)&&st(E)?"":E,tp(z.ref)?[...z.ref.options].forEach(Z=>Z.selected=B.includes(Z.value)):z.refs?di(z.ref)?z.refs.forEach(Z=>{(!Z.defaultChecked||!Z.disabled)&&(Array.isArray(B)?Z.checked=!!B.find(A=>A===Z.value):Z.checked=B===Z.value||!!B)}):z.refs.forEach(Z=>Z.checked=Z.value===B):tu(z.ref)?z.ref.value="":(z.ref.value=B,z.ref.type||h.state.next({name:v,values:Fe(i)})))}(R.shouldDirty||R.shouldTouch)&&P(v,B,R.shouldTouch,R.shouldDirty,!0),R.shouldValidate&&J(v)},ce=(v,E,R)=>{for(const q in E){if(!E.hasOwnProperty(q))return;const B=E[q],z=v+"."+q,Z=X(n,z);(o.array.has(v)||Re(B)||Z&&!Z._f)&&!nn(B)?ce(z,B,R):F(z,B,R)}},oe=(v,E,R={})=>{const q=X(n,v),B=o.array.has(v),z=Fe(E);_e(i,v,z),B?(h.array.next({name:v,values:Fe(i)}),(u.isDirty||u.dirtyFields||f.isDirty||f.dirtyFields)&&R.shouldDirty&&h.state.next({name:v,dirtyFields:ms(s,i),isDirty:H(v,z)})):q&&!q._f&&!st(z)?ce(v,z,R):F(v,z,R),Qd(v,o)&&h.state.next({...r}),h.state.next({name:l.mount?v:void 0,values:Fe(i)})},pe=async v=>{l.mount=!0;const E=v.target;let R=E.name,q=!0;const B=X(n,R),z=K=>{q=Number.isNaN(K)||nn(K)&&isNaN(K.getTime())||Sr(K,X(i,R,K))},Z=Wd(t.mode),A=Wd(t.reValidateMode);if(B){let K,y;const T=E.type?Hd(B._f):Aw(v),G=v.type===Md.BLUR||v.type===Md.FOCUS_OUT,he=!Ww(B._f)&&!t.resolver&&!X(r.errors,R)&&!B._f.deps||Jw(G,X(r.touchedFields,R),r.isSubmitted,A,Z),rt=Qd(R,o,G);_e(i,R,T),G?(B._f.onBlur&&B._f.onBlur(v),c&&c(0)):B._f.onChange&&B._f.onChange(v);const gt=P(R,T,G),fi=!ct(gt)||rt;if(!G&&h.state.next({name:R,type:v.type,values:Fe(i)}),he)return(u.isValid||f.isValid)&&(t.mode==="onBlur"?G&&j():G||j()),fi&&h.state.next({name:R,...rt?{}:gt});if(!G&&rt&&h.state.next({...r}),t.resolver){const{errors:tr}=await _([R]);if(z(T),q){const lp=Jd(r.errors,n,R),su=Jd(tr,n,lp.name||R);K=su.error,R=su.name,y=ct(tr)}}else k([R],!0),K=(await Yd(B,o.disabled,i,w,t.shouldUseNativeValidation))[R],k([R]),z(T),q&&(K?y=!1:(u.isValid||f.isValid)&&(y=await L(n,!0)));q&&(B._f.deps&&J(B._f.deps),I(R,y,K,gt))}},M=(v,E)=>{if(X(r.errors,E)&&v.focus)return v.focus(),1},J=async(v,E={})=>{let R,q;const B=As(v);if(t.resolver){const z=await C($e(v)?v:B);R=ct(z),q=v?!B.some(Z=>X(z,Z)):R}else v?(q=(await Promise.all(B.map(async z=>{const Z=X(n,z);return await L(Z&&Z._f?{[z]:Z}:Z)}))).every(Boolean),!(!q&&!r.isValid)&&j()):q=R=await L(n);return h.state.next({...!Yt(v)||(u.isValid||f.isValid)&&R!==r.isValid?{}:{name:v},...t.resolver||!v?{isValid:R}:{},errors:r.errors}),E.shouldFocus&&!q&&Ls(n,M,v?B:o.mount),q},ee=v=>{const E={...l.mount?i:s};return $e(v)?E:Yt(v)?X(E,v):v.map(R=>X(E,R))},ne=(v,E)=>({invalid:!!X((E||r).errors,v),isDirty:!!X((E||r).dirtyFields,v),error:X((E||r).errors,v),isValidating:!!X(r.validatingFields,v),isTouched:!!X((E||r).touchedFields,v)}),ie=v=>{v&&As(v).forEach(E=>Le(r.errors,E)),h.state.next({errors:v?r.errors:{}})},Ae=(v,E,R)=>{const q=(X(n,v,{_f:{}})._f||{}).ref,B=X(r.errors,v)||{},{ref:z,message:Z,type:A,...K}=B;_e(r.errors,v,{...K,...E,ref:q}),h.state.next({name:v,errors:r.errors,isValid:!1}),R&&R.shouldFocus&&q&&q.focus&&q.focus()},S=(v,E)=>Bt(v)?h.state.subscribe({next:R=>v(W(void 0,E),R)}):W(v,E,!0),$=v=>h.state.subscribe({next:E=>{Qw(v.name,E.name,v.exact)&&Kw(E,v.formState||u,tt,v.reRenderRoot)&&v.callback({values:{...i},...r,...E})}}).unsubscribe,te=v=>(l.mount=!0,f={...f,...v.formState},$({...v,formState:f})),ae=(v,E={})=>{for(const R of v?As(v):o.mount)o.mount.delete(R),o.array.delete(R),E.keepValue||(Le(n,R),Le(i,R)),!E.keepError&&Le(r.errors,R),!E.keepDirty&&Le(r.dirtyFields,R),!E.keepTouched&&Le(r.touchedFields,R),!E.keepIsValidating&&Le(r.validatingFields,R),!t.shouldUnregister&&!E.keepDefaultValue&&Le(s,R);h.state.next({values:Fe(i)}),h.state.next({...r,...E.keepDirty?{isDirty:H()}:{}}),!E.keepIsValid&&j()},Ee=({disabled:v,name:E})=>{(Jt(v)&&l.mount||v||o.disabled.has(E))&&(v?o.disabled.add(E):o.disabled.delete(E))},Ge=(v,E={})=>{let R=X(n,v);const q=Jt(E.disabled)||Jt(t.disabled);return _e(n,v,{...R||{},_f:{...R&&R._f?R._f:{ref:{name:v}},name:v,mount:!0,...E}}),o.mount.add(v),R?Ee({disabled:Jt(E.disabled)?E.disabled:t.disabled,name:v}):N(v,!0,E.value),{...q?{disabled:E.disabled||t.disabled}:{},...t.progressive?{required:!!E.required,min:ps(E.min),max:ps(E.max),minLength:ps(E.minLength),maxLength:ps(E.maxLength),pattern:ps(E.pattern)}:{},name:v,onChange:pe,onBlur:pe,ref:B=>{if(B){Ge(v,E),R=X(n,v);const z=$e(B.value)&&B.querySelectorAll&&B.querySelectorAll("input,select,textarea")[0]||B,Z=Bw(z),A=R._f.refs||[];if(Z?A.find(K=>K===z):z===R._f.ref)return;_e(n,v,{_f:{...R._f,...Z?{refs:[...A.filter(Fl),z,...Array.isArray(X(s,v))?[{}]:[]],ref:{type:z.type,name:v}}:{ref:z}}}),N(v,!1,void 0,z)}else R=X(n,v,{}),R._f&&(R._f.mount=!1),(t.shouldUnregister||E.shouldUnregister)&&!($w(o.array,v)&&l.action)&&o.unMount.add(v)}}},we=()=>t.shouldFocusError&&Ls(n,M,o.mount),kt=v=>{Jt(v)&&(h.state.next({disabled:v}),Ls(n,(E,R)=>{const q=X(n,R);q&&(E.disabled=q._f.disabled||v,Array.isArray(q._f.refs)&&q._f.refs.forEach(B=>{B.disabled=q._f.disabled||v}))},0,!1))},U=(v,E)=>async R=>{let q;R&&(R.preventDefault&&R.preventDefault(),R.persist&&R.persist());let B=Fe(i);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:z,values:Z}=await _();r.errors=z,B=Fe(Z)}else await L(n);if(o.disabled.size)for(const z of o.disabled)Le(B,z);if(Le(r.errors,"root"),ct(r.errors)){h.state.next({errors:{}});try{await v(B,R)}catch(z){q=z}}else E&&await E({...r.errors},R),we(),setTimeout(we);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ct(r.errors)&&!q,submitCount:r.submitCount+1,errors:r.errors}),q)throw q},se=(v,E={})=>{X(n,v)&&($e(E.defaultValue)?oe(v,Fe(X(s,v))):(oe(v,E.defaultValue),_e(s,v,Fe(E.defaultValue))),E.keepTouched||Le(r.touchedFields,v),E.keepDirty||(Le(r.dirtyFields,v),r.isDirty=E.defaultValue?H(v,Fe(X(s,v))):H()),E.keepError||(Le(r.errors,v),u.isValid&&j()),h.state.next({...r}))},ge=(v,E={})=>{const R=v?Fe(v):s,q=Fe(R),B=ct(v),z=B?s:q;if(E.keepDefaultValues||(s=R),!E.keepValues){if(E.keepDirtyValues){const Z=new Set([...o.mount,...Object.keys(ms(s,i))]);for(const A of Array.from(Z))X(r.dirtyFields,A)?_e(z,A,X(i,A)):oe(A,X(z,A))}else{if(Yc&&$e(v))for(const Z of o.mount){const A=X(n,Z);if(A&&A._f){const K=Array.isArray(A._f.refs)?A._f.refs[0]:A._f.ref;if(Pa(K)){const y=K.closest("form");if(y){y.reset();break}}}}if(E.keepFieldsRef)for(const Z of o.mount)oe(Z,X(z,Z));else n={}}i=t.shouldUnregister?E.keepDefaultValues?Fe(s):{}:Fe(z),h.array.next({values:{...z}}),h.state.next({values:{...z}})}o={mount:E.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!u.isValid||!!E.keepIsValid||!!E.keepDirtyValues,l.watch=!!t.shouldUnregister,h.state.next({submitCount:E.keepSubmitCount?r.submitCount:0,isDirty:B?!1:E.keepDirty?r.isDirty:!!(E.keepDefaultValues&&!Sr(v,s)),isSubmitted:E.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:B?{}:E.keepDirtyValues?E.keepDefaultValues&&i?ms(s,i):r.dirtyFields:E.keepDefaultValues&&v?ms(s,v):E.keepDirty?r.dirtyFields:{},touchedFields:E.keepTouched?r.touchedFields:{},errors:E.keepErrors?r.errors:{},isSubmitSuccessful:E.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},ye=(v,E)=>ge(Bt(v)?v(i):v,E),Je=(v,E={})=>{const R=X(n,v),q=R&&R._f;if(q){const B=q.refs?q.refs[0]:q.ref;B.focus&&(B.focus(),E.shouldSelect&&Bt(B.select)&&B.select())}},tt=v=>{r={...r,...v}},He={control:{register:Ge,unregister:ae,getFieldState:ne,handleSubmit:U,setError:Ae,_subscribe:$,_runSchema:_,_focusError:we,_getWatch:W,_getDirty:H,_setValid:j,_setFieldArray:p,_setDisabledField:Ee,_setErrors:g,_getFieldArray:Y,_reset:ge,_resetDefaultValues:()=>Bt(t.defaultValues)&&t.defaultValues().then(v=>{ye(v,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:O,_disableForm:kt,_subjects:h,_proxyFormState:u,get _fields(){return n},get _formValues(){return i},get _state(){return l},set _state(v){l=v},get _defaultValues(){return s},get _names(){return o},set _names(v){o=v},get _formState(){return r},get _options(){return t},set _options(v){t={...t,...v}}},subscribe:te,trigger:J,register:Ge,handleSubmit:U,watch:S,setValue:oe,getValues:ee,reset:ye,resetField:se,clearErrors:ie,unregister:ae,setError:Ae,setFocus:Je,getFieldState:ne};return{...He,formControl:He}}function t1(e={}){const t=St.useRef(void 0),r=St.useRef(void 0),[n,s]=St.useState({isDirty:!1,isValidating:!1,isLoading:Bt(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Bt(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!Bt(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...o}=e1(e);t.current={...o,formState:n}}const i=t.current.control;return i._options=e,Iw(()=>{const l=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(o=>({...o,isReady:!0})),i._formState.isReady=!0,l},[i]),St.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),St.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),St.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),St.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),St.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==n.isDirty&&i._subjects.state.next({isDirty:l})}},[i,n.isDirty]),St.useEffect(()=>{e.values&&!Sr(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,s(l=>({...l}))):i._resetDefaultValues()},[i,e.values]),St.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=zw(n,i),t.current}function r1(){var E,R,q,B,z,Z;const[e,t]=x.useState(null),[r,n]=x.useState(!0),[s,i]=x.useState([]),[l,o]=x.useState(""),[c,d]=x.useState(!1),[u,f]=x.useState(!1),[h,w]=x.useState(!1);x.useState(!1);const[b,j]=x.useState([]),[k,p]=x.useState([]),[m,g]=x.useState(0),[N,P]=x.useState(!1),[I,_]=x.useState(!1),[C,L]=x.useState(""),[O,H]=x.useState(-1),[W,Y]=x.useState([]),[F,ce]=x.useState([]),oe=x.useRef(null),pe=x.useRef(null),M=Ht(),[J,ee]=x.useState(""),[ne,ie]=x.useState(!1),[Ae,S]=x.useState("photo"),[$,te]=x.useState([{id:"1",author:e||{id:"",name:"User",lastName:"",avatar:""},content:"Мій перший пост! Гарного дня всім!",images:["https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=400&q=80"],created_at:"2024-07-20T10:00:00Z",likes:5,comments:2},{id:"2",author:e||{id:"",name:"User",lastName:"",avatar:""},content:"Відпочинок на природі!",images:["https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=400&q=80","https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?auto=format&fit=crop&w=400&q=80"],created_at:"2024-07-18T15:30:00Z",likes:8,comments:3}]);x.useEffect(()=>{async function A(){try{n(!0),o("");const K=await Ft.getCurrentUserProfile();if(!K){M("/login");return}t(K);const y=await Ft.getUserMedia();i(y);const T=await Ft.getUserFriends();Y(T),ce([{id:1,name:"Frontend Devs",avatar:"",members:12},{id:2,name:"React Ukraine",avatar:"",members:8}])}catch(K){console.error("Error loading profile:",K),o("Помилка завантаження профілю")}finally{n(!1)}}A()},[M]);const ae=A=>{A.preventDefault(),f(!0)},Ee=A=>{A.preventDefault(),f(!1)},Ge=A=>{A.preventDefault(),f(!1);const y=Array.from(A.dataTransfer.files).filter(T=>T.type.startsWith("image/")).slice(0,10);y.length===1?U(y[0]):y.length>1&&kt(y)},we=A=>{var y;const K=(y=A.target.files)==null?void 0:y[0];K&&K.type.startsWith("image/")&&U(K)},kt=A=>{j(A);const K=A.map(y=>URL.createObjectURL(y));p(K),g(0),P(!0)},U=async A=>{w(!0);try{const K=new FileReader;K.onload=async y=>{var G;const T=(G=y.target)==null?void 0:G.result;L(T),H(-1),_(!0),d(!1)},K.readAsDataURL(A)}catch(K){console.error("Error uploading file:",K)}finally{w(!1)}},se=async A=>{if(O===-1)await Ft.updateUserProfile({avatar:A})&&e&&t({...e,avatar:A});else{const K=[...k];K[O]=A,p(K)}_(!1),L(""),H(-1)},ge=A=>{const K=b.filter((T,G)=>G!==A),y=k.filter((T,G)=>G!==A);URL.revokeObjectURL(k[A]),j(K),p(y),m>=y.length&&y.length>0&&g(y.length-1),K.length===0&&P(!1)},ye=()=>{g(A=>(A+1)%k.length)},Je=()=>{g(A=>(A-1+k.length)%k.length)},tt=async()=>{if(!(b.length===0&&!J.trim())){w(!0);try{const A=[];for(const y of b){const T=y.name.split(".").pop(),G=`${e.id}_${Date.now()}_${Math.random().toString(36).substr(2,8)}.${T}`,{data:he,error:rt}=await V.storage.from("post-images").upload(G,y);if(rt)throw rt;const{data:gt}=V.storage.from("post-images").getPublicUrl(G);A.push(gt.publicUrl)}await Ft.createPost(J,A)&&(te([{id:Date.now().toString(),author:e,content:J,images:A,created_at:new Date().toISOString(),likes:0,comments:0},...$]),ee(""),j([]),p([]),P(!1),g(0))}catch(A){console.error("Error creating post:",A),o("Помилка при створенні поста")}finally{w(!1)}}},Ie=A=>A?new Date(A).toLocaleDateString("uk-UA",{day:"numeric",month:"long",year:"numeric"}):"Не вказано";function He({open:A,onClose:K,user:y,onSave:T}){const{register:G,handleSubmit:he,formState:{errors:rt},reset:gt}=t1({defaultValues:y});return x.useEffect(()=>{gt(y)},[y,gt]),A?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("form",{onSubmit:he(T),className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 p-8",children:[a.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Редагувати профіль"}),a.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[a.jsx("input",{...G("name",{required:!0}),placeholder:"Ім'я",className:"border rounded p-2"}),a.jsx("input",{...G("lastName",{required:!0}),placeholder:"Прізвище",className:"border rounded p-2"}),a.jsx("input",{...G("city"),placeholder:"Місто",className:"border rounded p-2"}),a.jsx("input",{...G("familyStatus"),placeholder:"Сімейний стан",className:"border rounded p-2"}),a.jsx("input",{...G("status"),placeholder:"Статус",className:"border rounded p-2"}),a.jsx("input",{...G("phone"),placeholder:"Телефон",className:"border rounded p-2"}),a.jsx("input",{...G("website"),placeholder:"Веб-сайт",className:"border rounded p-2"}),a.jsx("input",{...G("birthDate"),type:"date",placeholder:"День народження",className:"border rounded p-2"})]}),a.jsxs("div",{className:"flex justify-end mt-6 space-x-2",children:[a.jsx("button",{type:"button",onClick:K,className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"Скасувати"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Зберегти"})]})]})}):null}const v=async A=>{t({...e,...A}),ie(!1)};return r?a.jsxs("div",{className:"flex min-h-screen",children:[a.jsx(Ve,{}),a.jsx("div",{className:"flex-1 ml-64 p-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Завантаження профілю..."})]})})]}):l?a.jsxs("div",{className:"flex min-h-screen",children:[a.jsx(Ve,{}),a.jsx("div",{className:"flex-1 ml-64 p-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg",children:l}),a.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Спробувати знову"})]})})]}):!e&&!r?(M("/login"),null):e?a.jsxs("div",{className:"flex min-h-screen bg-gray-100",children:[a.jsx(Ve,{}),a.jsx("div",{className:"flex-1 ml-64",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"relative h-60 bg-gradient-to-r from-blue-400 to-blue-600 rounded-b-2xl shadow-md",children:[a.jsx("img",{src:e.cover||"https://vk.com/images/cover_default.jpg",alt:"Cover",className:"w-full h-60 object-cover rounded-b-2xl",style:{objectPosition:"center"}}),a.jsxs("div",{className:"absolute left-8 -bottom-16 flex items-center space-x-8",children:[a.jsx("div",{className:"w-40 h-40 rounded-full border-4 border-white bg-gray-200 overflow-hidden shadow-lg",children:e.avatar?a.jsx("img",{src:e.avatar,alt:e.name,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-400 to-blue-600",children:a.jsx("span",{className:"text-5xl text-white font-bold",children:((R=(E=e.name)==null?void 0:E[0])==null?void 0:R.toUpperCase())||"?"})})}),a.jsxs("div",{className:"flex flex-col justify-center",children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 whitespace-nowrap",children:[e.name," ",e.lastName]}),a.jsx("div",{className:"text-gray-600 mt-1",children:e.status||"Вітаю у моєму профілі!"}),a.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-2 space-x-4",children:[e.city&&a.jsxs("span",{children:[a.jsx(Jn,{size:14,className:"inline mr-1"}),e.city]}),e.birthDate&&a.jsxs("span",{children:[a.jsx(Na,{size:14,className:"inline mr-1"}),Ie(e.birthDate)]}),e.phone&&a.jsxs("span",{children:[a.jsx(_w,{size:14,className:"inline mr-1"}),e.phone]}),e.website&&a.jsxs("span",{children:[a.jsx(Sa,{size:14,className:"inline mr-1"}),e.website]})]}),a.jsxs("div",{className:"flex space-x-3 mt-4",children:[a.jsx("button",{className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700",children:"Написати"}),a.jsx("button",{className:"px-6 py-2 bg-gray-200 text-gray-800 rounded-lg font-semibold hover:bg-gray-300",children:"Додати у друзі"}),a.jsxs("button",{onClick:()=>ie(!0),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 flex items-center",children:[a.jsx(zd,{size:16,className:"mr-2"}),"Редагувати"]})]})]})]})]}),a.jsx("div",{className:"px-8 pt-28",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-8 mb-8 w-full max-w-2xl mx-auto",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Особиста інформація"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-gray-700 text-lg",children:[a.jsxs("div",{children:[a.jsx("b",{children:"Місто:"})," ",e.city||"Не вказано"]}),a.jsxs("div",{children:[a.jsx("b",{children:"День народження:"})," ",Ie(e.birthDate)]}),a.jsxs("div",{children:[a.jsx("b",{children:"Мова:"})," Українська"]}),a.jsxs("div",{children:[a.jsx("b",{children:"Сімейний стан:"})," ",e.familyStatus||"Не вказано"]}),a.jsxs("div",{children:[a.jsx("b",{children:"Телефон:"})," ",e.phone||"Не вказано"]}),a.jsxs("div",{children:[a.jsx("b",{children:"Веб-сайт:"})," ",e.website||"Не вказано"]})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2 px-8",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 col-span-1",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Друзі (",W.length,")"]}),a.jsx("div",{className:"flex flex-wrap gap-3",children:W.length===0?a.jsx("span",{className:"text-gray-500",children:"Немає друзів"}):W.slice(0,6).map(A=>{var K,y;return a.jsxs("button",{className:"flex flex-col items-center w-16 group",onClick:()=>M(`/profile/${A.id}`),children:[a.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-200 mb-1 group-hover:ring-2 group-hover:ring-blue-500 transition",children:A.avatar?a.jsx("img",{src:A.avatar,alt:A.name,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-400 to-blue-600",children:a.jsx("span",{className:"text-white font-bold",children:((y=(K=A.name)==null?void 0:K[0])==null?void 0:y.toUpperCase())||"?"})})}),a.jsx("span",{className:"text-xs text-gray-700 text-center",children:A.name})]},A.id)})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 col-span-1",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Медіа"}),a.jsxs("div",{className:"mb-2 flex space-x-2",children:[a.jsx("button",{onClick:()=>S("photo"),className:`px-3 py-1 rounded ${Ae==="photo"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"}`,children:"Фото"}),a.jsx("button",{onClick:()=>S("video"),className:`px-3 py-1 rounded ${Ae==="video"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"}`,children:"Відео"}),a.jsx("button",{onClick:()=>S("album"),className:`px-3 py-1 rounded ${Ae==="album"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"}`,children:"Альбоми"})]}),Ae==="photo"&&a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.filter(A=>A.type==="photo").slice(0,6).map(A=>a.jsx("img",{src:A.url,alt:"Фото",className:"w-full h-16 object-cover rounded"},A.id)),s.filter(A=>A.type==="photo").length===0&&a.jsx("span",{className:"text-gray-500 col-span-3",children:"Немає фото"})]}),Ae==="video"&&a.jsx("div",{className:"text-gray-500",children:"Немає відео"}),Ae==="album"&&a.jsx("div",{className:"text-gray-500",children:"Немає альбомів"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mt-8 mx-8",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Групи (",F.length,")"]}),a.jsx("div",{className:"flex flex-wrap gap-4",children:F.length===0?a.jsx("span",{className:"text-gray-500",children:"Немає груп"}):F.map(A=>{var K,y;return a.jsxs("button",{className:"flex flex-col items-center w-20 group",onClick:()=>M(`/group/${A.id}`),children:[a.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-200 mb-1 group-hover:ring-2 group-hover:ring-green-500 transition",children:A.avatar?a.jsx("img",{src:A.avatar,alt:A.name,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-green-400 to-blue-600",children:a.jsx("span",{className:"text-white font-bold",children:((y=(K=A.name)==null?void 0:K[0])==null?void 0:y.toUpperCase())||"?"})})}),a.jsx("span",{className:"text-xs text-gray-700 text-center",children:A.name}),a.jsxs("span",{className:"text-[10px] text-gray-500",children:[A.members," учасників"]})]},A.id)})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mt-8 mx-8",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Стіна"}),a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200",children:e.avatar?a.jsx("img",{src:e.avatar,alt:e.name,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-400 to-blue-600",children:a.jsx("span",{className:"text-white font-bold",children:((B=(q=e.name)==null?void 0:q[0])==null?void 0:B.toUpperCase())||"?"})})}),a.jsx("input",{type:"text",placeholder:"Що у вас нового?",className:"flex-1 px-4 py-2 bg-gray-50 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Опублікувати"})]}),$.length===0?a.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(zd,{className:"text-gray-400",size:24})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"На стіні поки немає жодного запису"}),a.jsx("p",{className:"text-gray-600",children:"Ви можете додати перший запис на стіну"})]}):a.jsx("div",{className:"space-y-6",children:$.map(A=>{var K,y;return a.jsxs("div",{className:"border-b pb-6 last:border-b-0",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gray-200 mr-2",children:A.author.avatar?a.jsx("img",{src:A.author.avatar,alt:A.author.name,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-400 to-blue-600",children:a.jsx("span",{className:"text-white font-bold text-sm",children:((y=(K=A.author.name)==null?void 0:K[0])==null?void 0:y.toUpperCase())||"?"})})}),a.jsxs("span",{className:"font-semibold text-gray-900 mr-2",children:[A.author.name," ",A.author.lastName]}),a.jsx("span",{className:"text-xs text-gray-500",children:Ie(A.created_at)})]}),a.jsx("div",{className:"mb-2 text-gray-800",children:A.content}),A.images.length>0&&a.jsx("div",{className:"grid grid-cols-2 gap-2 mb-2",children:A.images.map((T,G)=>a.jsx("img",{src:T,alt:"post",className:"w-full h-40 object-cover rounded"},G))}),a.jsxs("div",{className:"flex space-x-4 text-gray-500 text-sm",children:[a.jsxs("span",{children:["👍 ",A.likes]}),a.jsxs("span",{children:["💬 ",A.comments]})]})]},A.id)})})]})]})}),c&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Завантажити фото"}),a.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:a.jsx(Tt,{size:24})})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${u?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDragOver:ae,onDragLeave:Ee,onDrop:Ge,children:[a.jsx(Xc,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),a.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"Перетягніть фото сюди"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"або натисніть для вибору файлу"}),a.jsx("button",{onClick:()=>{var A;return(A=oe.current)==null?void 0:A.click()},disabled:h,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:h?"Завантаження...":"Вибрати файл"}),a.jsx("input",{ref:oe,type:"file",accept:"image/*",onChange:we,className:"hidden"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-4 text-center",children:"Підтримуються формати: JPG, PNG, GIF. Максимальний розмір: 10MB"})]})]})}),N&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl mx-4 max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Створити новий пост"}),a.jsx("button",{onClick:()=>{k.forEach(A=>URL.revokeObjectURL(A)),j([]),p([]),P(!1),g(0)},className:"text-gray-400 hover:text-gray-600",children:a.jsx(Tt,{size:24})})]}),a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-1 bg-black relative",children:k.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("img",{src:k[m],alt:`Preview ${m+1}`,className:"w-full h-96 object-contain"}),k.length>1&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:Je,className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-8 h-8 bg-black bg-opacity-50 text-white rounded-full flex items-center justify-center hover:bg-opacity-75",children:a.jsx(dw,{size:20})}),a.jsx("button",{onClick:ye,className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-8 h-8 bg-black bg-opacity-50 text-white rounded-full flex items-center justify-center hover:bg-opacity-75",children:a.jsx(fw,{size:20})})]}),k.length>1&&a.jsxs("div",{className:"absolute top-4 right-4 bg-black bg-opacity-50 text-white px-2 py-1 rounded-full text-sm",children:[m+1," / ",k.length]})]})}),a.jsxs("div",{className:"w-80 border-l border-gray-200",children:[a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gray-200 mr-3",children:e.avatar?a.jsx("img",{src:e.avatar,alt:e.name,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-400 to-blue-600",children:a.jsx("span",{className:"text-white font-bold text-sm",children:((Z=(z=e.name)==null?void 0:z[0])==null?void 0:Z.toUpperCase())||"?"})})}),a.jsxs("span",{className:"font-semibold text-gray-900",children:[e.name," ",e.lastName]})]}),a.jsx("textarea",{placeholder:"Додайте підпис...",className:"w-full h-32 p-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500",maxLength:500,value:J,onChange:A=>ee(A.target.value)}),a.jsxs("div",{className:"mt-4",children:[a.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:["Фото (",b.length,")"]}),a.jsx("div",{className:"grid grid-cols-4 gap-2",children:k.map((A,K)=>a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:A,alt:`Thumbnail ${K+1}`,className:`w-full h-16 object-cover rounded cursor-pointer ${K===m?"ring-2 ring-blue-500":""}`,onClick:()=>g(K)}),a.jsx("button",{onClick:()=>{L(A),H(K),_(!0)},className:"absolute top-1 left-1 w-5 h-5 bg-blue-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(jw,{size:12})}),a.jsx("button",{onClick:()=>ge(K),className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(Tt,{size:12})})]},K))})]}),a.jsx("button",{onClick:()=>{var A;return(A=pe.current)==null?void 0:A.click()},className:"w-full mt-4 py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-gray-400 hover:text-gray-700 transition-colors",children:"+ Додати ще фото"})]}),a.jsx("div",{className:"border-t border-gray-200 p-4",children:a.jsx("button",{onClick:tt,disabled:h||b.length===0,className:"w-full py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Публікація...":"Поділитися"})})]})]})]})}),I&&a.jsx(Rw,{imageUrl:C,onApplyFilter:se,onClose:()=>{_(!1),L(""),H(-1)}}),a.jsx(He,{open:ne,onClose:()=>ie(!1),user:e,onSave:v})]}):a.jsxs("div",{className:"flex min-h-screen",children:[a.jsx(Ve,{}),a.jsx("div",{className:"flex-1 ml-64 p-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-600",children:"Профіль не знайдено"}),a.jsx("button",{onClick:()=>M("/login"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Увійти"})]})})]})}function n1(){return new URLSearchParams(rs().search)}function s1(){var I,_,C;const[e,t]=x.useState([]),[r,n]=x.useState(null),[s,i]=x.useState([]),[l,o]=x.useState(null),[c,d]=x.useState(""),[u,f]=x.useState(!0),[h,w]=x.useState(!1),b=x.useRef(null),j=n1();x.useEffect(()=>{b.current&&b.current.scrollIntoView({behavior:"smooth"})},[s]),x.useEffect(()=>{k()},[]),x.useEffect(()=>{l&&p()},[l]),x.useEffect(()=>{const L=j.get("user");L&&l&&m(L)},[l]);async function k(){const L=await Ft.getCurrentUserProfile();o(L)}async function p(){f(!0);const{data:L,error:O}=await V.from("conversations").select(`
        *,
        participant1:users!conversations_participant1_id_fkey (id, name, lastName, avatar),
        participant2:users!conversations_participant2_id_fkey (id, name, lastName, avatar)
      `).or(`participant1_id.eq.${l.id},participant2_id.eq.${l.id}`).order("updated_at",{ascending:!1});if(O){t([]),f(!1);return}const H=(L||[]).map(W=>{const Y=W.participant1_id===l.id?W.participant2:W.participant1;return{id:W.id,participant:Y,updated_at:W.updated_at}});t(H),f(!1)}async function m(L){let O=e.find(H=>H.participant&&H.participant.id===L);if(!O){const{data:H,error:W}=await V.from("conversations").insert([{participant1_id:l.id,participant2_id:L}]).select(`
          *,
          participant1:users!conversations_participant1_id_fkey (id, name, lastName, avatar),
          participant2:users!conversations_participant2_id_fkey (id, name, lastName, avatar)
        `).single();if(W)return;const Y=H.participant1_id===l.id?H.participant2:H.participant1;O={id:H.id,participant:Y,updated_at:H.updated_at},t(F=>[O,...F])}n(O),g(O.id)}async function g(L){const{data:O,error:H}=await V.from("messages").select("*").eq("conversation_id",L).order("created_at",{ascending:!0});if(H){i([]);return}i(O||[])}async function N(L){n(L),g(L.id)}async function P(L){if(L.preventDefault(),!c.trim()||!r)return;w(!0);const{error:O}=await V.from("messages").insert([{conversation_id:r.id,sender_id:l.id,content:c.trim()}]);w(!1),d(""),O||g(r.id)}return a.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[a.jsx(Ve,{}),a.jsxs("div",{className:"flex-1 ml-64 flex",children:[a.jsxs("div",{className:"w-80 border-r border-gray-200 bg-white flex flex-col",children:[a.jsx("div",{className:"p-4 border-b border-gray-100",children:a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Діалоги"})}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:u?a.jsx("div",{className:"p-4 text-gray-500",children:"Завантаження..."}):e.length===0?a.jsx("div",{className:"p-4 text-gray-500",children:"Немає діалогів"}):e.map(L=>{var O,H,W;return a.jsxs("div",{className:`flex items-center px-4 py-3 cursor-pointer hover:bg-gray-50 ${r&&r.id===L.id?"bg-gray-100":""}`,onClick:()=>N(L),children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 overflow-hidden flex items-center justify-center",children:(O=L.participant)!=null&&O.avatar?a.jsx("img",{src:L.participant.avatar,alt:L.participant.name,className:"w-full h-full object-cover"}):a.jsx(ka,{className:"w-8 h-8 text-gray-400"})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsxs("div",{className:"font-semibold text-gray-900",children:[(H=L.participant)==null?void 0:H.name," ",(W=L.participant)==null?void 0:W.lastName]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Останнє оновлення: ",new Date(L.updated_at).toLocaleString("uk-UA")]})]})]},L.id)})})]}),a.jsx("div",{className:"flex-1 flex flex-col",children:r?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center border-b border-gray-200 px-6 py-4 bg-white",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 overflow-hidden flex items-center justify-center",children:(I=r.participant)!=null&&I.avatar?a.jsx("img",{src:r.participant.avatar,alt:r.participant.name,className:"w-full h-full object-cover"}):a.jsx(ka,{className:"w-7 h-7 text-gray-400"})}),a.jsx("div",{className:"ml-4",children:a.jsxs("div",{className:"font-semibold text-gray-900",children:[(_=r.participant)==null?void 0:_.name," ",(C=r.participant)==null?void 0:C.lastName]})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4 bg-gray-50",children:s.length===0?a.jsx("div",{className:"text-gray-500 text-center mt-8",children:"Немає повідомлень"}):a.jsxs("div",{className:"space-y-4",children:[s.map(L=>a.jsx("div",{className:`flex ${L.sender_id===l.id?"justify-end":"justify-start"}`,children:a.jsxs("div",{className:`max-w-xs px-4 py-2 rounded-lg shadow-sm ${L.sender_id===l.id?"bg-blue-600 text-white":"bg-white text-gray-900 border"}`,children:[L.content,a.jsx("div",{className:"text-xs text-gray-300 mt-1 text-right",children:new Date(L.created_at).toLocaleTimeString("uk-UA",{hour:"2-digit",minute:"2-digit"})})]})},L.id)),a.jsx("div",{ref:b})]})}),a.jsxs("form",{onSubmit:P,className:"flex items-center px-6 py-4 border-t border-gray-200 bg-white",children:[a.jsx("input",{type:"text",value:c,onChange:L=>d(L.target.value),placeholder:"Введіть повідомлення...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:h}),a.jsx("button",{type:"submit",disabled:h||!c.trim(),className:"ml-4 px-4 py-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 disabled:opacity-50",children:a.jsx(Ym,{className:"w-5 h-5"})})]})]}):a.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-400 text-xl",children:"Виберіть діалог для перегляду повідомлень"})})]})]})}function i1(){const[e,t]=x.useState([]),[r,n]=x.useState([]),[s,i]=x.useState(""),[l,o]=x.useState(!0);x.useEffect(()=>{c()},[]);const c=async()=>{try{const{data:{user:f}}=await V.auth.getUser();if(!f)return;const{data:h,error:w}=await V.from("friends").select(`
          friend_id,
          friend:users!friend_id (
            id,
            name,
            lastName,
            avatar
          )
        `).eq("user_id",f.id);if(w)throw w;t((h==null?void 0:h.map(b=>b.friend))||[])}catch(f){console.error("Error fetching friends:",f)}finally{o(!1)}},d=async f=>{if(i(f),f.length<2){n([]);return}try{const{data:h,error:w}=await V.from("users").select("id, name, lastName, avatar").or(`name.ilike.%${f}%, lastName.ilike.%${f}%`).limit(10);if(w)throw w;n(h||[])}catch(h){console.error("Error searching users:",h)}},u=async f=>{try{const{data:{user:h}}=await V.auth.getUser();if(!h)return;const{error:w}=await V.from("friends").insert([{user_id:h.id,friend_id:f}]);if(w)throw w;await c()}catch(h){console.error("Error adding friend:",h)}};return a.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[a.jsx(Ve,{}),a.jsx("div",{className:"flex-1 ml-64 p-8",children:a.jsxs("div",{className:"max-w-3xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Пошук друзів"}),a.jsxs("div",{className:"relative",children:[a.jsx(ui,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),a.jsx("input",{type:"text",placeholder:"Пошук за ім'ям або прізвищем",value:s,onChange:f=>d(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.length>0&&a.jsx("div",{className:"mt-4 bg-white rounded-lg shadow-sm",children:r.map(f=>a.jsxs("div",{className:"flex items-center justify-between p-4 border-b last:border-b-0",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:f.avatar?a.jsx("img",{src:f.avatar,alt:f.name,className:"w-full h-full rounded-full object-cover"}):a.jsx("span",{className:"text-lg text-gray-600",children:f.name[0]})}),a.jsx("div",{className:"ml-3",children:a.jsxs("p",{className:"font-medium text-gray-900",children:[f.name," ",f.lastName]})})]}),a.jsxs("button",{onClick:()=>u(f.id),className:"flex items-center px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Xn,{size:18,className:"mr-1"}),"Додати"]})]},f.id))})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Мої друзі"}),l?a.jsx("div",{className:"text-center py-8",children:"Завантаження..."}):e.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map(f=>a.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm flex items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:f.avatar?a.jsx("img",{src:f.avatar,alt:f.name,className:"w-full h-full rounded-full object-cover"}):a.jsx("span",{className:"text-xl text-gray-600",children:f.name[0]})}),a.jsxs("div",{className:"ml-4",children:[a.jsxs("p",{className:"font-medium text-gray-900",children:[f.name," ",f.lastName]}),a.jsxs("button",{className:"flex items-center text-sm text-blue-600 hover:text-blue-700 mt-1",children:[a.jsx(Wi,{size:16,className:"mr-1"}),"Друзі"]})]})]},f.id))}):a.jsx("div",{className:"text-center py-8 text-gray-600",children:"У вас поки немає друзів"})]})]})})]})}function a1(){const[e,t]=x.useState("profile"),[r,n]=x.useState(!0),s=Ht(),[i,l]=x.useState({name:"",lastName:"",email:"",bio:"",city:"",birthDate:"",notifications:{email:!0,messages:!0,friendRequests:!0},privacy:{profileVisibility:"public",showBirthDate:!0,showEmail:!1},familyStatus:"",status:"",phone:"",website:""});x.useEffect(()=>{o()},[]);const o=async()=>{try{const{data:{user:u},error:f}=await V.auth.getUser();if(f||!u){s("/login");return}const{data:h,error:w}=await V.from("users").select("*").eq("auth_user_id",u.id).single();if(w){console.error("Error fetching user settings:",w);return}l({...i,...h,notifications:h.notifications||i.notifications,privacy:h.privacy||i.privacy})}catch(u){console.error("Error loading user settings:",u)}finally{n(!1)}},c=async u=>{u.preventDefault();try{const{data:{user:f},error:h}=await V.auth.getUser();if(h||!f){s("/login");return}const{error:w}=await V.from("users").update({name:i.name,lastName:i.lastName,bio:i.bio,city:i.city,birthDate:i.birthDate,notifications:i.notifications,privacy:i.privacy,familyStatus:i.familyStatus,status:i.status,phone:i.phone,website:i.website}).eq("auth_user_id",f.id);if(w)throw w;alert("Налаштування збережено успішно")}catch(f){console.error("Error saving settings:",f),alert("Помилка при збереженні налаштувань")}},d=[{id:"profile",label:"Профіль",icon:Ho},{id:"privacy",label:"Приватність",icon:pr},{id:"notifications",label:"Сповіщення",icon:cw}];return r?a.jsxs("div",{className:"flex min-h-screen",children:[a.jsx(Ve,{}),a.jsx("div",{className:"flex-1 ml-64 p-8",children:a.jsx("div",{className:"text-center",children:"Завантаження..."})})]}):a.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[a.jsx(Ve,{}),a.jsx("div",{className:"flex-1 ml-64 p-8",children:a.jsxs("div",{className:"max-w-3xl mx-auto",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Налаштування"}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[a.jsx("div",{className:"flex border-b border-gray-200",children:d.map(({id:u,label:f,icon:h})=>a.jsxs("button",{onClick:()=>t(u),className:`flex items-center px-6 py-3 text-sm font-medium ${e===u?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[a.jsx(h,{size:18,className:"mr-2"}),f]},u))}),a.jsxs("div",{className:"p-6",children:[e==="profile"&&a.jsxs("form",{onSubmit:c,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ім'я"}),a.jsx("input",{type:"text",value:i.name,onChange:u=>l({...i,name:u.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Прізвище"}),a.jsx("input",{type:"text",value:i.lastName,onChange:u=>l({...i,lastName:u.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Місто"}),a.jsx("input",{type:"text",value:i.city||"",onChange:u=>l({...i,city:u.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Сімейний стан"}),a.jsx("input",{type:"text",value:i.familyStatus||"",onChange:u=>l({...i,familyStatus:u.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Статус"}),a.jsx("input",{type:"text",value:i.status||"",onChange:u=>l({...i,status:u.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Телефон"}),a.jsx("input",{type:"text",value:i.phone||"",onChange:u=>l({...i,phone:u.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Веб-сайт"}),a.jsx("input",{type:"text",value:i.website||"",onChange:u=>l({...i,website:u.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Дата народження"}),a.jsx("input",{type:"date",value:i.birthDate||"",onChange:u=>l({...i,birthDate:u.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Про мене"}),a.jsx("textarea",{value:i.bio,onChange:u=>l({...i,bio:u.target.value}),rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Зберегти зміни"})})]}),e==="privacy"&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Налаштування приватності"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Видимість профілю"}),a.jsxs("select",{value:i.privacy.profileVisibility,onChange:u=>l({...i,privacy:{...i.privacy,profileVisibility:u.target.value}}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[a.jsx("option",{value:"public",children:"Публічний"}),a.jsx("option",{value:"friends",children:"Тільки друзі"}),a.jsx("option",{value:"private",children:"Приватний"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Показувати дату народження"}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:i.privacy.showBirthDate,onChange:u=>l({...i,privacy:{...i.privacy,showBirthDate:u.target.checked}}),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Показувати email"}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:i.privacy.showEmail,onChange:u=>l({...i,privacy:{...i.privacy,showEmail:u.target.checked}}),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]})}),e==="notifications"&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Налаштування сповіщень"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Email сповіщення"}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:i.notifications.email,onChange:u=>l({...i,notifications:{...i.notifications,email:u.target.checked}}),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Сповіщення про повідомлення"}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:i.notifications.messages,onChange:u=>l({...i,notifications:{...i.notifications,messages:u.target.checked}}),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Сповіщення про запити в друзі"}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:i.notifications.friendRequests,onChange:u=>l({...i,notifications:{...i.notifications,friendRequests:u.target.checked}}),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]})})]})]})]})})]})}const Li=["Технології","Мистецтво","Спорт","Музика","Освіта","Бізнес","Подорожі","Їжа","Фотографія","Ігри","Книги","Фільми","Наука","Природа","Мода","Здоров'я","Інше"];function l1(){const[e,t]=x.useState([]),[r,n]=x.useState([]),[s,i]=x.useState([]),[l,o]=x.useState([]),[c,d]=x.useState([]),[u,f]=x.useState([]),[h,w]=x.useState([]),[b,j]=x.useState(""),[k,p]=x.useState("explore"),[m,g]=x.useState(!0),[N,P]=x.useState(null),[I,_]=x.useState(!1),[C,L]=x.useState(!1),[O,H]=x.useState(!1),[W,Y]=x.useState("grid"),[F,ce]=x.useState({category:"",memberCount:"all",privacy:"all",activity:"all",sortBy:"activity",sortOrder:"desc",hasAvatar:!1,isVerified:!1}),[oe,pe]=x.useState(new Set),[M,J]=x.useState(!1),ee=Ht(),[ne,ie]=x.useState({name:"",description:"",category:"",isPrivate:!1,avatar:null,cover:null,tags:[],location:"",website:"",rules:[""],contactEmail:""});x.useEffect(()=>{Ae()},[]),x.useEffect(()=>{N&&S()},[N]),x.useEffect(()=>{U()},[b,e,r,s,l,c,F,k]);const Ae=async()=>{try{const{data:{user:y},error:T}=await V.auth.getUser();if(T||!y){ee("/login");return}P(y.id)}catch(y){console.error("Error fetching current user:",y),ee("/login")}},S=async()=>{try{await Promise.all([$(),te(),ae(),Ee(),Ge(),we()])}catch(y){console.error("Error fetching data:",y)}finally{g(!1)}},$=async()=>{try{const{data:y,error:T}=await V.from("groups").select("*").eq("isPrivate",!1).order("createdAt",{ascending:!1});if(T)throw T;const G=(y||[]).map(he=>({...he,memberCount:Math.floor(Math.random()*1e3)+10,postCount:Math.floor(Math.random()*500),category:Li[Math.floor(Math.random()*Li.length)],tags:["react","javascript","frontend"].slice(0,Math.floor(Math.random()*3)+1),isVerified:Math.random()>.8,isActive:Math.random()>.3,lastActivity:new Date(Date.now()-Math.random()*7*24*60*60*1e3).toISOString(),location:Math.random()>.5?"Київ, Україна":void 0,website:Math.random()>.7?"https://example.com":void 0}));t(G)}catch(y){console.error("Error fetching groups:",y),t([])}},te=async()=>{try{if(!N)return;const{data:y,error:T}=await V.from("groups").select("*").eq("creatorId",N).order("createdAt",{ascending:!1});if(T)throw T;n(y||[])}catch(y){console.error("Error fetching my groups:",y),n([])}},ae=async()=>{try{if(!N)return;const{data:y,error:T}=await V.from("group_members").select(`
          groups (*)
        `).eq("userId",N).eq("role","member");if(T)throw T;i((y==null?void 0:y.map(G=>G.groups).filter(Boolean))||[])}catch(y){console.error("Error fetching joined groups:",y),i([])}},Ee=async()=>{try{if(!N)return;const{data:y,error:T}=await V.from("group_members").select(`
          groups (*)
        `).eq("userId",N).in("role",["owner","admin","moderator"]);if(T)throw T;o((y==null?void 0:y.map(G=>G.groups).filter(Boolean))||[])}catch(y){console.error("Error fetching managed groups:",y),o([])}},Ge=async()=>{try{if(!N)return;d([])}catch(y){console.error("Error fetching invitations:",y),d([])}},we=async()=>{try{const{data:y,error:T}=await V.from("group_members").select("*");if(T)throw T;w(y||[])}catch(y){console.error("Error fetching group members:",y),w([])}},kt=()=>{switch(k){case"explore":return e;case"my-groups":return r;case"joined":return s;case"managed":return l;case"invitations":return c;default:return e}},U=()=>{let y=kt();b.trim()!==""&&(y=y.filter(T=>{var G,he,rt;return T.name.toLowerCase().includes(b.toLowerCase())||T.description.toLowerCase().includes(b.toLowerCase())||((G=T.category)==null?void 0:G.toLowerCase().includes(b.toLowerCase()))||((he=T.tags)==null?void 0:he.some(gt=>gt.toLowerCase().includes(b.toLowerCase())))||((rt=T.location)==null?void 0:rt.toLowerCase().includes(b.toLowerCase()))})),F.category&&(y=y.filter(T=>T.category===F.category)),F.memberCount!=="all"&&(y=y.filter(T=>{const G=T.memberCount||0;switch(F.memberCount){case"small":return G<50;case"medium":return G>=50&&G<200;case"large":return G>=200;default:return!0}})),F.privacy!=="all"&&(y=y.filter(T=>F.privacy==="public"?!T.isPrivate:T.isPrivate)),F.activity!=="all"&&(y=y.filter(T=>F.activity==="active"?T.isActive:!T.isActive)),F.hasAvatar&&(y=y.filter(T=>T.avatar)),F.isVerified&&(y=y.filter(T=>T.isVerified)),y.sort((T,G)=>{let he=0;switch(F.sortBy){case"name":he=T.name.localeCompare(G.name);break;case"members":he=(T.memberCount||0)-(G.memberCount||0);break;case"activity":T.isActive&&!G.isActive?he=-1:!T.isActive&&G.isActive?he=1:he=new Date(G.lastActivity||0).getTime()-new Date(T.lastActivity||0).getTime();break;case"created":he=new Date(T.createdAt).getTime()-new Date(G.createdAt).getTime();break;case"popularity":he=(T.memberCount||0)+(T.postCount||0)-((G.memberCount||0)+(G.postCount||0));break}return F.sortOrder==="asc"?he:-he}),f(y)},se=async()=>{if(!(!N||!ne.name.trim())){L(!0);try{const y={name:ne.name.trim(),description:ne.description.trim(),category:ne.category,isPrivate:ne.isPrivate,creatorId:N,createdAt:new Date().toISOString(),tags:ne.tags,location:ne.location.trim()||null,website:ne.website.trim()||null,rules:ne.rules.filter(he=>he.trim()),contactEmail:ne.contactEmail.trim()||null},{data:T,error:G}=await V.from("groups").insert([y]).select().single();if(G)throw G;await V.from("group_members").insert([{groupId:T.id,userId:N,role:"owner",joinedAt:new Date().toISOString(),isActive:!0}]),alert("Групу успішно створено!"),_(!1),E(),S()}catch(y){console.error("Error creating group:",y),alert("Помилка при створенні групи")}finally{L(!1)}}},ge=async y=>{if(N)try{if(h.find(G=>G.groupId===y&&G.userId===N)){alert("Ви вже є членом цієї групи!");return}await V.from("group_members").insert([{groupId:y,userId:N,role:"member",joinedAt:new Date().toISOString(),isActive:!0}]),alert("Ви успішно приєдналися до групи!"),S()}catch(T){console.error("Error joining group:",T),alert("Помилка при приєднанні до групи")}},ye=async y=>{if(N)try{await V.from("group_members").delete().eq("groupId",y).eq("userId",N),alert("Ви покинули групу!"),S()}catch(T){console.error("Error leaving group:",T),alert("Помилка при виході з групи")}},Je=y=>{const T=h.find(G=>G.groupId===y&&G.userId===N);return(T==null?void 0:T.role)||null},tt=y=>y.creatorId===N,Ie=y=>{const T=new Set(oe);T.has(y)?T.delete(y):T.add(y),pe(T),J(T.size>0)},He=()=>{pe(new Set),J(!1)},v=async()=>{for(const y of oe)await ge(y);He()},E=()=>{ie({name:"",description:"",category:"",isPrivate:!1,avatar:null,cover:null,tags:[],location:"",website:"",rules:[""],contactEmail:""})},R=()=>{ce({category:"",memberCount:"all",privacy:"all",activity:"all",sortBy:"activity",sortOrder:"desc",hasAvatar:!1,isVerified:!1}),j("")},q=()=>{let y=0;return F.category&&y++,F.memberCount!=="all"&&y++,F.privacy!=="all"&&y++,F.activity!=="all"&&y++,(F.sortBy!=="activity"||F.sortOrder!=="desc")&&y++,F.hasAvatar&&y++,F.isVerified&&y++,y},B=y=>{if(!y)return"Немає активності";const T=Date.now()-new Date(y).getTime(),G=Math.floor(T/(1e3*60*60)),he=Math.floor(T/(1e3*60*60*24));return G<24?`${G} год тому`:`${he} дн тому`},z=()=>{ie(y=>({...y,rules:[...y.rules,""]}))},Z=y=>{ie(T=>({...T,rules:T.rules.filter((G,he)=>he!==y)}))},A=(y,T)=>{ie(G=>({...G,rules:G.rules.map((he,rt)=>rt===y?T:he)}))},K=y=>{var rt,gt,fi;const T=Je(y.id),G=tt(y),he=oe.has(y.id);return W==="list"?a.jsx("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200 ${he?"ring-2 ring-blue-500 bg-blue-50":""}`,children:a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"checkbox",checked:he,onChange:()=>Ie(y.id),className:"absolute top-0 left-0 w-4 h-4 rounded border-gray-300 text-blue-600"}),a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-500 to-blue-600 rounded-lg flex items-center justify-center text-white text-2xl font-bold overflow-hidden ml-6",children:y.avatar?a.jsx("img",{src:y.avatar,alt:y.name,className:"w-full h-full object-cover"}):a.jsx("span",{children:(rt=y.name[0])==null?void 0:rt.toUpperCase()})})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 truncate",children:y.name}),y.isVerified&&a.jsx($d,{size:20,className:"text-blue-500"}),y.isPrivate?a.jsx(pr,{size:16,className:"text-gray-400"}):a.jsx(Sa,{size:16,className:"text-green-500"}),G&&a.jsx(Ud,{size:16,className:"text-yellow-500"}),T==="admin"&&a.jsx(Id,{size:16,className:"text-purple-500"})]}),a.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:y.description}),a.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500 mb-3",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ir,{size:14,className:"mr-1"}),y.memberCount," учасників"]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(ur,{size:14,className:"mr-1"}),y.postCount," постів"]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(iw,{size:14,className:"mr-1"}),B(y.lastActivity)]}),y.location&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(Jn,{size:14,className:"mr-1"}),y.location]})]}),a.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:y.category}),(gt=y.tags)==null?void 0:gt.map(tr=>a.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:["#",tr]},tr))]})]}),a.jsxs("div",{className:"flex flex-col space-y-2",children:[G?a.jsx("button",{onClick:()=>ee(`/groups/${y.id}`),className:"px-4 py-2 bg-green-100 text-green-700 rounded-lg text-sm font-medium",children:"Управління"}):T?a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>ee(`/groups/${y.id}`),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Переглянути"}),a.jsx("button",{onClick:()=>ye(y.id),className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors text-sm",children:"Покинути"})]}):a.jsx("button",{onClick:()=>ge(y.id),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Приєднатися"}),a.jsx("button",{className:"p-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:a.jsx(Ca,{size:16})})]})]})},y.id):a.jsx("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-all duration-200 cursor-pointer group hover:scale-105 ${he?"ring-2 ring-blue-500":""}`,onClick:()=>ee(`/groups/${y.id}`),children:a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"checkbox",checked:he,onChange:tr=>{tr.stopPropagation(),Ie(y.id)},className:"absolute top-3 left-3 w-4 h-4 rounded border-gray-300 text-blue-600 z-10"}),a.jsxs("div",{className:"h-32 bg-gradient-to-r from-purple-500 to-blue-600 relative",children:[y.cover&&a.jsx("img",{src:y.cover,alt:y.name,className:"w-full h-full object-cover"}),a.jsxs("div",{className:"absolute top-3 right-3 flex space-x-1",children:[y.isVerified&&a.jsx($d,{size:16,className:"text-white"}),y.isPrivate?a.jsx(pr,{size:16,className:"text-white"}):a.jsx(Sa,{size:16,className:"text-white"})]})]}),a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex items-start space-x-3 mb-3 -mt-8",children:[a.jsx("div",{className:"w-16 h-16 bg-white rounded-lg border-4 border-white shadow-lg flex items-center justify-center text-purple-600 text-xl font-bold overflow-hidden",children:y.avatar?a.jsx("img",{src:y.avatar,alt:y.name,className:"w-full h-full object-cover rounded-lg"}):a.jsx("span",{children:(fi=y.name[0])==null?void 0:fi.toUpperCase()})}),a.jsx("div",{className:"flex-1 mt-2",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 group-hover:text-blue-600 transition-colors line-clamp-1",children:y.name}),G&&a.jsx(Ud,{size:16,className:"text-yellow-500"}),T==="admin"&&a.jsx(Id,{size:16,className:"text-purple-500"})]})})]}),a.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:y.description}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mb-3",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ir,{size:14,className:"mr-1"}),y.memberCount]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(ur,{size:14,className:"mr-1"}),y.postCount]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:`w-2 h-2 rounded-full mr-1 ${y.isActive?"bg-green-500":"bg-gray-400"}`}),y.isActive?"Активна":"Неактивна"]})]}),a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:y.category}),y.location&&a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(Jn,{size:12,className:"mr-1"}),y.location]})]}),a.jsxs("div",{className:"flex space-x-2",onClick:tr=>tr.stopPropagation(),children:[G?a.jsxs("button",{onClick:()=>ee(`/groups/${y.id}`),className:"flex-1 flex items-center justify-center px-3 py-2 bg-green-100 text-green-700 rounded-lg text-sm font-medium",children:[a.jsx(Qc,{size:16,className:"mr-1"}),"Управління"]}):T?a.jsxs("button",{onClick:()=>ye(y.id),className:"flex-1 flex items-center justify-center px-3 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors text-sm font-medium",children:[a.jsx(Tt,{size:16,className:"mr-1"}),"Покинути"]}):a.jsxs("button",{onClick:()=>ge(y.id),className:"flex-1 flex items-center justify-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:[a.jsx(Xn,{size:16,className:"mr-1"}),"Приєднатися"]}),a.jsx("button",{className:"flex items-center justify-center px-3 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:a.jsx(Nw,{size:16})})]})]})]})},y.id)};return m?a.jsxs("div",{className:"flex min-h-screen",children:[a.jsx(Ve,{}),a.jsx("div",{className:"flex-1 ml-64 p-8",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Завантаження груп..."})]})})]}):a.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[a.jsx(Ve,{}),a.jsx("div",{className:"flex-1 ml-64 p-8",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Групи"}),a.jsx("p",{className:"text-gray-600",children:"Знайдіть спільноти за вашими інтересами або створіть власну"})]}),a.jsxs("button",{onClick:()=>_(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Ea,{size:20,className:"mr-2"}),"Створити групу"]})]}),a.jsx("div",{className:"flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg",children:[{id:"explore",label:"Дослідити",count:e.length},{id:"my-groups",label:"Мої групи",count:r.length},{id:"joined",label:"Приєднані",count:s.length},{id:"managed",label:"Керую",count:l.length},{id:"invitations",label:"Запрошення",count:c.length}].map(y=>a.jsxs("button",{onClick:()=>p(y.id),className:`flex-1 px-4 py-3 text-sm font-medium rounded-md transition-colors ${k===y.id?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[y.label," (",y.count,")"]},y.id))}),M&&a.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-blue-800",children:["Обрано ",oe.size," груп"]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:v,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Приєднатися до всіх"}),a.jsx("button",{onClick:He,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm",children:"Скасувати"})]})]})}),a.jsxs("div",{className:"mb-6 space-y-4",children:[a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx(ui,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),a.jsx("input",{type:"text",placeholder:"Пошук груп...",value:b,onChange:y=>j(y.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),b&&a.jsx("button",{onClick:()=>j(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a.jsx(Tt,{size:18})})]}),a.jsxs("button",{onClick:()=>H(!O),className:`flex items-center px-4 py-3 border rounded-lg transition-colors relative ${O?"bg-blue-50 border-blue-300 text-blue-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[a.jsx(Jc,{size:20,className:"mr-2"}),"Фільтри",q()>0&&a.jsx("span",{className:"absolute -top-2 -right-2 bg-blue-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:q()}),a.jsx(Wc,{size:16,className:`ml-2 transition-transform ${O?"rotate-180":""}`})]}),a.jsxs("div",{className:"flex border border-gray-300 rounded-lg overflow-hidden",children:[a.jsx("button",{onClick:()=>Y("grid"),className:`p-3 ${W==="grid"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:a.jsx(Qm,{size:18})}),a.jsx("button",{onClick:()=>Y("list"),className:`p-3 ${W==="list"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:a.jsx(Jm,{size:18})})]})]}),O&&a.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Категорія"}),a.jsxs("select",{value:F.category,onChange:y=>ce(T=>({...T,category:y.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Всі категорії"}),Li.map(y=>a.jsx("option",{value:y,children:y},y))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Розмір"}),a.jsxs("select",{value:F.memberCount,onChange:y=>ce(T=>({...T,memberCount:y.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"Всі розміри"}),a.jsx("option",{value:"small",children:"Мала (<50)"}),a.jsx("option",{value:"medium",children:"Середня (50-200)"}),a.jsx("option",{value:"large",children:"Велика (>200)"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Приватність"}),a.jsxs("select",{value:F.privacy,onChange:y=>ce(T=>({...T,privacy:y.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"Всі"}),a.jsx("option",{value:"public",children:"Публічні"}),a.jsx("option",{value:"private",children:"Приватні"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Активність"}),a.jsxs("select",{value:F.activity,onChange:y=>ce(T=>({...T,activity:y.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"Всі"}),a.jsx("option",{value:"active",children:"Активні"}),a.jsx("option",{value:"inactive",children:"Неактивні"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Сортування"}),a.jsxs("select",{value:F.sortBy,onChange:y=>ce(T=>({...T,sortBy:y.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"activity",children:"Активністю"}),a.jsx("option",{value:"name",children:"Назвою"}),a.jsx("option",{value:"members",children:"Кількістю учасників"}),a.jsx("option",{value:"created",children:"Датою створення"}),a.jsx("option",{value:"popularity",children:"Популярністю"})]})]})]}),a.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-6",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:F.hasAvatar,onChange:y=>ce(T=>({...T,hasAvatar:y.target.checked})),className:"rounded border-gray-300 text-blue-600 mr-2"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Тільки з аватаром"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:F.isVerified,onChange:y=>ce(T=>({...T,isVerified:y.target.checked})),className:"rounded border-gray-300 text-blue-600 mr-2"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Тільки верифіковані"})]}),a.jsxs("button",{onClick:()=>ce(y=>({...y,sortOrder:y.sortOrder==="asc"?"desc":"asc"})),className:"flex items-center text-sm text-blue-600 hover:text-blue-800",children:[a.jsx(Zm,{size:16,className:"mr-1"}),F.sortOrder==="asc"?"За зростанням":"За спаданням"]})]}),a.jsx("button",{onClick:R,className:"text-sm text-blue-600 hover:text-blue-800",children:"Скинути фільтри"})]})]})]}),a.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[a.jsxs("p",{className:"text-sm text-gray-600",children:[b?`Знайдено ${u.length} груп з ${kt().length}`:`Всього ${u.length} груп`,b&&a.jsxs("span",{children:[' за запитом "',a.jsx("span",{className:"font-semibold",children:b}),'"']})]}),oe.size>0&&a.jsx("button",{onClick:()=>{oe.size===u.length?He():(pe(new Set(u.map(y=>y.id))),J(!0))},className:"text-sm text-blue-600 hover:text-blue-800",children:oe.size===u.length?"Скасувати вибір":"Обрати всі"})]}),u.length>0?a.jsx("div",{className:W==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:u.map(K)}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Ir,{size:32,className:"text-gray-400"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Груп не знайдено"}),a.jsx("p",{className:"text-gray-600 mb-4",children:b||q()>0?"Спробуйте змінити критерії пошуку або фільтри":"Поки що немає створених груп"}),b||q()>0?a.jsx("button",{onClick:R,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Скинути всі фільтри"}):a.jsxs("button",{onClick:()=>_(!0),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Ea,{size:20,className:"mr-2"}),"Створити першу групу"]})]})]})}),I&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Створити групу"}),a.jsx("button",{onClick:()=>_(!1),className:"text-gray-400 hover:text-gray-600",children:a.jsx(Tt,{size:24})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Назва групи *"}),a.jsx("input",{type:"text",value:ne.name,onChange:y=>ie(T=>({...T,name:y.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Введіть назву групи"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Опис"}),a.jsx("textarea",{value:ne.description,onChange:y=>ie(T=>({...T,description:y.target.value})),rows:4,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Розкажіть про вашу групу"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Категорія"}),a.jsxs("select",{value:ne.category,onChange:y=>ie(T=>({...T,category:y.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Оберіть категорію"}),Li.map(y=>a.jsx("option",{value:y,children:y},y))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Місцезнаходження"}),a.jsx("input",{type:"text",value:ne.location,onChange:y=>ie(T=>({...T,location:y.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Місто, країна"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Веб-сайт"}),a.jsx("input",{type:"url",value:ne.website,onChange:y=>ie(T=>({...T,website:y.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://example.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email для зв'язку"}),a.jsx("input",{type:"email",value:ne.contactEmail,onChange:y=>ie(T=>({...T,contactEmail:y.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"contact@example.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Правила групи"}),a.jsxs("div",{className:"space-y-2",children:[ne.rules.map((y,T)=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"text",value:y,onChange:G=>A(T,G.target.value),className:"flex-1 p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:`Правило ${T+1}`}),ne.rules.length>1&&a.jsx("button",{onClick:()=>Z(T),className:"text-red-500 hover:text-red-700",children:a.jsx(Tt,{size:20})})]},T)),a.jsx("button",{onClick:z,className:"text-blue-600 hover:text-blue-800 text-sm",children:"+ Додати правило"})]})]}),a.jsx("div",{children:a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:ne.isPrivate,onChange:y=>ie(T=>({...T,isPrivate:y.target.checked})),className:"rounded border-gray-300 text-blue-600 mr-3"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-900",children:"Приватна група"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Тільки запрошені користувачі зможуть приєднатися до групи"})]})]})})]}),a.jsxs("div",{className:"flex justify-end space-x-4 mt-8 pt-6 border-t",children:[a.jsx("button",{onClick:()=>_(!1),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Скасувати"}),a.jsx("button",{onClick:se,disabled:C||!ne.name.trim(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:C?"Створення...":"Створити групу"})]})]})})})]})}function o1(){var Ee,Ge,we,kt;const{groupId:e}=dy(),t=Ht(),[r,n]=x.useState(null),[s,i]=x.useState([]),[l,o]=x.useState([]),[c,d]=x.useState(null),[u,f]=x.useState(null),[h,w]=x.useState(!0),[b,j]=x.useState("posts"),[k,p]=x.useState(""),[m,g]=x.useState([]),[N,P]=x.useState(!1),[I,_]=x.useState(!1),[C,L]=x.useState(""),[O,H]=x.useState(null),[W,Y]=x.useState(!1);x.useEffect(()=>{F()},[]),x.useEffect(()=>{c&&e&&(ce(),oe(),pe(),M())},[c,e]);const F=async()=>{try{const{data:{user:U},error:se}=await V.auth.getUser();if(se||!U){t("/login");return}const{data:ge,error:ye}=await V.from("user_profiles").select("*").eq("auth_user_id",U.id).single();if(ye){console.error("Error fetching user profile:",ye);return}d(ge)}catch(U){console.error("Error fetching current user:",U)}},ce=async()=>{try{const{data:U,error:se}=await V.from("groups").select(`
          *,
          created_by_profile:user_profiles!groups_created_by_fkey(name, last_name, avatar)
        `).eq("id",e).single();if(se)throw se;n(U)}catch(U){console.error("Error fetching group details:",U),t("/groups")}finally{w(!1)}},oe=async()=>{try{const{data:U,error:se}=await V.from("group_posts").select(`
          *,
          author:user_profiles!group_posts_author_id_fkey(name, last_name, avatar),
          media:group_post_media(*)
        `).eq("group_id",e).order("created_at",{ascending:!1});if(se)throw se;i(U||[])}catch(U){console.error("Error fetching group posts:",U)}},pe=async()=>{try{const{data:U,error:se}=await V.from("group_members").select(`
          *,
          user:user_profiles!group_members_user_id_fkey(name, last_name, avatar)
        `).eq("group_id",e).order("joined_at",{ascending:!1});if(se)throw se;o(U||[])}catch(U){console.error("Error fetching group members:",U)}},M=async()=>{try{if(!c)return;const{data:U,error:se}=await V.from("group_members").select("*").eq("group_id",e).eq("user_id",c.id).single();if(se&&se.code!=="PGRST116")throw se;f(U)}catch(U){console.error("Error checking user membership:",U)}},J=async()=>{try{if(!c)return;const{error:U}=await V.from("group_members").insert([{group_id:e,user_id:c.id,role:"member"}]);if(U)throw U;M(),pe(),alert("Ви успішно приєдналися до групи!")}catch(U){console.error("Error joining group:",U),alert("Помилка при приєднанні до групи")}},ee=async()=>{try{if(!c||!u)return;if(u.role==="admin"){alert("Адміністратор не може покинути групу");return}const{error:U}=await V.from("group_members").delete().eq("group_id",e).eq("user_id",c.id);if(U)throw U;f(null),pe(),alert("Ви покинули групу")}catch(U){console.error("Error leaving group:",U),alert("Помилка при виході з групи")}},ne=U=>{const se=Array.from(U.target.files);g(se)},ie=U=>{g(se=>se.filter((ge,ye)=>ye!==U))},Ae=async U=>{if(U.preventDefault(),!(!c||!u||!k.trim()&&m.length===0))try{P(!0);const{data:se,error:ge}=await V.from("group_posts").insert([{group_id:e,author_id:c.id,content:k.trim()}]).select().single();if(ge)throw ge;if(m.length>0)for(const ye of m){const Je=ye.name.split(".").pop(),tt=`${Date.now()}-${Math.random().toString(36).substring(7)}.${Je}`,Ie=`group-posts/${e}/${tt}`,He=ye.type.startsWith("video/")?"video":"image",{error:v}=await V.storage.from("media").upload(Ie,ye);if(v)throw v;const{data:{publicUrl:E}}=V.storage.from("media").getPublicUrl(Ie);await V.from("group_post_media").insert([{post_id:se.id,type:He,url:E,filename:ye.name,file_size:ye.size}])}p(""),g([]),oe()}catch(se){console.error("Error creating post:",se),alert("Помилка при створенні поста")}finally{P(!1)}},S=U=>new Date(U).toLocaleDateString("uk-UA",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),$=U=>{switch(U){case"admin":return"Адміністратор";case"moderator":return"Модератор";default:return"Учасник"}};if(h)return a.jsxs("div",{className:"flex min-h-screen",children:[a.jsx(Ve,{}),a.jsx("div",{className:"flex-1 ml-64 p-8",children:a.jsx("div",{className:"text-center",children:"Завантаження..."})})]});if(!r)return a.jsxs("div",{className:"flex min-h-screen",children:[a.jsx(Ve,{}),a.jsx("div",{className:"flex-1 ml-64 p-8",children:a.jsx("div",{className:"text-center",children:"Група не знайдена"})})]});const te=!!u,ae=(u==null?void 0:u.role)==="admin";return a.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[a.jsx(Ve,{}),a.jsxs("div",{className:"flex-1 ml-64",children:[a.jsx("div",{className:"bg-white border-b border-gray-200",children:a.jsxs("div",{className:"max-w-6xl mx-auto px-8 py-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("button",{onClick:()=>t("/groups"),className:"mr-4 p-2 hover:bg-gray-100 rounded-lg",children:a.jsx(aw,{size:20})}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mr-4",children:r.avatar?a.jsx("img",{src:r.avatar,alt:r.name,className:"w-full h-full rounded-full object-cover"}):a.jsx(Ir,{size:24,className:"text-gray-400"})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mr-2",children:r.name}),r.is_private?a.jsx(pr,{size:16,className:"text-gray-500"}):a.jsx(Sa,{size:16,className:"text-gray-500"})]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600 space-x-4",children:[a.jsxs("span",{children:[r.member_count||l.length," учасників"]}),a.jsx("span",{children:"•"}),a.jsxs("span",{children:["Створено ",S(r.created_at)]})]})]})]})]}),a.jsx("div",{className:"flex items-center space-x-3",children:te?a.jsxs(a.Fragment,{children:[!ae&&a.jsxs("button",{onClick:ee,className:"flex items-center px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:[a.jsx(Sw,{size:18,className:"mr-2"}),"Покинути"]}),ae&&a.jsxs("button",{className:"flex items-center px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:[a.jsx(Qc,{size:18,className:"mr-2"}),"Керувати"]})]}):a.jsxs("button",{onClick:J,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[a.jsx(Xn,{size:18,className:"mr-2"}),"Приєднатися"]})})]}),r.description&&a.jsx("p",{className:"mt-4 text-gray-600",children:r.description})]})}),a.jsx("div",{className:"max-w-6xl mx-auto px-8 py-6",children:te?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg w-fit",children:[a.jsxs("button",{onClick:()=>j("posts"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${b==="posts"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["Пости (",s.length,")"]}),a.jsxs("button",{onClick:()=>j("members"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${b==="members"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["Учасники (",l.length,")"]}),a.jsx("button",{onClick:()=>j("info"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${b==="info"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Інформація"})]})}),b==="posts"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:a.jsx("form",{onSubmit:Ae,children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:c!=null&&c.avatar?a.jsx("img",{src:c.avatar,alt:c.name,className:"w-full h-full rounded-full object-cover"}):a.jsx("span",{className:"text-sm text-gray-600",children:(Ge=(Ee=c==null?void 0:c.name)==null?void 0:Ee[0])==null?void 0:Ge.toUpperCase()})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("textarea",{value:k,onChange:U=>p(U.target.value),placeholder:"Поділіться чимось з групою...",className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:3}),m.length>0&&a.jsx("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-2",children:m.map((U,se)=>a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:U.type.startsWith("image/")?a.jsx("img",{src:URL.createObjectURL(U),alt:"",className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.jsx(Pw,{size:24,className:"text-gray-400"})})}),a.jsx("button",{type:"button",onClick:()=>ie(se),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center",children:a.jsx(Tt,{size:12})})]},se))}),a.jsxs("div",{className:"flex items-center justify-between mt-3",children:[a.jsx("div",{className:"flex items-center space-x-2",children:a.jsxs("label",{className:"flex items-center px-3 py-1 text-gray-600 hover:bg-gray-100 rounded-lg cursor-pointer",children:[a.jsx(yw,{size:18,className:"mr-1"}),a.jsx("span",{className:"text-sm",children:"Фото/Відео"}),a.jsx("input",{type:"file",multiple:!0,accept:"image/*,video/*",className:"hidden",onChange:ne})]})}),a.jsxs("button",{type:"submit",disabled:N||!k.trim()&&m.length===0,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[N?a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):a.jsx(Ym,{size:16,className:"mr-2"}),N?"Публікація...":"Опублікувати"]})]})]})]})})}),s.length>0?s.map(U=>{var se,ge,ye,Je,tt,Ie;return a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[a.jsx("div",{className:"p-6 pb-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:(se=U.author)!=null&&se.avatar?a.jsx("img",{src:U.author.avatar,alt:U.author.name,className:"w-full h-full rounded-full object-cover"}):a.jsx("span",{className:"text-sm text-gray-600",children:(Je=(ye=(ge=U.author)==null?void 0:ge.name)==null?void 0:ye[0])==null?void 0:Je.toUpperCase()})}),a.jsxs("div",{className:"ml-3",children:[a.jsxs("p",{className:"font-medium text-gray-900",children:[(tt=U.author)==null?void 0:tt.name," ",(Ie=U.author)==null?void 0:Ie.last_name]}),a.jsx("p",{className:"text-sm text-gray-500",children:S(U.created_at)})]})]}),a.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg",children:a.jsx(Ca,{size:16,className:"text-gray-400"})})]})}),U.content&&a.jsx("div",{className:"px-6 pb-4",children:a.jsx("p",{className:"text-gray-900",children:U.content})}),U.media&&U.media.length>0&&a.jsx("div",{className:"px-6 pb-4",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:U.media.map((He,v)=>a.jsx("div",{className:"rounded-lg overflow-hidden",children:He.type==="image"?a.jsx("img",{src:He.url,alt:"",className:"w-full h-64 object-cover"}):a.jsx("video",{src:He.url,className:"w-full h-64 object-cover",controls:!0})},v))})}),a.jsx("div",{className:"px-6 py-4 border-t border-gray-100",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center space-x-6",children:[a.jsxs("button",{className:"flex items-center text-gray-600 hover:text-red-500",children:[a.jsx(gw,{size:18,className:"mr-1"}),a.jsx("span",{className:"text-sm",children:"Подобається"})]}),a.jsxs("button",{className:"flex items-center text-gray-600 hover:text-blue-500",children:[a.jsx(ur,{size:18,className:"mr-1"}),a.jsx("span",{className:"text-sm",children:"Коментувати"})]}),a.jsxs("button",{className:"flex items-center text-gray-600 hover:text-green-500",children:[a.jsx(kw,{size:18,className:"mr-1"}),a.jsx("span",{className:"text-sm",children:"Поділитися"})]})]})})})]},U.id)}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(ur,{size:32,className:"text-gray-400"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Поки що немає постів"}),a.jsx("p",{className:"text-gray-600",children:"Станьте першим, хто поділиться чимось цікавим!"})]})]}),b==="members"&&a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Учасники групи (",l.length,")"]}),a.jsx("div",{className:"space-y-4",children:l.map(U=>{var se,ge,ye,Je,tt,Ie,He;return a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:(se=U.user)!=null&&se.avatar?a.jsx("img",{src:U.user.avatar,alt:U.user.name,className:"w-full h-full rounded-full object-cover"}):a.jsx("span",{className:"text-lg text-gray-600",children:(Je=(ye=(ge=U.user)==null?void 0:ge.name)==null?void 0:ye[0])==null?void 0:Je.toUpperCase()})}),a.jsxs("div",{className:"ml-4",children:[a.jsxs("p",{className:"font-medium text-gray-900",children:[(tt=U.user)==null?void 0:tt.name," ",(Ie=U.user)==null?void 0:Ie.last_name]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${U.role==="admin"?"bg-red-100 text-red-800":U.role==="moderator"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:$(U.role)}),a.jsxs("span",{className:"ml-2",children:["Приєднався ",S(U.joined_at)]})]})]})]}),ae&&((He=U.user)==null?void 0:He.id)!==(c==null?void 0:c.id)&&a.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:a.jsx(Ca,{size:16})})]},U.id)})})]})}),b==="info"&&a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 max-w-xl mx-auto",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsxs("div",{className:"relative w-24 h-24 mb-4",children:[a.jsx("img",{src:O?URL.createObjectURL(O):r.avatar||"",alt:"Group avatar",className:"w-24 h-24 rounded-full object-cover border border-gray-200"}),ae&&a.jsxs("label",{className:"absolute bottom-0 right-0 bg-blue-600 text-white rounded-full p-1 cursor-pointer hover:bg-blue-700",children:[a.jsx(Xc,{size:16}),a.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:U=>H(U.target.files[0])})]})]}),a.jsx("h2",{className:"text-2xl font-bold mb-2",children:r.name}),a.jsxs("div",{className:"text-gray-600 mb-2",children:["Створено: ",S(r.created_at)]}),a.jsxs("div",{className:"text-gray-600 mb-2",children:["Адміністратор: ",((kt=(we=l.find(U=>U.role==="admin"))==null?void 0:we.user)==null?void 0:kt.name)||"—"]}),I?a.jsxs(a.Fragment,{children:[a.jsx("textarea",{className:"w-full border rounded p-2 mb-2",rows:3,value:C,onChange:U=>L(U.target.value)}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:W,onClick:async()=>{Y(!0);let U=r.avatar;if(O){const ge=O.name.split(".").pop(),ye=`${Date.now()}-${Math.random().toString(36).substring(7)}.${ge}`,Je=`group-avatars/${e}/${ye}`,{error:tt}=await V.storage.from("media").upload(Je,O);if(!tt){const{data:{publicUrl:Ie}}=V.storage.from("media").getPublicUrl(Je);U=Ie}}const{error:se}=await V.from("groups").update({description:C,avatar:U}).eq("id",e);se||(n({...r,description:C,avatar:U}),_(!1),H(null)),Y(!1)},children:"Зберегти"}),a.jsx("button",{className:"px-4 py-2 border rounded hover:bg-gray-100",onClick:()=>{_(!1),L(r.description||""),H(null)},children:"Скасувати"})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mb-4 text-gray-800 w-full text-center min-h-[48px]",children:r.description||"Опис відсутній"}),ae&&a.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:()=>{_(!0),L(r.description||"")},children:"Редагувати опис"})]})]})})]}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(pr,{size:32,className:"text-gray-400"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Приєднайтеся до групи"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Щоб переглядати пости та брати участь в обговореннях, приєднайтеся до групи"}),a.jsxs("button",{onClick:J,className:"flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 mx-auto",children:[a.jsx(Xn,{size:18,className:"mr-2"}),"Приєднатися до групи"]})]})})]})]})}function c1(){const[e,t]=x.useState([]),[r,n]=x.useState([]),[s,i]=x.useState([]),[l,o]=x.useState(""),[c,d]=x.useState(!0),[u,f]=x.useState(null),[h,w]=x.useState(!1),[b,j]=x.useState("grid"),[k,p]=x.useState({city:"",onlineStatus:"all",friendStatus:"all",sortBy:"date",sortOrder:"desc",hasAvatar:!1,hasBio:!1}),[m,g]=x.useState([]),[N,P]=x.useState(new Set),[I,_]=x.useState(!1),C=Ht();x.useEffect(()=>{L(),O()},[]),x.useEffect(()=>{W()},[l,e,k,s]);const L=async()=>{try{const{data:{user:S},error:$}=await V.auth.getUser();if($||!S){C("/login");return}f(S.id);const{data:te,error:ae}=await V.from("users").select("*").order("date",{ascending:!1});if(ae)throw ae;let Ee=te||[];Ee=Ee.filter(we=>we&&we.id&&we.name&&we.lastName&&we.email),Ee=Ee.map(we=>({...we,isOnline:Math.random()>.7,lastSeen:new Date(Date.now()-Math.random()*7*24*60*60*1e3).toISOString(),friendsCount:Math.floor(Math.random()*100),postsCount:Math.floor(Math.random()*50)})),t(Ee);const Ge=[...new Set(Ee.filter(we=>we.city).map(we=>we.city))].sort();g(Ge)}catch(S){console.error("Error fetching users:",S),t([]),n([])}finally{d(!1)}},O=async()=>{try{const{data:{user:S}}=await V.auth.getUser();if(!S)return;const{data:$,error:te}=await V.from("friends").select("*").or(`user_id.eq.${S.id},friend_id.eq.${S.id}`);if(te)throw te;i($||[])}catch(S){console.error("Error fetching friend requests:",S)}},H=S=>{if(!u)return"not_friends";if(S===u)return"self";const $=s.find(te=>te.user_id===u&&te.friend_id===S||te.user_id===S&&te.friend_id===u);return $?$.status==="accepted"?"friends":$.status==="pending"?$.user_id===u?"sent":"received":"not_friends":"not_friends"},W=()=>{let S=[...e];l.trim()!==""&&(S=S.filter($=>$.name.toLowerCase().includes(l.toLowerCase())||$.lastName.toLowerCase().includes(l.toLowerCase())||$.email.toLowerCase().includes(l.toLowerCase())||$.city&&$.city.toLowerCase().includes(l.toLowerCase())||$.bio&&$.bio.toLowerCase().includes(l.toLowerCase()))),k.city&&(S=S.filter($=>$.city===k.city)),k.onlineStatus!=="all"&&(S=S.filter($=>k.onlineStatus==="online"?$.isOnline:!$.isOnline)),k.friendStatus!=="all"&&(S=S.filter($=>{const te=H($.auth_user_id);switch(k.friendStatus){case"friends":return te==="friends";case"not_friends":return te==="not_friends";case"pending":return te==="sent"||te==="received";default:return!0}})),k.hasAvatar&&(S=S.filter($=>$.avatar)),k.hasBio&&(S=S.filter($=>$.bio&&$.bio.trim()!=="")),S.sort(($,te)=>{let ae=0;switch(k.sortBy){case"name":ae=`${$.name} ${$.lastName}`.localeCompare(`${te.name} ${te.lastName}`);break;case"date":ae=new Date($.date).getTime()-new Date(te.date).getTime();break;case"city":ae=($.city||"").localeCompare(te.city||"");break;case"lastSeen":$.isOnline&&!te.isOnline?ae=-1:!$.isOnline&&te.isOnline?ae=1:ae=new Date(te.lastSeen||0).getTime()-new Date($.lastSeen||0).getTime();break;case"popularity":ae=(te.friendsCount||0)-($.friendsCount||0);break}return k.sortOrder==="asc"?ae:-ae}),n(S)},Y=async S=>{try{if(!u)return;if(S===u){alert("Ви не можете додати себе в друзі!");return}if(s.find(ae=>ae.user_id===u&&ae.friend_id===S||ae.user_id===S&&ae.friend_id===u)){alert("Запит на дружбу вже існує!");return}const{error:te}=await V.from("friends").insert([{user_id:u,friend_id:S,status:"pending"}]);if(te)throw te;alert("Запит на дружбу надіслано!"),O()}catch($){console.error("Error adding friend:",$),alert("Помилка при додаванні в друзі")}},F=async(S,$)=>{try{const{error:te}=await V.from("friends").update({status:$==="accept"?"accepted":"rejected"}).eq("id",S);if(te)throw te;alert($==="accept"?"Запит прийнято!":"Запит відхилено!"),O()}catch(te){console.error("Error handling friend request:",te),alert("Помилка при обробці запиту")}},ce=async S=>{try{if(!u)return;const{error:$}=await V.from("friends").delete().or(`and(user_id.eq.${u},friend_id.eq.${S}),and(user_id.eq.${S},friend_id.eq.${u})`);if($)throw $;alert("Користувача видалено з друзів!"),O()}catch($){console.error("Error removing friend:",$),alert("Помилка при видаленні з друзів")}},oe=S=>{const $=new Set(N);$.has(S)?$.delete(S):$.add(S),P($),_($.size>0)},pe=()=>{P(new Set),_(!1)},M=async()=>{for(const S of N)await Y(S);pe()},J=()=>{p({city:"",onlineStatus:"all",friendStatus:"all",sortBy:"date",sortOrder:"desc",hasAvatar:!1,hasBio:!1}),o("")},ee=S=>new Date(S).toLocaleDateString("uk-UA",{year:"numeric",month:"long",day:"numeric"}),ne=(S,$)=>{if($)return"Онлайн";if(!S)return"Давно не з'являвся";const te=Date.now()-new Date(S).getTime(),ae=Math.floor(te/(1e3*60)),Ee=Math.floor(te/(1e3*60*60)),Ge=Math.floor(te/(1e3*60*60*24));return ae<60?`${ae} хв тому`:Ee<24?`${Ee} год тому`:`${Ge} дн тому`},ie=()=>{let S=0;return k.city&&S++,k.onlineStatus!=="all"&&S++,k.friendStatus!=="all"&&S++,(k.sortBy!=="date"||k.sortOrder!=="desc")&&S++,k.hasAvatar&&S++,k.hasBio&&S++,S},Ae=S=>{var ae,Ee,Ge,we,kt,U;const $=H(S.auth_user_id),te=N.has(S.id);return b==="list"?a.jsx("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-all duration-200 ${te?"ring-2 ring-blue-500 bg-blue-50":""}`,children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"checkbox",checked:te,onChange:()=>oe(S.id),className:"absolute top-0 left-0 w-4 h-4 rounded border-gray-300 text-blue-600"}),a.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-xl font-bold overflow-hidden ml-6",children:[S.avatar?a.jsx("img",{src:S.avatar,alt:S.name,className:"w-full h-full rounded-full object-cover"}):a.jsxs("span",{children:[(ae=S.name[0])==null?void 0:ae.toUpperCase(),(Ee=S.lastName[0])==null?void 0:Ee.toUpperCase()]}),S.isOnline&&a.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 bg-green-500 border-2 border-white rounded-full"})]})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:[S.name," ",S.lastName]}),((Ge=S.privacy)==null?void 0:Ge.profileVisibility)==="private"&&a.jsx(pr,{size:16,className:"text-gray-400"}),$==="friends"&&a.jsx(Wi,{size:16,className:"text-green-500"})]}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mt-1",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Na,{size:14,className:"mr-1"}),ee(S.date)]}),S.city&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(Jn,{size:14,className:"mr-1"}),S.city]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(zl,{size:14,className:"mr-1"}),ne(S.lastSeen,S.isOnline)]})]}),S.bio&&a.jsx("p",{className:"text-gray-600 text-sm mt-2 line-clamp-2",children:S.bio}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mt-2",children:[a.jsxs("span",{children:[S.friendsCount," друзів"]}),a.jsxs("span",{children:[S.postsCount," постів"]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[$==="self"?a.jsx("button",{className:"px-4 py-2 bg-green-100 text-green-700 rounded-lg text-sm font-medium cursor-default",disabled:!0,children:"Це ви"}):$==="friends"?a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>ce(S.auth_user_id),className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors text-sm font-medium",children:"Видалити з друзів"}),a.jsx("button",{onClick:()=>C(`/messages?user=${S.id}`),className:"p-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:a.jsx(ur,{size:16})})]}):$==="sent"?a.jsx("button",{className:"px-4 py-2 bg-yellow-100 text-yellow-700 rounded-lg text-sm font-medium cursor-default",disabled:!0,children:"Запит надіслано"}):$==="received"?a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>{const se=s.find(ge=>ge.user_id===S.auth_user_id);se&&F(se.id,"accept")},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium",children:"Прийняти"}),a.jsx("button",{onClick:()=>{const se=s.find(ge=>ge.user_id===S.auth_user_id);se&&F(se.id,"reject")},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-medium",children:"Відхилити"})]}):a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>Y(S.auth_user_id),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"Додати в друзі"}),a.jsx("button",{onClick:()=>C(`/messages?user=${S.id}`),className:"p-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:a.jsx(ur,{size:16})})]}),a.jsx("button",{className:"p-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:a.jsx(Ca,{size:16})})]})]})},S.id):a.jsx("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-all duration-200 cursor-pointer group hover:scale-105 ${te?"ring-2 ring-blue-500":""}`,onClick:()=>C(`/profile/${S.id}`),children:a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"checkbox",checked:te,onChange:se=>{se.stopPropagation(),oe(S.id)},className:"absolute top-3 left-3 w-4 h-4 rounded border-gray-300 text-blue-600 z-10"}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsxs("div",{className:"relative w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-xl font-bold overflow-hidden flex-shrink-0",children:[S.avatar?a.jsx("img",{src:S.avatar,alt:S.name,className:"w-full h-full rounded-full object-cover"}):a.jsxs("span",{children:[(we=S.name[0])==null?void 0:we.toUpperCase(),(kt=S.lastName[0])==null?void 0:kt.toUpperCase()]}),S.isOnline&&a.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 bg-green-500 border-2 border-white rounded-full"})]}),a.jsxs("div",{className:"ml-4 flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 group-hover:text-blue-600 transition-colors truncate",children:[S.name," ",S.lastName]}),((U=S.privacy)==null?void 0:U.profileVisibility)==="private"&&a.jsx(pr,{size:16,className:"text-gray-400"}),$==="friends"&&a.jsx(Wi,{size:16,className:"text-green-500"})]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-1",children:[a.jsx(zl,{size:14,className:"mr-1 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:ne(S.lastSeen,S.isOnline)})]})]})]}),S.bio&&a.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-3",children:S.bio}),a.jsxs("div",{className:"space-y-2 mb-4",children:[S.city&&a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(Jn,{size:14,className:"mr-2 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:S.city})]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(Na,{size:14,className:"mr-2 text-gray-400 flex-shrink-0"}),a.jsxs("span",{className:"truncate",children:["Приєднався ",ee(S.date)]})]}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[a.jsxs("span",{children:[S.friendsCount," друзів"]}),a.jsxs("span",{children:[S.postsCount," постів"]})]})]}),a.jsxs("div",{className:"flex space-x-2",onClick:se=>se.stopPropagation(),children:[$==="self"?a.jsxs("button",{className:"flex-1 flex items-center justify-center px-3 py-2 bg-green-100 text-green-700 rounded-lg text-sm font-medium cursor-default",disabled:!0,children:[a.jsx(ka,{size:16,className:"mr-1"}),"Це ви"]}):$==="friends"?a.jsxs("button",{onClick:()=>ce(S.auth_user_id),className:"flex-1 flex items-center justify-center px-3 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors text-sm font-medium",children:[a.jsx(Cw,{size:16,className:"mr-1"}),"Видалити"]}):$==="sent"?a.jsxs("button",{className:"flex-1 flex items-center justify-center px-3 py-2 bg-yellow-100 text-yellow-700 rounded-lg text-sm font-medium cursor-default",disabled:!0,children:[a.jsx(zl,{size:16,className:"mr-1"}),"Надіслано"]}):$==="received"?a.jsxs("button",{onClick:()=>{const se=s.find(ge=>ge.user_id===S.auth_user_id);se&&F(se.id,"accept")},className:"flex-1 flex items-center justify-center px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium",children:[a.jsx(Wi,{size:16,className:"mr-1"}),"Прийняти"]}):a.jsxs("button",{onClick:()=>Y(S.auth_user_id),className:"flex-1 flex items-center justify-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:[a.jsx(Xn,{size:16,className:"mr-1"}),"Додати"]}),$!=="self"&&a.jsx("button",{onClick:()=>C(`/messages?user=${S.id}`),className:"flex items-center justify-center px-3 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",title:"Написати повідомлення",children:a.jsx(ur,{size:16})})]})]})]})},S.id)};return c?a.jsxs("div",{className:"flex min-h-screen",children:[a.jsx(Ve,{}),a.jsx("div",{className:"flex-1 ml-64 p-8",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Завантаження користувачів..."})]})})]}):a.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[a.jsx(Ve,{}),a.jsx("div",{className:"flex-1 ml-64 p-8",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Всі користувачі"}),a.jsx("p",{className:"text-gray-600",children:"Перегляньте всіх зареєстрованих користувачів нашої соціальної мережі"})]}),I&&a.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-blue-800",children:["Обрано ",N.size," користувачів"]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:M,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Додати всіх в друзі"}),a.jsx("button",{onClick:pe,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm",children:"Скасувати"})]})]})}),a.jsxs("div",{className:"mb-6 space-y-4",children:[a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx(ui,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),a.jsx("input",{type:"text",placeholder:"Пошук серед всіх користувачів...",value:l,onChange:S=>o(S.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),l&&a.jsx("button",{onClick:()=>o(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a.jsx(Tt,{size:18})})]}),a.jsxs("button",{onClick:()=>w(!h),className:`flex items-center px-4 py-3 border rounded-lg transition-colors relative ${h?"bg-blue-50 border-blue-300 text-blue-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[a.jsx(Jc,{size:20,className:"mr-2"}),"Фільтри",ie()>0&&a.jsx("span",{className:"absolute -top-2 -right-2 bg-blue-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:ie()}),a.jsx(Wc,{size:16,className:`ml-2 transition-transform ${h?"rotate-180":""}`})]}),a.jsxs("div",{className:"flex border border-gray-300 rounded-lg overflow-hidden",children:[a.jsx("button",{onClick:()=>j("grid"),className:`p-3 ${b==="grid"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:a.jsx(Qm,{size:18})}),a.jsx("button",{onClick:()=>j("list"),className:`p-3 ${b==="list"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:a.jsx(Jm,{size:18})})]})]}),h&&a.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Місто"}),a.jsxs("select",{value:k.city,onChange:S=>p($=>({...$,city:S.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Всі міста"}),m.map(S=>a.jsx("option",{value:S,children:S},S))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Онлайн статус"}),a.jsxs("select",{value:k.onlineStatus,onChange:S=>p($=>({...$,onlineStatus:S.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"Всі"}),a.jsx("option",{value:"online",children:"Онлайн"}),a.jsx("option",{value:"offline",children:"Офлайн"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Статус дружби"}),a.jsxs("select",{value:k.friendStatus,onChange:S=>p($=>({...$,friendStatus:S.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"Всі"}),a.jsx("option",{value:"friends",children:"Друзі"}),a.jsx("option",{value:"not_friends",children:"Не друзі"}),a.jsx("option",{value:"pending",children:"Очікуючі запити"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Сортувати за"}),a.jsxs("select",{value:k.sortBy,onChange:S=>p($=>({...$,sortBy:S.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"date",children:"Датою реєстрації"}),a.jsx("option",{value:"name",children:"Ім'ям"}),a.jsx("option",{value:"city",children:"Містом"}),a.jsx("option",{value:"lastSeen",children:"Останньою активністю"}),a.jsx("option",{value:"popularity",children:"Популярністю"})]})]})]}),a.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-6",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:k.hasAvatar,onChange:S=>p($=>({...$,hasAvatar:S.target.checked})),className:"rounded border-gray-300 text-blue-600 mr-2"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Тільки з фото"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:k.hasBio,onChange:S=>p($=>({...$,hasBio:S.target.checked})),className:"rounded border-gray-300 text-blue-600 mr-2"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Тільки з біографією"})]}),a.jsxs("button",{onClick:()=>p(S=>({...S,sortOrder:S.sortOrder==="asc"?"desc":"asc"})),className:"flex items-center text-sm text-blue-600 hover:text-blue-800",children:[a.jsx(lw,{size:16,className:"mr-1"}),k.sortOrder==="asc"?"За зростанням":"За спаданням"]})]}),a.jsx("button",{onClick:J,className:"text-sm text-blue-600 hover:text-blue-800",children:"Скинути фільтри"})]})]})]}),a.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[a.jsxs("p",{className:"text-sm text-gray-600",children:[l?`Знайдено ${r.length} користувачів з ${e.length}`:`Всього ${r.length} користувачів`,l&&a.jsxs("span",{children:[' за запитом "',a.jsx("span",{className:"font-semibold",children:l}),'"']})]}),N.size>0&&a.jsx("button",{onClick:()=>{N.size===r.length?pe():(P(new Set(r.map(S=>S.id))),_(!0))},className:"text-sm text-blue-600 hover:text-blue-800",children:N.size===r.length?"Скасувати вибір":"Обрати всіх"})]}),r.length>0?a.jsx("div",{className:b==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:r.map(Ae)}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Ir,{size:32,className:"text-gray-400"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Користувачів не знайдено"}),a.jsx("p",{className:"text-gray-600 mb-4",children:l||ie()>0?"Спробуйте змінити критерії пошуку або фільтри":"Поки що немає зареєстрованих користувачів"}),(l||ie()>0)&&a.jsx("button",{onClick:J,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Скинути всі фільтри"})]})]})})]})}function nu(){const[e,t]=x.useState([]),[r,n]=x.useState([]),[s,i]=x.useState(""),[l,o]=x.useState(!0),[c,d]=x.useState(null),[u,f]=x.useState(!1),[h,w]=x.useState({city:"",sortBy:"date",sortOrder:"desc",showOnlyAvailable:!1}),[b,j]=x.useState([]),k=Ht();x.useEffect(()=>{p()},[]),x.useEffect(()=>{m()},[s,e,h]);const p=async()=>{try{const{data:{user:_},error:C}=await V.auth.getUser();if(C||!_){k("/login");return}d(_.id);const{data:L,error:O}=await V.from("users").select("*").order("date",{ascending:!1});if(O)throw O;let H=(L==null?void 0:L.filter(F=>F.auth_user_id!==_.id))||[];H=H.filter(F=>F&&F.id&&F.name&&F.lastName&&F.email);const W=H.filter(F=>!F.privacy||F.privacy.profileVisibility==="public");t(W);const Y=[...new Set(W.filter(F=>F.city).map(F=>F.city))].sort();j(Y)}catch(_){console.error("Error fetching users:",_),t([]),n([])}finally{o(!1)}},m=()=>{let _=[...e];s.trim()!==""&&(_=_.filter(C=>C.name.toLowerCase().includes(s.toLowerCase())||C.lastName.toLowerCase().includes(s.toLowerCase())||C.email.toLowerCase().includes(s.toLowerCase())||C.city&&C.city.toLowerCase().includes(s.toLowerCase())||C.bio&&C.bio.toLowerCase().includes(s.toLowerCase()))),h.city&&(_=_.filter(C=>C.city===h.city)),_.sort((C,L)=>{let O=0;switch(h.sortBy){case"name":O=`${C.name} ${C.lastName}`.localeCompare(`${L.name} ${L.lastName}`);break;case"date":O=new Date(C.date).getTime()-new Date(L.date).getTime();break;case"city":O=(C.city||"").localeCompare(L.city||"");break}return h.sortOrder==="asc"?O:-O}),n(_)},g=async _=>{try{if(!c)return;const{data:C}=await V.from("friends").select("*").or(`and(user_id.eq.${c},friend_id.eq.${_}),and(user_id.eq.${_},friend_id.eq.${c})`);if(C&&C.length>0){alert("Запит на дружбу вже існує!");return}const{error:L}=await V.from("friends").insert([{user_id:c,friend_id:_,status:"pending"}]);if(L)throw L;alert("Запит на дружбу надіслано!")}catch(C){console.error("Error adding friend:",C),alert("Помилка при додаванні в друзі")}},N=()=>{w({city:"",sortBy:"date",sortOrder:"desc",showOnlyAvailable:!1}),i("")},P=_=>new Date(_).toLocaleDateString("uk-UA",{year:"numeric",month:"long",day:"numeric"}),I=()=>{let _=0;return h.city&&_++,(h.sortBy!=="date"||h.sortOrder!=="desc")&&_++,h.showOnlyAvailable&&_++,_};return l?a.jsxs("div",{className:"flex min-h-screen",children:[a.jsx(Ve,{}),a.jsx("div",{className:"flex-1 ml-64 p-8",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Завантаження користувачів..."})]})})]}):a.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[a.jsx(Ve,{}),a.jsx("div",{className:"flex-1 ml-64 p-8",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Користувачі"}),a.jsx("p",{className:"text-gray-600",children:"Знайдіть нових друзів та розширте свою мережу"})]}),a.jsxs("div",{className:"mb-6 space-y-4",children:[a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx(ui,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),a.jsx("input",{type:"text",placeholder:"Пошук за ім'ям, прізвищем, email, містом або біо",value:s,onChange:_=>i(_.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),s&&a.jsx("button",{onClick:()=>i(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a.jsx(Tt,{size:18})})]}),a.jsxs("button",{onClick:()=>f(!u),className:`flex items-center px-4 py-3 border rounded-lg transition-colors relative ${u?"bg-blue-50 border-blue-300 text-blue-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[a.jsx(Jc,{size:20,className:"mr-2"}),"Фільтри",I()>0&&a.jsx("span",{className:"absolute -top-2 -right-2 bg-blue-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:I()}),a.jsx(Wc,{size:16,className:`ml-2 transition-transform ${u?"rotate-180":""}`})]})]}),u&&a.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Місто"}),a.jsxs("select",{value:h.city,onChange:_=>w(C=>({...C,city:_.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Всі міста"}),b.map(_=>a.jsx("option",{value:_,children:_},_))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Сортувати за"}),a.jsxs("select",{value:h.sortBy,onChange:_=>w(C=>({...C,sortBy:_.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"date",children:"Датою реєстрації"}),a.jsx("option",{value:"name",children:"Ім'ям"}),a.jsx("option",{value:"city",children:"Містом"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Порядок"}),a.jsxs("select",{value:h.sortOrder,onChange:_=>w(C=>({...C,sortOrder:_.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"desc",children:"За спаданням"}),a.jsx("option",{value:"asc",children:"За зростанням"})]})]})]}),a.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t border-gray-200",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"showOnlyAvailable",checked:h.showOnlyAvailable,onChange:_=>w(C=>({...C,showOnlyAvailable:_.target.checked})),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200"}),a.jsx("label",{htmlFor:"showOnlyAvailable",className:"ml-2 text-sm text-gray-700",children:"Показувати тільки доступних користувачів"})]}),a.jsx("button",{onClick:N,className:"text-sm text-blue-600 hover:text-blue-800",children:"Скинути фільтри"})]})]})]}),a.jsx("div",{className:"mb-4 flex items-center justify-between",children:a.jsxs("p",{className:"text-sm text-gray-600",children:["Знайдено ",a.jsx("span",{className:"font-semibold",children:r.length})," ",r.length===1?"користувач":"користувачів",s&&a.jsxs("span",{children:[' за запитом "',a.jsx("span",{className:"font-semibold",children:s}),'"']})]})}),r.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:r.map(_=>{var C,L;return a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-all duration-200 cursor-pointer group hover:scale-105",onClick:()=>k(`/profile/${_.id}`),children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-xl font-bold overflow-hidden flex-shrink-0",children:_.avatar?a.jsx("img",{src:_.avatar,alt:_.name,className:"w-full h-full rounded-full object-cover"}):a.jsxs("span",{children:[(C=_.name[0])==null?void 0:C.toUpperCase(),(L=_.lastName[0])==null?void 0:L.toUpperCase()]})}),a.jsxs("div",{className:"ml-4 flex-1 min-w-0",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 group-hover:text-blue-600 transition-colors truncate",children:[_.name," ",_.lastName]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-1",children:[a.jsx(Na,{size:14,className:"mr-1 flex-shrink-0"}),a.jsxs("span",{className:"truncate",children:["Приєднався ",P(_.date)]})]})]})]}),_.bio&&a.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-3",children:_.bio}),a.jsxs("div",{className:"space-y-2 mb-4",children:[_.city&&a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(Jn,{size:14,className:"mr-2 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:_.city})]}),(!_.privacy||_.privacy.showEmail)&&a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(Kc,{size:14,className:"mr-2 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:_.email})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs("button",{onClick:O=>{O.stopPropagation(),g(_.auth_user_id)},className:"flex-1 flex items-center justify-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:[a.jsx(Xn,{size:16,className:"mr-1"}),"Додати"]}),a.jsx("button",{onClick:O=>{O.stopPropagation(),k(`/messages?user=${_.id}`)},className:"flex items-center justify-center px-3 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",title:"Написати повідомлення",children:a.jsx(ur,{size:16})})]})]})},_.id)})}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(nu,{size:32,className:"text-gray-400"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Користувачів не знайдено"}),a.jsx("p",{className:"text-gray-600 mb-4",children:s||h.city?"Спробуйте змінити критерії пошуку або фільтри":"Поки що немає зареєстрованих користувачів"}),(s||h.city||I()>0)&&a.jsx("button",{onClick:N,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Скинути всі фільтри"})]})]})})]})}class ar{static async getAllGames(t,r){try{let n=V.from("games").select(`
          *,
          developer:users!games_developer_id_fkey (
            name,
            lastName,
            avatar
          )
        `).eq("is_active",!0).order("created_at",{ascending:!1});t&&t!=="other"&&(n=n.eq("category",t)),r&&r.length>=2&&(n=n.ilike("title",`%${r}%`));const{data:s,error:i}=await n;if(i)throw i;return s||[]}catch(n){return console.error("Error fetching games:",n),[]}}static async getGameById(t){try{const{data:r,error:n}=await V.from("games").select(`
          *,
          developer:users!games_developer_id_fkey (
            name,
            lastName,
            avatar
          )
        `).eq("id",t).eq("is_active",!0).single();if(n)throw n;return r}catch(r){return console.error("Error fetching game:",r),null}}static async createGame(t){try{const r=await Ft.getCurrentUserProfile();if(!r)return null;const{data:n,error:s}=await V.from("games").insert([{...t,developer_id:r.id.toString()}]).select(`
          *,
          developer:users!games_developer_id_fkey (
            name,
            lastName,
            avatar
          )
        `).single();if(s)throw s;return n}catch(r){return console.error("Error creating game:",r),null}}static async updateGame(t,r){try{const{error:n}=await V.from("games").update({...r,updated_at:new Date().toISOString()}).eq("id",t);if(n)throw n;return!0}catch(n){return console.error("Error updating game:",n),!1}}static async deleteGame(t){try{const{error:r}=await V.from("games").delete().eq("id",t);if(r)throw r;return!0}catch(r){return console.error("Error deleting game:",r),!1}}static async getGamesByDeveloper(){try{const t=await Ft.getCurrentUserProfile();if(!t)return[];const{data:r,error:n}=await V.from("games").select(`
          *,
          developer:users!games_developer_id_fkey (
            name,
            lastName,
            avatar
          )
        `).eq("developer_id",t.id.toString()).order("created_at",{ascending:!1});if(n)throw n;return r||[]}catch(t){return console.error("Error fetching developer games:",t),[]}}static async recordGamePlay(t,r=0){try{const n=await Ft.getCurrentUserProfile();if(!n)return!1;const{error:s}=await V.from("game_plays").insert([{game_id:t,user_id:n.id.toString(),duration:r}]);if(s)throw s;return!0}catch(n){return console.error("Error recording game play:",n),!1}}static async rateGame(t,r,n=""){try{const s=await Ft.getCurrentUserProfile();if(!s)return!1;const{error:i}=await V.from("game_ratings").upsert([{game_id:t,user_id:s.id.toString(),rating:r,review:n}]);if(i)throw i;return!0}catch(s){return console.error("Error rating game:",s),!1}}static async getGameRatings(t){try{const{data:r,error:n}=await V.from("game_ratings").select(`
          *,
          user:users!game_ratings_user_id_fkey (
            name,
            lastName,
            avatar
          )
        `).eq("game_id",t).order("created_at",{ascending:!1});if(n)throw n;return r||[]}catch(r){return console.error("Error fetching game ratings:",r),[]}}static async getUserGameRating(t){try{const r=await Ft.getCurrentUserProfile();if(!r)return null;const{data:n,error:s}=await V.from("game_ratings").select("*").eq("game_id",t).eq("user_id",r.id.toString()).single();if(s){if(s.code==="PGRST116")return null;throw s}return n}catch(r){return console.error("Error fetching user game rating:",r),null}}static async getPopularGames(t=10){try{const{data:r,error:n}=await V.from("games").select(`
          *,
          developer:users!games_developer_id_fkey (
            name,
            lastName,
            avatar
          )
        `).eq("is_active",!0).order("play_count",{ascending:!1}).limit(t);if(n)throw n;return r||[]}catch(r){return console.error("Error fetching popular games:",r),[]}}static async getTopRatedGames(t=10){try{const{data:r,error:n}=await V.from("games").select(`
          *,
          developer:users!games_developer_id_fkey (
            name,
            lastName,
            avatar
          )
        `).eq("is_active",!0).gt("rating",0).order("rating",{ascending:!1}).limit(t);if(n)throw n;return r||[]}catch(r){return console.error("Error fetching top rated games:",r),[]}}}function u1({game:e,onPlay:t}){var s,i,l,o,c,d;const r=u=>({action:"Екшн",puzzle:"Головоломки",strategy:"Стратегія",arcade:"Аркада",adventure:"Пригоди",simulation:"Симулятори",sports:"Спорт",racing:"Гонки",other:"Інше"})[u]||u,n=u=>u>=1e3?`${(u/1e3).toFixed(1)}k`:u.toString();return a.jsxs("div",{className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow overflow-hidden group",children:[a.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-blue-500 to-purple-600 overflow-hidden",children:[e.thumbnail?a.jsx("img",{src:e.thumbnail,alt:e.title,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.jsx(Il,{className:"text-white opacity-50",size:48})}),a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsxs("button",{onClick:t,className:"flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Il,{size:20,className:"mr-2"}),"Грати"]})}),a.jsx("div",{className:"absolute top-3 left-3",children:a.jsx("span",{className:"px-2 py-1 bg-black bg-opacity-50 text-white text-xs rounded-full",children:r(e.category)})}),e.rating>0&&a.jsx("div",{className:"absolute top-3 right-3",children:a.jsxs("div",{className:"flex items-center px-2 py-1 bg-black bg-opacity-50 text-white text-xs rounded-full",children:[a.jsx(Go,{size:12,className:"mr-1 fill-current text-yellow-400"}),e.rating.toFixed(1)]})})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2 line-clamp-1",children:e.title}),a.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description||"Немає опису"}),a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center mr-2",children:(s=e.developer)!=null&&s.avatar?a.jsx("img",{src:e.developer.avatar,alt:e.developer.name,className:"w-full h-full rounded-full object-cover"}):a.jsx("span",{className:"text-xs text-gray-600",children:(o=(l=(i=e.developer)==null?void 0:i.name)==null?void 0:l[0])==null?void 0:o.toUpperCase()})}),a.jsxs("span",{className:"text-sm text-gray-600",children:[(c=e.developer)==null?void 0:c.name," ",(d=e.developer)==null?void 0:d.lastName]})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(hw,{size:16,className:"mr-1"}),a.jsxs("span",{children:[n(e.play_count)," грали"]})]}),a.jsx("span",{children:new Date(e.created_at).toLocaleDateString("uk-UA")})]}),a.jsxs("button",{onClick:t,className:"w-full mt-4 flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Il,{size:18,className:"mr-2"}),"Грати зараз"]})]})]})}const d1=[{value:"action",label:"Екшн"},{value:"puzzle",label:"Головоломки"},{value:"strategy",label:"Стратегія"},{value:"arcade",label:"Аркада"},{value:"adventure",label:"Пригоди"},{value:"simulation",label:"Симулятори"},{value:"sports",label:"Спорт"},{value:"racing",label:"Гонки"},{value:"other",label:"Інше"}];function f1({onClose:e,onSubmit:t}){const[r,n]=x.useState(""),[s,i]=x.useState(""),[l,o]=x.useState(""),[c,d]=x.useState(""),[u,f]=x.useState("other"),[h,w]=x.useState(!1),b=async j=>{if(j.preventDefault(),!(!r.trim()||!c.trim())){w(!0);try{await t({title:r.trim(),description:s.trim(),thumbnail:l.trim()||void 0,game_url:c.trim(),category:u})}finally{w(!1)}}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Додати нову гру"}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:a.jsx(Tt,{size:24})})]}),a.jsxs("form",{onSubmit:b,className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Назва гри *"}),a.jsx("input",{type:"text",value:r,onChange:j=>n(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Введіть назву гри",required:!0,maxLength:100})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Опис гри"}),a.jsx("textarea",{value:s,onChange:j=>i(j.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Розкажіть про вашу гру...",maxLength:500})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Категорія *"}),a.jsx("select",{value:u,onChange:j=>f(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:d1.map(j=>a.jsx("option",{value:j.value,children:j.label},j.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL гри *"}),a.jsxs("div",{className:"relative",children:[a.jsx(xw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),a.jsx("input",{type:"url",value:c,onChange:j=>d(j.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/game.html",required:!0})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Посилання на HTML файл гри або веб-сторінку з грою"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Зображення гри (URL)"}),a.jsxs("div",{className:"relative",children:[a.jsx(Xc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),a.jsx("input",{type:"url",value:l,onChange:j=>o(j.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/thumbnail.jpg"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Посилання на зображення-превью гри (необов'язково)"})]}),l&&a.jsxs("div",{className:"mt-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Превью:"}),a.jsx("img",{src:l,alt:"Game thumbnail preview",className:"w-full h-32 object-cover rounded-lg",onError:j=>{j.currentTarget.style.display="none"}})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Скасувати"}),a.jsx("button",{type:"submit",disabled:h||!r.trim()||!c.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Додавання...":"Додати гру"})]})]})]})})}function h1({game:e,onClose:t}){var C,L;const[r,n]=x.useState(!1),[s,i]=x.useState(null),[l,o]=x.useState([]),[c,d]=x.useState(0),[u,f]=x.useState(""),[h,w]=x.useState(!1),[b]=x.useState(Date.now()),[j,k]=x.useState(!1);x.useEffect(()=>{p(),m(),g()},[e.id]);const p=async()=>{const O=await ar.getGameRatings(e.id);o(O)},m=async()=>{const O=await ar.getUserGameRating(e.id);i(O),O&&(d(O.rating),f(O.review))},g=async()=>{await ar.recordGamePlay(e.id)},N=async O=>{if(O.preventDefault(),c===0)return;k(!0),await ar.rateGame(e.id,c,u)&&(await p(),await m(),w(!1)),k(!1)},P=async()=>{const O=Math.floor((Date.now()-b)/1e3);O>10&&await ar.recordGamePlay(e.id,O),t()},I=()=>{n(!r)},_=(O,H=!1,W)=>a.jsx("div",{className:"flex",children:[1,2,3,4,5].map(Y=>a.jsx("button",{type:H?"button":void 0,onClick:H&&W?()=>W(Y):void 0,className:`${H?"cursor-pointer hover:scale-110":"cursor-default"} transition-transform`,disabled:!H,children:a.jsx(Go,{size:20,className:`${Y<=O?"text-yellow-400 fill-current":"text-gray-300"}`})},Y))});return a.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 ${r?"p-0":"p-4"}`,children:a.jsxs("div",{className:`bg-white rounded-lg shadow-xl ${r?"w-full h-full rounded-none":"w-full max-w-6xl h-[90vh]"} flex flex-col`,children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mr-4",children:e.title}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(Go,{size:16,className:"mr-1 text-yellow-400 fill-current"}),a.jsxs("span",{children:[e.rating.toFixed(1)," (",l.length," відгуків)"]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:I,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg",title:r?"Вийти з повноекранного режиму":"Повноекранний режим",children:a.jsx(ww,{size:20})}),a.jsx("button",{onClick:()=>window.location.reload(),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg",title:"Перезапустити гру",children:a.jsx(Xm,{size:20})}),a.jsx("button",{onClick:P,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg",children:a.jsx(Tt,{size:20})})]})]}),a.jsxs("div",{className:"flex-1 flex",children:[a.jsx("div",{className:"flex-1 bg-gray-100",children:a.jsx("iframe",{src:e.game_url,className:"w-full h-full border-0",title:e.title,allowFullScreen:!0,sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-pointer-lock"})}),!r&&a.jsx("div",{className:"w-80 border-l border-gray-200 bg-gray-50 overflow-y-auto",children:a.jsxs("div",{className:"p-4 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Про гру"}),a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:e.description||"Немає опису"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Розробник:"}),a.jsxs("span",{className:"text-gray-900",children:[(C=e.developer)==null?void 0:C.name," ",(L=e.developer)==null?void 0:L.lastName]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Категорія:"}),a.jsx("span",{className:"text-gray-900",children:e.category})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Зіграно:"}),a.jsxs("span",{className:"text-gray-900",children:[e.play_count," разів"]})]})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:"Оцінка"}),!s&&a.jsx("button",{onClick:()=>w(!0),className:"text-sm text-blue-600 hover:text-blue-700",children:"Оцінити"})]}),h&&a.jsxs("form",{onSubmit:N,className:"mb-4 p-3 bg-white rounded-lg border",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ваша оцінка:"}),_(c,!0,d)]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Відгук (необов'язково):"}),a.jsx("textarea",{value:u,onChange:O=>f(O.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Поділіться враженнями від гри..."})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{type:"button",onClick:()=>w(!1),className:"px-3 py-1 text-sm text-gray-600 hover:text-gray-800",children:"Скасувати"}),a.jsx("button",{type:"submit",disabled:j||c===0,className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 disabled:opacity-50",children:j?"Збереження...":"Зберегти"})]})]}),s&&a.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Ваша оцінка:"}),a.jsx("button",{onClick:()=>w(!0),className:"text-sm text-blue-600 hover:text-blue-700",children:"Змінити"})]}),_(s.rating),s.review&&a.jsx("p",{className:"text-sm text-gray-600 mt-2",children:s.review})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[a.jsx(bw,{size:18,className:"mr-2"}),"Відгуки (",l.length,")"]}),a.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:l.length>0?l.map(O=>{var H,W,Y,F,ce,oe;return a.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center mr-2",children:(H=O.user)!=null&&H.avatar?a.jsx("img",{src:O.user.avatar,alt:O.user.name,className:"w-full h-full rounded-full object-cover"}):a.jsx("span",{className:"text-xs text-gray-600",children:(F=(Y=(W=O.user)==null?void 0:W.name)==null?void 0:Y[0])==null?void 0:F.toUpperCase()})}),a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[(ce=O.user)==null?void 0:ce.name," ",(oe=O.user)==null?void 0:oe.lastName]})]}),_(O.rating)]}),O.review&&a.jsx("p",{className:"text-sm text-gray-600",children:O.review}),a.jsx("p",{className:"text-xs text-gray-400 mt-2",children:new Date(O.created_at).toLocaleDateString("uk-UA")})]},O.id)}):a.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Поки немає відгуків"})})]})]})})]})]})})}const m1=[{value:"action",label:"Екшн"},{value:"puzzle",label:"Головоломки"},{value:"strategy",label:"Стратегія"},{value:"arcade",label:"Аркада"},{value:"adventure",label:"Пригоди"},{value:"simulation",label:"Симулятори"},{value:"sports",label:"Спорт"},{value:"racing",label:"Гонки"},{value:"other",label:"Інше"}];function p1(){const[e,t]=x.useState([]),[r,n]=x.useState([]),[s,i]=x.useState([]),[l,o]=x.useState(!0),[c,d]=x.useState(""),[u,f]=x.useState(""),[h,w]=x.useState(!1),[b,j]=x.useState(null),[k,p]=x.useState("all");Ht(),x.useEffect(()=>{m(),g(),N()},[]),x.useEffect(()=>{const C=setTimeout(()=>{m()},300);return()=>clearTimeout(C)},[c,u]);const m=async()=>{try{o(!0);const C=await ar.getAllGames(u,c);t(C)}catch(C){console.error("Error loading games:",C)}finally{o(!1)}},g=async()=>{try{const C=await ar.getPopularGames(6);n(C)}catch(C){console.error("Error loading popular games:",C)}},N=async()=>{try{const C=await ar.getTopRatedGames(6);i(C)}catch(C){console.error("Error loading top rated games:",C)}},P=async C=>{const L=await ar.createGame(C);L&&(t(O=>[L,...O]),w(!1))},I=C=>{j(C)},_=()=>{switch(k){case"popular":return r;case"top-rated":return s;default:return e}};return a.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[a.jsx(Ve,{}),a.jsx("div",{className:"flex-1 ml-64 p-8",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Dd,{className:"h-8 w-8 text-blue-600 mr-3"}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Ігри"})]}),a.jsxs("button",{onClick:()=>w(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Ea,{size:20,className:"mr-2"}),"Додати гру"]})]}),a.jsxs("div",{className:"flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg w-fit",children:[a.jsx("button",{onClick:()=>p("all"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${k==="all"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Всі ігри"}),a.jsxs("button",{onClick:()=>p("popular"),className:`flex items-center px-4 py-2 rounded-md text-sm font-medium transition-colors ${k==="popular"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[a.jsx(Zm,{size:16,className:"mr-1"}),"Популярні"]}),a.jsxs("button",{onClick:()=>p("top-rated"),className:`flex items-center px-4 py-2 rounded-md text-sm font-medium transition-colors ${k==="top-rated"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[a.jsx(ow,{size:16,className:"mr-1"}),"Найкращі"]})]}),k==="all"&&a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(ui,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),a.jsx("input",{type:"text",placeholder:"Пошук ігор...",value:c,onChange:C=>d(C.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(mw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),a.jsxs("select",{value:u,onChange:C=>f(C.target.value),className:"pl-10 pr-8 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[a.jsx("option",{value:"",children:"Всі категорії"}),m1.map(C=>a.jsx("option",{value:C.value,children:C.label},C.value))]})]})]}),l?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Завантаження ігор..."})]}):_().length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:_().map(C=>a.jsx(u1,{game:C,onPlay:()=>I(C)},C.id))}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Dd,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:c||u?"Ігри не знайдено":"Немає ігор"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:c||u?"Спробуйте змінити пошуковий запит або фільтр":"Додайте першу гру для спільноти"}),!c&&!u&&a.jsx("div",{className:"mt-6",children:a.jsxs("button",{onClick:()=>w(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[a.jsx(Ea,{className:"-ml-1 mr-2 h-5 w-5"}),"Додати гру"]})})]})]})}),h&&a.jsx(f1,{onClose:()=>w(!1),onSubmit:P}),b&&a.jsx(h1,{game:b,onClose:()=>j(null)})]})}function g1(){return x.useEffect(()=>{(async()=>{var r,n,s,i,l,o,c;const{data:{session:t}}=await V.auth.getSession();if(t!=null&&t.user){const{data:d}=await V.from("users").select("id").eq("email",t.user.email).single();d||await V.from("users").insert([{name:((r=t.user.user_metadata)==null?void 0:r.name)||((s=(n=t.user.user_metadata)==null?void 0:n.full_name)==null?void 0:s.split(" ")[0])||((i=t.user.email)==null?void 0:i.split("@")[0])||"User",lastName:((l=t.user.user_metadata)==null?void 0:l.lastName)||((c=(o=t.user.user_metadata)==null?void 0:o.full_name)==null?void 0:c.split(" ").slice(1).join(" "))||"",email:t.user.email,date:new Date().toISOString(),notifications:{email:!0,messages:!0,friendRequests:!0},privacy:{profileVisibility:"public",showBirthDate:!0,showEmail:!1}}])}})()},[]),null}function y1(){return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("header",{className:"bg-white shadow-sm",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(nu,{className:"h-8 w-8 text-blue-600"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Соціальна мережа"})]}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx(ei,{to:"/login",className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:"Вхід"}),a.jsx(ei,{to:"/register",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-200",children:"Реєстрація"})]})]})})}),a.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-8",children:"Ласкаво просимо до нашої спільноти"}),a.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Приєднуйтесь до нашої соціальної мережі, щоб спілкуватися з друзями, ділитися моментами та знаходити нові знайомства."}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mt-12",children:[a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[a.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Спілкування"}),a.jsx("p",{className:"text-gray-600",children:"Спілкуйтеся з друзями та знаходьте нові знайомства"})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[a.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Контент"}),a.jsx("p",{className:"text-gray-600",children:"Діліться фото, відео та іншими матеріалами"})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[a.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Приватність"}),a.jsx("p",{className:"text-gray-600",children:"Повний контроль над вашими даними та приватністю"})]})]})]})})]})}function x1(){return a.jsxs(a.Fragment,{children:[a.jsx(g1,{}),a.jsxs(Sy,{children:[a.jsx(yt,{path:"/",element:a.jsx(y1,{})}),a.jsx(yt,{path:"/login",element:a.jsx(Tw,{})}),a.jsx(yt,{path:"/register",element:a.jsx(Ow,{})}),a.jsx(yt,{path:"/profile",element:a.jsx(r1,{})}),a.jsx(yt,{path:"/messages",element:a.jsx(s1,{})}),a.jsx(yt,{path:"/friends",element:a.jsx(i1,{})}),a.jsx(yt,{path:"/people",element:a.jsx(c1,{})}),a.jsx(yt,{path:"/users",element:a.jsx(nu,{})}),a.jsx(yt,{path:"/settings",element:a.jsx(a1,{})}),a.jsx(yt,{path:"/groups",element:a.jsx(l1,{})}),a.jsx(yt,{path:"/groups/:groupId",element:a.jsx(o1,{})}),a.jsx(yt,{path:"/games",element:a.jsx(p1,{})})]})]})}fm(document.getElementById("root")).render(a.jsx(x.StrictMode,{children:a.jsx(Ly,{basename:"/Nexus",children:a.jsx(x1,{})})}));export{cp as g};
