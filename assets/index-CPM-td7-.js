function Cp(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in e)){const a=Object.getOwnPropertyDescriptor(s,n);a&&Object.defineProperty(e,n,a.get?a:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();var zt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ep(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Pp(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var n=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,n.get?n:{enumerable:!0,get:function(){return e[s]}})}),r}var wh={exports:{}},Va={},bh={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xi=Symbol.for("react.element"),Tp=Symbol.for("react.portal"),Op=Symbol.for("react.fragment"),Rp=Symbol.for("react.strict_mode"),Ap=Symbol.for("react.profiler"),Lp=Symbol.for("react.provider"),$p=Symbol.for("react.context"),zp=Symbol.for("react.forward_ref"),Up=Symbol.for("react.suspense"),Dp=Symbol.for("react.memo"),Mp=Symbol.for("react.lazy"),Cu=Symbol.iterator;function Ip(e){return e===null||typeof e!="object"?null:(e=Cu&&e[Cu]||e["@@iterator"],typeof e=="function"?e:null)}var jh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_h=Object.assign,Nh={};function ln(e,t,r){this.props=e,this.context=t,this.refs=Nh,this.updater=r||jh}ln.prototype.isReactComponent={};ln.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ln.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function kh(){}kh.prototype=ln.prototype;function oc(e,t,r){this.props=e,this.context=t,this.refs=Nh,this.updater=r||jh}var cc=oc.prototype=new kh;cc.constructor=oc;_h(cc,ln.prototype);cc.isPureReactComponent=!0;var Eu=Array.isArray,Sh=Object.prototype.hasOwnProperty,uc={current:null},Ch={key:!0,ref:!0,__self:!0,__source:!0};function Eh(e,t,r){var s,n={},a=null,l=null;if(t!=null)for(s in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(a=""+t.key),t)Sh.call(t,s)&&!Ch.hasOwnProperty(s)&&(n[s]=t[s]);var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];n.children=c}if(e&&e.defaultProps)for(s in o=e.defaultProps,o)n[s]===void 0&&(n[s]=o[s]);return{$$typeof:xi,type:e,key:a,ref:l,props:n,_owner:uc.current}}function Fp(e,t){return{$$typeof:xi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function dc(e){return typeof e=="object"&&e!==null&&e.$$typeof===xi}function Bp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Pu=/\/+/g;function vl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Bp(""+e.key):t.toString(36)}function Qi(e,t,r,s,n){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case xi:case Tp:l=!0}}if(l)return l=e,n=n(l),e=s===""?"."+vl(l,0):s,Eu(n)?(r="",e!=null&&(r=e.replace(Pu,"$&/")+"/"),Qi(n,t,r,"",function(d){return d})):n!=null&&(dc(n)&&(n=Fp(n,r+(!n.key||l&&l.key===n.key?"":(""+n.key).replace(Pu,"$&/")+"/")+e)),t.push(n)),1;if(l=0,s=s===""?".":s+":",Eu(e))for(var o=0;o<e.length;o++){a=e[o];var c=s+vl(a,o);l+=Qi(a,t,r,c,n)}else if(c=Ip(e),typeof c=="function")for(e=c.call(e),o=0;!(a=e.next()).done;)a=a.value,c=s+vl(a,o++),l+=Qi(a,t,r,c,n);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Ci(e,t,r){if(e==null)return e;var s=[],n=0;return Qi(e,s,"","",function(a){return t.call(r,a,n++)}),s}function Vp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ut={current:null},Ji={transition:null},qp={ReactCurrentDispatcher:ut,ReactCurrentBatchConfig:Ji,ReactCurrentOwner:uc};function Ph(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:Ci,forEach:function(e,t,r){Ci(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ci(e,function(){t++}),t},toArray:function(e){return Ci(e,function(t){return t})||[]},only:function(e){if(!dc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ue.Component=ln;ue.Fragment=Op;ue.Profiler=Ap;ue.PureComponent=oc;ue.StrictMode=Rp;ue.Suspense=Up;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qp;ue.act=Ph;ue.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=_h({},e.props),n=e.key,a=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,l=uc.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)Sh.call(t,c)&&!Ch.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];s.children=o}return{$$typeof:xi,type:e.type,key:n,ref:a,props:s,_owner:l}};ue.createContext=function(e){return e={$$typeof:$p,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Lp,_context:e},e.Consumer=e};ue.createElement=Eh;ue.createFactory=function(e){var t=Eh.bind(null,e);return t.type=e,t};ue.createRef=function(){return{current:null}};ue.forwardRef=function(e){return{$$typeof:zp,render:e}};ue.isValidElement=dc;ue.lazy=function(e){return{$$typeof:Mp,_payload:{_status:-1,_result:e},_init:Vp}};ue.memo=function(e,t){return{$$typeof:Dp,type:e,compare:t===void 0?null:t}};ue.startTransition=function(e){var t=Ji.transition;Ji.transition={};try{e()}finally{Ji.transition=t}};ue.unstable_act=Ph;ue.useCallback=function(e,t){return ut.current.useCallback(e,t)};ue.useContext=function(e){return ut.current.useContext(e)};ue.useDebugValue=function(){};ue.useDeferredValue=function(e){return ut.current.useDeferredValue(e)};ue.useEffect=function(e,t){return ut.current.useEffect(e,t)};ue.useId=function(){return ut.current.useId()};ue.useImperativeHandle=function(e,t,r){return ut.current.useImperativeHandle(e,t,r)};ue.useInsertionEffect=function(e,t){return ut.current.useInsertionEffect(e,t)};ue.useLayoutEffect=function(e,t){return ut.current.useLayoutEffect(e,t)};ue.useMemo=function(e,t){return ut.current.useMemo(e,t)};ue.useReducer=function(e,t,r){return ut.current.useReducer(e,t,r)};ue.useRef=function(e){return ut.current.useRef(e)};ue.useState=function(e){return ut.current.useState(e)};ue.useSyncExternalStore=function(e,t,r){return ut.current.useSyncExternalStore(e,t,r)};ue.useTransition=function(){return ut.current.useTransition()};ue.version="18.3.1";bh.exports=ue;var g=bh.exports;const Ot=Ep(g),Gp=Cp({__proto__:null,default:Ot},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hp=g,Wp=Symbol.for("react.element"),Kp=Symbol.for("react.fragment"),Qp=Object.prototype.hasOwnProperty,Jp=Hp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Xp={key:!0,ref:!0,__self:!0,__source:!0};function Th(e,t,r){var s,n={},a=null,l=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(s in t)Qp.call(t,s)&&!Xp.hasOwnProperty(s)&&(n[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)n[s]===void 0&&(n[s]=t[s]);return{$$typeof:Wp,type:e,key:a,ref:l,props:n,_owner:Jp.current}}Va.Fragment=Kp;Va.jsx=Th;Va.jsxs=Th;wh.exports=Va;var i=wh.exports,Oh={exports:{}},Ct={},Rh={exports:{}},Ah={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(L,Z){var Y=L.length;L.push(Z);e:for(;0<Y;){var ne=Y-1>>>1,ie=L[ne];if(0<n(ie,Z))L[ne]=Z,L[Y]=ie,Y=ne;else break e}}function r(L){return L.length===0?null:L[0]}function s(L){if(L.length===0)return null;var Z=L[0],Y=L.pop();if(Y!==Z){L[0]=Y;e:for(var ne=0,ie=L.length,Ye=ie>>>1;ne<Ye;){var N=2*(ne+1)-1,z=L[N],re=N+1,ae=L[re];if(0>n(z,Y))re<ie&&0>n(ae,z)?(L[ne]=ae,L[re]=Y,ne=re):(L[ne]=z,L[N]=Y,ne=N);else if(re<ie&&0>n(ae,Y))L[ne]=ae,L[re]=Y,ne=re;else break e}}return Z}function n(L,Z){var Y=L.sortIndex-Z.sortIndex;return Y!==0?Y:L.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,h=null,f=3,v=!1,b=!1,j=!1,k=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(L){for(var Z=r(d);Z!==null;){if(Z.callback===null)s(d);else if(Z.startTime<=L)s(d),Z.sortIndex=Z.expirationTime,t(c,Z);else break;Z=r(d)}}function _(L){if(j=!1,y(L),!b)if(r(c)!==null)b=!0,ce(O);else{var Z=r(d);Z!==null&&me(_,Z.startTime-L)}}function O(L,Z){b=!1,j&&(j=!1,p(E),E=-1),v=!0;var Y=f;try{for(y(Z),h=r(c);h!==null&&(!(h.expirationTime>Z)||L&&!H());){var ne=h.callback;if(typeof ne=="function"){h.callback=null,f=h.priorityLevel;var ie=ne(h.expirationTime<=Z);Z=e.unstable_now(),typeof ie=="function"?h.callback=ie:h===r(c)&&s(c),y(Z)}else s(c);h=r(c)}if(h!==null)var Ye=!0;else{var N=r(d);N!==null&&me(_,N.startTime-Z),Ye=!1}return Ye}finally{h=null,f=Y,v=!1}}var I=!1,C=null,E=-1,$=5,T=-1;function H(){return!(e.unstable_now()-T<$)}function G(){if(C!==null){var L=e.unstable_now();T=L;var Z=!0;try{Z=C(!0,L)}finally{Z?J():(I=!1,C=null)}}else I=!1}var J;if(typeof m=="function")J=function(){m(G)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,oe=F.port2;F.port1.onmessage=G,J=function(){oe.postMessage(null)}}else J=function(){k(G,0)};function ce(L){C=L,I||(I=!0,J())}function me(L,Z){E=k(function(){L(e.unstable_now())},Z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){b||v||(b=!0,ce(O))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(L){switch(f){case 1:case 2:case 3:var Z=3;break;default:Z=f}var Y=f;f=Z;try{return L()}finally{f=Y}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,Z){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var Y=f;f=L;try{return Z()}finally{f=Y}},e.unstable_scheduleCallback=function(L,Z,Y){var ne=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ne+Y:ne):Y=ne,L){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=Y+ie,L={id:u++,callback:Z,priorityLevel:L,startTime:Y,expirationTime:ie,sortIndex:-1},Y>ne?(L.sortIndex=Y,t(d,L),r(c)===null&&L===r(d)&&(j?(p(E),E=-1):j=!0,me(_,Y-ne))):(L.sortIndex=ie,t(c,L),b||v||(b=!0,ce(O))),L},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(L){var Z=f;return function(){var Y=f;f=Z;try{return L.apply(this,arguments)}finally{f=Y}}}})(Ah);Rh.exports=Ah;var Zp=Rh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yp=g,St=Zp;function U(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Lh=new Set,Qn={};function ws(e,t){Ks(e,t),Ks(e+"Capture",t)}function Ks(e,t){for(Qn[e]=t,e=0;e<t.length;e++)Lh.add(t[e])}var yr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),eo=Object.prototype.hasOwnProperty,e0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Tu={},Ou={};function t0(e){return eo.call(Ou,e)?!0:eo.call(Tu,e)?!1:e0.test(e)?Ou[e]=!0:(Tu[e]=!0,!1)}function r0(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function s0(e,t,r,s){if(t===null||typeof t>"u"||r0(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function dt(e,t,r,s,n,a,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=l}var Ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ze[e]=new dt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ze[t]=new dt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ze[e]=new dt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ze[e]=new dt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ze[e]=new dt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ze[e]=new dt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ze[e]=new dt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ze[e]=new dt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ze[e]=new dt(e,5,!1,e.toLowerCase(),null,!1,!1)});var hc=/[\-:]([a-z])/g;function fc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(hc,fc);Ze[t]=new dt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(hc,fc);Ze[t]=new dt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(hc,fc);Ze[t]=new dt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ze[e]=new dt(e,1,!1,e.toLowerCase(),null,!1,!1)});Ze.xlinkHref=new dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ze[e]=new dt(e,1,!1,e.toLowerCase(),null,!0,!0)});function mc(e,t,r,s){var n=Ze.hasOwnProperty(t)?Ze[t]:null;(n!==null?n.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(s0(t,r,n,s)&&(r=null),s||n===null?t0(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=r===null?n.type===3?!1:"":r:(t=n.attributeName,s=n.attributeNamespace,r===null?e.removeAttribute(t):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var jr=Yp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ei=Symbol.for("react.element"),Ps=Symbol.for("react.portal"),Ts=Symbol.for("react.fragment"),pc=Symbol.for("react.strict_mode"),to=Symbol.for("react.profiler"),$h=Symbol.for("react.provider"),zh=Symbol.for("react.context"),gc=Symbol.for("react.forward_ref"),ro=Symbol.for("react.suspense"),so=Symbol.for("react.suspense_list"),yc=Symbol.for("react.memo"),Cr=Symbol.for("react.lazy"),Uh=Symbol.for("react.offscreen"),Ru=Symbol.iterator;function yn(e){return e===null||typeof e!="object"?null:(e=Ru&&e[Ru]||e["@@iterator"],typeof e=="function"?e:null)}var Oe=Object.assign,wl;function En(e){if(wl===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);wl=t&&t[1]||""}return`
`+wl+e}var bl=!1;function jl(e,t){if(!e||bl)return"";bl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),a=s.stack.split(`
`),l=n.length-1,o=a.length-1;1<=l&&0<=o&&n[l]!==a[o];)o--;for(;1<=l&&0<=o;l--,o--)if(n[l]!==a[o]){if(l!==1||o!==1)do if(l--,o--,0>o||n[l]!==a[o]){var c=`
`+n[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{bl=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?En(e):""}function n0(e){switch(e.tag){case 5:return En(e.type);case 16:return En("Lazy");case 13:return En("Suspense");case 19:return En("SuspenseList");case 0:case 2:case 15:return e=jl(e.type,!1),e;case 11:return e=jl(e.type.render,!1),e;case 1:return e=jl(e.type,!0),e;default:return""}}function no(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ts:return"Fragment";case Ps:return"Portal";case to:return"Profiler";case pc:return"StrictMode";case ro:return"Suspense";case so:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case zh:return(e.displayName||"Context")+".Consumer";case $h:return(e._context.displayName||"Context")+".Provider";case gc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case yc:return t=e.displayName||null,t!==null?t:no(e.type)||"Memo";case Cr:t=e._payload,e=e._init;try{return no(e(t))}catch{}}return null}function i0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return no(t);case 8:return t===pc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Wr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Dh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function a0(e){var t=Dh(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(l){s=""+l,a.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pi(e){e._valueTracker||(e._valueTracker=a0(e))}function Mh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=Dh(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function ua(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function io(e,t){var r=t.checked;return Oe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Au(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=Wr(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ih(e,t){t=t.checked,t!=null&&mc(e,"checked",t,!1)}function ao(e,t){Ih(e,t);var r=Wr(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?lo(e,t.type,r):t.hasOwnProperty("defaultValue")&&lo(e,t.type,Wr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Lu(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function lo(e,t,r){(t!=="number"||ua(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Pn=Array.isArray;function Fs(e,t,r,s){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&s&&(e[r].defaultSelected=!0)}else{for(r=""+Wr(r),t=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,s&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function oo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(U(91));return Oe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function $u(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(U(92));if(Pn(r)){if(1<r.length)throw Error(U(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Wr(r)}}function Fh(e,t){var r=Wr(t.value),s=Wr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function zu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Bh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function co(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Bh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ti,Vh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,n){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ti=Ti||document.createElement("div"),Ti.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ti.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Jn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var $n={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},l0=["Webkit","ms","Moz","O"];Object.keys($n).forEach(function(e){l0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$n[t]=$n[e]})});function qh(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||$n.hasOwnProperty(e)&&$n[e]?(""+t).trim():t+"px"}function Gh(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,n=qh(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,n):e[r]=n}}var o0=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function uo(e,t){if(t){if(o0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(U(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(U(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(U(61))}if(t.style!=null&&typeof t.style!="object")throw Error(U(62))}}function ho(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fo=null;function xc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var mo=null,Bs=null,Vs=null;function Uu(e){if(e=bi(e)){if(typeof mo!="function")throw Error(U(280));var t=e.stateNode;t&&(t=Ka(t),mo(e.stateNode,e.type,t))}}function Hh(e){Bs?Vs?Vs.push(e):Vs=[e]:Bs=e}function Wh(){if(Bs){var e=Bs,t=Vs;if(Vs=Bs=null,Uu(e),t)for(e=0;e<t.length;e++)Uu(t[e])}}function Kh(e,t){return e(t)}function Qh(){}var _l=!1;function Jh(e,t,r){if(_l)return e(t,r);_l=!0;try{return Kh(e,t,r)}finally{_l=!1,(Bs!==null||Vs!==null)&&(Qh(),Wh())}}function Xn(e,t){var r=e.stateNode;if(r===null)return null;var s=Ka(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(U(231,t,typeof r));return r}var po=!1;if(yr)try{var xn={};Object.defineProperty(xn,"passive",{get:function(){po=!0}}),window.addEventListener("test",xn,xn),window.removeEventListener("test",xn,xn)}catch{po=!1}function c0(e,t,r,s,n,a,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var zn=!1,da=null,ha=!1,go=null,u0={onError:function(e){zn=!0,da=e}};function d0(e,t,r,s,n,a,l,o,c){zn=!1,da=null,c0.apply(u0,arguments)}function h0(e,t,r,s,n,a,l,o,c){if(d0.apply(this,arguments),zn){if(zn){var d=da;zn=!1,da=null}else throw Error(U(198));ha||(ha=!0,go=d)}}function bs(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Xh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Du(e){if(bs(e)!==e)throw Error(U(188))}function f0(e){var t=e.alternate;if(!t){if(t=bs(e),t===null)throw Error(U(188));return t!==e?null:e}for(var r=e,s=t;;){var n=r.return;if(n===null)break;var a=n.alternate;if(a===null){if(s=n.return,s!==null){r=s;continue}break}if(n.child===a.child){for(a=n.child;a;){if(a===r)return Du(n),e;if(a===s)return Du(n),t;a=a.sibling}throw Error(U(188))}if(r.return!==s.return)r=n,s=a;else{for(var l=!1,o=n.child;o;){if(o===r){l=!0,r=n,s=a;break}if(o===s){l=!0,s=n,r=a;break}o=o.sibling}if(!l){for(o=a.child;o;){if(o===r){l=!0,r=a,s=n;break}if(o===s){l=!0,s=a,r=n;break}o=o.sibling}if(!l)throw Error(U(189))}}if(r.alternate!==s)throw Error(U(190))}if(r.tag!==3)throw Error(U(188));return r.stateNode.current===r?e:t}function Zh(e){return e=f0(e),e!==null?Yh(e):null}function Yh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Yh(e);if(t!==null)return t;e=e.sibling}return null}var ef=St.unstable_scheduleCallback,Mu=St.unstable_cancelCallback,m0=St.unstable_shouldYield,p0=St.unstable_requestPaint,$e=St.unstable_now,g0=St.unstable_getCurrentPriorityLevel,vc=St.unstable_ImmediatePriority,tf=St.unstable_UserBlockingPriority,fa=St.unstable_NormalPriority,y0=St.unstable_LowPriority,rf=St.unstable_IdlePriority,qa=null,nr=null;function x0(e){if(nr&&typeof nr.onCommitFiberRoot=="function")try{nr.onCommitFiberRoot(qa,e,void 0,(e.current.flags&128)===128)}catch{}}var Wt=Math.clz32?Math.clz32:b0,v0=Math.log,w0=Math.LN2;function b0(e){return e>>>=0,e===0?32:31-(v0(e)/w0|0)|0}var Oi=64,Ri=4194304;function Tn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ma(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,n=e.suspendedLanes,a=e.pingedLanes,l=r&268435455;if(l!==0){var o=l&~n;o!==0?s=Tn(o):(a&=l,a!==0&&(s=Tn(a)))}else l=r&~n,l!==0?s=Tn(l):a!==0&&(s=Tn(a));if(s===0)return 0;if(t!==0&&t!==s&&!(t&n)&&(n=s&-s,a=t&-t,n>=a||n===16&&(a&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-Wt(t),n=1<<r,s|=e[r],t&=~n;return s}function j0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _0(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-Wt(a),o=1<<l,c=n[l];c===-1?(!(o&r)||o&s)&&(n[l]=j0(o,t)):c<=t&&(e.expiredLanes|=o),a&=~o}}function yo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function sf(){var e=Oi;return Oi<<=1,!(Oi&4194240)&&(Oi=64),e}function Nl(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function vi(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Wt(t),e[t]=r}function N0(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-Wt(r),a=1<<n;t[n]=0,s[n]=-1,e[n]=-1,r&=~a}}function wc(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-Wt(r),n=1<<s;n&t|e[s]&t&&(e[s]|=t),r&=~n}}var xe=0;function nf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var af,bc,lf,of,cf,xo=!1,Ai=[],Ur=null,Dr=null,Mr=null,Zn=new Map,Yn=new Map,Tr=[],k0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Iu(e,t){switch(e){case"focusin":case"focusout":Ur=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":Mr=null;break;case"pointerover":case"pointerout":Zn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yn.delete(t.pointerId)}}function vn(e,t,r,s,n,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:a,targetContainers:[n]},t!==null&&(t=bi(t),t!==null&&bc(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function S0(e,t,r,s,n){switch(t){case"focusin":return Ur=vn(Ur,e,t,r,s,n),!0;case"dragenter":return Dr=vn(Dr,e,t,r,s,n),!0;case"mouseover":return Mr=vn(Mr,e,t,r,s,n),!0;case"pointerover":var a=n.pointerId;return Zn.set(a,vn(Zn.get(a)||null,e,t,r,s,n)),!0;case"gotpointercapture":return a=n.pointerId,Yn.set(a,vn(Yn.get(a)||null,e,t,r,s,n)),!0}return!1}function uf(e){var t=os(e.target);if(t!==null){var r=bs(t);if(r!==null){if(t=r.tag,t===13){if(t=Xh(r),t!==null){e.blockedOn=t,cf(e.priority,function(){lf(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=vo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);fo=s,r.target.dispatchEvent(s),fo=null}else return t=bi(r),t!==null&&bc(t),e.blockedOn=r,!1;t.shift()}return!0}function Fu(e,t,r){Xi(e)&&r.delete(t)}function C0(){xo=!1,Ur!==null&&Xi(Ur)&&(Ur=null),Dr!==null&&Xi(Dr)&&(Dr=null),Mr!==null&&Xi(Mr)&&(Mr=null),Zn.forEach(Fu),Yn.forEach(Fu)}function wn(e,t){e.blockedOn===t&&(e.blockedOn=null,xo||(xo=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,C0)))}function ei(e){function t(n){return wn(n,e)}if(0<Ai.length){wn(Ai[0],e);for(var r=1;r<Ai.length;r++){var s=Ai[r];s.blockedOn===e&&(s.blockedOn=null)}}for(Ur!==null&&wn(Ur,e),Dr!==null&&wn(Dr,e),Mr!==null&&wn(Mr,e),Zn.forEach(t),Yn.forEach(t),r=0;r<Tr.length;r++)s=Tr[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Tr.length&&(r=Tr[0],r.blockedOn===null);)uf(r),r.blockedOn===null&&Tr.shift()}var qs=jr.ReactCurrentBatchConfig,pa=!0;function E0(e,t,r,s){var n=xe,a=qs.transition;qs.transition=null;try{xe=1,jc(e,t,r,s)}finally{xe=n,qs.transition=a}}function P0(e,t,r,s){var n=xe,a=qs.transition;qs.transition=null;try{xe=4,jc(e,t,r,s)}finally{xe=n,qs.transition=a}}function jc(e,t,r,s){if(pa){var n=vo(e,t,r,s);if(n===null)Ll(e,t,s,ga,r),Iu(e,s);else if(S0(n,e,t,r,s))s.stopPropagation();else if(Iu(e,s),t&4&&-1<k0.indexOf(e)){for(;n!==null;){var a=bi(n);if(a!==null&&af(a),a=vo(e,t,r,s),a===null&&Ll(e,t,s,ga,r),a===n)break;n=a}n!==null&&s.stopPropagation()}else Ll(e,t,s,null,r)}}var ga=null;function vo(e,t,r,s){if(ga=null,e=xc(s),e=os(e),e!==null)if(t=bs(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Xh(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ga=e,null}function df(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(g0()){case vc:return 1;case tf:return 4;case fa:case y0:return 16;case rf:return 536870912;default:return 16}default:return 16}}var Lr=null,_c=null,Zi=null;function hf(){if(Zi)return Zi;var e,t=_c,r=t.length,s,n="value"in Lr?Lr.value:Lr.textContent,a=n.length;for(e=0;e<r&&t[e]===n[e];e++);var l=r-e;for(s=1;s<=l&&t[r-s]===n[a-s];s++);return Zi=n.slice(e,1<s?1-s:void 0)}function Yi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Li(){return!0}function Bu(){return!1}function Et(e){function t(r,s,n,a,l){this._reactName=r,this._targetInst=n,this.type=s,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Li:Bu,this.isPropagationStopped=Bu,this}return Oe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Li)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Li)},persist:function(){},isPersistent:Li}),t}var on={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nc=Et(on),wi=Oe({},on,{view:0,detail:0}),T0=Et(wi),kl,Sl,bn,Ga=Oe({},wi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bn&&(bn&&e.type==="mousemove"?(kl=e.screenX-bn.screenX,Sl=e.screenY-bn.screenY):Sl=kl=0,bn=e),kl)},movementY:function(e){return"movementY"in e?e.movementY:Sl}}),Vu=Et(Ga),O0=Oe({},Ga,{dataTransfer:0}),R0=Et(O0),A0=Oe({},wi,{relatedTarget:0}),Cl=Et(A0),L0=Oe({},on,{animationName:0,elapsedTime:0,pseudoElement:0}),$0=Et(L0),z0=Oe({},on,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),U0=Et(z0),D0=Oe({},on,{data:0}),qu=Et(D0),M0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},I0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},F0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function B0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=F0[e])?!!t[e]:!1}function kc(){return B0}var V0=Oe({},wi,{key:function(e){if(e.key){var t=M0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Yi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?I0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kc,charCode:function(e){return e.type==="keypress"?Yi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Yi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),q0=Et(V0),G0=Oe({},Ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gu=Et(G0),H0=Oe({},wi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kc}),W0=Et(H0),K0=Oe({},on,{propertyName:0,elapsedTime:0,pseudoElement:0}),Q0=Et(K0),J0=Oe({},Ga,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),X0=Et(J0),Z0=[9,13,27,32],Sc=yr&&"CompositionEvent"in window,Un=null;yr&&"documentMode"in document&&(Un=document.documentMode);var Y0=yr&&"TextEvent"in window&&!Un,ff=yr&&(!Sc||Un&&8<Un&&11>=Un),Hu=" ",Wu=!1;function mf(e,t){switch(e){case"keyup":return Z0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Os=!1;function eg(e,t){switch(e){case"compositionend":return pf(t);case"keypress":return t.which!==32?null:(Wu=!0,Hu);case"textInput":return e=t.data,e===Hu&&Wu?null:e;default:return null}}function tg(e,t){if(Os)return e==="compositionend"||!Sc&&mf(e,t)?(e=hf(),Zi=_c=Lr=null,Os=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ff&&t.locale!=="ko"?null:t.data;default:return null}}var rg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ku(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!rg[e.type]:t==="textarea"}function gf(e,t,r,s){Hh(s),t=ya(t,"onChange"),0<t.length&&(r=new Nc("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Dn=null,ti=null;function sg(e){Cf(e,0)}function Ha(e){var t=Ls(e);if(Mh(t))return e}function ng(e,t){if(e==="change")return t}var yf=!1;if(yr){var El;if(yr){var Pl="oninput"in document;if(!Pl){var Qu=document.createElement("div");Qu.setAttribute("oninput","return;"),Pl=typeof Qu.oninput=="function"}El=Pl}else El=!1;yf=El&&(!document.documentMode||9<document.documentMode)}function Ju(){Dn&&(Dn.detachEvent("onpropertychange",xf),ti=Dn=null)}function xf(e){if(e.propertyName==="value"&&Ha(ti)){var t=[];gf(t,ti,e,xc(e)),Jh(sg,t)}}function ig(e,t,r){e==="focusin"?(Ju(),Dn=t,ti=r,Dn.attachEvent("onpropertychange",xf)):e==="focusout"&&Ju()}function ag(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ha(ti)}function lg(e,t){if(e==="click")return Ha(t)}function og(e,t){if(e==="input"||e==="change")return Ha(t)}function cg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Jt=typeof Object.is=="function"?Object.is:cg;function ri(e,t){if(Jt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var n=r[s];if(!eo.call(t,n)||!Jt(e[n],t[n]))return!1}return!0}function Xu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zu(e,t){var r=Xu(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Xu(r)}}function vf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?vf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function wf(){for(var e=window,t=ua();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ua(e.document)}return t}function Cc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ug(e){var t=wf(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&vf(r.ownerDocument.documentElement,r)){if(s!==null&&Cc(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=r.textContent.length,a=Math.min(s.start,n);s=s.end===void 0?a:Math.min(s.end,n),!e.extend&&a>s&&(n=s,s=a,a=n),n=Zu(r,a);var l=Zu(r,s);n&&l&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),a>s?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dg=yr&&"documentMode"in document&&11>=document.documentMode,Rs=null,wo=null,Mn=null,bo=!1;function Yu(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;bo||Rs==null||Rs!==ua(s)||(s=Rs,"selectionStart"in s&&Cc(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Mn&&ri(Mn,s)||(Mn=s,s=ya(wo,"onSelect"),0<s.length&&(t=new Nc("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=Rs)))}function $i(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var As={animationend:$i("Animation","AnimationEnd"),animationiteration:$i("Animation","AnimationIteration"),animationstart:$i("Animation","AnimationStart"),transitionend:$i("Transition","TransitionEnd")},Tl={},bf={};yr&&(bf=document.createElement("div").style,"AnimationEvent"in window||(delete As.animationend.animation,delete As.animationiteration.animation,delete As.animationstart.animation),"TransitionEvent"in window||delete As.transitionend.transition);function Wa(e){if(Tl[e])return Tl[e];if(!As[e])return e;var t=As[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in bf)return Tl[e]=t[r];return e}var jf=Wa("animationend"),_f=Wa("animationiteration"),Nf=Wa("animationstart"),kf=Wa("transitionend"),Sf=new Map,ed="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qr(e,t){Sf.set(e,t),ws(t,[e])}for(var Ol=0;Ol<ed.length;Ol++){var Rl=ed[Ol],hg=Rl.toLowerCase(),fg=Rl[0].toUpperCase()+Rl.slice(1);Qr(hg,"on"+fg)}Qr(jf,"onAnimationEnd");Qr(_f,"onAnimationIteration");Qr(Nf,"onAnimationStart");Qr("dblclick","onDoubleClick");Qr("focusin","onFocus");Qr("focusout","onBlur");Qr(kf,"onTransitionEnd");Ks("onMouseEnter",["mouseout","mouseover"]);Ks("onMouseLeave",["mouseout","mouseover"]);Ks("onPointerEnter",["pointerout","pointerover"]);Ks("onPointerLeave",["pointerout","pointerover"]);ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ws("onBeforeInput",["compositionend","keypress","textInput","paste"]);ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var On="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mg=new Set("cancel close invalid load scroll toggle".split(" ").concat(On));function td(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,h0(s,t,void 0,e),e.currentTarget=null}function Cf(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],n=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var l=s.length-1;0<=l;l--){var o=s[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==a&&n.isPropagationStopped())break e;td(n,o,d),a=c}else for(l=0;l<s.length;l++){if(o=s[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==a&&n.isPropagationStopped())break e;td(n,o,d),a=c}}}if(ha)throw e=go,ha=!1,go=null,e}function Ne(e,t){var r=t[So];r===void 0&&(r=t[So]=new Set);var s=e+"__bubble";r.has(s)||(Ef(t,e,2,!1),r.add(s))}function Al(e,t,r){var s=0;t&&(s|=4),Ef(r,e,s,t)}var zi="_reactListening"+Math.random().toString(36).slice(2);function si(e){if(!e[zi]){e[zi]=!0,Lh.forEach(function(r){r!=="selectionchange"&&(mg.has(r)||Al(r,!1,e),Al(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[zi]||(t[zi]=!0,Al("selectionchange",!1,t))}}function Ef(e,t,r,s){switch(df(t)){case 1:var n=E0;break;case 4:n=P0;break;default:n=jc}r=n.bind(null,t,r,e),n=void 0,!po||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),s?n!==void 0?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):n!==void 0?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function Ll(e,t,r,s,n){var a=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var o=s.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(l===4)for(l=s.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;l=l.return}for(;o!==null;){if(l=os(o),l===null)return;if(c=l.tag,c===5||c===6){s=a=l;continue e}o=o.parentNode}}s=s.return}Jh(function(){var d=a,u=xc(r),h=[];e:{var f=Sf.get(e);if(f!==void 0){var v=Nc,b=e;switch(e){case"keypress":if(Yi(r)===0)break e;case"keydown":case"keyup":v=q0;break;case"focusin":b="focus",v=Cl;break;case"focusout":b="blur",v=Cl;break;case"beforeblur":case"afterblur":v=Cl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Vu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=R0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=W0;break;case jf:case _f:case Nf:v=$0;break;case kf:v=Q0;break;case"scroll":v=T0;break;case"wheel":v=X0;break;case"copy":case"cut":case"paste":v=U0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Gu}var j=(t&4)!==0,k=!j&&e==="scroll",p=j?f!==null?f+"Capture":null:f;j=[];for(var m=d,y;m!==null;){y=m;var _=y.stateNode;if(y.tag===5&&_!==null&&(y=_,p!==null&&(_=Xn(m,p),_!=null&&j.push(ni(m,_,y)))),k)break;m=m.return}0<j.length&&(f=new v(f,b,null,r,u),h.push({event:f,listeners:j}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",f&&r!==fo&&(b=r.relatedTarget||r.fromElement)&&(os(b)||b[xr]))break e;if((v||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,v?(b=r.relatedTarget||r.toElement,v=d,b=b?os(b):null,b!==null&&(k=bs(b),b!==k||b.tag!==5&&b.tag!==6)&&(b=null)):(v=null,b=d),v!==b)){if(j=Vu,_="onMouseLeave",p="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(j=Gu,_="onPointerLeave",p="onPointerEnter",m="pointer"),k=v==null?f:Ls(v),y=b==null?f:Ls(b),f=new j(_,m+"leave",v,r,u),f.target=k,f.relatedTarget=y,_=null,os(u)===d&&(j=new j(p,m+"enter",b,r,u),j.target=y,j.relatedTarget=k,_=j),k=_,v&&b)t:{for(j=v,p=b,m=0,y=j;y;y=_s(y))m++;for(y=0,_=p;_;_=_s(_))y++;for(;0<m-y;)j=_s(j),m--;for(;0<y-m;)p=_s(p),y--;for(;m--;){if(j===p||p!==null&&j===p.alternate)break t;j=_s(j),p=_s(p)}j=null}else j=null;v!==null&&rd(h,f,v,j,!1),b!==null&&k!==null&&rd(h,k,b,j,!0)}}e:{if(f=d?Ls(d):window,v=f.nodeName&&f.nodeName.toLowerCase(),v==="select"||v==="input"&&f.type==="file")var O=ng;else if(Ku(f))if(yf)O=og;else{O=ag;var I=ig}else(v=f.nodeName)&&v.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(O=lg);if(O&&(O=O(e,d))){gf(h,O,r,u);break e}I&&I(e,f,d),e==="focusout"&&(I=f._wrapperState)&&I.controlled&&f.type==="number"&&lo(f,"number",f.value)}switch(I=d?Ls(d):window,e){case"focusin":(Ku(I)||I.contentEditable==="true")&&(Rs=I,wo=d,Mn=null);break;case"focusout":Mn=wo=Rs=null;break;case"mousedown":bo=!0;break;case"contextmenu":case"mouseup":case"dragend":bo=!1,Yu(h,r,u);break;case"selectionchange":if(dg)break;case"keydown":case"keyup":Yu(h,r,u)}var C;if(Sc)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Os?mf(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(ff&&r.locale!=="ko"&&(Os||E!=="onCompositionStart"?E==="onCompositionEnd"&&Os&&(C=hf()):(Lr=u,_c="value"in Lr?Lr.value:Lr.textContent,Os=!0)),I=ya(d,E),0<I.length&&(E=new qu(E,e,null,r,u),h.push({event:E,listeners:I}),C?E.data=C:(C=pf(r),C!==null&&(E.data=C)))),(C=Y0?eg(e,r):tg(e,r))&&(d=ya(d,"onBeforeInput"),0<d.length&&(u=new qu("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:d}),u.data=C))}Cf(h,t)})}function ni(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ya(e,t){for(var r=t+"Capture",s=[];e!==null;){var n=e,a=n.stateNode;n.tag===5&&a!==null&&(n=a,a=Xn(e,r),a!=null&&s.unshift(ni(e,a,n)),a=Xn(e,t),a!=null&&s.push(ni(e,a,n))),e=e.return}return s}function _s(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function rd(e,t,r,s,n){for(var a=t._reactName,l=[];r!==null&&r!==s;){var o=r,c=o.alternate,d=o.stateNode;if(c!==null&&c===s)break;o.tag===5&&d!==null&&(o=d,n?(c=Xn(r,a),c!=null&&l.unshift(ni(r,c,o))):n||(c=Xn(r,a),c!=null&&l.push(ni(r,c,o)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var pg=/\r\n?/g,gg=/\u0000|\uFFFD/g;function sd(e){return(typeof e=="string"?e:""+e).replace(pg,`
`).replace(gg,"")}function Ui(e,t,r){if(t=sd(t),sd(e)!==t&&r)throw Error(U(425))}function xa(){}var jo=null,_o=null;function No(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ko=typeof setTimeout=="function"?setTimeout:void 0,yg=typeof clearTimeout=="function"?clearTimeout:void 0,nd=typeof Promise=="function"?Promise:void 0,xg=typeof queueMicrotask=="function"?queueMicrotask:typeof nd<"u"?function(e){return nd.resolve(null).then(e).catch(vg)}:ko;function vg(e){setTimeout(function(){throw e})}function $l(e,t){var r=t,s=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(s===0){e.removeChild(n),ei(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=n}while(r);ei(t)}function Ir(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function id(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var cn=Math.random().toString(36).slice(2),rr="__reactFiber$"+cn,ii="__reactProps$"+cn,xr="__reactContainer$"+cn,So="__reactEvents$"+cn,wg="__reactListeners$"+cn,bg="__reactHandles$"+cn;function os(e){var t=e[rr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[xr]||r[rr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=id(e);e!==null;){if(r=e[rr])return r;e=id(e)}return t}e=r,r=e.parentNode}return null}function bi(e){return e=e[rr]||e[xr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ls(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(U(33))}function Ka(e){return e[ii]||null}var Co=[],$s=-1;function Jr(e){return{current:e}}function ke(e){0>$s||(e.current=Co[$s],Co[$s]=null,$s--)}function be(e,t){$s++,Co[$s]=e.current,e.current=t}var Kr={},it=Jr(Kr),yt=Jr(!1),ps=Kr;function Qs(e,t){var r=e.type.contextTypes;if(!r)return Kr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var n={},a;for(a in r)n[a]=t[a];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function xt(e){return e=e.childContextTypes,e!=null}function va(){ke(yt),ke(it)}function ad(e,t,r){if(it.current!==Kr)throw Error(U(168));be(it,t),be(yt,r)}function Pf(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var n in s)if(!(n in t))throw Error(U(108,i0(e)||"Unknown",n));return Oe({},r,s)}function wa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Kr,ps=it.current,be(it,e),be(yt,yt.current),!0}function ld(e,t,r){var s=e.stateNode;if(!s)throw Error(U(169));r?(e=Pf(e,t,ps),s.__reactInternalMemoizedMergedChildContext=e,ke(yt),ke(it),be(it,e)):ke(yt),be(yt,r)}var ur=null,Qa=!1,zl=!1;function Tf(e){ur===null?ur=[e]:ur.push(e)}function jg(e){Qa=!0,Tf(e)}function Xr(){if(!zl&&ur!==null){zl=!0;var e=0,t=xe;try{var r=ur;for(xe=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}ur=null,Qa=!1}catch(n){throw ur!==null&&(ur=ur.slice(e+1)),ef(vc,Xr),n}finally{xe=t,zl=!1}}return null}var zs=[],Us=0,ba=null,ja=0,Rt=[],At=0,gs=null,fr=1,mr="";function ss(e,t){zs[Us++]=ja,zs[Us++]=ba,ba=e,ja=t}function Of(e,t,r){Rt[At++]=fr,Rt[At++]=mr,Rt[At++]=gs,gs=e;var s=fr;e=mr;var n=32-Wt(s)-1;s&=~(1<<n),r+=1;var a=32-Wt(t)+n;if(30<a){var l=n-n%5;a=(s&(1<<l)-1).toString(32),s>>=l,n-=l,fr=1<<32-Wt(t)+n|r<<n|s,mr=a+e}else fr=1<<a|r<<n|s,mr=e}function Ec(e){e.return!==null&&(ss(e,1),Of(e,1,0))}function Pc(e){for(;e===ba;)ba=zs[--Us],zs[Us]=null,ja=zs[--Us],zs[Us]=null;for(;e===gs;)gs=Rt[--At],Rt[At]=null,mr=Rt[--At],Rt[At]=null,fr=Rt[--At],Rt[At]=null}var kt=null,_t=null,Ce=!1,qt=null;function Rf(e,t){var r=Lt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function od(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,kt=e,_t=Ir(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,kt=e,_t=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=gs!==null?{id:fr,overflow:mr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Lt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,kt=e,_t=null,!0):!1;default:return!1}}function Eo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Po(e){if(Ce){var t=_t;if(t){var r=t;if(!od(e,t)){if(Eo(e))throw Error(U(418));t=Ir(r.nextSibling);var s=kt;t&&od(e,t)?Rf(s,r):(e.flags=e.flags&-4097|2,Ce=!1,kt=e)}}else{if(Eo(e))throw Error(U(418));e.flags=e.flags&-4097|2,Ce=!1,kt=e}}}function cd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;kt=e}function Di(e){if(e!==kt)return!1;if(!Ce)return cd(e),Ce=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!No(e.type,e.memoizedProps)),t&&(t=_t)){if(Eo(e))throw Af(),Error(U(418));for(;t;)Rf(e,t),t=Ir(t.nextSibling)}if(cd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){_t=Ir(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}_t=null}}else _t=kt?Ir(e.stateNode.nextSibling):null;return!0}function Af(){for(var e=_t;e;)e=Ir(e.nextSibling)}function Js(){_t=kt=null,Ce=!1}function Tc(e){qt===null?qt=[e]:qt.push(e)}var _g=jr.ReactCurrentBatchConfig;function jn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(U(309));var s=r.stateNode}if(!s)throw Error(U(147,e));var n=s,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(l){var o=n.refs;l===null?delete o[a]:o[a]=l},t._stringRef=a,t)}if(typeof e!="string")throw Error(U(284));if(!r._owner)throw Error(U(290,e))}return e}function Mi(e,t){throw e=Object.prototype.toString.call(t),Error(U(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ud(e){var t=e._init;return t(e._payload)}function Lf(e){function t(p,m){if(e){var y=p.deletions;y===null?(p.deletions=[m],p.flags|=16):y.push(m)}}function r(p,m){if(!e)return null;for(;m!==null;)t(p,m),m=m.sibling;return null}function s(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function n(p,m){return p=qr(p,m),p.index=0,p.sibling=null,p}function a(p,m,y){return p.index=y,e?(y=p.alternate,y!==null?(y=y.index,y<m?(p.flags|=2,m):y):(p.flags|=2,m)):(p.flags|=1048576,m)}function l(p){return e&&p.alternate===null&&(p.flags|=2),p}function o(p,m,y,_){return m===null||m.tag!==6?(m=Vl(y,p.mode,_),m.return=p,m):(m=n(m,y),m.return=p,m)}function c(p,m,y,_){var O=y.type;return O===Ts?u(p,m,y.props.children,_,y.key):m!==null&&(m.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Cr&&ud(O)===m.type)?(_=n(m,y.props),_.ref=jn(p,m,y),_.return=p,_):(_=aa(y.type,y.key,y.props,null,p.mode,_),_.ref=jn(p,m,y),_.return=p,_)}function d(p,m,y,_){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=ql(y,p.mode,_),m.return=p,m):(m=n(m,y.children||[]),m.return=p,m)}function u(p,m,y,_,O){return m===null||m.tag!==7?(m=ms(y,p.mode,_,O),m.return=p,m):(m=n(m,y),m.return=p,m)}function h(p,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Vl(""+m,p.mode,y),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ei:return y=aa(m.type,m.key,m.props,null,p.mode,y),y.ref=jn(p,null,m),y.return=p,y;case Ps:return m=ql(m,p.mode,y),m.return=p,m;case Cr:var _=m._init;return h(p,_(m._payload),y)}if(Pn(m)||yn(m))return m=ms(m,p.mode,y,null),m.return=p,m;Mi(p,m)}return null}function f(p,m,y,_){var O=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return O!==null?null:o(p,m,""+y,_);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ei:return y.key===O?c(p,m,y,_):null;case Ps:return y.key===O?d(p,m,y,_):null;case Cr:return O=y._init,f(p,m,O(y._payload),_)}if(Pn(y)||yn(y))return O!==null?null:u(p,m,y,_,null);Mi(p,y)}return null}function v(p,m,y,_,O){if(typeof _=="string"&&_!==""||typeof _=="number")return p=p.get(y)||null,o(m,p,""+_,O);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ei:return p=p.get(_.key===null?y:_.key)||null,c(m,p,_,O);case Ps:return p=p.get(_.key===null?y:_.key)||null,d(m,p,_,O);case Cr:var I=_._init;return v(p,m,y,I(_._payload),O)}if(Pn(_)||yn(_))return p=p.get(y)||null,u(m,p,_,O,null);Mi(m,_)}return null}function b(p,m,y,_){for(var O=null,I=null,C=m,E=m=0,$=null;C!==null&&E<y.length;E++){C.index>E?($=C,C=null):$=C.sibling;var T=f(p,C,y[E],_);if(T===null){C===null&&(C=$);break}e&&C&&T.alternate===null&&t(p,C),m=a(T,m,E),I===null?O=T:I.sibling=T,I=T,C=$}if(E===y.length)return r(p,C),Ce&&ss(p,E),O;if(C===null){for(;E<y.length;E++)C=h(p,y[E],_),C!==null&&(m=a(C,m,E),I===null?O=C:I.sibling=C,I=C);return Ce&&ss(p,E),O}for(C=s(p,C);E<y.length;E++)$=v(C,p,E,y[E],_),$!==null&&(e&&$.alternate!==null&&C.delete($.key===null?E:$.key),m=a($,m,E),I===null?O=$:I.sibling=$,I=$);return e&&C.forEach(function(H){return t(p,H)}),Ce&&ss(p,E),O}function j(p,m,y,_){var O=yn(y);if(typeof O!="function")throw Error(U(150));if(y=O.call(y),y==null)throw Error(U(151));for(var I=O=null,C=m,E=m=0,$=null,T=y.next();C!==null&&!T.done;E++,T=y.next()){C.index>E?($=C,C=null):$=C.sibling;var H=f(p,C,T.value,_);if(H===null){C===null&&(C=$);break}e&&C&&H.alternate===null&&t(p,C),m=a(H,m,E),I===null?O=H:I.sibling=H,I=H,C=$}if(T.done)return r(p,C),Ce&&ss(p,E),O;if(C===null){for(;!T.done;E++,T=y.next())T=h(p,T.value,_),T!==null&&(m=a(T,m,E),I===null?O=T:I.sibling=T,I=T);return Ce&&ss(p,E),O}for(C=s(p,C);!T.done;E++,T=y.next())T=v(C,p,E,T.value,_),T!==null&&(e&&T.alternate!==null&&C.delete(T.key===null?E:T.key),m=a(T,m,E),I===null?O=T:I.sibling=T,I=T);return e&&C.forEach(function(G){return t(p,G)}),Ce&&ss(p,E),O}function k(p,m,y,_){if(typeof y=="object"&&y!==null&&y.type===Ts&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Ei:e:{for(var O=y.key,I=m;I!==null;){if(I.key===O){if(O=y.type,O===Ts){if(I.tag===7){r(p,I.sibling),m=n(I,y.props.children),m.return=p,p=m;break e}}else if(I.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Cr&&ud(O)===I.type){r(p,I.sibling),m=n(I,y.props),m.ref=jn(p,I,y),m.return=p,p=m;break e}r(p,I);break}else t(p,I);I=I.sibling}y.type===Ts?(m=ms(y.props.children,p.mode,_,y.key),m.return=p,p=m):(_=aa(y.type,y.key,y.props,null,p.mode,_),_.ref=jn(p,m,y),_.return=p,p=_)}return l(p);case Ps:e:{for(I=y.key;m!==null;){if(m.key===I)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){r(p,m.sibling),m=n(m,y.children||[]),m.return=p,p=m;break e}else{r(p,m);break}else t(p,m);m=m.sibling}m=ql(y,p.mode,_),m.return=p,p=m}return l(p);case Cr:return I=y._init,k(p,m,I(y._payload),_)}if(Pn(y))return b(p,m,y,_);if(yn(y))return j(p,m,y,_);Mi(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(r(p,m.sibling),m=n(m,y),m.return=p,p=m):(r(p,m),m=Vl(y,p.mode,_),m.return=p,p=m),l(p)):r(p,m)}return k}var Xs=Lf(!0),$f=Lf(!1),_a=Jr(null),Na=null,Ds=null,Oc=null;function Rc(){Oc=Ds=Na=null}function Ac(e){var t=_a.current;ke(_a),e._currentValue=t}function To(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function Gs(e,t){Na=e,Oc=Ds=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(gt=!0),e.firstContext=null)}function Ut(e){var t=e._currentValue;if(Oc!==e)if(e={context:e,memoizedValue:t,next:null},Ds===null){if(Na===null)throw Error(U(308));Ds=e,Na.dependencies={lanes:0,firstContext:e}}else Ds=Ds.next=e;return t}var cs=null;function Lc(e){cs===null?cs=[e]:cs.push(e)}function zf(e,t,r,s){var n=t.interleaved;return n===null?(r.next=r,Lc(t)):(r.next=n.next,n.next=r),t.interleaved=r,vr(e,s)}function vr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Er=!1;function $c(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function pr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fr(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,fe&2){var n=s.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),s.pending=t,vr(e,r)}return n=s.interleaved,n===null?(t.next=t,Lc(s)):(t.next=n.next,n.next=t),s.interleaved=t,vr(e,r)}function ea(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,wc(e,r)}}function dd(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var n=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?n=a=l:a=a.next=l,r=r.next}while(r!==null);a===null?n=a=t:a=a.next=t}else n=a=t;r={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:a,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ka(e,t,r,s){var n=e.updateQueue;Er=!1;var a=n.firstBaseUpdate,l=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?a=d:l.next=d,l=c;var u=e.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(a!==null){var h=n.baseState;l=0,u=d=c=null,o=a;do{var f=o.lane,v=o.eventTime;if((s&f)===f){u!==null&&(u=u.next={eventTime:v,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var b=e,j=o;switch(f=t,v=r,j.tag){case 1:if(b=j.payload,typeof b=="function"){h=b.call(v,h,f);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=j.payload,f=typeof b=="function"?b.call(v,h,f):b,f==null)break e;h=Oe({},h,f);break e;case 2:Er=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,f=n.effects,f===null?n.effects=[o]:f.push(o))}else v={eventTime:v,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=v,c=h):u=u.next=v,l|=f;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;f=o,o=f.next,f.next=null,n.lastBaseUpdate=f,n.shared.pending=null}}while(!0);if(u===null&&(c=h),n.baseState=c,n.firstBaseUpdate=d,n.lastBaseUpdate=u,t=n.shared.interleaved,t!==null){n=t;do l|=n.lane,n=n.next;while(n!==t)}else a===null&&(n.shared.lanes=0);xs|=l,e.lanes=l,e.memoizedState=h}}function hd(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],n=s.callback;if(n!==null){if(s.callback=null,s=r,typeof n!="function")throw Error(U(191,n));n.call(s)}}}var ji={},ir=Jr(ji),ai=Jr(ji),li=Jr(ji);function us(e){if(e===ji)throw Error(U(174));return e}function zc(e,t){switch(be(li,t),be(ai,e),be(ir,ji),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:co(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=co(t,e)}ke(ir),be(ir,t)}function Zs(){ke(ir),ke(ai),ke(li)}function Df(e){us(li.current);var t=us(ir.current),r=co(t,e.type);t!==r&&(be(ai,e),be(ir,r))}function Uc(e){ai.current===e&&(ke(ir),ke(ai))}var Pe=Jr(0);function Sa(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ul=[];function Dc(){for(var e=0;e<Ul.length;e++)Ul[e]._workInProgressVersionPrimary=null;Ul.length=0}var ta=jr.ReactCurrentDispatcher,Dl=jr.ReactCurrentBatchConfig,ys=0,Te=null,Ie=null,Ge=null,Ca=!1,In=!1,oi=0,Ng=0;function rt(){throw Error(U(321))}function Mc(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Jt(e[r],t[r]))return!1;return!0}function Ic(e,t,r,s,n,a){if(ys=a,Te=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ta.current=e===null||e.memoizedState===null?Eg:Pg,e=r(s,n),In){a=0;do{if(In=!1,oi=0,25<=a)throw Error(U(301));a+=1,Ge=Ie=null,t.updateQueue=null,ta.current=Tg,e=r(s,n)}while(In)}if(ta.current=Ea,t=Ie!==null&&Ie.next!==null,ys=0,Ge=Ie=Te=null,Ca=!1,t)throw Error(U(300));return e}function Fc(){var e=oi!==0;return oi=0,e}function er(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Te.memoizedState=Ge=e:Ge=Ge.next=e,Ge}function Dt(){if(Ie===null){var e=Te.alternate;e=e!==null?e.memoizedState:null}else e=Ie.next;var t=Ge===null?Te.memoizedState:Ge.next;if(t!==null)Ge=t,Ie=e;else{if(e===null)throw Error(U(310));Ie=e,e={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},Ge===null?Te.memoizedState=Ge=e:Ge=Ge.next=e}return Ge}function ci(e,t){return typeof t=="function"?t(e):t}function Ml(e){var t=Dt(),r=t.queue;if(r===null)throw Error(U(311));r.lastRenderedReducer=e;var s=Ie,n=s.baseQueue,a=r.pending;if(a!==null){if(n!==null){var l=n.next;n.next=a.next,a.next=l}s.baseQueue=n=a,r.pending=null}if(n!==null){a=n.next,s=s.baseState;var o=l=null,c=null,d=a;do{var u=d.lane;if((ys&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=h,l=s):c=c.next=h,Te.lanes|=u,xs|=u}d=d.next}while(d!==null&&d!==a);c===null?l=s:c.next=o,Jt(s,t.memoizedState)||(gt=!0),t.memoizedState=s,t.baseState=l,t.baseQueue=c,r.lastRenderedState=s}if(e=r.interleaved,e!==null){n=e;do a=n.lane,Te.lanes|=a,xs|=a,n=n.next;while(n!==e)}else n===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Il(e){var t=Dt(),r=t.queue;if(r===null)throw Error(U(311));r.lastRenderedReducer=e;var s=r.dispatch,n=r.pending,a=t.memoizedState;if(n!==null){r.pending=null;var l=n=n.next;do a=e(a,l.action),l=l.next;while(l!==n);Jt(a,t.memoizedState)||(gt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,s]}function Mf(){}function If(e,t){var r=Te,s=Dt(),n=t(),a=!Jt(s.memoizedState,n);if(a&&(s.memoizedState=n,gt=!0),s=s.queue,Bc(Vf.bind(null,r,s,e),[e]),s.getSnapshot!==t||a||Ge!==null&&Ge.memoizedState.tag&1){if(r.flags|=2048,ui(9,Bf.bind(null,r,s,n,t),void 0,null),He===null)throw Error(U(349));ys&30||Ff(r,t,n)}return n}function Ff(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Te.updateQueue,t===null?(t={lastEffect:null,stores:null},Te.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Bf(e,t,r,s){t.value=r,t.getSnapshot=s,qf(t)&&Gf(e)}function Vf(e,t,r){return r(function(){qf(t)&&Gf(e)})}function qf(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Jt(e,r)}catch{return!0}}function Gf(e){var t=vr(e,1);t!==null&&Kt(t,e,1,-1)}function fd(e){var t=er();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:e},t.queue=e,e=e.dispatch=Cg.bind(null,Te,e),[t.memoizedState,e]}function ui(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=Te.updateQueue,t===null?(t={lastEffect:null,stores:null},Te.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function Hf(){return Dt().memoizedState}function ra(e,t,r,s){var n=er();Te.flags|=e,n.memoizedState=ui(1|t,r,void 0,s===void 0?null:s)}function Ja(e,t,r,s){var n=Dt();s=s===void 0?null:s;var a=void 0;if(Ie!==null){var l=Ie.memoizedState;if(a=l.destroy,s!==null&&Mc(s,l.deps)){n.memoizedState=ui(t,r,a,s);return}}Te.flags|=e,n.memoizedState=ui(1|t,r,a,s)}function md(e,t){return ra(8390656,8,e,t)}function Bc(e,t){return Ja(2048,8,e,t)}function Wf(e,t){return Ja(4,2,e,t)}function Kf(e,t){return Ja(4,4,e,t)}function Qf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Jf(e,t,r){return r=r!=null?r.concat([e]):null,Ja(4,4,Qf.bind(null,t,e),r)}function Vc(){}function Xf(e,t){var r=Dt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Mc(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function Zf(e,t){var r=Dt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Mc(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function Yf(e,t,r){return ys&21?(Jt(r,t)||(r=sf(),Te.lanes|=r,xs|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,gt=!0),e.memoizedState=r)}function kg(e,t){var r=xe;xe=r!==0&&4>r?r:4,e(!0);var s=Dl.transition;Dl.transition={};try{e(!1),t()}finally{xe=r,Dl.transition=s}}function em(){return Dt().memoizedState}function Sg(e,t,r){var s=Vr(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},tm(e))rm(t,r);else if(r=zf(e,t,r,s),r!==null){var n=ct();Kt(r,e,s,n),sm(r,t,s)}}function Cg(e,t,r){var s=Vr(e),n={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(tm(e))rm(t,n);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var l=t.lastRenderedState,o=a(l,r);if(n.hasEagerState=!0,n.eagerState=o,Jt(o,l)){var c=t.interleaved;c===null?(n.next=n,Lc(t)):(n.next=c.next,c.next=n),t.interleaved=n;return}}catch{}finally{}r=zf(e,t,n,s),r!==null&&(n=ct(),Kt(r,e,s,n),sm(r,t,s))}}function tm(e){var t=e.alternate;return e===Te||t!==null&&t===Te}function rm(e,t){In=Ca=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function sm(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,wc(e,r)}}var Ea={readContext:Ut,useCallback:rt,useContext:rt,useEffect:rt,useImperativeHandle:rt,useInsertionEffect:rt,useLayoutEffect:rt,useMemo:rt,useReducer:rt,useRef:rt,useState:rt,useDebugValue:rt,useDeferredValue:rt,useTransition:rt,useMutableSource:rt,useSyncExternalStore:rt,useId:rt,unstable_isNewReconciler:!1},Eg={readContext:Ut,useCallback:function(e,t){return er().memoizedState=[e,t===void 0?null:t],e},useContext:Ut,useEffect:md,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ra(4194308,4,Qf.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ra(4194308,4,e,t)},useInsertionEffect:function(e,t){return ra(4,2,e,t)},useMemo:function(e,t){var r=er();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=er();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Sg.bind(null,Te,e),[s.memoizedState,e]},useRef:function(e){var t=er();return e={current:e},t.memoizedState=e},useState:fd,useDebugValue:Vc,useDeferredValue:function(e){return er().memoizedState=e},useTransition:function(){var e=fd(!1),t=e[0];return e=kg.bind(null,e[1]),er().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=Te,n=er();if(Ce){if(r===void 0)throw Error(U(407));r=r()}else{if(r=t(),He===null)throw Error(U(349));ys&30||Ff(s,t,r)}n.memoizedState=r;var a={value:r,getSnapshot:t};return n.queue=a,md(Vf.bind(null,s,a,e),[e]),s.flags|=2048,ui(9,Bf.bind(null,s,a,r,t),void 0,null),r},useId:function(){var e=er(),t=He.identifierPrefix;if(Ce){var r=mr,s=fr;r=(s&~(1<<32-Wt(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=oi++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Ng++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Pg={readContext:Ut,useCallback:Xf,useContext:Ut,useEffect:Bc,useImperativeHandle:Jf,useInsertionEffect:Wf,useLayoutEffect:Kf,useMemo:Zf,useReducer:Ml,useRef:Hf,useState:function(){return Ml(ci)},useDebugValue:Vc,useDeferredValue:function(e){var t=Dt();return Yf(t,Ie.memoizedState,e)},useTransition:function(){var e=Ml(ci)[0],t=Dt().memoizedState;return[e,t]},useMutableSource:Mf,useSyncExternalStore:If,useId:em,unstable_isNewReconciler:!1},Tg={readContext:Ut,useCallback:Xf,useContext:Ut,useEffect:Bc,useImperativeHandle:Jf,useInsertionEffect:Wf,useLayoutEffect:Kf,useMemo:Zf,useReducer:Il,useRef:Hf,useState:function(){return Il(ci)},useDebugValue:Vc,useDeferredValue:function(e){var t=Dt();return Ie===null?t.memoizedState=e:Yf(t,Ie.memoizedState,e)},useTransition:function(){var e=Il(ci)[0],t=Dt().memoizedState;return[e,t]},useMutableSource:Mf,useSyncExternalStore:If,useId:em,unstable_isNewReconciler:!1};function Ft(e,t){if(e&&e.defaultProps){t=Oe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Oo(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:Oe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Xa={isMounted:function(e){return(e=e._reactInternals)?bs(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=ct(),n=Vr(e),a=pr(s,n);a.payload=t,r!=null&&(a.callback=r),t=Fr(e,a,n),t!==null&&(Kt(t,e,n,s),ea(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=ct(),n=Vr(e),a=pr(s,n);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=Fr(e,a,n),t!==null&&(Kt(t,e,n,s),ea(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ct(),s=Vr(e),n=pr(r,s);n.tag=2,t!=null&&(n.callback=t),t=Fr(e,n,s),t!==null&&(Kt(t,e,s,r),ea(t,e,s))}};function pd(e,t,r,s,n,a,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,a,l):t.prototype&&t.prototype.isPureReactComponent?!ri(r,s)||!ri(n,a):!0}function nm(e,t,r){var s=!1,n=Kr,a=t.contextType;return typeof a=="object"&&a!==null?a=Ut(a):(n=xt(t)?ps:it.current,s=t.contextTypes,a=(s=s!=null)?Qs(e,n):Kr),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Xa,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=a),t}function gd(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&Xa.enqueueReplaceState(t,t.state,null)}function Ro(e,t,r,s){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs={},$c(e);var a=t.contextType;typeof a=="object"&&a!==null?n.context=Ut(a):(a=xt(t)?ps:it.current,n.context=Qs(e,a)),n.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Oo(e,t,a,r),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&Xa.enqueueReplaceState(n,n.state,null),ka(e,r,n,s),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function Ys(e,t){try{var r="",s=t;do r+=n0(s),s=s.return;while(s);var n=r}catch(a){n=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:n,digest:null}}function Fl(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Ao(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Og=typeof WeakMap=="function"?WeakMap:Map;function im(e,t,r){r=pr(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){Ta||(Ta=!0,Vo=s),Ao(e,t)},r}function am(e,t,r){r=pr(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var n=t.value;r.payload=function(){return s(n)},r.callback=function(){Ao(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Ao(e,t),typeof s!="function"&&(Br===null?Br=new Set([this]):Br.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function yd(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new Og;var n=new Set;s.set(t,n)}else n=s.get(t),n===void 0&&(n=new Set,s.set(t,n));n.has(r)||(n.add(r),e=Gg.bind(null,e,t,r),t.then(e,e))}function xd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function vd(e,t,r,s,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=pr(-1,1),t.tag=2,Fr(r,t,1))),r.lanes|=1),e)}var Rg=jr.ReactCurrentOwner,gt=!1;function lt(e,t,r,s){t.child=e===null?$f(t,null,r,s):Xs(t,e.child,r,s)}function wd(e,t,r,s,n){r=r.render;var a=t.ref;return Gs(t,n),s=Ic(e,t,r,s,a,n),r=Fc(),e!==null&&!gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,wr(e,t,n)):(Ce&&r&&Ec(t),t.flags|=1,lt(e,t,s,n),t.child)}function bd(e,t,r,s,n){if(e===null){var a=r.type;return typeof a=="function"&&!Xc(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,lm(e,t,a,s,n)):(e=aa(r.type,null,s,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&n)){var l=a.memoizedProps;if(r=r.compare,r=r!==null?r:ri,r(l,s)&&e.ref===t.ref)return wr(e,t,n)}return t.flags|=1,e=qr(a,s),e.ref=t.ref,e.return=t,t.child=e}function lm(e,t,r,s,n){if(e!==null){var a=e.memoizedProps;if(ri(a,s)&&e.ref===t.ref)if(gt=!1,t.pendingProps=s=a,(e.lanes&n)!==0)e.flags&131072&&(gt=!0);else return t.lanes=e.lanes,wr(e,t,n)}return Lo(e,t,r,s,n)}function om(e,t,r){var s=t.pendingProps,n=s.children,a=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(Is,jt),jt|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,be(Is,jt),jt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:r,be(Is,jt),jt|=s}else a!==null?(s=a.baseLanes|r,t.memoizedState=null):s=r,be(Is,jt),jt|=s;return lt(e,t,n,r),t.child}function cm(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Lo(e,t,r,s,n){var a=xt(r)?ps:it.current;return a=Qs(t,a),Gs(t,n),r=Ic(e,t,r,s,a,n),s=Fc(),e!==null&&!gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,wr(e,t,n)):(Ce&&s&&Ec(t),t.flags|=1,lt(e,t,r,n),t.child)}function jd(e,t,r,s,n){if(xt(r)){var a=!0;wa(t)}else a=!1;if(Gs(t,n),t.stateNode===null)sa(e,t),nm(t,r,s),Ro(t,r,s,n),s=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,d=r.contextType;typeof d=="object"&&d!==null?d=Ut(d):(d=xt(r)?ps:it.current,d=Qs(t,d));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==s||c!==d)&&gd(t,l,s,d),Er=!1;var f=t.memoizedState;l.state=f,ka(t,s,l,n),c=t.memoizedState,o!==s||f!==c||yt.current||Er?(typeof u=="function"&&(Oo(t,r,u,s),c=t.memoizedState),(o=Er||pd(t,r,o,s,f,c,d))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),l.props=s,l.state=c,l.context=d,s=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{l=t.stateNode,Uf(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:Ft(t.type,o),l.props=d,h=t.pendingProps,f=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ut(c):(c=xt(r)?ps:it.current,c=Qs(t,c));var v=r.getDerivedStateFromProps;(u=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==h||f!==c)&&gd(t,l,s,c),Er=!1,f=t.memoizedState,l.state=f,ka(t,s,l,n);var b=t.memoizedState;o!==h||f!==b||yt.current||Er?(typeof v=="function"&&(Oo(t,r,v,s),b=t.memoizedState),(d=Er||pd(t,r,d,s,f,b,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,b,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,b,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=b),l.props=s,l.state=b,l.context=c,s=d):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),s=!1)}return $o(e,t,r,s,a,n)}function $o(e,t,r,s,n,a){cm(e,t);var l=(t.flags&128)!==0;if(!s&&!l)return n&&ld(t,r,!1),wr(e,t,a);s=t.stateNode,Rg.current=t;var o=l&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&l?(t.child=Xs(t,e.child,null,a),t.child=Xs(t,null,o,a)):lt(e,t,o,a),t.memoizedState=s.state,n&&ld(t,r,!0),t.child}function um(e){var t=e.stateNode;t.pendingContext?ad(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ad(e,t.context,!1),zc(e,t.containerInfo)}function _d(e,t,r,s,n){return Js(),Tc(n),t.flags|=256,lt(e,t,r,s),t.child}var zo={dehydrated:null,treeContext:null,retryLane:0};function Uo(e){return{baseLanes:e,cachePool:null,transitions:null}}function dm(e,t,r){var s=t.pendingProps,n=Pe.current,a=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(n&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),be(Pe,n&1),e===null)return Po(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=s.children,e=s.fallback,a?(s=t.mode,a=t.child,l={mode:"hidden",children:l},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=el(l,s,0,null),e=ms(e,s,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Uo(r),t.memoizedState=zo,e):qc(t,l));if(n=e.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return Ag(e,t,l,s,o,n,r);if(a){a=s.fallback,l=t.mode,n=e.child,o=n.sibling;var c={mode:"hidden",children:s.children};return!(l&1)&&t.child!==n?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=qr(n,c),s.subtreeFlags=n.subtreeFlags&14680064),o!==null?a=qr(o,a):(a=ms(a,l,r,null),a.flags|=2),a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,l=e.child.memoizedState,l=l===null?Uo(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~r,t.memoizedState=zo,s}return a=e.child,e=a.sibling,s=qr(a,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function qc(e,t){return t=el({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ii(e,t,r,s){return s!==null&&Tc(s),Xs(t,e.child,null,r),e=qc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ag(e,t,r,s,n,a,l){if(r)return t.flags&256?(t.flags&=-257,s=Fl(Error(U(422))),Ii(e,t,l,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=s.fallback,n=t.mode,s=el({mode:"visible",children:s.children},n,0,null),a=ms(a,n,l,null),a.flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,t.mode&1&&Xs(t,e.child,null,l),t.child.memoizedState=Uo(l),t.memoizedState=zo,a);if(!(t.mode&1))return Ii(e,t,l,null);if(n.data==="$!"){if(s=n.nextSibling&&n.nextSibling.dataset,s)var o=s.dgst;return s=o,a=Error(U(419)),s=Fl(a,s,void 0),Ii(e,t,l,s)}if(o=(l&e.childLanes)!==0,gt||o){if(s=He,s!==null){switch(l&-l){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(s.suspendedLanes|l)?0:n,n!==0&&n!==a.retryLane&&(a.retryLane=n,vr(e,n),Kt(s,e,n,-1))}return Jc(),s=Fl(Error(U(421))),Ii(e,t,l,s)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=Hg.bind(null,e),n._reactRetry=t,null):(e=a.treeContext,_t=Ir(n.nextSibling),kt=t,Ce=!0,qt=null,e!==null&&(Rt[At++]=fr,Rt[At++]=mr,Rt[At++]=gs,fr=e.id,mr=e.overflow,gs=t),t=qc(t,s.children),t.flags|=4096,t)}function Nd(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),To(e.return,t,r)}function Bl(e,t,r,s,n){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:n}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=r,a.tailMode=n)}function hm(e,t,r){var s=t.pendingProps,n=s.revealOrder,a=s.tail;if(lt(e,t,s.children,r),s=Pe.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Nd(e,r,t);else if(e.tag===19)Nd(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(be(Pe,s),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;r!==null;)e=r.alternate,e!==null&&Sa(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),Bl(t,!1,n,r,a);break;case"backwards":for(r=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Sa(e)===null){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}Bl(t,!0,r,null,a);break;case"together":Bl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function sa(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function wr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),xs|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(U(153));if(t.child!==null){for(e=t.child,r=qr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=qr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Lg(e,t,r){switch(t.tag){case 3:um(t),Js();break;case 5:Df(t);break;case 1:xt(t.type)&&wa(t);break;case 4:zc(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,n=t.memoizedProps.value;be(_a,s._currentValue),s._currentValue=n;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(be(Pe,Pe.current&1),t.flags|=128,null):r&t.child.childLanes?dm(e,t,r):(be(Pe,Pe.current&1),e=wr(e,t,r),e!==null?e.sibling:null);be(Pe,Pe.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return hm(e,t,r);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),be(Pe,Pe.current),s)break;return null;case 22:case 23:return t.lanes=0,om(e,t,r)}return wr(e,t,r)}var fm,Do,mm,pm;fm=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Do=function(){};mm=function(e,t,r,s){var n=e.memoizedProps;if(n!==s){e=t.stateNode,us(ir.current);var a=null;switch(r){case"input":n=io(e,n),s=io(e,s),a=[];break;case"select":n=Oe({},n,{value:void 0}),s=Oe({},s,{value:void 0}),a=[];break;case"textarea":n=oo(e,n),s=oo(e,s),a=[];break;default:typeof n.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=xa)}uo(r,s);var l;r=null;for(d in n)if(!s.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var o=n[d];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Qn.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in s){var c=s[d];if(o=n!=null?n[d]:void 0,s.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(a||(a=[]),a.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Qn.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ne("scroll",e),a||o===c||(a=[])):(a=a||[]).push(d,c))}r&&(a=a||[]).push("style",r);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};pm=function(e,t,r,s){r!==s&&(t.flags|=4)};function _n(e,t){if(!Ce)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function st(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var n=e.child;n!==null;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags&14680064,s|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function $g(e,t,r){var s=t.pendingProps;switch(Pc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(t),null;case 1:return xt(t.type)&&va(),st(t),null;case 3:return s=t.stateNode,Zs(),ke(yt),ke(it),Dc(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Di(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,qt!==null&&(Ho(qt),qt=null))),Do(e,t),st(t),null;case 5:Uc(t);var n=us(li.current);if(r=t.type,e!==null&&t.stateNode!=null)mm(e,t,r,s,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(U(166));return st(t),null}if(e=us(ir.current),Di(t)){s=t.stateNode,r=t.type;var a=t.memoizedProps;switch(s[rr]=t,s[ii]=a,e=(t.mode&1)!==0,r){case"dialog":Ne("cancel",s),Ne("close",s);break;case"iframe":case"object":case"embed":Ne("load",s);break;case"video":case"audio":for(n=0;n<On.length;n++)Ne(On[n],s);break;case"source":Ne("error",s);break;case"img":case"image":case"link":Ne("error",s),Ne("load",s);break;case"details":Ne("toggle",s);break;case"input":Au(s,a),Ne("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},Ne("invalid",s);break;case"textarea":$u(s,a),Ne("invalid",s)}uo(r,a),n=null;for(var l in a)if(a.hasOwnProperty(l)){var o=a[l];l==="children"?typeof o=="string"?s.textContent!==o&&(a.suppressHydrationWarning!==!0&&Ui(s.textContent,o,e),n=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&Ui(s.textContent,o,e),n=["children",""+o]):Qn.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&Ne("scroll",s)}switch(r){case"input":Pi(s),Lu(s,a,!0);break;case"textarea":Pi(s),zu(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=xa)}s=n,t.updateQueue=s,s!==null&&(t.flags|=4)}else{l=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Bh(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=l.createElement(r,{is:s.is}):(e=l.createElement(r),r==="select"&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,r),e[rr]=t,e[ii]=s,fm(e,t,!1,!1),t.stateNode=e;e:{switch(l=ho(r,s),r){case"dialog":Ne("cancel",e),Ne("close",e),n=s;break;case"iframe":case"object":case"embed":Ne("load",e),n=s;break;case"video":case"audio":for(n=0;n<On.length;n++)Ne(On[n],e);n=s;break;case"source":Ne("error",e),n=s;break;case"img":case"image":case"link":Ne("error",e),Ne("load",e),n=s;break;case"details":Ne("toggle",e),n=s;break;case"input":Au(e,s),n=io(e,s),Ne("invalid",e);break;case"option":n=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},n=Oe({},s,{value:void 0}),Ne("invalid",e);break;case"textarea":$u(e,s),n=oo(e,s),Ne("invalid",e);break;default:n=s}uo(r,n),o=n;for(a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="style"?Gh(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Vh(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Jn(e,c):typeof c=="number"&&Jn(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Qn.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Ne("scroll",e):c!=null&&mc(e,a,c,l))}switch(r){case"input":Pi(e),Lu(e,s,!1);break;case"textarea":Pi(e),zu(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Wr(s.value));break;case"select":e.multiple=!!s.multiple,a=s.value,a!=null?Fs(e,!!s.multiple,a,!1):s.defaultValue!=null&&Fs(e,!!s.multiple,s.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=xa)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return st(t),null;case 6:if(e&&t.stateNode!=null)pm(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(U(166));if(r=us(li.current),us(ir.current),Di(t)){if(s=t.stateNode,r=t.memoizedProps,s[rr]=t,(a=s.nodeValue!==r)&&(e=kt,e!==null))switch(e.tag){case 3:Ui(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ui(s.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[rr]=t,t.stateNode=s}return st(t),null;case 13:if(ke(Pe),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ce&&_t!==null&&t.mode&1&&!(t.flags&128))Af(),Js(),t.flags|=98560,a=!1;else if(a=Di(t),s!==null&&s.dehydrated!==null){if(e===null){if(!a)throw Error(U(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(U(317));a[rr]=t}else Js(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;st(t),a=!1}else qt!==null&&(Ho(qt),qt=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Pe.current&1?Fe===0&&(Fe=3):Jc())),t.updateQueue!==null&&(t.flags|=4),st(t),null);case 4:return Zs(),Do(e,t),e===null&&si(t.stateNode.containerInfo),st(t),null;case 10:return Ac(t.type._context),st(t),null;case 17:return xt(t.type)&&va(),st(t),null;case 19:if(ke(Pe),a=t.memoizedState,a===null)return st(t),null;if(s=(t.flags&128)!==0,l=a.rendering,l===null)if(s)_n(a,!1);else{if(Fe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Sa(e),l!==null){for(t.flags|=128,_n(a,!1),s=l.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)a=r,e=s,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return be(Pe,Pe.current&1|2),t.child}e=e.sibling}a.tail!==null&&$e()>en&&(t.flags|=128,s=!0,_n(a,!1),t.lanes=4194304)}else{if(!s)if(e=Sa(l),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),_n(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!Ce)return st(t),null}else 2*$e()-a.renderingStartTime>en&&r!==1073741824&&(t.flags|=128,s=!0,_n(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(r=a.last,r!==null?r.sibling=l:t.child=l,a.last=l)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=$e(),t.sibling=null,r=Pe.current,be(Pe,s?r&1|2:r&1),t):(st(t),null);case 22:case 23:return Qc(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?jt&1073741824&&(st(t),t.subtreeFlags&6&&(t.flags|=8192)):st(t),null;case 24:return null;case 25:return null}throw Error(U(156,t.tag))}function zg(e,t){switch(Pc(t),t.tag){case 1:return xt(t.type)&&va(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Zs(),ke(yt),ke(it),Dc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Uc(t),null;case 13:if(ke(Pe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(U(340));Js()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ke(Pe),null;case 4:return Zs(),null;case 10:return Ac(t.type._context),null;case 22:case 23:return Qc(),null;case 24:return null;default:return null}}var Fi=!1,nt=!1,Ug=typeof WeakSet=="function"?WeakSet:Set,W=null;function Ms(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Re(e,t,s)}else r.current=null}function Mo(e,t,r){try{r()}catch(s){Re(e,t,s)}}var kd=!1;function Dg(e,t){if(jo=pa,e=wf(),Cc(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var n=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var l=0,o=-1,c=-1,d=0,u=0,h=e,f=null;t:for(;;){for(var v;h!==r||n!==0&&h.nodeType!==3||(o=l+n),h!==a||s!==0&&h.nodeType!==3||(c=l+s),h.nodeType===3&&(l+=h.nodeValue.length),(v=h.firstChild)!==null;)f=h,h=v;for(;;){if(h===e)break t;if(f===r&&++d===n&&(o=l),f===a&&++u===s&&(c=l),(v=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=v}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(_o={focusedElem:e,selectionRange:r},pa=!1,W=t;W!==null;)if(t=W,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,W=e;else for(;W!==null;){t=W;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var j=b.memoizedProps,k=b.memoizedState,p=t.stateNode,m=p.getSnapshotBeforeUpdate(t.elementType===t.type?j:Ft(t.type,j),k);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(_){Re(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,W=e;break}W=t.return}return b=kd,kd=!1,b}function Fn(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var n=s=s.next;do{if((n.tag&e)===e){var a=n.destroy;n.destroy=void 0,a!==void 0&&Mo(t,r,a)}n=n.next}while(n!==s)}}function Za(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function Io(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function gm(e){var t=e.alternate;t!==null&&(e.alternate=null,gm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[rr],delete t[ii],delete t[So],delete t[wg],delete t[bg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ym(e){return e.tag===5||e.tag===3||e.tag===4}function Sd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ym(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Fo(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=xa));else if(s!==4&&(e=e.child,e!==null))for(Fo(e,t,r),e=e.sibling;e!==null;)Fo(e,t,r),e=e.sibling}function Bo(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Bo(e,t,r),e=e.sibling;e!==null;)Bo(e,t,r),e=e.sibling}var Qe=null,Bt=!1;function Nr(e,t,r){for(r=r.child;r!==null;)xm(e,t,r),r=r.sibling}function xm(e,t,r){if(nr&&typeof nr.onCommitFiberUnmount=="function")try{nr.onCommitFiberUnmount(qa,r)}catch{}switch(r.tag){case 5:nt||Ms(r,t);case 6:var s=Qe,n=Bt;Qe=null,Nr(e,t,r),Qe=s,Bt=n,Qe!==null&&(Bt?(e=Qe,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Qe.removeChild(r.stateNode));break;case 18:Qe!==null&&(Bt?(e=Qe,r=r.stateNode,e.nodeType===8?$l(e.parentNode,r):e.nodeType===1&&$l(e,r),ei(e)):$l(Qe,r.stateNode));break;case 4:s=Qe,n=Bt,Qe=r.stateNode.containerInfo,Bt=!0,Nr(e,t,r),Qe=s,Bt=n;break;case 0:case 11:case 14:case 15:if(!nt&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){n=s=s.next;do{var a=n,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&Mo(r,t,l),n=n.next}while(n!==s)}Nr(e,t,r);break;case 1:if(!nt&&(Ms(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(o){Re(r,t,o)}Nr(e,t,r);break;case 21:Nr(e,t,r);break;case 22:r.mode&1?(nt=(s=nt)||r.memoizedState!==null,Nr(e,t,r),nt=s):Nr(e,t,r);break;default:Nr(e,t,r)}}function Cd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Ug),t.forEach(function(s){var n=Wg.bind(null,e,s);r.has(s)||(r.add(s),s.then(n,n))})}}function It(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var n=r[s];try{var a=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:Qe=o.stateNode,Bt=!1;break e;case 3:Qe=o.stateNode.containerInfo,Bt=!0;break e;case 4:Qe=o.stateNode.containerInfo,Bt=!0;break e}o=o.return}if(Qe===null)throw Error(U(160));xm(a,l,n),Qe=null,Bt=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(d){Re(n,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)vm(t,e),t=t.sibling}function vm(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(It(t,e),Zt(e),s&4){try{Fn(3,e,e.return),Za(3,e)}catch(j){Re(e,e.return,j)}try{Fn(5,e,e.return)}catch(j){Re(e,e.return,j)}}break;case 1:It(t,e),Zt(e),s&512&&r!==null&&Ms(r,r.return);break;case 5:if(It(t,e),Zt(e),s&512&&r!==null&&Ms(r,r.return),e.flags&32){var n=e.stateNode;try{Jn(n,"")}catch(j){Re(e,e.return,j)}}if(s&4&&(n=e.stateNode,n!=null)){var a=e.memoizedProps,l=r!==null?r.memoizedProps:a,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&Ih(n,a),ho(o,l);var d=ho(o,a);for(l=0;l<c.length;l+=2){var u=c[l],h=c[l+1];u==="style"?Gh(n,h):u==="dangerouslySetInnerHTML"?Vh(n,h):u==="children"?Jn(n,h):mc(n,u,h,d)}switch(o){case"input":ao(n,a);break;case"textarea":Fh(n,a);break;case"select":var f=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!a.multiple;var v=a.value;v!=null?Fs(n,!!a.multiple,v,!1):f!==!!a.multiple&&(a.defaultValue!=null?Fs(n,!!a.multiple,a.defaultValue,!0):Fs(n,!!a.multiple,a.multiple?[]:"",!1))}n[ii]=a}catch(j){Re(e,e.return,j)}}break;case 6:if(It(t,e),Zt(e),s&4){if(e.stateNode===null)throw Error(U(162));n=e.stateNode,a=e.memoizedProps;try{n.nodeValue=a}catch(j){Re(e,e.return,j)}}break;case 3:if(It(t,e),Zt(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{ei(t.containerInfo)}catch(j){Re(e,e.return,j)}break;case 4:It(t,e),Zt(e);break;case 13:It(t,e),Zt(e),n=e.child,n.flags&8192&&(a=n.memoizedState!==null,n.stateNode.isHidden=a,!a||n.alternate!==null&&n.alternate.memoizedState!==null||(Wc=$e())),s&4&&Cd(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(nt=(d=nt)||u,It(t,e),nt=d):It(t,e),Zt(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(W=e,u=e.child;u!==null;){for(h=W=u;W!==null;){switch(f=W,v=f.child,f.tag){case 0:case 11:case 14:case 15:Fn(4,f,f.return);break;case 1:Ms(f,f.return);var b=f.stateNode;if(typeof b.componentWillUnmount=="function"){s=f,r=f.return;try{t=s,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(j){Re(s,r,j)}}break;case 5:Ms(f,f.return);break;case 22:if(f.memoizedState!==null){Pd(h);continue}}v!==null?(v.return=f,W=v):Pd(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{n=h.stateNode,d?(a=n.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=h.stateNode,c=h.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=qh("display",l))}catch(j){Re(e,e.return,j)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(j){Re(e,e.return,j)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:It(t,e),Zt(e),s&4&&Cd(e);break;case 21:break;default:It(t,e),Zt(e)}}function Zt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(ym(r)){var s=r;break e}r=r.return}throw Error(U(160))}switch(s.tag){case 5:var n=s.stateNode;s.flags&32&&(Jn(n,""),s.flags&=-33);var a=Sd(e);Bo(e,a,n);break;case 3:case 4:var l=s.stateNode.containerInfo,o=Sd(e);Fo(e,o,l);break;default:throw Error(U(161))}}catch(c){Re(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Mg(e,t,r){W=e,wm(e)}function wm(e,t,r){for(var s=(e.mode&1)!==0;W!==null;){var n=W,a=n.child;if(n.tag===22&&s){var l=n.memoizedState!==null||Fi;if(!l){var o=n.alternate,c=o!==null&&o.memoizedState!==null||nt;o=Fi;var d=nt;if(Fi=l,(nt=c)&&!d)for(W=n;W!==null;)l=W,c=l.child,l.tag===22&&l.memoizedState!==null?Td(n):c!==null?(c.return=l,W=c):Td(n);for(;a!==null;)W=a,wm(a),a=a.sibling;W=n,Fi=o,nt=d}Ed(e)}else n.subtreeFlags&8772&&a!==null?(a.return=n,W=a):Ed(e)}}function Ed(e){for(;W!==null;){var t=W;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:nt||Za(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!nt)if(r===null)s.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:Ft(t.type,r.memoizedProps);s.componentDidUpdate(n,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&hd(t,a,s);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}hd(t,l,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&ei(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}nt||t.flags&512&&Io(t)}catch(f){Re(t,t.return,f)}}if(t===e){W=null;break}if(r=t.sibling,r!==null){r.return=t.return,W=r;break}W=t.return}}function Pd(e){for(;W!==null;){var t=W;if(t===e){W=null;break}var r=t.sibling;if(r!==null){r.return=t.return,W=r;break}W=t.return}}function Td(e){for(;W!==null;){var t=W;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Za(4,t)}catch(c){Re(t,r,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var n=t.return;try{s.componentDidMount()}catch(c){Re(t,n,c)}}var a=t.return;try{Io(t)}catch(c){Re(t,a,c)}break;case 5:var l=t.return;try{Io(t)}catch(c){Re(t,l,c)}}}catch(c){Re(t,t.return,c)}if(t===e){W=null;break}var o=t.sibling;if(o!==null){o.return=t.return,W=o;break}W=t.return}}var Ig=Math.ceil,Pa=jr.ReactCurrentDispatcher,Gc=jr.ReactCurrentOwner,$t=jr.ReactCurrentBatchConfig,fe=0,He=null,Me=null,Je=0,jt=0,Is=Jr(0),Fe=0,di=null,xs=0,Ya=0,Hc=0,Bn=null,mt=null,Wc=0,en=1/0,or=null,Ta=!1,Vo=null,Br=null,Bi=!1,$r=null,Oa=0,Vn=0,qo=null,na=-1,ia=0;function ct(){return fe&6?$e():na!==-1?na:na=$e()}function Vr(e){return e.mode&1?fe&2&&Je!==0?Je&-Je:_g.transition!==null?(ia===0&&(ia=sf()),ia):(e=xe,e!==0||(e=window.event,e=e===void 0?16:df(e.type)),e):1}function Kt(e,t,r,s){if(50<Vn)throw Vn=0,qo=null,Error(U(185));vi(e,r,s),(!(fe&2)||e!==He)&&(e===He&&(!(fe&2)&&(Ya|=r),Fe===4&&Or(e,Je)),vt(e,s),r===1&&fe===0&&!(t.mode&1)&&(en=$e()+500,Qa&&Xr()))}function vt(e,t){var r=e.callbackNode;_0(e,t);var s=ma(e,e===He?Je:0);if(s===0)r!==null&&Mu(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&Mu(r),t===1)e.tag===0?jg(Od.bind(null,e)):Tf(Od.bind(null,e)),xg(function(){!(fe&6)&&Xr()}),r=null;else{switch(nf(s)){case 1:r=vc;break;case 4:r=tf;break;case 16:r=fa;break;case 536870912:r=rf;break;default:r=fa}r=Em(r,bm.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function bm(e,t){if(na=-1,ia=0,fe&6)throw Error(U(327));var r=e.callbackNode;if(Hs()&&e.callbackNode!==r)return null;var s=ma(e,e===He?Je:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Ra(e,s);else{t=s;var n=fe;fe|=2;var a=_m();(He!==e||Je!==t)&&(or=null,en=$e()+500,fs(e,t));do try{Vg();break}catch(o){jm(e,o)}while(!0);Rc(),Pa.current=a,fe=n,Me!==null?t=0:(He=null,Je=0,t=Fe)}if(t!==0){if(t===2&&(n=yo(e),n!==0&&(s=n,t=Go(e,n))),t===1)throw r=di,fs(e,0),Or(e,s),vt(e,$e()),r;if(t===6)Or(e,s);else{if(n=e.current.alternate,!(s&30)&&!Fg(n)&&(t=Ra(e,s),t===2&&(a=yo(e),a!==0&&(s=a,t=Go(e,a))),t===1))throw r=di,fs(e,0),Or(e,s),vt(e,$e()),r;switch(e.finishedWork=n,e.finishedLanes=s,t){case 0:case 1:throw Error(U(345));case 2:ns(e,mt,or);break;case 3:if(Or(e,s),(s&130023424)===s&&(t=Wc+500-$e(),10<t)){if(ma(e,0)!==0)break;if(n=e.suspendedLanes,(n&s)!==s){ct(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=ko(ns.bind(null,e,mt,or),t);break}ns(e,mt,or);break;case 4:if(Or(e,s),(s&4194240)===s)break;for(t=e.eventTimes,n=-1;0<s;){var l=31-Wt(s);a=1<<l,l=t[l],l>n&&(n=l),s&=~a}if(s=n,s=$e()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Ig(s/1960))-s,10<s){e.timeoutHandle=ko(ns.bind(null,e,mt,or),s);break}ns(e,mt,or);break;case 5:ns(e,mt,or);break;default:throw Error(U(329))}}}return vt(e,$e()),e.callbackNode===r?bm.bind(null,e):null}function Go(e,t){var r=Bn;return e.current.memoizedState.isDehydrated&&(fs(e,t).flags|=256),e=Ra(e,t),e!==2&&(t=mt,mt=r,t!==null&&Ho(t)),e}function Ho(e){mt===null?mt=e:mt.push.apply(mt,e)}function Fg(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var n=r[s],a=n.getSnapshot;n=n.value;try{if(!Jt(a(),n))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Or(e,t){for(t&=~Hc,t&=~Ya,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Wt(t),s=1<<r;e[r]=-1,t&=~s}}function Od(e){if(fe&6)throw Error(U(327));Hs();var t=ma(e,0);if(!(t&1))return vt(e,$e()),null;var r=Ra(e,t);if(e.tag!==0&&r===2){var s=yo(e);s!==0&&(t=s,r=Go(e,s))}if(r===1)throw r=di,fs(e,0),Or(e,t),vt(e,$e()),r;if(r===6)throw Error(U(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ns(e,mt,or),vt(e,$e()),null}function Kc(e,t){var r=fe;fe|=1;try{return e(t)}finally{fe=r,fe===0&&(en=$e()+500,Qa&&Xr())}}function vs(e){$r!==null&&$r.tag===0&&!(fe&6)&&Hs();var t=fe;fe|=1;var r=$t.transition,s=xe;try{if($t.transition=null,xe=1,e)return e()}finally{xe=s,$t.transition=r,fe=t,!(fe&6)&&Xr()}}function Qc(){jt=Is.current,ke(Is)}function fs(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,yg(r)),Me!==null)for(r=Me.return;r!==null;){var s=r;switch(Pc(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&va();break;case 3:Zs(),ke(yt),ke(it),Dc();break;case 5:Uc(s);break;case 4:Zs();break;case 13:ke(Pe);break;case 19:ke(Pe);break;case 10:Ac(s.type._context);break;case 22:case 23:Qc()}r=r.return}if(He=e,Me=e=qr(e.current,null),Je=jt=t,Fe=0,di=null,Hc=Ya=xs=0,mt=Bn=null,cs!==null){for(t=0;t<cs.length;t++)if(r=cs[t],s=r.interleaved,s!==null){r.interleaved=null;var n=s.next,a=r.pending;if(a!==null){var l=a.next;a.next=n,s.next=l}r.pending=s}cs=null}return e}function jm(e,t){do{var r=Me;try{if(Rc(),ta.current=Ea,Ca){for(var s=Te.memoizedState;s!==null;){var n=s.queue;n!==null&&(n.pending=null),s=s.next}Ca=!1}if(ys=0,Ge=Ie=Te=null,In=!1,oi=0,Gc.current=null,r===null||r.return===null){Fe=1,di=t,Me=null;break}e:{var a=e,l=r.return,o=r,c=t;if(t=Je,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var v=xd(l);if(v!==null){v.flags&=-257,vd(v,l,o,a,t),v.mode&1&&yd(a,d,t),t=v,c=d;var b=t.updateQueue;if(b===null){var j=new Set;j.add(c),t.updateQueue=j}else b.add(c);break e}else{if(!(t&1)){yd(a,d,t),Jc();break e}c=Error(U(426))}}else if(Ce&&o.mode&1){var k=xd(l);if(k!==null){!(k.flags&65536)&&(k.flags|=256),vd(k,l,o,a,t),Tc(Ys(c,o));break e}}a=c=Ys(c,o),Fe!==4&&(Fe=2),Bn===null?Bn=[a]:Bn.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var p=im(a,c,t);dd(a,p);break e;case 1:o=c;var m=a.type,y=a.stateNode;if(!(a.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Br===null||!Br.has(y)))){a.flags|=65536,t&=-t,a.lanes|=t;var _=am(a,o,t);dd(a,_);break e}}a=a.return}while(a!==null)}km(r)}catch(O){t=O,Me===r&&r!==null&&(Me=r=r.return);continue}break}while(!0)}function _m(){var e=Pa.current;return Pa.current=Ea,e===null?Ea:e}function Jc(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),He===null||!(xs&268435455)&&!(Ya&268435455)||Or(He,Je)}function Ra(e,t){var r=fe;fe|=2;var s=_m();(He!==e||Je!==t)&&(or=null,fs(e,t));do try{Bg();break}catch(n){jm(e,n)}while(!0);if(Rc(),fe=r,Pa.current=s,Me!==null)throw Error(U(261));return He=null,Je=0,Fe}function Bg(){for(;Me!==null;)Nm(Me)}function Vg(){for(;Me!==null&&!m0();)Nm(Me)}function Nm(e){var t=Cm(e.alternate,e,jt);e.memoizedProps=e.pendingProps,t===null?km(e):Me=t,Gc.current=null}function km(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=zg(r,t),r!==null){r.flags&=32767,Me=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Fe=6,Me=null;return}}else if(r=$g(r,t,jt),r!==null){Me=r;return}if(t=t.sibling,t!==null){Me=t;return}Me=t=e}while(t!==null);Fe===0&&(Fe=5)}function ns(e,t,r){var s=xe,n=$t.transition;try{$t.transition=null,xe=1,qg(e,t,r,s)}finally{$t.transition=n,xe=s}return null}function qg(e,t,r,s){do Hs();while($r!==null);if(fe&6)throw Error(U(327));r=e.finishedWork;var n=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(U(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(N0(e,a),e===He&&(Me=He=null,Je=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Bi||(Bi=!0,Em(fa,function(){return Hs(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=$t.transition,$t.transition=null;var l=xe;xe=1;var o=fe;fe|=4,Gc.current=null,Dg(e,r),vm(r,e),ug(_o),pa=!!jo,_o=jo=null,e.current=r,Mg(r),p0(),fe=o,xe=l,$t.transition=a}else e.current=r;if(Bi&&(Bi=!1,$r=e,Oa=n),a=e.pendingLanes,a===0&&(Br=null),x0(r.stateNode),vt(e,$e()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],s(n.value,{componentStack:n.stack,digest:n.digest});if(Ta)throw Ta=!1,e=Vo,Vo=null,e;return Oa&1&&e.tag!==0&&Hs(),a=e.pendingLanes,a&1?e===qo?Vn++:(Vn=0,qo=e):Vn=0,Xr(),null}function Hs(){if($r!==null){var e=nf(Oa),t=$t.transition,r=xe;try{if($t.transition=null,xe=16>e?16:e,$r===null)var s=!1;else{if(e=$r,$r=null,Oa=0,fe&6)throw Error(U(331));var n=fe;for(fe|=4,W=e.current;W!==null;){var a=W,l=a.child;if(W.flags&16){var o=a.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(W=d;W!==null;){var u=W;switch(u.tag){case 0:case 11:case 15:Fn(8,u,a)}var h=u.child;if(h!==null)h.return=u,W=h;else for(;W!==null;){u=W;var f=u.sibling,v=u.return;if(gm(u),u===d){W=null;break}if(f!==null){f.return=v,W=f;break}W=v}}}var b=a.alternate;if(b!==null){var j=b.child;if(j!==null){b.child=null;do{var k=j.sibling;j.sibling=null,j=k}while(j!==null)}}W=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,W=l;else e:for(;W!==null;){if(a=W,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Fn(9,a,a.return)}var p=a.sibling;if(p!==null){p.return=a.return,W=p;break e}W=a.return}}var m=e.current;for(W=m;W!==null;){l=W;var y=l.child;if(l.subtreeFlags&2064&&y!==null)y.return=l,W=y;else e:for(l=m;W!==null;){if(o=W,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Za(9,o)}}catch(O){Re(o,o.return,O)}if(o===l){W=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,W=_;break e}W=o.return}}if(fe=n,Xr(),nr&&typeof nr.onPostCommitFiberRoot=="function")try{nr.onPostCommitFiberRoot(qa,e)}catch{}s=!0}return s}finally{xe=r,$t.transition=t}}return!1}function Rd(e,t,r){t=Ys(r,t),t=im(e,t,1),e=Fr(e,t,1),t=ct(),e!==null&&(vi(e,1,t),vt(e,t))}function Re(e,t,r){if(e.tag===3)Rd(e,e,r);else for(;t!==null;){if(t.tag===3){Rd(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Br===null||!Br.has(s))){e=Ys(r,e),e=am(t,e,1),t=Fr(t,e,1),e=ct(),t!==null&&(vi(t,1,e),vt(t,e));break}}t=t.return}}function Gg(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=ct(),e.pingedLanes|=e.suspendedLanes&r,He===e&&(Je&r)===r&&(Fe===4||Fe===3&&(Je&130023424)===Je&&500>$e()-Wc?fs(e,0):Hc|=r),vt(e,t)}function Sm(e,t){t===0&&(e.mode&1?(t=Ri,Ri<<=1,!(Ri&130023424)&&(Ri=4194304)):t=1);var r=ct();e=vr(e,t),e!==null&&(vi(e,t,r),vt(e,r))}function Hg(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Sm(e,r)}function Wg(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,n=e.memoizedState;n!==null&&(r=n.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(U(314))}s!==null&&s.delete(t),Sm(e,r)}var Cm;Cm=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||yt.current)gt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return gt=!1,Lg(e,t,r);gt=!!(e.flags&131072)}else gt=!1,Ce&&t.flags&1048576&&Of(t,ja,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;sa(e,t),e=t.pendingProps;var n=Qs(t,it.current);Gs(t,r),n=Ic(null,t,s,e,n,r);var a=Fc();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,xt(s)?(a=!0,wa(t)):a=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,$c(t),n.updater=Xa,t.stateNode=n,n._reactInternals=t,Ro(t,s,e,r),t=$o(null,t,s,!0,a,r)):(t.tag=0,Ce&&a&&Ec(t),lt(null,t,n,r),t=t.child),t;case 16:s=t.elementType;e:{switch(sa(e,t),e=t.pendingProps,n=s._init,s=n(s._payload),t.type=s,n=t.tag=Qg(s),e=Ft(s,e),n){case 0:t=Lo(null,t,s,e,r);break e;case 1:t=jd(null,t,s,e,r);break e;case 11:t=wd(null,t,s,e,r);break e;case 14:t=bd(null,t,s,Ft(s.type,e),r);break e}throw Error(U(306,s,""))}return t;case 0:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:Ft(s,n),Lo(e,t,s,n,r);case 1:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:Ft(s,n),jd(e,t,s,n,r);case 3:e:{if(um(t),e===null)throw Error(U(387));s=t.pendingProps,a=t.memoizedState,n=a.element,Uf(e,t),ka(t,s,null,r);var l=t.memoizedState;if(s=l.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){n=Ys(Error(U(423)),t),t=_d(e,t,s,r,n);break e}else if(s!==n){n=Ys(Error(U(424)),t),t=_d(e,t,s,r,n);break e}else for(_t=Ir(t.stateNode.containerInfo.firstChild),kt=t,Ce=!0,qt=null,r=$f(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Js(),s===n){t=wr(e,t,r);break e}lt(e,t,s,r)}t=t.child}return t;case 5:return Df(t),e===null&&Po(t),s=t.type,n=t.pendingProps,a=e!==null?e.memoizedProps:null,l=n.children,No(s,n)?l=null:a!==null&&No(s,a)&&(t.flags|=32),cm(e,t),lt(e,t,l,r),t.child;case 6:return e===null&&Po(t),null;case 13:return dm(e,t,r);case 4:return zc(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Xs(t,null,s,r):lt(e,t,s,r),t.child;case 11:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:Ft(s,n),wd(e,t,s,n,r);case 7:return lt(e,t,t.pendingProps,r),t.child;case 8:return lt(e,t,t.pendingProps.children,r),t.child;case 12:return lt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,n=t.pendingProps,a=t.memoizedProps,l=n.value,be(_a,s._currentValue),s._currentValue=l,a!==null)if(Jt(a.value,l)){if(a.children===n.children&&!yt.current){t=wr(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){l=a.child;for(var c=o.firstContext;c!==null;){if(c.context===s){if(a.tag===1){c=pr(-1,r&-r),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),To(a.return,r,t),o.lanes|=r;break}c=c.next}}else if(a.tag===10)l=a.type===t.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(U(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),To(l,r,t),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===t){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}lt(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,s=t.pendingProps.children,Gs(t,r),n=Ut(n),s=s(n),t.flags|=1,lt(e,t,s,r),t.child;case 14:return s=t.type,n=Ft(s,t.pendingProps),n=Ft(s.type,n),bd(e,t,s,n,r);case 15:return lm(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:Ft(s,n),sa(e,t),t.tag=1,xt(s)?(e=!0,wa(t)):e=!1,Gs(t,r),nm(t,s,n),Ro(t,s,n,r),$o(null,t,s,!0,e,r);case 19:return hm(e,t,r);case 22:return om(e,t,r)}throw Error(U(156,t.tag))};function Em(e,t){return ef(e,t)}function Kg(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(e,t,r,s){return new Kg(e,t,r,s)}function Xc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Qg(e){if(typeof e=="function")return Xc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===gc)return 11;if(e===yc)return 14}return 2}function qr(e,t){var r=e.alternate;return r===null?(r=Lt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function aa(e,t,r,s,n,a){var l=2;if(s=e,typeof e=="function")Xc(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Ts:return ms(r.children,n,a,t);case pc:l=8,n|=8;break;case to:return e=Lt(12,r,t,n|2),e.elementType=to,e.lanes=a,e;case ro:return e=Lt(13,r,t,n),e.elementType=ro,e.lanes=a,e;case so:return e=Lt(19,r,t,n),e.elementType=so,e.lanes=a,e;case Uh:return el(r,n,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $h:l=10;break e;case zh:l=9;break e;case gc:l=11;break e;case yc:l=14;break e;case Cr:l=16,s=null;break e}throw Error(U(130,e==null?e:typeof e,""))}return t=Lt(l,r,t,n),t.elementType=e,t.type=s,t.lanes=a,t}function ms(e,t,r,s){return e=Lt(7,e,s,t),e.lanes=r,e}function el(e,t,r,s){return e=Lt(22,e,s,t),e.elementType=Uh,e.lanes=r,e.stateNode={isHidden:!1},e}function Vl(e,t,r){return e=Lt(6,e,null,t),e.lanes=r,e}function ql(e,t,r){return t=Lt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Jg(e,t,r,s,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nl(0),this.expirationTimes=Nl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nl(0),this.identifierPrefix=s,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Zc(e,t,r,s,n,a,l,o,c){return e=new Jg(e,t,r,o,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Lt(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},$c(a),e}function Xg(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ps,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function Pm(e){if(!e)return Kr;e=e._reactInternals;e:{if(bs(e)!==e||e.tag!==1)throw Error(U(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(xt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(U(171))}if(e.tag===1){var r=e.type;if(xt(r))return Pf(e,r,t)}return t}function Tm(e,t,r,s,n,a,l,o,c){return e=Zc(r,s,!0,e,n,a,l,o,c),e.context=Pm(null),r=e.current,s=ct(),n=Vr(r),a=pr(s,n),a.callback=t??null,Fr(r,a,n),e.current.lanes=n,vi(e,n,s),vt(e,s),e}function tl(e,t,r,s){var n=t.current,a=ct(),l=Vr(n);return r=Pm(r),t.context===null?t.context=r:t.pendingContext=r,t=pr(a,l),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Fr(n,t,l),e!==null&&(Kt(e,n,l,a),ea(e,n,l)),l}function Aa(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ad(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Yc(e,t){Ad(e,t),(e=e.alternate)&&Ad(e,t)}function Zg(){return null}var Om=typeof reportError=="function"?reportError:function(e){console.error(e)};function eu(e){this._internalRoot=e}rl.prototype.render=eu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(U(409));tl(e,t,null,null)};rl.prototype.unmount=eu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;vs(function(){tl(null,e,null,null)}),t[xr]=null}};function rl(e){this._internalRoot=e}rl.prototype.unstable_scheduleHydration=function(e){if(e){var t=of();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Tr.length&&t!==0&&t<Tr[r].priority;r++);Tr.splice(r,0,e),r===0&&uf(e)}};function tu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function sl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ld(){}function Yg(e,t,r,s,n){if(n){if(typeof s=="function"){var a=s;s=function(){var d=Aa(l);a.call(d)}}var l=Tm(t,s,e,0,null,!1,!1,"",Ld);return e._reactRootContainer=l,e[xr]=l.current,si(e.nodeType===8?e.parentNode:e),vs(),l}for(;n=e.lastChild;)e.removeChild(n);if(typeof s=="function"){var o=s;s=function(){var d=Aa(c);o.call(d)}}var c=Zc(e,0,!1,null,null,!1,!1,"",Ld);return e._reactRootContainer=c,e[xr]=c.current,si(e.nodeType===8?e.parentNode:e),vs(function(){tl(t,c,r,s)}),c}function nl(e,t,r,s,n){var a=r._reactRootContainer;if(a){var l=a;if(typeof n=="function"){var o=n;n=function(){var c=Aa(l);o.call(c)}}tl(t,l,e,n)}else l=Yg(r,t,e,n,s);return Aa(l)}af=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Tn(t.pendingLanes);r!==0&&(wc(t,r|1),vt(t,$e()),!(fe&6)&&(en=$e()+500,Xr()))}break;case 13:vs(function(){var s=vr(e,1);if(s!==null){var n=ct();Kt(s,e,1,n)}}),Yc(e,1)}};bc=function(e){if(e.tag===13){var t=vr(e,134217728);if(t!==null){var r=ct();Kt(t,e,134217728,r)}Yc(e,134217728)}};lf=function(e){if(e.tag===13){var t=Vr(e),r=vr(e,t);if(r!==null){var s=ct();Kt(r,e,t,s)}Yc(e,t)}};of=function(){return xe};cf=function(e,t){var r=xe;try{return xe=e,t()}finally{xe=r}};mo=function(e,t,r){switch(t){case"input":if(ao(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var n=Ka(s);if(!n)throw Error(U(90));Mh(s),ao(s,n)}}}break;case"textarea":Fh(e,r);break;case"select":t=r.value,t!=null&&Fs(e,!!r.multiple,t,!1)}};Kh=Kc;Qh=vs;var ey={usingClientEntryPoint:!1,Events:[bi,Ls,Ka,Hh,Wh,Kc]},Nn={findFiberByHostInstance:os,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ty={bundleType:Nn.bundleType,version:Nn.version,rendererPackageName:Nn.rendererPackageName,rendererConfig:Nn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zh(e),e===null?null:e.stateNode},findFiberByHostInstance:Nn.findFiberByHostInstance||Zg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vi.isDisabled&&Vi.supportsFiber)try{qa=Vi.inject(ty),nr=Vi}catch{}}Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ey;Ct.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tu(t))throw Error(U(200));return Xg(e,t,null,r)};Ct.createRoot=function(e,t){if(!tu(e))throw Error(U(299));var r=!1,s="",n=Om;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=Zc(e,1,!1,null,null,r,!1,s,n),e[xr]=t.current,si(e.nodeType===8?e.parentNode:e),new eu(t)};Ct.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(U(188)):(e=Object.keys(e).join(","),Error(U(268,e)));return e=Zh(t),e=e===null?null:e.stateNode,e};Ct.flushSync=function(e){return vs(e)};Ct.hydrate=function(e,t,r){if(!sl(t))throw Error(U(200));return nl(null,e,t,!0,r)};Ct.hydrateRoot=function(e,t,r){if(!tu(e))throw Error(U(405));var s=r!=null&&r.hydratedSources||null,n=!1,a="",l=Om;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=Tm(t,null,e,1,r??null,n,!1,a,l),e[xr]=t.current,si(e),s)for(e=0;e<s.length;e++)r=s[e],n=r._getVersion,n=n(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new rl(t)};Ct.render=function(e,t,r){if(!sl(t))throw Error(U(200));return nl(null,e,t,!1,r)};Ct.unmountComponentAtNode=function(e){if(!sl(e))throw Error(U(40));return e._reactRootContainer?(vs(function(){nl(null,null,e,!1,function(){e._reactRootContainer=null,e[xr]=null})}),!0):!1};Ct.unstable_batchedUpdates=Kc;Ct.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!sl(r))throw Error(U(200));if(e==null||e._reactInternals===void 0)throw Error(U(38));return nl(e,t,r,!1,s)};Ct.version="18.3.1-next-f1338f8080-20240426";function Rm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Rm)}catch(e){console.error(e)}}Rm(),Oh.exports=Ct;var ry=Oh.exports,Am,$d=ry;Am=$d.createRoot,$d.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hi(){return hi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},hi.apply(this,arguments)}var zr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(zr||(zr={}));const zd="popstate";function sy(e){e===void 0&&(e={});function t(s,n){let{pathname:a,search:l,hash:o}=s.location;return Wo("",{pathname:a,search:l,hash:o},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(s,n){return typeof n=="string"?n:La(n)}return iy(t,r,null,e)}function Ae(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Lm(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function ny(){return Math.random().toString(36).substr(2,8)}function Ud(e,t){return{usr:e.state,key:e.key,idx:t}}function Wo(e,t,r,s){return r===void 0&&(r=null),hi({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?un(t):t,{state:r,key:t&&t.key||s||ny()})}function La(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function un(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function iy(e,t,r,s){s===void 0&&(s={});let{window:n=document.defaultView,v5Compat:a=!1}=s,l=n.history,o=zr.Pop,c=null,d=u();d==null&&(d=0,l.replaceState(hi({},l.state,{idx:d}),""));function u(){return(l.state||{idx:null}).idx}function h(){o=zr.Pop;let k=u(),p=k==null?null:k-d;d=k,c&&c({action:o,location:j.location,delta:p})}function f(k,p){o=zr.Push;let m=Wo(j.location,k,p);d=u()+1;let y=Ud(m,d),_=j.createHref(m);try{l.pushState(y,"",_)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;n.location.assign(_)}a&&c&&c({action:o,location:j.location,delta:1})}function v(k,p){o=zr.Replace;let m=Wo(j.location,k,p);d=u();let y=Ud(m,d),_=j.createHref(m);l.replaceState(y,"",_),a&&c&&c({action:o,location:j.location,delta:0})}function b(k){let p=n.location.origin!=="null"?n.location.origin:n.location.href,m=typeof k=="string"?k:La(k);return m=m.replace(/ $/,"%20"),Ae(p,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,p)}let j={get action(){return o},get location(){return e(n,l)},listen(k){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(zd,h),c=k,()=>{n.removeEventListener(zd,h),c=null}},createHref(k){return t(n,k)},createURL:b,encodeLocation(k){let p=b(k);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:f,replace:v,go(k){return l.go(k)}};return j}var Dd;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Dd||(Dd={}));function ay(e,t,r){return r===void 0&&(r="/"),ly(e,t,r,!1)}function ly(e,t,r,s){let n=typeof t=="string"?un(t):t,a=tn(n.pathname||"/",r);if(a==null)return null;let l=$m(e);oy(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let d=vy(a);o=yy(l[c],d,s)}return o}function $m(e,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let n=(a,l,o)=>{let c={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};c.relativePath.startsWith("/")&&(Ae(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=Gr([s,c.relativePath]),u=r.concat(c);a.children&&a.children.length>0&&(Ae(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),$m(a.children,t,u,d)),!(a.path==null&&!a.index)&&t.push({path:d,score:py(d,a.index),routesMeta:u})};return e.forEach((a,l)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))n(a,l);else for(let c of zm(a.path))n(a,l,c)}),t}function zm(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,n=r.endsWith("?"),a=r.replace(/\?$/,"");if(s.length===0)return n?[a,""]:[a];let l=zm(s.join("/")),o=[];return o.push(...l.map(c=>c===""?a:[a,c].join("/"))),n&&o.push(...l),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function oy(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:gy(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const cy=/^:[\w-]+$/,uy=3,dy=2,hy=1,fy=10,my=-2,Md=e=>e==="*";function py(e,t){let r=e.split("/"),s=r.length;return r.some(Md)&&(s+=my),t&&(s+=dy),r.filter(n=>!Md(n)).reduce((n,a)=>n+(cy.test(a)?uy:a===""?hy:fy),s)}function gy(e,t){return e.length===t.length&&e.slice(0,-1).every((s,n)=>s===t[n])?e[e.length-1]-t[t.length-1]:0}function yy(e,t,r){let{routesMeta:s}=e,n={},a="/",l=[];for(let o=0;o<s.length;++o){let c=s[o],d=o===s.length-1,u=a==="/"?t:t.slice(a.length)||"/",h=$a({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!h&&d&&r&&!s[s.length-1].route.index&&(h=$a({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(n,h.params),l.push({params:n,pathname:Gr([a,h.pathname]),pathnameBase:_y(Gr([a,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(a=Gr([a,h.pathnameBase]))}return l}function $a(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=xy(e.path,e.caseSensitive,e.end),n=t.match(r);if(!n)return null;let a=n[0],l=a.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:s.reduce((d,u,h)=>{let{paramName:f,isOptional:v}=u;if(f==="*"){let j=o[h]||"";l=a.slice(0,a.length-j.length).replace(/(.)\/+$/,"$1")}const b=o[h];return v&&!b?d[f]=void 0:d[f]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:l,pattern:e}}function xy(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Lm(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(s.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),s]}function vy(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Lm(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function tn(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function wy(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:n=""}=typeof e=="string"?un(e):e;return{pathname:r?r.startsWith("/")?r:by(r,t):t,search:Ny(s),hash:ky(n)}}function by(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function Gl(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jy(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Um(e,t){let r=jy(e);return t?r.map((s,n)=>n===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function Dm(e,t,r,s){s===void 0&&(s=!1);let n;typeof e=="string"?n=un(e):(n=hi({},e),Ae(!n.pathname||!n.pathname.includes("?"),Gl("?","pathname","search",n)),Ae(!n.pathname||!n.pathname.includes("#"),Gl("#","pathname","hash",n)),Ae(!n.search||!n.search.includes("#"),Gl("#","search","hash",n)));let a=e===""||n.pathname==="",l=a?"/":n.pathname,o;if(l==null)o=r;else{let h=t.length-1;if(!s&&l.startsWith("..")){let f=l.split("/");for(;f[0]==="..";)f.shift(),h-=1;n.pathname=f.join("/")}o=h>=0?t[h]:"/"}let c=wy(n,o),d=l&&l!=="/"&&l.endsWith("/"),u=(a||l===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const Gr=e=>e.join("/").replace(/\/\/+/g,"/"),_y=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Ny=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ky=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Sy(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Mm=["post","put","patch","delete"];new Set(Mm);const Cy=["get",...Mm];new Set(Cy);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fi(){return fi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},fi.apply(this,arguments)}const il=g.createContext(null),Im=g.createContext(null),Zr=g.createContext(null),al=g.createContext(null),Yr=g.createContext({outlet:null,matches:[],isDataRoute:!1}),Fm=g.createContext(null);function Ey(e,t){let{relative:r}=t===void 0?{}:t;_i()||Ae(!1);let{basename:s,navigator:n}=g.useContext(Zr),{hash:a,pathname:l,search:o}=ll(e,{relative:r}),c=l;return s!=="/"&&(c=l==="/"?s:Gr([s,l])),n.createHref({pathname:c,search:o,hash:a})}function _i(){return g.useContext(al)!=null}function dn(){return _i()||Ae(!1),g.useContext(al).location}function Bm(e){g.useContext(Zr).static||g.useLayoutEffect(e)}function Xt(){let{isDataRoute:e}=g.useContext(Yr);return e?By():Py()}function Py(){_i()||Ae(!1);let e=g.useContext(il),{basename:t,future:r,navigator:s}=g.useContext(Zr),{matches:n}=g.useContext(Yr),{pathname:a}=dn(),l=JSON.stringify(Um(n,r.v7_relativeSplatPath)),o=g.useRef(!1);return Bm(()=>{o.current=!0}),g.useCallback(function(d,u){if(u===void 0&&(u={}),!o.current)return;if(typeof d=="number"){s.go(d);return}let h=Dm(d,JSON.parse(l),a,u.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Gr([t,h.pathname])),(u.replace?s.replace:s.push)(h,u.state,u)},[t,s,l,a,e])}function Ty(){let{matches:e}=g.useContext(Yr),t=e[e.length-1];return t?t.params:{}}function ll(e,t){let{relative:r}=t===void 0?{}:t,{future:s}=g.useContext(Zr),{matches:n}=g.useContext(Yr),{pathname:a}=dn(),l=JSON.stringify(Um(n,s.v7_relativeSplatPath));return g.useMemo(()=>Dm(e,JSON.parse(l),a,r==="path"),[e,l,a,r])}function Oy(e,t){return Ry(e,t)}function Ry(e,t,r,s){_i()||Ae(!1);let{navigator:n,static:a}=g.useContext(Zr),{matches:l}=g.useContext(Yr),o=l[l.length-1],c=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let u=dn(),h;if(t){var f;let p=typeof t=="string"?un(t):t;d==="/"||(f=p.pathname)!=null&&f.startsWith(d)||Ae(!1),h=p}else h=u;let v=h.pathname||"/",b=v;if(d!=="/"){let p=d.replace(/^\//,"").split("/");b="/"+v.replace(/^\//,"").split("/").slice(p.length).join("/")}let j=!a&&r&&r.matches&&r.matches.length>0?r.matches:ay(e,{pathname:b}),k=Uy(j&&j.map(p=>Object.assign({},p,{params:Object.assign({},c,p.params),pathname:Gr([d,n.encodeLocation?n.encodeLocation(p.pathname).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?d:Gr([d,n.encodeLocation?n.encodeLocation(p.pathnameBase).pathname:p.pathnameBase])})),l,r,s);return t&&k?g.createElement(al.Provider,{value:{location:fi({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:zr.Pop}},k):k}function Ay(){let e=Fy(),t=Sy(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),r?g.createElement("pre",{style:n},r):null,null)}const Ly=g.createElement(Ay,null);class $y extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?g.createElement(Yr.Provider,{value:this.props.routeContext},g.createElement(Fm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zy(e){let{routeContext:t,match:r,children:s}=e,n=g.useContext(il);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),g.createElement(Yr.Provider,{value:t},s)}function Uy(e,t,r,s){var n;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=s)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,o=(n=r)==null?void 0:n.errors;if(o!=null){let u=l.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);u>=0||Ae(!1),l=l.slice(0,Math.min(l.length,u+1))}let c=!1,d=-1;if(r&&s&&s.v7_partialHydration)for(let u=0;u<l.length;u++){let h=l[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:f,errors:v}=r,b=h.route.loader&&f[h.route.id]===void 0&&(!v||v[h.route.id]===void 0);if(h.route.lazy||b){c=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((u,h,f)=>{let v,b=!1,j=null,k=null;r&&(v=o&&h.route.id?o[h.route.id]:void 0,j=h.route.errorElement||Ly,c&&(d<0&&f===0?(b=!0,k=null):d===f&&(b=!0,k=h.route.hydrateFallbackElement||null)));let p=t.concat(l.slice(0,f+1)),m=()=>{let y;return v?y=j:b?y=k:h.route.Component?y=g.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=u,g.createElement(zy,{match:h,routeContext:{outlet:u,matches:p,isDataRoute:r!=null},children:y})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?g.createElement($y,{location:r.location,revalidation:r.revalidation,component:j,error:v,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var Vm=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Vm||{}),za=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(za||{});function Dy(e){let t=g.useContext(il);return t||Ae(!1),t}function My(e){let t=g.useContext(Im);return t||Ae(!1),t}function Iy(e){let t=g.useContext(Yr);return t||Ae(!1),t}function qm(e){let t=Iy(),r=t.matches[t.matches.length-1];return r.route.id||Ae(!1),r.route.id}function Fy(){var e;let t=g.useContext(Fm),r=My(za.UseRouteError),s=qm(za.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function By(){let{router:e}=Dy(Vm.UseNavigateStable),t=qm(za.UseNavigateStable),r=g.useRef(!1);return Bm(()=>{r.current=!0}),g.useCallback(function(n,a){a===void 0&&(a={}),r.current&&(typeof n=="number"?e.navigate(n):e.navigate(n,fi({fromRouteId:t},a)))},[e,t])}function Vy(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function wt(e){Ae(!1)}function qy(e){let{basename:t="/",children:r=null,location:s,navigationType:n=zr.Pop,navigator:a,static:l=!1,future:o}=e;_i()&&Ae(!1);let c=t.replace(/^\/*/,"/"),d=g.useMemo(()=>({basename:c,navigator:a,static:l,future:fi({v7_relativeSplatPath:!1},o)}),[c,o,a,l]);typeof s=="string"&&(s=un(s));let{pathname:u="/",search:h="",hash:f="",state:v=null,key:b="default"}=s,j=g.useMemo(()=>{let k=tn(u,c);return k==null?null:{location:{pathname:k,search:h,hash:f,state:v,key:b},navigationType:n}},[c,u,h,f,v,b,n]);return j==null?null:g.createElement(Zr.Provider,{value:d},g.createElement(al.Provider,{children:r,value:j}))}function Gy(e){let{children:t,location:r}=e;return Oy(Ko(t),r)}new Promise(()=>{});function Ko(e,t){t===void 0&&(t=[]);let r=[];return g.Children.forEach(e,(s,n)=>{if(!g.isValidElement(s))return;let a=[...t,n];if(s.type===g.Fragment){r.push.apply(r,Ko(s.props.children,a));return}s.type!==wt&&Ae(!1),!s.props.index||!s.props.children||Ae(!1);let l={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=Ko(s.props.children,a)),r.push(l)}),r}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ua(){return Ua=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ua.apply(this,arguments)}function Gm(e,t){if(e==null)return{};var r={},s=Object.keys(e),n,a;for(a=0;a<s.length;a++)n=s[a],!(t.indexOf(n)>=0)&&(r[n]=e[n]);return r}function Hy(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Wy(e,t){return e.button===0&&(!t||t==="_self")&&!Hy(e)}const Ky=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Qy=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Jy="6";try{window.__reactRouterVersion=Jy}catch{}const Xy=g.createContext({isTransitioning:!1}),Zy="startTransition",Id=Gp[Zy];function Yy(e){let{basename:t,children:r,future:s,window:n}=e,a=g.useRef();a.current==null&&(a.current=sy({window:n,v5Compat:!0}));let l=a.current,[o,c]=g.useState({action:l.action,location:l.location}),{v7_startTransition:d}=s||{},u=g.useCallback(h=>{d&&Id?Id(()=>c(h)):c(h)},[c,d]);return g.useLayoutEffect(()=>l.listen(u),[l,u]),g.useEffect(()=>Vy(s),[s]),g.createElement(qy,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:l,future:s})}const ex=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mi=g.forwardRef(function(t,r){let{onClick:s,relative:n,reloadDocument:a,replace:l,state:o,target:c,to:d,preventScrollReset:u,viewTransition:h}=t,f=Gm(t,Ky),{basename:v}=g.useContext(Zr),b,j=!1;if(typeof d=="string"&&tx.test(d)&&(b=d,ex))try{let y=new URL(window.location.href),_=d.startsWith("//")?new URL(y.protocol+d):new URL(d),O=tn(_.pathname,v);_.origin===y.origin&&O!=null?d=O+_.search+_.hash:j=!0}catch{}let k=Ey(d,{relative:n}),p=sx(d,{replace:l,state:o,target:c,preventScrollReset:u,relative:n,viewTransition:h});function m(y){s&&s(y),y.defaultPrevented||p(y)}return g.createElement("a",Ua({},f,{href:b||k,onClick:j||a?s:m,ref:r,target:c}))}),ts=g.forwardRef(function(t,r){let{"aria-current":s="page",caseSensitive:n=!1,className:a="",end:l=!1,style:o,to:c,viewTransition:d,children:u}=t,h=Gm(t,Qy),f=ll(c,{relative:h.relative}),v=dn(),b=g.useContext(Im),{navigator:j,basename:k}=g.useContext(Zr),p=b!=null&&nx(f)&&d===!0,m=j.encodeLocation?j.encodeLocation(f).pathname:f.pathname,y=v.pathname,_=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(y=y.toLowerCase(),_=_?_.toLowerCase():null,m=m.toLowerCase()),_&&k&&(_=tn(_,k)||_);const O=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let I=y===m||!l&&y.startsWith(m)&&y.charAt(O)==="/",C=_!=null&&(_===m||!l&&_.startsWith(m)&&_.charAt(m.length)==="/"),E={isActive:I,isPending:C,isTransitioning:p},$=I?s:void 0,T;typeof a=="function"?T=a(E):T=[a,I?"active":null,C?"pending":null,p?"transitioning":null].filter(Boolean).join(" ");let H=typeof o=="function"?o(E):o;return g.createElement(mi,Ua({},h,{"aria-current":$,className:T,ref:r,style:H,to:c,viewTransition:d}),typeof u=="function"?u(E):u)});var Qo;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Qo||(Qo={}));var Fd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Fd||(Fd={}));function rx(e){let t=g.useContext(il);return t||Ae(!1),t}function sx(e,t){let{target:r,replace:s,state:n,preventScrollReset:a,relative:l,viewTransition:o}=t===void 0?{}:t,c=Xt(),d=dn(),u=ll(e,{relative:l});return g.useCallback(h=>{if(Wy(h,r)){h.preventDefault();let f=s!==void 0?s:La(d)===La(u);c(e,{replace:f,state:n,preventScrollReset:a,relative:l,viewTransition:o})}},[d,c,u,s,n,r,e,a,l,o])}function nx(e,t){t===void 0&&(t={});let r=g.useContext(Xy);r==null&&Ae(!1);let{basename:s}=rx(Qo.useViewTransitionState),n=ll(e,{relative:t.relative});if(!r.isTransitioning)return!1;let a=tn(r.currentLocation.pathname,s)||r.currentLocation.pathname,l=tn(r.nextLocation.pathname,s)||r.nextLocation.pathname;return $a(n.pathname,l)!=null||$a(n.pathname,a)!=null}const ix="modulepreload",ax=function(e){return"/Nexus/"+e},Bd={},rn=function(t,r,s){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=Promise.allSettled(r.map(c=>{if(c=ax(c),c in Bd)return;Bd[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":ix,d||(h.as="script"),h.crossOrigin="",h.href=c,o&&h.setAttribute("nonce",o),document.head.appendChild(h),d)return new Promise((f,v)=>{h.addEventListener("load",f),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return n.then(l=>{for(const o of l||[])o.status==="rejected"&&a(o.reason);return t().catch(a)})},lx=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>rn(async()=>{const{default:s}=await Promise.resolve().then(()=>hn);return{default:s}},void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)};class ru extends Error{constructor(t,r="FunctionsError",s){super(t),this.name=r,this.context=s}}class ox extends ru{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class cx extends ru{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class ux extends ru{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Jo;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Jo||(Jo={}));var dx=function(e,t,r,s){function n(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(u){try{d(s.next(u))}catch(h){l(h)}}function c(u){try{d(s.throw(u))}catch(h){l(h)}}function d(u){u.done?a(u.value):n(u.value).then(o,c)}d((s=s.apply(e,t||[])).next())})};class hx{constructor(t,{headers:r={},customFetch:s,region:n=Jo.Any}={}){this.url=t,this.headers=r,this.region=n,this.fetch=lx(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var s;return dx(this,void 0,void 0,function*(){try{const{headers:n,method:a,body:l}=r;let o={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(o["x-region"]=c);let d;l&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",d=l):typeof l=="string"?(o["Content-Type"]="text/plain",d=l):typeof FormData<"u"&&l instanceof FormData?d=l:(o["Content-Type"]="application/json",d=JSON.stringify(l)));const u=yield this.fetch(`${this.url}/${t}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),n),body:d}).catch(b=>{throw new ox(b)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new cx(u);if(!u.ok)throw new ux(u);let f=((s=u.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),v;return f==="application/json"?v=yield u.json():f==="application/octet-stream"?v=yield u.blob():f==="text/event-stream"?v=u:f==="multipart/form-data"?v=yield u.formData():v=yield u.text(),{data:v,error:null}}catch(n){return{data:null,error:n}}})}}var pt={},su={},ol={},Ni={},cl={},ul={},fx=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},sn=fx();const mx=sn.fetch,Hm=sn.fetch.bind(sn),Wm=sn.Headers,px=sn.Request,gx=sn.Response,hn=Object.freeze(Object.defineProperty({__proto__:null,Headers:Wm,Request:px,Response:gx,default:Hm,fetch:mx},Symbol.toStringTag,{value:"Module"})),yx=Pp(hn);var dl={};Object.defineProperty(dl,"__esModule",{value:!0});let xx=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};dl.default=xx;var Km=zt&&zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ul,"__esModule",{value:!0});const vx=Km(yx),wx=Km(dl);let bx=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=vx.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var l,o,c;let d=null,u=null,h=null,f=a.status,v=a.statusText;if(a.ok){if(this.method!=="HEAD"){const p=await a.text();p===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=p:u=JSON.parse(p))}const j=(l=this.headers.Prefer)===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),k=(o=a.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");j&&k&&k.length>1&&(h=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,v="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const j=await a.text();try{d=JSON.parse(j),Array.isArray(d)&&a.status===404&&(u=[],d=null,f=200,v="OK")}catch{a.status===404&&j===""?(f=204,v="No Content"):d={message:j}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,f=200,v="OK"),d&&this.shouldThrowOnError)throw new wx.default(d)}return{error:d,data:u,count:h,status:f,statusText:v}});return this.shouldThrowOnError||(n=n.catch(a=>{var l,o,c;return{error:{message:`${(l=a==null?void 0:a.name)!==null&&l!==void 0?l:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(o=a==null?void 0:a.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),n.then(t,r)}returns(){return this}overrideTypes(){return this}};ul.default=bx;var jx=zt&&zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cl,"__esModule",{value:!0});const _x=jx(ul);let Nx=class extends _x.default{select(t){let r=!1;const s=(t??"*").split("").map(n=>/\s/.test(n)&&!r?"":(n==='"'&&(r=!r),n)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:s,foreignTable:n,referencedTable:a=n}={}){const l=a?`${a}.order`:"order",o=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${o?`${o},`:""}${t}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:s=r}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,r,{foreignTable:s,referencedTable:n=s}={}){const a=typeof n>"u"?"offset":`${n}.offset`,l=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(l,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:s=!1,buffers:n=!1,wal:a=!1,format:l="text"}={}){var o;const c=[t?"analyze":null,r?"verbose":null,s?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),d=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${l}; for="${d}"; options=${c};`,l==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};cl.default=Nx;var kx=zt&&zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ni,"__esModule",{value:!0});const Sx=kx(cl);let Cx=class extends Sx.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const s=Array.from(new Set(r)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${s})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:s,type:n}={}){let a="";n==="plain"?a="pl":n==="phrase"?a="ph":n==="websearch"&&(a="w");const l=s===void 0?"":`(${s})`;return this.url.searchParams.append(t,`${a}fts${l}.${r}`),this}match(t){return Object.entries(t).forEach(([r,s])=>{this.url.searchParams.append(r,`eq.${s}`)}),this}not(t,r,s){return this.url.searchParams.append(t,`not.${r}.${s}`),this}or(t,{foreignTable:r,referencedTable:s=r}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,r,s){return this.url.searchParams.append(t,`${r}.${s}`),this}};Ni.default=Cx;var Ex=zt&&zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ol,"__esModule",{value:!0});const kn=Ex(Ni);let Px=class{constructor(t,{headers:r={},schema:s,fetch:n}){this.url=t,this.headers=r,this.schema=s,this.fetch=n}select(t,{head:r=!1,count:s}={}){const n=r?"HEAD":"GET";let a=!1;const l=(t??"*").split("").map(o=>/\s/.test(o)&&!a?"":(o==='"'&&(a=!a),o)).join("");return this.url.searchParams.set("select",l),s&&(this.headers.Prefer=`count=${s}`),new kn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:s=!0}={}){const n="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const l=t.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(l.length>0){const o=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new kn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:s=!1,count:n,defaultToNull:a=!0}={}){const l="POST",o=[`resolution=${s?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),a||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const c=t.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new kn.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const s="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),r&&n.push(`count=${r}`),this.headers.Prefer=n.join(","),new kn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",s=[];return t&&s.push(`count=${t}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new kn.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};ol.default=Px;var hl={},fl={};Object.defineProperty(fl,"__esModule",{value:!0});fl.version=void 0;fl.version="0.0.0-automated";Object.defineProperty(hl,"__esModule",{value:!0});hl.DEFAULT_HEADERS=void 0;const Tx=fl;hl.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Tx.version}`};var Qm=zt&&zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(su,"__esModule",{value:!0});const Ox=Qm(ol),Rx=Qm(Ni),Ax=hl;let Lx=class Jm{constructor(t,{headers:r={},schema:s,fetch:n}={}){this.url=t,this.headers=Object.assign(Object.assign({},Ax.DEFAULT_HEADERS),r),this.schemaName=s,this.fetch=n}from(t){const r=new URL(`${this.url}/${t}`);return new Ox.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Jm(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:s=!1,get:n=!1,count:a}={}){let l;const o=new URL(`${this.url}/rpc/${t}`);let c;s||n?(l=s?"HEAD":"GET",Object.entries(r).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{o.searchParams.append(u,h)})):(l="POST",c=r);const d=Object.assign({},this.headers);return a&&(d.Prefer=`count=${a}`),new Rx.default({method:l,url:o,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};su.default=Lx;var fn=zt&&zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pt,"__esModule",{value:!0});pt.PostgrestError=pt.PostgrestBuilder=pt.PostgrestTransformBuilder=pt.PostgrestFilterBuilder=pt.PostgrestQueryBuilder=pt.PostgrestClient=void 0;const Xm=fn(su);pt.PostgrestClient=Xm.default;const Zm=fn(ol);pt.PostgrestQueryBuilder=Zm.default;const Ym=fn(Ni);pt.PostgrestFilterBuilder=Ym.default;const ep=fn(cl);pt.PostgrestTransformBuilder=ep.default;const tp=fn(ul);pt.PostgrestBuilder=tp.default;const rp=fn(dl);pt.PostgrestError=rp.default;var $x=pt.default={PostgrestClient:Xm.default,PostgrestQueryBuilder:Zm.default,PostgrestFilterBuilder:Ym.default,PostgrestTransformBuilder:ep.default,PostgrestBuilder:tp.default,PostgrestError:rp.default};const{PostgrestClient:zx,PostgrestQueryBuilder:D1,PostgrestFilterBuilder:M1,PostgrestTransformBuilder:I1,PostgrestBuilder:F1,PostgrestError:B1}=$x,Ux="2.11.2",Dx={"X-Client-Info":`realtime-js/${Ux}`},Mx="1.0.0",sp=1e4,Ix=1e3;var Ws;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ws||(Ws={}));var bt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(bt||(bt={}));var Vt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Vt||(Vt={}));var Xo;(function(e){e.websocket="websocket"})(Xo||(Xo={}));var as;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(as||(as={}));class Fx{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),s=new TextDecoder;return this._decodeBroadcast(t,r,s)}_decodeBroadcast(t,r,s){const n=r.getUint8(1),a=r.getUint8(2);let l=this.HEADER_LENGTH+2;const o=s.decode(t.slice(l,l+n));l=l+n;const c=s.decode(t.slice(l,l+a));l=l+a;const d=JSON.parse(s.decode(t.slice(l,t.byteLength)));return{ref:null,topic:o,event:c,payload:d}}}class np{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var we;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(we||(we={}));const Vd=(e,t,r={})=>{var s;const n=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(t).reduce((a,l)=>(a[l]=Bx(l,e,t,n),a),{})},Bx=(e,t,r,s)=>{const n=t.find(o=>o.name===e),a=n==null?void 0:n.type,l=r[e];return a&&!s.includes(a)?ip(a,l):Zo(l)},ip=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Hx(t,r)}switch(e){case we.bool:return Vx(t);case we.float4:case we.float8:case we.int2:case we.int4:case we.int8:case we.numeric:case we.oid:return qx(t);case we.json:case we.jsonb:return Gx(t);case we.timestamp:return Wx(t);case we.abstime:case we.date:case we.daterange:case we.int4range:case we.int8range:case we.money:case we.reltime:case we.text:case we.time:case we.timestamptz:case we.timetz:case we.tsrange:case we.tstzrange:return Zo(t);default:return Zo(t)}},Zo=e=>e,Vx=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},qx=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Gx=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Hx=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,s=e[r];if(e[0]==="{"&&s==="}"){let a;const l=e.slice(1,r);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(o=>ip(t,o))}return e},Wx=e=>typeof e=="string"?e.replace(" ","T"):e,ap=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Hl{constructor(t,r,s={},n=sp){this.channel=t,this.event=r,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var s;return this._hasReceived(t)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var qd;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(qd||(qd={}));class qn{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:a,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=qn.syncState(this.state,n,a,l),this.pendingDiffs.forEach(c=>{this.state=qn.syncDiff(this.state,c,a,l)}),this.pendingDiffs=[],o()}),this.channel._on(s.diff,{},n=>{const{onJoin:a,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=qn.syncDiff(this.state,n,a,l),o())}),this.onJoin((n,a,l)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:a,newPresences:l})}),this.onLeave((n,a,l)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,s,n){const a=this.cloneDeep(t),l=this.transformState(r),o={},c={};return this.map(a,(d,u)=>{l[d]||(c[d]=u)}),this.map(l,(d,u)=>{const h=a[d];if(h){const f=u.map(k=>k.presence_ref),v=h.map(k=>k.presence_ref),b=u.filter(k=>v.indexOf(k.presence_ref)<0),j=h.filter(k=>f.indexOf(k.presence_ref)<0);b.length>0&&(o[d]=b),j.length>0&&(c[d]=j)}else o[d]=u}),this.syncDiff(a,{joins:o,leaves:c},s,n)}static syncDiff(t,r,s,n){const{joins:a,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(a,(o,c)=>{var d;const u=(d=t[o])!==null&&d!==void 0?d:[];if(t[o]=this.cloneDeep(c),u.length>0){const h=t[o].map(v=>v.presence_ref),f=u.filter(v=>h.indexOf(v.presence_ref)<0);t[o].unshift(...f)}s(o,u,c)}),this.map(l,(o,c)=>{let d=t[o];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),t[o]=d,n(o,d,c),d.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(s=>r(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,s)=>{const n=t[s];return"metas"in n?r[s]=n.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[s]=n,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Gd;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Gd||(Gd={}));var Hd;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Hd||(Hd={}));var cr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(cr||(cr={}));class nu{constructor(t,r={config:{}},s){this.topic=t,this.params=r,this.socket=s,this.bindings={},this.state=bt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Hl(this,Vt.join,this.params,this.timeout),this.rejoinTimer=new np(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=bt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=bt.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=bt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vt.reply,{},(n,a)=>{this._trigger(this._replyEventName(a),n)}),this.presence=new qn(this),this.broadcastEndpointURL=ap(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:l,private:o}}=this.params;this._onError(u=>t==null?void 0:t(cr.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(cr.CLOSED));const c={},d={broadcast:a,presence:l,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(u=>u.filter))!==null&&n!==void 0?n:[],private:o};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){t==null||t(cr.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,v=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,b=[];for(let j=0;j<v;j++){const k=f[j],{filter:{event:p,schema:m,table:y,filter:_}}=k,O=u&&u[j];if(O&&O.event===p&&O.schema===m&&O.table===y&&O.filter===_)b.push(Object.assign(Object.assign({},k),{id:O.id}));else{this.unsubscribe(),t==null||t(cr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(cr.SUBSCRIBED);return}}).receive("error",u=>{t==null||t(cr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(cr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,s){return this._on(t,r,s)}async send(t,r={}){var s,n;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:l}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=d.body)===null||n===void 0?void 0:n.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,o,c;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=bt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(s=>{const n=new Hl(this,Vt.leave,{},t);n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}async _fetchWithTimeout(t,r,s){const n=new AbortController,a=setTimeout(()=>n.abort(),s),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:n.signal}));return clearTimeout(a),l}_push(t,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Hl(this,t,r,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(t,r,s){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,s){var n,a;const l=t.toLocaleLowerCase(),{close:o,error:c,leave:d,join:u}=Vt;if(s&&[o,c,d,u].indexOf(l)>=0&&s!==this._joinRef())return;let f=this._onMessage(l,r,s);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(v=>{var b,j,k;return((b=v.filter)===null||b===void 0?void 0:b.event)==="*"||((k=(j=v.filter)===null||j===void 0?void 0:j.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===l}).map(v=>v.callback(f,s)):(a=this.bindings[l])===null||a===void 0||a.filter(v=>{var b,j,k,p,m,y;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in v){const _=v.id,O=(b=v.filter)===null||b===void 0?void 0:b.event;return _&&((j=r.ids)===null||j===void 0?void 0:j.includes(_))&&(O==="*"||(O==null?void 0:O.toLocaleLowerCase())===((k=r.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const _=(m=(p=v==null?void 0:v.filter)===null||p===void 0?void 0:p.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return _==="*"||_===((y=r==null?void 0:r.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===l}).map(v=>{if(typeof f=="object"&&"ids"in f){const b=f.data,{schema:j,table:k,commit_timestamp:p,type:m,errors:y}=b;f=Object.assign(Object.assign({},{schema:j,table:k,commit_timestamp:p,eventType:m,new:{},old:{},errors:y}),this._getPayloadRecords(b))}v.callback(f,s)})}_isClosed(){return this.state===bt.closed}_isJoined(){return this.state===bt.joined}_isJoining(){return this.state===bt.joining}_isLeaving(){return this.state===bt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,s){const n=t.toLocaleLowerCase(),a={type:n,filter:r,callback:s};return this.bindings[n]?this.bindings[n].push(a):this.bindings[n]=[a],this}_off(t,r){const s=t.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var a;return!(((a=n.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===s&&nu.isEqual(n.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(t[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Vt.close,{},t)}_onError(t){this._on(Vt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=bt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Vd(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Vd(t.columns,t.old_record)),r}}const Kx=()=>{},Qx=typeof WebSocket<"u",Jx=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Xx{constructor(t,r){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Dx,this.params={},this.timeout=sp,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Kx,this.conn=null,this.sendBuffer=[],this.serializer=new Fx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let l;return a?l=a:typeof fetch>"u"?l=(...o)=>rn(async()=>{const{default:c}=await Promise.resolve().then(()=>hn);return{default:c}},void 0).then(({default:c})=>c(...o)):l=fetch,(...o)=>l(...o)},this.endPoint=`${t}/${Xo.websocket}`,this.httpEndpoint=ap(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const n=(s=r==null?void 0:r.params)===null||s===void 0?void 0:s.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(a,l)=>l(JSON.stringify(a)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new np(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(Qx){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Zx(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),rn(async()=>{const{default:t}=await import("./browser-DWj3vPXe.js").then(r=>r.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Mx}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),t}log(t,r,s){this.logger(t,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Ws.connecting:return as.Connecting;case Ws.open:return as.Open;case Ws.closing:return as.Closing;default:return as.Closed}}isConnected(){return this.connectionState()===as.Open}channel(t,r={config:{}}){const s=new nu(`realtime:${t}`,r,this);return this.channels.push(s),s}push(t){const{topic:r,event:s,payload:n,ref:a}=t,l=()=>{this.encode(t,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${r} ${s} (${a})`,n),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(r){let s=null;try{s=JSON.parse(atob(r.split(".")[1]))}catch{}if(s&&s.exp&&!(Math.floor(Date.now()/1e3)-s.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${s.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${s.exp}`);this.accessTokenValue=r,this.channels.forEach(n=>{r&&n.updateJoinPayload({access_token:r}),n.joinedOnce&&n._isJoined()&&n._push(Vt.access_token,{access_token:r})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(Ix,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:s,event:n,payload:a,ref:l}=r;l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${s} ${n} ${l&&"("+l+")"||""}`,a),this.channels.filter(o=>o._isMember(s)).forEach(o=>o._trigger(n,a,l)),this.stateChangeCallbacks.message.forEach(o=>o(r))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Vt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const s=t.match(/\?/)?"&":"?",n=new URLSearchParams(r);return`${t}${s}${n}`}_workerObjectUrl(t){let r;if(t)r=t;else{const s=new Blob([Jx],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}}class Zx{constructor(t,r,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ws.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=s.close}}class iu extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function qe(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Yx extends iu{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Yo extends iu{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var ev=function(e,t,r,s){function n(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(u){try{d(s.next(u))}catch(h){l(h)}}function c(u){try{d(s.throw(u))}catch(h){l(h)}}function d(u){u.done?a(u.value):n(u.value).then(o,c)}d((s=s.apply(e,t||[])).next())})};const lp=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>rn(async()=>{const{default:s}=await Promise.resolve().then(()=>hn);return{default:s}},void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)},tv=()=>ev(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield rn(()=>Promise.resolve().then(()=>hn),void 0)).Response:Response}),ec=e=>{if(Array.isArray(e))return e.map(r=>ec(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,s])=>{const n=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[n]=ec(s)}),t};var js=function(e,t,r,s){function n(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(u){try{d(s.next(u))}catch(h){l(h)}}function c(u){try{d(s.throw(u))}catch(h){l(h)}}function d(u){u.done?a(u.value):n(u.value).then(o,c)}d((s=s.apply(e,t||[])).next())})};const Wl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),rv=(e,t,r)=>js(void 0,void 0,void 0,function*(){const s=yield tv();e instanceof s&&!(r!=null&&r.noResolveJson)?e.json().then(n=>{t(new Yx(Wl(n),e.status||500))}).catch(n=>{t(new Yo(Wl(n),n))}):t(new Yo(Wl(e),e))}),sv=(e,t,r,s)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s&&(n.body=JSON.stringify(s)),Object.assign(Object.assign({},n),r))};function ki(e,t,r,s,n,a){return js(this,void 0,void 0,function*(){return new Promise((l,o)=>{e(r,sv(t,s,n,a)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>rv(c,o,s))})})}function Da(e,t,r,s){return js(this,void 0,void 0,function*(){return ki(e,"GET",t,r,s)})}function Pr(e,t,r,s,n){return js(this,void 0,void 0,function*(){return ki(e,"POST",t,s,n,r)})}function nv(e,t,r,s,n){return js(this,void 0,void 0,function*(){return ki(e,"PUT",t,s,n,r)})}function iv(e,t,r,s){return js(this,void 0,void 0,function*(){return ki(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function op(e,t,r,s,n){return js(this,void 0,void 0,function*(){return ki(e,"DELETE",t,s,n,r)})}var ht=function(e,t,r,s){function n(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(u){try{d(s.next(u))}catch(h){l(h)}}function c(u){try{d(s.throw(u))}catch(h){l(h)}}function d(u){u.done?a(u.value):n(u.value).then(o,c)}d((s=s.apply(e,t||[])).next())})};const av={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Wd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class lv{constructor(t,r={},s,n){this.url=t,this.headers=r,this.bucketId=s,this.fetch=lp(n)}uploadOrUpdate(t,r,s,n){return ht(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},Wd),n);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.append("cacheControl",l.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=s,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n!=null&&n.headers&&(o=Object.assign(Object.assign({},o),n.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:a,headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{})),f=yield h.json();return h.ok?{data:{path:d,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(a){if(qe(a))return{data:null,error:a};throw a}})}upload(t,r,s){return ht(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,s)})}uploadToSignedUrl(t,r,s,n){return ht(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),l=this._getFinalPath(a),o=new URL(this.url+`/object/upload/sign/${l}`);o.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:Wd.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",d.cacheControl)):(c=s,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield this.fetch(o.toString(),{method:"PUT",body:c,headers:u}),f=yield h.json();return h.ok?{data:{path:a,fullPath:f.Key},error:null}:{data:null,error:f}}catch(c){if(qe(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return ht(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const n=Object.assign({},this.headers);r!=null&&r.upsert&&(n["x-upsert"]="true");const a=yield Pr(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),l=new URL(this.url+a.url),o=l.searchParams.get("token");if(!o)throw new iu("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:o},error:null}}catch(s){if(qe(s))return{data:null,error:s};throw s}})}update(t,r,s){return ht(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,s)})}move(t,r,s){return ht(this,void 0,void 0,function*(){try{return{data:yield Pr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(qe(n))return{data:null,error:n};throw n}})}copy(t,r,s){return ht(this,void 0,void 0,function*(){try{return{data:{path:(yield Pr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(qe(n))return{data:null,error:n};throw n}})}createSignedUrl(t,r,s){return ht(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t),a=yield Pr(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const l=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(n){if(qe(n))return{data:null,error:n};throw n}})}createSignedUrls(t,r,s){return ht(this,void 0,void 0,function*(){try{const n=yield Pr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(n){if(qe(n))return{data:null,error:n};throw n}})}download(t,r){return ht(this,void 0,void 0,function*(){const n=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=a?`?${a}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield Da(this.fetch,`${this.url}/${n}/${o}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(qe(o))return{data:null,error:o};throw o}})}info(t){return ht(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const s=yield Da(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:ec(s),error:null}}catch(s){if(qe(s))return{data:null,error:s};throw s}})}exists(t){return ht(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield iv(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(qe(s)&&s instanceof Yo){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,r){const s=this._getFinalPath(t),n=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&n.push(a);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&n.push(c);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${s}${d}`)}}}remove(t){return ht(this,void 0,void 0,function*(){try{return{data:yield op(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}})}list(t,r,s){return ht(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},av),r),{prefix:t||""});return{data:yield Pr(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(qe(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const ov="2.7.1",cv={"X-Client-Info":`storage-js/${ov}`};var Ns=function(e,t,r,s){function n(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(u){try{d(s.next(u))}catch(h){l(h)}}function c(u){try{d(s.throw(u))}catch(h){l(h)}}function d(u){u.done?a(u.value):n(u.value).then(o,c)}d((s=s.apply(e,t||[])).next())})};class uv{constructor(t,r={},s){this.url=t,this.headers=Object.assign(Object.assign({},cv),r),this.fetch=lp(s)}listBuckets(){return Ns(this,void 0,void 0,function*(){try{return{data:yield Da(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(qe(t))return{data:null,error:t};throw t}})}getBucket(t){return Ns(this,void 0,void 0,function*(){try{return{data:yield Da(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Ns(this,void 0,void 0,function*(){try{return{data:yield Pr(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(qe(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return Ns(this,void 0,void 0,function*(){try{return{data:yield nv(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(qe(s))return{data:null,error:s};throw s}})}emptyBucket(t){return Ns(this,void 0,void 0,function*(){try{return{data:yield Pr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ns(this,void 0,void 0,function*(){try{return{data:yield op(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}})}}class dv extends uv{constructor(t,r={},s){super(t,r,s)}from(t){return new lv(this.url,this.headers,t,this.fetch)}}const hv="2.49.4";let Rn="";typeof Deno<"u"?Rn="deno":typeof document<"u"?Rn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Rn="react-native":Rn="node";const fv={"X-Client-Info":`supabase-js-${Rn}/${hv}`},mv={headers:fv},pv={schema:"public"},gv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},yv={};var xv=function(e,t,r,s){function n(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(u){try{d(s.next(u))}catch(h){l(h)}}function c(u){try{d(s.throw(u))}catch(h){l(h)}}function d(u){u.done?a(u.value):n(u.value).then(o,c)}d((s=s.apply(e,t||[])).next())})};const vv=e=>{let t;return e?t=e:typeof fetch>"u"?t=Hm:t=fetch,(...r)=>t(...r)},wv=()=>typeof Headers>"u"?Wm:Headers,bv=(e,t,r)=>{const s=vv(r),n=wv();return(a,l)=>xv(void 0,void 0,void 0,function*(){var o;const c=(o=yield t())!==null&&o!==void 0?o:e;let d=new n(l==null?void 0:l.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),s(a,Object.assign(Object.assign({},l),{headers:d}))})};var jv=function(e,t,r,s){function n(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(u){try{d(s.next(u))}catch(h){l(h)}}function c(u){try{d(s.throw(u))}catch(h){l(h)}}function d(u){u.done?a(u.value):n(u.value).then(o,c)}d((s=s.apply(e,t||[])).next())})};function _v(e){return e.replace(/\/$/,"")}function Nv(e,t){const{db:r,auth:s,realtime:n,global:a}=e,{db:l,auth:o,realtime:c,global:d}=t,u={db:Object.assign(Object.assign({},l),r),auth:Object.assign(Object.assign({},o),s),realtime:Object.assign(Object.assign({},c),n),global:Object.assign(Object.assign({},d),a),accessToken:()=>jv(this,void 0,void 0,function*(){return""})};return e.accessToken?u.accessToken=e.accessToken:delete u.accessToken,u}const cp="2.69.1",Es=30*1e3,tc=3,Kl=tc*Es,kv="http://localhost:9999",Sv="supabase.auth.token",Cv={"X-Client-Info":`gotrue-js/${cp}`},rc="X-Supabase-Api-Version",up={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ev=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Pv=6e5;class au extends Error{constructor(t,r,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function le(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Tv extends au{constructor(t,r,s){super(t,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function Ov(e){return le(e)&&e.name==="AuthApiError"}class dp extends au{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class es extends au{constructor(t,r,s,n){super(t,s,n),this.name=r,this.status=s}}class kr extends es{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Rv(e){return le(e)&&e.name==="AuthSessionMissingError"}class Ql extends es{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class qi extends es{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Gi extends es{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Av(e){return le(e)&&e.name==="AuthImplicitGrantRedirectError"}class Kd extends es{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class sc extends es{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Jl(e){return le(e)&&e.name==="AuthRetryableFetchError"}class Qd extends es{constructor(t,r,s){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class Gn extends es{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Jd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Xd=` 	
\r=`.split(""),Lv=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Xd.length;t+=1)e[Xd[t].charCodeAt(0)]=-2;for(let t=0;t<Jd.length;t+=1)e[Jd[t].charCodeAt(0)]=t;return e})();function hp(e,t,r){const s=Lv[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Zd(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},a=l=>{Uv(l,s,r)};for(let l=0;l<e.length;l+=1)hp(e.charCodeAt(l),n,a);return t.join("")}function $v(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function zv(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|n)+65536,r+=1}$v(s,t)}}function Uv(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Dv(e){const t=[],r={queue:0,queuedBits:0},s=n=>{t.push(n)};for(let n=0;n<e.length;n+=1)hp(e.charCodeAt(n),r,s);return new Uint8Array(t)}function Mv(e){const t=[];return zv(e,r=>t.push(r)),new Uint8Array(t)}function Iv(e){return Math.round(Date.now()/1e3)+e}function Fv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Yt=()=>typeof window<"u"&&typeof document<"u",rs={tested:!1,writable:!1},Hn=()=>{if(!Yt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(rs.tested)return rs.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),rs.tested=!0,rs.writable=!0}catch{rs.tested=!0,rs.writable=!1}return rs.writable};function Bv(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((n,a)=>{t[a]=n})}catch{}return r.searchParams.forEach((s,n)=>{t[n]=s}),t}const fp=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>rn(async()=>{const{default:s}=await Promise.resolve().then(()=>hn);return{default:s}},void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)},Vv=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",mp=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Hi=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Wi=async(e,t)=>{await e.removeItem(t)};class ml{constructor(){this.promise=new ml.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}ml.promiseConstructor=Promise;function Xl(e){const t=e.split(".");if(t.length!==3)throw new Gn("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!Ev.test(t[s]))throw new Gn("JWT not in base64url format");return{header:JSON.parse(Zd(t[0])),payload:JSON.parse(Zd(t[1])),signature:Dv(t[2]),raw:{header:t[0],payload:t[1]}}}async function qv(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Gv(e,t){return new Promise((s,n)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await e(a);if(!t(a,null,l)){s(l);return}}catch(l){if(!t(a,l)){n(l);return}}})()})}function Hv(e){return("0"+e.toString(16)).substr(-2)}function Wv(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let n="";for(let a=0;a<56;a++)n+=r.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(t),Array.from(t,Hv).join("")}async function Kv(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r),n=new Uint8Array(s);return Array.from(n).map(a=>String.fromCharCode(a)).join("")}async function Qv(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Kv(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ks(e,t,r=!1){const s=Wv();let n=s;r&&(n+="/PASSWORD_RECOVERY"),await mp(e,`${t}-code-verifier`,n);const a=await Qv(s);return[a,s===a?"plain":"s256"]}const Jv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Xv(e){const t=e.headers.get(rc);if(!t||!t.match(Jv))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Zv(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Yv(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var ew=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]]);return r};const is=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),tw=[502,503,504];async function Yd(e){var t;if(!Vv(e))throw new sc(is(e),0);if(tw.includes(e.status))throw new sc(is(e),e.status);let r;try{r=await e.json()}catch(a){throw new dp(is(a),a)}let s;const n=Xv(e);if(n&&n.getTime()>=up["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new Qd(is(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new kr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new Qd(is(r),e.status,r.weak_password.reasons);throw new Tv(is(r),e.status||500,s)}const rw=(e,t,r,s)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),r))};async function de(e,t,r,s){var n;const a=Object.assign({},s==null?void 0:s.headers);a[rc]||(a[rc]=up["2024-01-01"].name),s!=null&&s.jwt&&(a.Authorization=`Bearer ${s.jwt}`);const l=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(l.redirect_to=s.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await sw(e,t,r+o,{headers:a,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function sw(e,t,r,s,n,a){const l=rw(t,s,n,a);let o;try{o=await e(r,Object.assign({},l))}catch(c){throw console.error(c),new sc(is(c),0)}if(o.ok||await Yd(o),s!=null&&s.noResolveJson)return o;try{return await o.json()}catch(c){await Yd(c)}}function Sr(e){var t;let r=null;lw(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Iv(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:s},error:null}}function eh(e){const t=Sr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Rr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function nw(e){return{data:e,error:null}}function iw(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:n,verification_type:a}=e,l=ew(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:s,redirect_to:n,verification_type:a},c=Object.assign({},l);return{data:{properties:o,user:c},error:null}}function aw(e){return e}function lw(e){return e.access_token&&e.refresh_token&&e.expires_in}var ow=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]]);return r};class cw{constructor({url:t="",headers:r={},fetch:s}){this.url=t,this.headers=r,this.fetch=fp(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r="global"){try{return await de(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(le(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,r={}){try{return await de(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Rr})}catch(s){if(le(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:r}=t,s=ow(t,["options"]),n=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await de(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:iw,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(le(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await de(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Rr})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,s,n,a,l,o,c;try{const d={nextPage:null,lastPage:0,total:0},u=await de(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(a=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:""},xform:aw});if(u.error)throw u.error;const h=await u.json(),f=(l=u.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(c=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(b=>{const j=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(b.split(";")[1].split("=")[1]);d[`${k}Page`]=j}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(le(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){try{return await de(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Rr})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){try{return await de(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Rr})}catch(s){if(le(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,r=!1){try{return await de(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Rr})}catch(s){if(le(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){try{const{data:r,error:s}=await de(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:r,error:s}}catch(r){if(le(r))return{data:null,error:r};throw r}}async _deleteFactor(t){try{return{data:await de(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(le(r))return{data:null,error:r};throw r}}}const uw={getItem:e=>Hn()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Hn()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Hn()&&globalThis.localStorage.removeItem(e)}};function th(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function dw(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ss={debug:!!(globalThis&&Hn()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class pp extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class hw extends pp{}async function fw(e,t,r){Ss.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),Ss.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){Ss.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await r()}finally{Ss.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}else{if(t===0)throw Ss.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new hw(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ss.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}dw();const mw={url:kv,storageKey:Sv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Cv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function rh(e,t,r){return await r()}class pi{constructor(t){var r,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=pi.nextInstanceID,pi.nextInstanceID+=1,this.instanceID>0&&Yt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},mw),t);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new cw({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=fp(n.fetch),this.lock=n.lock||rh,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:Yt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=fw:this.lock=rh,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Hn()?this.storage=uw:(this.memoryStorage={},this.storage=th(this.memoryStorage)):(this.memoryStorage={},this.storage=th(this.memoryStorage)),Yt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${cp}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=Bv(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),Yt()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:a}=await this._getSessionFromURL(r,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),Av(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:o}=n;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return le(r)?{error:r}:{error:new dp("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,s,n;try{const a=await de(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.captchaToken}},xform:Sr}),{data:l,error:o}=a;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(le(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var r,s,n;try{let a;if("email"in t){const{email:u,password:h,options:f}=t;let v=null,b=null;this.flowType==="pkce"&&([v,b]=await ks(this.storage,this.storageKey)),a=await de(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:v,code_challenge_method:b},xform:Sr})}else if("phone"in t){const{phone:u,password:h,options:f}=t;a=await de(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},channel:(n=f==null?void 0:f.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Sr})}else throw new qi("You must provide either an email or phone number and a password");const{data:l,error:o}=a;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(le(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:l,options:o}=t;r=await de(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:eh})}else if("phone"in t){const{phone:a,password:l,options:o}=t;r=await de(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:eh})}else throw new qi("You must provide either an email or phone number and a password");const{data:s,error:n}=r;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Ql}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(r){if(le(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,s,n,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const r=await Hi(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(r??"").split("/");try{const{data:a,error:l}=await de(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:Sr});if(await Wi(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Ql}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:n??null}),error:l})}catch(a){if(le(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:r,provider:s,token:n,access_token:a,nonce:l}=t,o=await de(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Sr}),{data:c,error:d}=o;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ql}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if(le(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,s,n,a,l;try{if("email"in t){const{email:o,options:c}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await ks(this.storage,this.storageKey));const{error:h}=await de(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:o,options:c}=t,{data:d,error:u}=await de(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new qi("You must provide either an email or phone number.")}catch(o){if(le(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(t){var r,s;try{let n,a;"options"in t&&(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:l,error:o}=await de(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:n,xform:Sr});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,d=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(n){if(le(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(t){var r,s,n;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await ks(this.storage,this.storageKey)),await de(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=t==null?void 0:t.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:nw})}catch(a){if(le(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;if(s)throw s;if(!r)throw new kr;const{error:n}=await de(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:n}})}catch(t){if(le(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:s,type:n,options:a}=t,{error:l}=await de(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:s,type:n,options:a}=t,{data:l,error:o}=await de(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o}}throw new qi("You must provide either an email or phone number and a type")}catch(r){if(le(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Hi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<Kl:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.storage.isServer){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,u)=>(!l&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:t},error:null}}const{session:n,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await de(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Rr}):await this._useSession(async r=>{var s,n,a;const{data:l,error:o}=r;if(o)throw o;return!(!((s=l.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new kr}:await de(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(n=l.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0,xform:Rr})})}catch(r){if(le(r))return Rv(r)&&(await this._removeSession(),await Wi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async s=>{const{data:n,error:a}=s;if(a)throw a;if(!n.session)throw new kr;const l=n.session;let o=null,c=null;this.flowType==="pkce"&&t.email!=null&&([o,c]=await ks(this.storage,this.storageKey));const{data:d,error:u}=await de(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:c}),jwt:l.access_token,xform:Rr});if(u)throw u;return l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(s){if(le(s))return{data:{user:null},error:s};throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new kr;const r=Date.now()/1e3;let s=r,n=!0,a=null;const{payload:l}=Xl(t.access_token);if(l.exp&&(s=l.exp,n=s<=r),n){const{session:o,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};a=o}else{const{data:o,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(le(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var s;if(!t){const{data:l,error:o}=r;if(o)throw o;t=(s=l.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new kr;const{session:n,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(le(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Yt())throw new Gi("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Gi(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Kd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Gi("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Kd("No code detected.");const{data:m,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:a,refresh_token:l,expires_in:o,expires_at:c,token_type:d}=t;if(!a||!o||!l||!d)throw new Gi("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(o);let f=u+h;c&&(f=parseInt(c));const v=f-u;v*1e3<=Es&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${h}s`);const b=f-h;u-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,f,u):u-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,f,u);const{data:j,error:k}=await this._getUser(a);if(k)throw k;const p={provider_token:s,provider_refresh_token:n,access_token:a,expires_in:h,expires_at:f,refresh_token:l,token_type:d,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:t.type},error:null}}catch(s){if(le(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Hi(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:n,error:a}=r;if(a)return{error:a};const l=(s=n.session)===null||s===void 0?void 0:s.access_token;if(l){const{error:o}=await this.admin.signOut(l,t);if(o&&!(Ov(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return t!=="others"&&(await this._removeSession(),await Wi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=Fv(),s={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async r=>{var s,n;try{const{data:{session:a},error:l}=r;if(l)throw l;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await ks(this.storage,this.storageKey,!0));try{return await de(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(le(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(le(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:s,error:n}=await this._useSession(async a=>{var l,o,c,d,u;const{data:h,error:f}=a;if(f)throw f;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await de(this.fetch,"GET",v,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return Yt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:t.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(le(s))return{data:{provider:t.provider,url:null},error:s};throw s}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var s,n;const{data:a,error:l}=r;if(l)throw l;return await de(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(n=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(r){if(le(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await Gv(async n=>(n>0&&await qv(200*Math.pow(2,n-1)),this._debug(r,"refreshing attempt",n),await de(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Sr})),(n,a)=>{const l=200*Math.pow(2,n);return a&&Jl(a)&&Date.now()+l-s<Es})}catch(s){if(this._debug(r,"error",s),le(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",s),Yt()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Hi(this.storage,this.storageKey);if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const n=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Kl;if(this._debug(r,`session has${n?"":" not"} expired with margin of ${Kl}s`),n){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Jl(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,s;if(!t)throw new kr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new ml;const{data:a,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!a.session)throw new kr;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const o={session:a.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(a){if(this._debug(n,"error",a),le(a)){const l={session:null,error:a};return Jl(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,r,s=!0){const n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(c){a.push(c)}});if(await Promise.all(l),a.length>0){for(let o=0;o<a.length;o+=1)console.error(a[o]);throw a[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await mp(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Wi(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Yt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Es);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-t)/Es);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Es}ms, refresh threshold is ${tc} ticks`),n<=tc&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof pp)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Yt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,s){const n=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[a,l]=await ks(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});n.push(o.toString())}if(s!=null&&s.queryParams){const a=new URLSearchParams(s.queryParams);n.push(a.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var s;const{data:n,error:a}=r;return a?{data:null,error:a}:await de(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(le(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var s,n;const{data:a,error:l}=r;if(l)return{data:null,error:l};const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await de(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(le(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:a}=r;if(a)return{data:null,error:a};const{data:l,error:o}=await de(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(r){if(le(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:a}=r;return a?{data:null,error:a}:await de(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(le(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:s}=await this._challenge({factorId:t.factorId});return s?{data:null,error:s}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=(t==null?void 0:t.factors)||[],n=s.filter(l=>l.factor_type==="totp"&&l.status==="verified"),a=s.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:s,totp:n,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,s;const{data:{session:n},error:a}=t;if(a)return{data:null,error:a};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Xl(n.access_token);let o=null;l.aal&&(o=l.aal);let c=o;((s=(r=n.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const u=l.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,r={keys:[]}){let s=r.keys.find(l=>l.kid===t);if(s||(s=this.jwks.keys.find(l=>l.kid===t),s&&this.jwks_cached_at+Pv>Date.now()))return s;const{data:n,error:a}=await de(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!n.keys||n.keys.length===0)throw new Gn("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),s=n.keys.find(l=>l.kid===t),!s)throw new Gn("No matching signing key found in JWKS");return s}async getClaims(t,r={keys:[]}){try{let s=t;if(!s){const{data:v,error:b}=await this.getSession();if(b||!v.session)return{data:null,error:b};s=v.session.access_token}const{header:n,payload:a,signature:l,raw:{header:o,payload:c}}=Xl(s);if(Zv(a.exp),!n.kid||n.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:v}=await this.getUser(s);if(v)throw v;return{data:{claims:a,header:n,signature:l},error:null}}const d=Yv(n.alg),u=await this.fetchJwk(n.kid,r),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,l,Mv(`${o}.${c}`)))throw new Gn("Invalid JWT signature");return{data:{claims:a,header:n,signature:l},error:null}}catch(s){if(le(s))return{data:null,error:s};throw s}}}pi.nextInstanceID=0;const pw=pi;class gw extends pw{constructor(t){super(t)}}var yw=function(e,t,r,s){function n(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(u){try{d(s.next(u))}catch(h){l(h)}}function c(u){try{d(s.throw(u))}catch(h){l(h)}}function d(u){u.done?a(u.value):n(u.value).then(o,c)}d((s=s.apply(e,t||[])).next())})};class xw{constructor(t,r,s){var n,a,l;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const o=_v(t);this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,d={db:pv,realtime:yv,auth:Object.assign(Object.assign({},gv),{storageKey:c}),global:mv},u=Nv(s??{},d);this.storageKey=(n=u.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(a=u.global.headers)!==null&&a!==void 0?a:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=u.auth)!==null&&l!==void 0?l:{},this.headers,u.global.fetch),this.fetch=bv(r,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new zx(`${o}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new hx(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new dv(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},s={}){return this.rest.rpc(t,r,s)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return yw(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:n,storageKey:a,flowType:l,lock:o,debug:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new gw({url:this.authUrl,headers:Object.assign(Object.assign({},h),d),storageKey:a,autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:n,flowType:l,lock:o,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Xx(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(t,r,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const vw=(e,t,r)=>new xw(e,t,r),ww="https://gtfgvqttfydelzgvgwly.supabase.co",bw="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0Zmd2cXR0ZnlkZWx6Z3Znd2x5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQwMjE0OTEsImV4cCI6MjA1OTU5NzQ5MX0.nBdVMHZ6LJ8ZvdSuXk_uDVMb6DxB5iTeFdc0dM7zolI",V=vw(ww,bw);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var jw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),te=(e,t)=>{const r=g.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:o="",children:c,...d},u)=>g.createElement("svg",{ref:u,...jw,width:n,height:n,stroke:s,strokeWidth:l?Number(a)*24/Number(n):a,className:["lucide",`lucide-${_w(e)}`,o].join(" "),...d},[...t.map(([h,f])=>g.createElement(h,f)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=te("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=te("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=te("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gp=te("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=te("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sh=te("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=te("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nh=te("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=te("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=te("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ih=te("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=te("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=te("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ah=te("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ow=te("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=te("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=te("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=te("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=te("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=te("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=te("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lw=te("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=te("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=te("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=te("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=te("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=te("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=te("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=te("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=te("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=te("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dw=te("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=te("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=te("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yp=te("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gl=te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=te("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iw=te("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lh=te("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=te("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=te("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vp=te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=te("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=te("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fw=te("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=te("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=te("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=te("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=te("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Gw(){const[e,t]=g.useState(""),[r,s]=g.useState(""),[n,a]=g.useState(""),[l,o]=g.useState(!1),c=Xt(),d=async h=>{h.preventDefault(),a(""),o(!0);try{const{error:f}=await V.auth.signInWithPassword({email:e,password:r});if(f)throw f;c("/profile")}catch(f){console.error("Login error:",f),a(f.message||"Помилка входу")}finally{o(!1)}},u=async()=>{try{const{error:h}=await V.auth.signInWithOAuth({provider:"github",options:{redirectTo:`${window.location.origin}/profile`,queryParams:{access_type:"offline",prompt:"consent"}}});if(h)throw h}catch(h){console.error("GitHub login error:",h),a(h.message||"Помилка входу через GitHub")}};return i.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[i.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Вхід до аккаунту"}),i.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Або"," ",i.jsx(mi,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"створіть новий аккаунт"})]})]}),i.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:i.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[n&&i.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg",children:n}),i.jsxs("button",{onClick:u,className:"w-full flex justify-center items-center gap-2 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-800 hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 mb-6",children:[i.jsx(Ow,{size:20}),"Увійти через GitHub"]}),i.jsxs("div",{className:"relative my-6",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("div",{className:"w-full border-t border-gray-300"})}),i.jsx("div",{className:"relative flex justify-center text-sm",children:i.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Або увійдіть за допомогою email"})})]}),i.jsxs("form",{onSubmit:d,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),i.jsxs("div",{className:"mt-1 relative",children:[i.jsx(pl,{className:"absolute left-3 top-3 text-gray-400",size:20}),i.jsx("input",{id:"email",type:"email",value:e,onChange:h=>t(h.target.value),className:"appearance-none block w-full px-10 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Введіть email",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Пароль"}),i.jsxs("div",{className:"mt-1 relative",children:[i.jsx(br,{className:"absolute left-3 top-3 text-gray-400",size:20}),i.jsx("input",{id:"password",type:"password",value:r,onChange:h=>s(h.target.value),className:"appearance-none block w-full px-10 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Введіть пароль",required:!0})]})]}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Завантаження...":"Увійти"})})]})]})})]})}function Hw(){const[e,t]=g.useState(""),[r,s]=g.useState(""),[n,a]=g.useState(""),[l,o]=g.useState(""),[c,d]=g.useState(""),[u,h]=g.useState(!1),f=Xt(),v=async b=>{b.preventDefault(),d(""),h(!0);try{const{data:j,error:k}=await V.auth.signUp({email:n,password:l});if(k)throw k;if(j.user){const{error:p}=await V.from("users").insert([{auth_user_id:j.user.id,name:e,lastName:r,email:n,date:new Date().toISOString()}]);if(p)throw p;f("/profile/confirm")}}catch(j){console.error("Registration error:",j),d(j.message||"Помилка реєстрації")}finally{h(!1)}};return i.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[i.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Створення нового аккаунту"}),i.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Або"," ",i.jsx(mi,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"увійдіть в існуючий аккаунт"})]})]}),i.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:i.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[c&&i.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg",children:c}),i.jsxs("form",{onSubmit:v,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Ім'я"}),i.jsxs("div",{className:"mt-1 relative",children:[i.jsx(ac,{className:"absolute left-3 top-3 text-gray-400",size:20}),i.jsx("input",{id:"name",type:"text",value:e,onChange:b=>t(b.target.value),className:"appearance-none block w-full px-10 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Введіть ім'я",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:"Прізвище"}),i.jsxs("div",{className:"mt-1 relative",children:[i.jsx(ac,{className:"absolute left-3 top-3 text-gray-400",size:20}),i.jsx("input",{id:"lastName",type:"text",value:r,onChange:b=>s(b.target.value),className:"appearance-none block w-full px-10 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Введіть прізвище",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),i.jsxs("div",{className:"mt-1 relative",children:[i.jsx(pl,{className:"absolute left-3 top-3 text-gray-400",size:20}),i.jsx("input",{id:"email",type:"email",value:n,onChange:b=>a(b.target.value),className:"appearance-none block w-full px-10 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Введіть email",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Пароль"}),i.jsxs("div",{className:"mt-1 relative",children:[i.jsx(br,{className:"absolute left-3 top-3 text-gray-400",size:20}),i.jsx("input",{id:"password",type:"password",value:l,onChange:b=>o(b.target.value),className:"appearance-none block w-full px-10 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Введіть пароль",required:!0,minLength:6})]})]}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:u,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Завантаження...":"Зареєструватися"})})]})]})})]})}function Xe(){const e=Xt(),t=async()=>{try{const{error:r}=await V.auth.signOut();if(r)throw r;e("/login")}catch(r){console.error("Error logging out:",r)}};return i.jsxs("div",{className:"w-64 bg-white h-screen fixed left-0 top-0 border-r border-gray-200",children:[i.jsx("div",{className:"p-4",children:i.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Соціальна мережа"})}),i.jsxs("nav",{className:"mt-8",children:[i.jsxs(ts,{to:"/profile",className:({isActive:r})=>`flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 ${r?"bg-gray-100":""}`,children:[i.jsx(Ma,{className:"w-5 h-5 mr-3"}),"Профіль"]}),i.jsxs(ts,{to:"/people",className:({isActive:r})=>`flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 ${r?"bg-gray-100":""}`,children:[i.jsx(Qt,{className:"w-5 h-5 mr-3"}),"Люди"]}),i.jsxs(ts,{to:"/users",className:({isActive:r})=>`flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 ${r?"bg-gray-100":""}`,children:[i.jsx(Qt,{className:"w-5 h-5 mr-3"}),"Користувачі"]}),i.jsxs(ts,{to:"/messages",className:({isActive:r})=>`flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 ${r?"bg-gray-100":""}`,children:[i.jsx(gr,{className:"w-5 h-5 mr-3"}),"Повідомлення"]}),i.jsxs(ts,{to:"/friends",className:({isActive:r})=>`flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 ${r?"bg-gray-100":""}`,children:[i.jsx(Qt,{className:"w-5 h-5 mr-3"}),"Друзі"]}),i.jsxs(ts,{to:"/groups",className:({isActive:r})=>`flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 ${r?"bg-gray-100":""}`,children:[i.jsx(Vw,{className:"w-5 h-5 mr-3"}),"Групи"]}),i.jsxs(ts,{to:"/settings",className:({isActive:r})=>`flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 ${r?"bg-gray-100":""}`,children:[i.jsx(gl,{className:"w-5 h-5 mr-3"}),"Налаштування"]})]}),i.jsx("div",{className:"absolute bottom-0 w-full p-4 border-t border-gray-200",children:i.jsxs("button",{onClick:t,className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 w-full",children:[i.jsx($w,{className:"w-5 h-5 mr-3"}),"Вийти"]})})]})}class ls{static async getCurrentUserProfile(){try{const{data:{user:t}}=await V.auth.getUser();if(!(t!=null&&t.email))return console.log("No authenticated user found"),null;const{data:r,error:s}=await V.from("users").select("*").eq("email",t.email).single();return s?s.code==="PGRST116"?await this.createUserProfile(t):(console.error("Error fetching user profile:",s),null):r}catch(t){return console.error("Error getting current user profile:",t),null}}static async createUserProfile(t){var r,s,n,a,l,o;try{const c={email:t.email,name:((r=t.user_metadata)==null?void 0:r.name)||((n=(s=t.user_metadata)==null?void 0:s.full_name)==null?void 0:n.split(" ")[0])||t.email.split("@")[0]||"User",lastName:((a=t.user_metadata)==null?void 0:a.lastName)||((o=(l=t.user_metadata)==null?void 0:l.full_name)==null?void 0:o.split(" ").slice(1).join(" "))||"",date:new Date().toISOString(),notifications:{email:!0,messages:!0,friendRequests:!0},privacy:{profileVisibility:"public",showBirthDate:!0,showEmail:!1}},{data:d,error:u}=await V.from("users").insert([c]).select().single();return u?(console.error("Error creating user profile:",u),null):d}catch(c){return console.error("Error creating user profile:",c),null}}static async searchUsers(t){try{if(t.length<2)return[];const{data:r,error:s}=await V.from("users").select("id, name, lastName, avatar, email").or(`name.ilike.%${t}%, lastName.ilike.%${t}%`).limit(10);if(s)throw s;return r||[]}catch(r){return console.error("Error searching users:",r),[]}}static async getUserFriends(){try{const t=await this.getCurrentUserProfile();if(!t)return[];const{data:r,error:s}=await V.from("friends").select(`
          friend_id,
          friend:users!friend_id (
            id,
            name,
            lastName,
            avatar,
            email
          )
        `).eq("user_id",t.id);if(s)throw s;return(r==null?void 0:r.map(n=>n.friend).filter(Boolean))||[]}catch(t){return console.error("Error fetching friends:",t),[]}}static async addFriend(t){try{const r=await this.getCurrentUserProfile();if(!r)return!1;const{error:s}=await V.from("friends").insert([{user_id:r.id,friend_id:t}]);if(s)throw s;return!0}catch(r){return console.error("Error adding friend:",r),!1}}static async updateUserProfile(t){try{const{data:{user:r}}=await V.auth.getUser();if(!(r!=null&&r.email))return!1;const{error:s}=await V.from("users").update(t).eq("email",r.email);if(s)throw s;return!0}catch(r){return console.error("Error updating user profile:",r),!1}}static async getUserMedia(){try{const t=await this.getCurrentUserProfile();if(!t)return[];const{data:r,error:s}=await V.from("media").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});if(s)throw s;return r||[]}catch(t){return console.error("Error loading media:",t),[]}}static async createPost(t,r){try{const s=await this.getCurrentUserProfile();if(!s)return!1;const{error:n}=await V.from("posts").insert([{user_id:s.id,content:t,images:r,created_at:new Date().toISOString()}]);if(n)throw n;return!0}catch(s){return console.error("Error creating post:",s),!1}}}var Si=e=>e.type==="checkbox",hs=e=>e instanceof Date,ot=e=>e==null;const wp=e=>typeof e=="object";var ze=e=>!ot(e)&&!Array.isArray(e)&&wp(e)&&!hs(e),Ww=e=>ze(e)&&e.target?Si(e.target)?e.target.checked:e.target.value:e,Kw=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Qw=(e,t)=>e.has(Kw(t)),Jw=e=>{const t=e.constructor&&e.constructor.prototype;return ze(t)&&t.hasOwnProperty("isPrototypeOf")},hu=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ve(e){let t;const r=Array.isArray(e),s=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(hu&&(e instanceof Blob||s))&&(r||ze(e)))if(t=r?[]:{},!r&&!Jw(e))t=e;else for(const n in e)e.hasOwnProperty(n)&&(t[n]=Ve(e[n]));else return e;return t}var yl=e=>/^\w*$/.test(e),De=e=>e===void 0,fu=e=>Array.isArray(e)?e.filter(Boolean):[],mu=e=>fu(e.replace(/["|']|\]/g,"").split(/\.|\[/)),X=(e,t,r)=>{if(!t||!ze(e))return r;const s=(yl(t)?[t]:mu(t)).reduce((n,a)=>ot(n)?n:n[a],e);return De(s)||s===e?De(e[t])?r:e[t]:s},tr=e=>typeof e=="boolean",Se=(e,t,r)=>{let s=-1;const n=yl(t)?[t]:mu(t),a=n.length,l=a-1;for(;++s<a;){const o=n[s];let c=r;if(s!==l){const d=e[o];c=ze(d)||Array.isArray(d)?d:isNaN(+n[s+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;e[o]=c,e=e[o]}};const oh={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Gt={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},lr={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Xw=Ot.createContext(null);Xw.displayName="HookFormContext";var Zw=(e,t,r,s=!0)=>{const n={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(n,a,{get:()=>{const l=a;return t._proxyFormState[l]!==Gt.all&&(t._proxyFormState[l]=!s||Gt.all),e[l]}});return n};const Yw=typeof window<"u"?g.useLayoutEffect:g.useEffect;var sr=e=>typeof e=="string",e1=(e,t,r,s,n)=>sr(e)?(s&&t.watch.add(e),X(r,e,n)):Array.isArray(e)?e.map(a=>(s&&t.watch.add(a),X(r,a))):(s&&(t.watchAll=!0),r),t1=(e,t,r,s,n)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:n||!0}}:{},Wn=e=>Array.isArray(e)?e:[e],ch=()=>{let e=[];return{get observers(){return e},next:n=>{for(const a of e)a.next&&a.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(a=>a!==n)}}),unsubscribe:()=>{e=[]}}},lc=e=>ot(e)||!wp(e);function Ar(e,t,r=new WeakSet){if(lc(e)||lc(t))return e===t;if(hs(e)&&hs(t))return e.getTime()===t.getTime();const s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const a of s){const l=e[a];if(!n.includes(a))return!1;if(a!=="ref"){const o=t[a];if(hs(l)&&hs(o)||ze(l)&&ze(o)||Array.isArray(l)&&Array.isArray(o)?!Ar(l,o,r):l!==o)return!1}}return!0}var ft=e=>ze(e)&&!Object.keys(e).length,pu=e=>e.type==="file",Ht=e=>typeof e=="function",Ia=e=>{if(!hu)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},bp=e=>e.type==="select-multiple",gu=e=>e.type==="radio",r1=e=>gu(e)||Si(e),Yl=e=>Ia(e)&&e.isConnected;function s1(e,t){const r=t.slice(0,-1).length;let s=0;for(;s<r;)e=De(e)?s++:e[t[s++]];return e}function n1(e){for(const t in e)if(e.hasOwnProperty(t)&&!De(e[t]))return!1;return!0}function Ue(e,t){const r=Array.isArray(t)?t:yl(t)?[t]:mu(t),s=r.length===1?e:s1(e,r),n=r.length-1,a=r[n];return s&&delete s[a],n!==0&&(ze(s)&&ft(s)||Array.isArray(s)&&n1(s))&&Ue(e,r.slice(0,-1)),e}var jp=e=>{for(const t in e)if(Ht(e[t]))return!0;return!1};function Fa(e,t={}){const r=Array.isArray(e);if(ze(e)||r)for(const s in e)Array.isArray(e[s])||ze(e[s])&&!jp(e[s])?(t[s]=Array.isArray(e[s])?[]:{},Fa(e[s],t[s])):ot(e[s])||(t[s]=!0);return t}function _p(e,t,r){const s=Array.isArray(e);if(ze(e)||s)for(const n in e)Array.isArray(e[n])||ze(e[n])&&!jp(e[n])?De(t)||lc(r[n])?r[n]=Array.isArray(e[n])?Fa(e[n],[]):{...Fa(e[n])}:_p(e[n],ot(t)?{}:t[n],r[n]):r[n]=!Ar(e[n],t[n]);return r}var Sn=(e,t)=>_p(e,t,Fa(t));const uh={value:!1,isValid:!1},dh={value:!0,isValid:!0};var Np=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!De(e[0].attributes.value)?De(e[0].value)||e[0].value===""?dh:{value:e[0].value,isValid:!0}:dh:uh}return uh},kp=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:s})=>De(e)?e:t?e===""?NaN:e&&+e:r&&sr(e)?new Date(e):s?s(e):e;const hh={isValid:!1,value:null};var Sp=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,hh):hh;function fh(e){const t=e.ref;return pu(t)?t.files:gu(t)?Sp(e.refs).value:bp(t)?[...t.selectedOptions].map(({value:r})=>r):Si(t)?Np(e.refs).value:kp(De(t.value)?e.ref.value:t.value,e)}var i1=(e,t,r,s)=>{const n={};for(const a of e){const l=X(t,a);l&&Se(n,a,l._f)}return{criteriaMode:r,names:[...e],fields:n,shouldUseNativeValidation:s}},Ba=e=>e instanceof RegExp,Cn=e=>De(e)?e:Ba(e)?e.source:ze(e)?Ba(e.value)?e.value.source:e.value:e,mh=e=>({isOnSubmit:!e||e===Gt.onSubmit,isOnBlur:e===Gt.onBlur,isOnChange:e===Gt.onChange,isOnAll:e===Gt.all,isOnTouch:e===Gt.onTouched});const ph="AsyncFunction";var a1=e=>!!e&&!!e.validate&&!!(Ht(e.validate)&&e.validate.constructor.name===ph||ze(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===ph)),l1=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),gh=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const Kn=(e,t,r,s)=>{for(const n of r||Object.keys(e)){const a=X(e,n);if(a){const{_f:l,...o}=a;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],n)&&!s)return!0;if(l.ref&&t(l.ref,l.name)&&!s)return!0;if(Kn(o,t))break}else if(ze(o)&&Kn(o,t))break}}};function yh(e,t,r){const s=X(e,r);if(s||yl(r))return{error:s,name:r};const n=r.split(".");for(;n.length;){const a=n.join("."),l=X(t,a),o=X(e,a);if(l&&!Array.isArray(l)&&r!==a)return{name:r};if(o&&o.type)return{name:a,error:o};if(o&&o.root&&o.root.type)return{name:`${a}.root`,error:o.root};n.pop()}return{name:r}}var o1=(e,t,r,s)=>{r(e);const{name:n,...a}=e;return ft(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(l=>t[l]===(!s||Gt.all))},c1=(e,t,r)=>!e||!t||e===t||Wn(e).some(s=>s&&(r?s===t:s.startsWith(t)||t.startsWith(s))),u1=(e,t,r,s,n)=>n.isOnAll?!1:!r&&n.isOnTouch?!(t||e):(r?s.isOnBlur:n.isOnBlur)?!e:(r?s.isOnChange:n.isOnChange)?e:!0,d1=(e,t)=>!fu(X(e,t)).length&&Ue(e,t),h1=(e,t,r)=>{const s=Wn(X(e,r));return Se(s,"root",t[r]),Se(e,r,s),e},ca=e=>sr(e);function xh(e,t,r="validate"){if(ca(e)||Array.isArray(e)&&e.every(ca)||tr(e)&&!e)return{type:r,message:ca(e)?e:"",ref:t}}var Cs=e=>ze(e)&&!Ba(e)?e:{value:e,message:""},vh=async(e,t,r,s,n,a)=>{const{ref:l,refs:o,required:c,maxLength:d,minLength:u,min:h,max:f,pattern:v,validate:b,name:j,valueAsNumber:k,mount:p}=e._f,m=X(r,j);if(!p||t.has(j))return{};const y=o?o[0]:l,_=G=>{n&&y.reportValidity&&(y.setCustomValidity(tr(G)?"":G||""),y.reportValidity())},O={},I=gu(l),C=Si(l),E=I||C,$=(k||pu(l))&&De(l.value)&&De(m)||Ia(l)&&l.value===""||m===""||Array.isArray(m)&&!m.length,T=t1.bind(null,j,s,O),H=(G,J,F,oe=lr.maxLength,ce=lr.minLength)=>{const me=G?J:F;O[j]={type:G?oe:ce,message:me,ref:l,...T(G?oe:ce,me)}};if(a?!Array.isArray(m)||!m.length:c&&(!E&&($||ot(m))||tr(m)&&!m||C&&!Np(o).isValid||I&&!Sp(o).isValid)){const{value:G,message:J}=ca(c)?{value:!!c,message:c}:Cs(c);if(G&&(O[j]={type:lr.required,message:J,ref:y,...T(lr.required,J)},!s))return _(J),O}if(!$&&(!ot(h)||!ot(f))){let G,J;const F=Cs(f),oe=Cs(h);if(!ot(m)&&!isNaN(m)){const ce=l.valueAsNumber||m&&+m;ot(F.value)||(G=ce>F.value),ot(oe.value)||(J=ce<oe.value)}else{const ce=l.valueAsDate||new Date(m),me=Y=>new Date(new Date().toDateString()+" "+Y),L=l.type=="time",Z=l.type=="week";sr(F.value)&&m&&(G=L?me(m)>me(F.value):Z?m>F.value:ce>new Date(F.value)),sr(oe.value)&&m&&(J=L?me(m)<me(oe.value):Z?m<oe.value:ce<new Date(oe.value))}if((G||J)&&(H(!!G,F.message,oe.message,lr.max,lr.min),!s))return _(O[j].message),O}if((d||u)&&!$&&(sr(m)||a&&Array.isArray(m))){const G=Cs(d),J=Cs(u),F=!ot(G.value)&&m.length>+G.value,oe=!ot(J.value)&&m.length<+J.value;if((F||oe)&&(H(F,G.message,J.message),!s))return _(O[j].message),O}if(v&&!$&&sr(m)){const{value:G,message:J}=Cs(v);if(Ba(G)&&!m.match(G)&&(O[j]={type:lr.pattern,message:J,ref:l,...T(lr.pattern,J)},!s))return _(J),O}if(b){if(Ht(b)){const G=await b(m,r),J=xh(G,y);if(J&&(O[j]={...J,...T(lr.validate,J.message)},!s))return _(J.message),O}else if(ze(b)){let G={};for(const J in b){if(!ft(G)&&!s)break;const F=xh(await b[J](m,r),y,J);F&&(G={...F,...T(J,F.message)},_(F.message),s&&(O[j]=G))}if(!ft(G)&&(O[j]={ref:y,...G},!s))return O}}return _(!0),O};const f1={mode:Gt.onSubmit,reValidateMode:Gt.onChange,shouldFocusError:!0};function m1(e={}){let t={...f1,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ht(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},s={},n=ze(t.defaultValues)||ze(t.values)?Ve(t.defaultValues||t.values)||{}:{},a=t.shouldUnregister?{}:Ve(n),l={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...u};const f={array:ch(),state:ch()},v=t.criteriaMode===Gt.all,b=x=>S=>{clearTimeout(d),d=setTimeout(x,S)},j=async x=>{if(!t.disabled&&(u.isValid||h.isValid||x)){const S=t.resolver?ft((await C()).errors):await $(s,!0);S!==r.isValid&&f.state.next({isValid:S})}},k=(x,S)=>{!t.disabled&&(u.isValidating||u.validatingFields||h.isValidating||h.validatingFields)&&((x||Array.from(o.mount)).forEach(R=>{R&&(S?Se(r.validatingFields,R,S):Ue(r.validatingFields,R))}),f.state.next({validatingFields:r.validatingFields,isValidating:!ft(r.validatingFields)}))},p=(x,S=[],R,q,B=!0,M=!0)=>{if(q&&R&&!t.disabled){if(l.action=!0,M&&Array.isArray(X(s,x))){const ee=R(X(s,x),q.argA,q.argB);B&&Se(s,x,ee)}if(M&&Array.isArray(X(r.errors,x))){const ee=R(X(r.errors,x),q.argA,q.argB);B&&Se(r.errors,x,ee),d1(r.errors,x)}if((u.touchedFields||h.touchedFields)&&M&&Array.isArray(X(r.touchedFields,x))){const ee=R(X(r.touchedFields,x),q.argA,q.argB);B&&Se(r.touchedFields,x,ee)}(u.dirtyFields||h.dirtyFields)&&(r.dirtyFields=Sn(n,a)),f.state.next({name:x,isDirty:H(x,S),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Se(a,x,S)},m=(x,S)=>{Se(r.errors,x,S),f.state.next({errors:r.errors})},y=x=>{r.errors=x,f.state.next({errors:r.errors,isValid:!1})},_=(x,S,R,q)=>{const B=X(s,x);if(B){const M=X(a,x,De(R)?X(n,x):R);De(M)||q&&q.defaultChecked||S?Se(a,x,S?M:fh(B._f)):F(x,M),l.mount&&j()}},O=(x,S,R,q,B)=>{let M=!1,ee=!1;const he={name:x};if(!t.disabled){if(!R||q){(u.isDirty||h.isDirty)&&(ee=r.isDirty,r.isDirty=he.isDirty=H(),M=ee!==he.isDirty);const ge=Ar(X(n,x),S);ee=!!X(r.dirtyFields,x),ge?Ue(r.dirtyFields,x):Se(r.dirtyFields,x,!0),he.dirtyFields=r.dirtyFields,M=M||(u.dirtyFields||h.dirtyFields)&&ee!==!ge}if(R){const ge=X(r.touchedFields,x);ge||(Se(r.touchedFields,x,R),he.touchedFields=r.touchedFields,M=M||(u.touchedFields||h.touchedFields)&&ge!==R)}M&&B&&f.state.next(he)}return M?he:{}},I=(x,S,R,q)=>{const B=X(r.errors,x),M=(u.isValid||h.isValid)&&tr(S)&&r.isValid!==S;if(t.delayError&&R?(c=b(()=>m(x,R)),c(t.delayError)):(clearTimeout(d),c=null,R?Se(r.errors,x,R):Ue(r.errors,x)),(R?!Ar(B,R):B)||!ft(q)||M){const ee={...q,...M&&tr(S)?{isValid:S}:{},errors:r.errors,name:x};r={...r,...ee},f.state.next(ee)}},C=async x=>{k(x,!0);const S=await t.resolver(a,t.context,i1(x||o.mount,s,t.criteriaMode,t.shouldUseNativeValidation));return k(x),S},E=async x=>{const{errors:S}=await C(x);if(x)for(const R of x){const q=X(S,R);q?Se(r.errors,R,q):Ue(r.errors,R)}else r.errors=S;return S},$=async(x,S,R={valid:!0})=>{for(const q in x){const B=x[q];if(B){const{_f:M,...ee}=B;if(M){const he=o.array.has(M.name),ge=B._f&&a1(B._f);ge&&u.validatingFields&&k([q],!0);const w=await vh(B,o.disabled,a,v,t.shouldUseNativeValidation&&!S,he);if(ge&&u.validatingFields&&k([q]),w[M.name]&&(R.valid=!1,S))break;!S&&(X(w,M.name)?he?h1(r.errors,w,M.name):Se(r.errors,M.name,w[M.name]):Ue(r.errors,M.name))}!ft(ee)&&await $(ee,S,R)}}return R.valid},T=()=>{for(const x of o.unMount){const S=X(s,x);S&&(S._f.refs?S._f.refs.every(R=>!Yl(R)):!Yl(S._f.ref))&&ae(x)}o.unMount=new Set},H=(x,S)=>!t.disabled&&(x&&S&&Se(a,x,S),!Ar(Y(),n)),G=(x,S,R)=>e1(x,o,{...l.mount?a:De(S)?n:sr(x)?{[x]:S}:S},R,S),J=x=>fu(X(l.mount?a:n,x,t.shouldUnregister?X(n,x,[]):[])),F=(x,S,R={})=>{const q=X(s,x);let B=S;if(q){const M=q._f;M&&(!M.disabled&&Se(a,x,kp(S,M)),B=Ia(M.ref)&&ot(S)?"":S,bp(M.ref)?[...M.ref.options].forEach(ee=>ee.selected=B.includes(ee.value)):M.refs?Si(M.ref)?M.refs.forEach(ee=>{(!ee.defaultChecked||!ee.disabled)&&(Array.isArray(B)?ee.checked=!!B.find(he=>he===ee.value):ee.checked=B===ee.value||!!B)}):M.refs.forEach(ee=>ee.checked=ee.value===B):pu(M.ref)?M.ref.value="":(M.ref.value=B,M.ref.type||f.state.next({name:x,values:Ve(a)})))}(R.shouldDirty||R.shouldTouch)&&O(x,B,R.shouldTouch,R.shouldDirty,!0),R.shouldValidate&&Z(x)},oe=(x,S,R)=>{for(const q in S){if(!S.hasOwnProperty(q))return;const B=S[q],M=x+"."+q,ee=X(s,M);(o.array.has(x)||ze(B)||ee&&!ee._f)&&!hs(B)?oe(M,B,R):F(M,B,R)}},ce=(x,S,R={})=>{const q=X(s,x),B=o.array.has(x),M=Ve(S);Se(a,x,M),B?(f.array.next({name:x,values:Ve(a)}),(u.isDirty||u.dirtyFields||h.isDirty||h.dirtyFields)&&R.shouldDirty&&f.state.next({name:x,dirtyFields:Sn(n,a),isDirty:H(x,M)})):q&&!q._f&&!ot(M)?oe(x,M,R):F(x,M,R),gh(x,o)&&f.state.next({...r}),f.state.next({name:l.mount?x:void 0,values:Ve(a)})},me=async x=>{l.mount=!0;const S=x.target;let R=S.name,q=!0;const B=X(s,R),M=ge=>{q=Number.isNaN(ge)||hs(ge)&&isNaN(ge.getTime())||Ar(ge,X(a,R,ge))},ee=mh(t.mode),he=mh(t.reValidateMode);if(B){let ge,w;const A=S.type?fh(B._f):Ww(x),se=x.type===oh.BLUR||x.type===oh.FOCUS_OUT,pe=!l1(B._f)&&!t.resolver&&!X(r.errors,R)&&!B._f.deps||u1(se,X(r.touchedFields,R),r.isSubmitted,he,ee),tt=gh(R,o,se);Se(a,R,A),se?(B._f.onBlur&&B._f.onBlur(x),c&&c(0)):B._f.onChange&&B._f.onChange(x);const Pt=O(R,A,se),ar=!ft(Pt)||tt;if(!se&&f.state.next({name:R,type:x.type,values:Ve(a)}),pe)return(u.isValid||h.isValid)&&(t.mode==="onBlur"?se&&j():se||j()),ar&&f.state.next({name:R,...tt?{}:Pt});if(!se&&tt&&f.state.next({...r}),t.resolver){const{errors:Mt}=await C([R]);if(M(A),q){const xl=yh(r.errors,s,R),pn=yh(Mt,s,xl.name||R);ge=pn.error,R=pn.name,w=ft(Mt)}}else k([R],!0),ge=(await vh(B,o.disabled,a,v,t.shouldUseNativeValidation))[R],k([R]),M(A),q&&(ge?w=!1:(u.isValid||h.isValid)&&(w=await $(s,!0)));q&&(B._f.deps&&Z(B._f.deps),I(R,w,ge,Pt))}},L=(x,S)=>{if(X(r.errors,S)&&x.focus)return x.focus(),1},Z=async(x,S={})=>{let R,q;const B=Wn(x);if(t.resolver){const M=await E(De(x)?x:B);R=ft(M),q=x?!B.some(ee=>X(M,ee)):R}else x?(q=(await Promise.all(B.map(async M=>{const ee=X(s,M);return await $(ee&&ee._f?{[M]:ee}:ee)}))).every(Boolean),!(!q&&!r.isValid)&&j()):q=R=await $(s);return f.state.next({...!sr(x)||(u.isValid||h.isValid)&&R!==r.isValid?{}:{name:x},...t.resolver||!x?{isValid:R}:{},errors:r.errors}),S.shouldFocus&&!q&&Kn(s,L,x?B:o.mount),q},Y=x=>{const S={...l.mount?a:n};return De(x)?S:sr(x)?X(S,x):x.map(R=>X(S,R))},ne=(x,S)=>({invalid:!!X((S||r).errors,x),isDirty:!!X((S||r).dirtyFields,x),error:X((S||r).errors,x),isValidating:!!X(r.validatingFields,x),isTouched:!!X((S||r).touchedFields,x)}),ie=x=>{x&&Wn(x).forEach(S=>Ue(r.errors,S)),f.state.next({errors:x?r.errors:{}})},Ye=(x,S,R)=>{const q=(X(s,x,{_f:{}})._f||{}).ref,B=X(r.errors,x)||{},{ref:M,message:ee,type:he,...ge}=B;Se(r.errors,x,{...ge,...S,ref:q}),f.state.next({name:x,errors:r.errors,isValid:!1}),R&&R.shouldFocus&&q&&q.focus&&q.focus()},N=(x,S)=>Ht(x)?f.state.subscribe({next:R=>x(G(void 0,S),R)}):G(x,S,!0),z=x=>f.state.subscribe({next:S=>{c1(x.name,S.name,x.exact)&&o1(S,x.formState||u,at,x.reRenderRoot)&&x.callback({values:{...a},...r,...S})}}).unsubscribe,re=x=>(l.mount=!0,h={...h,...x.formState},z({...x,formState:h})),ae=(x,S={})=>{for(const R of x?Wn(x):o.mount)o.mount.delete(R),o.array.delete(R),S.keepValue||(Ue(s,R),Ue(a,R)),!S.keepError&&Ue(r.errors,R),!S.keepDirty&&Ue(r.dirtyFields,R),!S.keepTouched&&Ue(r.touchedFields,R),!S.keepIsValidating&&Ue(r.validatingFields,R),!t.shouldUnregister&&!S.keepDefaultValue&&Ue(n,R);f.state.next({values:Ve(a)}),f.state.next({...r,...S.keepDirty?{isDirty:H()}:{}}),!S.keepIsValid&&j()},Ee=({disabled:x,name:S})=>{(tr(x)&&l.mount||x||o.disabled.has(S))&&(x?o.disabled.add(S):o.disabled.delete(S))},Be=(x,S={})=>{let R=X(s,x);const q=tr(S.disabled)||tr(t.disabled);return Se(s,x,{...R||{},_f:{...R&&R._f?R._f:{ref:{name:x}},name:x,mount:!0,...S}}),o.mount.add(x),R?Ee({disabled:tr(S.disabled)?S.disabled:t.disabled,name:x}):_(x,!0,S.value),{...q?{disabled:S.disabled||t.disabled}:{},...t.progressive?{required:!!S.required,min:Cn(S.min),max:Cn(S.max),minLength:Cn(S.minLength),maxLength:Cn(S.maxLength),pattern:Cn(S.pattern)}:{},name:x,onChange:me,onBlur:me,ref:B=>{if(B){Be(x,S),R=X(s,x);const M=De(B.value)&&B.querySelectorAll&&B.querySelectorAll("input,select,textarea")[0]||B,ee=r1(M),he=R._f.refs||[];if(ee?he.find(ge=>ge===M):M===R._f.ref)return;Se(s,x,{_f:{...R._f,...ee?{refs:[...he.filter(Yl),M,...Array.isArray(X(n,x))?[{}]:[]],ref:{type:M.type,name:x}}:{ref:M}}}),_(x,!1,void 0,M)}else R=X(s,x,{}),R._f&&(R._f.mount=!1),(t.shouldUnregister||S.shouldUnregister)&&!(Qw(o.array,x)&&l.action)&&o.unMount.add(x)}}},je=()=>t.shouldFocusError&&Kn(s,L,o.mount),Le=x=>{tr(x)&&(f.state.next({disabled:x}),Kn(s,(S,R)=>{const q=X(s,R);q&&(S.disabled=q._f.disabled||x,Array.isArray(q._f.refs)&&q._f.refs.forEach(B=>{B.disabled=q._f.disabled||x}))},0,!1))},D=(x,S)=>async R=>{let q;R&&(R.preventDefault&&R.preventDefault(),R.persist&&R.persist());let B=Ve(a);if(f.state.next({isSubmitting:!0}),t.resolver){const{errors:M,values:ee}=await C();r.errors=M,B=Ve(ee)}else await $(s);if(o.disabled.size)for(const M of o.disabled)Ue(B,M);if(Ue(r.errors,"root"),ft(r.errors)){f.state.next({errors:{}});try{await x(B,R)}catch(M){q=M}}else S&&await S({...r.errors},R),je(),setTimeout(je);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ft(r.errors)&&!q,submitCount:r.submitCount+1,errors:r.errors}),q)throw q},Q=(x,S={})=>{X(s,x)&&(De(S.defaultValue)?ce(x,Ve(X(n,x))):(ce(x,S.defaultValue),Se(n,x,Ve(S.defaultValue))),S.keepTouched||Ue(r.touchedFields,x),S.keepDirty||(Ue(r.dirtyFields,x),r.isDirty=S.defaultValue?H(x,Ve(X(n,x))):H()),S.keepError||(Ue(r.errors,x),u.isValid&&j()),f.state.next({...r}))},ve=(x,S={})=>{const R=x?Ve(x):n,q=Ve(R),B=ft(x),M=B?n:q;if(S.keepDefaultValues||(n=R),!S.keepValues){if(S.keepDirtyValues){const ee=new Set([...o.mount,...Object.keys(Sn(n,a))]);for(const he of Array.from(ee))X(r.dirtyFields,he)?Se(M,he,X(a,he)):ce(he,X(M,he))}else{if(hu&&De(x))for(const ee of o.mount){const he=X(s,ee);if(he&&he._f){const ge=Array.isArray(he._f.refs)?he._f.refs[0]:he._f.ref;if(Ia(ge)){const w=ge.closest("form");if(w){w.reset();break}}}}if(S.keepFieldsRef)for(const ee of o.mount)ce(ee,X(M,ee));else s={}}a=t.shouldUnregister?S.keepDefaultValues?Ve(n):{}:Ve(M),f.array.next({values:{...M}}),f.state.next({values:{...M}})}o={mount:S.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!u.isValid||!!S.keepIsValid||!!S.keepDirtyValues,l.watch=!!t.shouldUnregister,f.state.next({submitCount:S.keepSubmitCount?r.submitCount:0,isDirty:B?!1:S.keepDirty?r.isDirty:!!(S.keepDefaultValues&&!Ar(x,n)),isSubmitted:S.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:B?{}:S.keepDirtyValues?S.keepDefaultValues&&a?Sn(n,a):r.dirtyFields:S.keepDefaultValues&&x?Sn(n,x):S.keepDirty?r.dirtyFields:{},touchedFields:S.keepTouched?r.touchedFields:{},errors:S.keepErrors?r.errors:{},isSubmitSuccessful:S.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},ye=(x,S)=>ve(Ht(x)?x(a):x,S),We=(x,S={})=>{const R=X(s,x),q=R&&R._f;if(q){const B=q.refs?q.refs[0]:q.ref;B.focus&&(B.focus(),S.shouldSelect&&Ht(B.select)&&B.select())}},at=x=>{r={...r,...x}},Ke={control:{register:Be,unregister:ae,getFieldState:ne,handleSubmit:D,setError:Ye,_subscribe:z,_runSchema:C,_focusError:je,_getWatch:G,_getDirty:H,_setValid:j,_setFieldArray:p,_setDisabledField:Ee,_setErrors:y,_getFieldArray:J,_reset:ve,_resetDefaultValues:()=>Ht(t.defaultValues)&&t.defaultValues().then(x=>{ye(x,t.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:T,_disableForm:Le,_subjects:f,_proxyFormState:u,get _fields(){return s},get _formValues(){return a},get _state(){return l},set _state(x){l=x},get _defaultValues(){return n},get _names(){return o},set _names(x){o=x},get _formState(){return r},get _options(){return t},set _options(x){t={...t,...x}}},subscribe:re,trigger:Z,register:Be,handleSubmit:D,watch:N,setValue:ce,getValues:Y,reset:ye,resetField:Q,clearErrors:ie,unregister:ae,setError:Ye,setFocus:We,getFieldState:ne};return{...Ke,formControl:Ke}}function p1(e={}){const t=Ot.useRef(void 0),r=Ot.useRef(void 0),[s,n]=Ot.useState({isDirty:!1,isValidating:!1,isLoading:Ht(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Ht(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:s},e.defaultValues&&!Ht(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...o}=m1(e);t.current={...o,formState:s}}const a=t.current.control;return a._options=e,Yw(()=>{const l=a._subscribe({formState:a._proxyFormState,callback:()=>n({...a._formState}),reRenderRoot:!0});return n(o=>({...o,isReady:!0})),a._formState.isReady=!0,l},[a]),Ot.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),Ot.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),Ot.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),Ot.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),Ot.useEffect(()=>{if(a._proxyFormState.isDirty){const l=a._getDirty();l!==s.isDirty&&a._subjects.state.next({isDirty:l})}},[a,s.isDirty]),Ot.useEffect(()=>{e.values&&!Ar(e.values,r.current)?(a._reset(e.values,{keepFieldsRef:!0,...a._options.resetOptions}),r.current=e.values,n(l=>({...l}))):a._resetDefaultValues()},[a,e.values]),Ot.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),t.current.formState=Zw(s,a),t.current}function g1(){var pn,xu,vu,wu,bu,ju,_u,Nu,ku,Su;const[e,t]=g.useState(null),[r,s]=g.useState(!0),[n,a]=g.useState([]),[l,o]=g.useState([]),[c,d]=g.useState([]),[u,h]=g.useState(""),[f,v]=g.useState(!1),[b,j]=g.useState(!1),[k,p]=g.useState(!1),[m,y]=g.useState(!1),[_,O]=g.useState(!1);g.useState(!1);const[I,C]=g.useState(!1);g.useState(!1),g.useState(!1);const[E,$]=g.useState(!1);g.useState([]),g.useState([]);const[T,H]=g.useState(null),[G,J]=g.useState(""),[F,oe]=g.useState(null),[ce,me]=g.useState("");g.useState(0),g.useState(""),g.useState(-1),g.useState("");const[L,Z]=g.useState("posts"),[Y,ne]=g.useState("grid"),[ie,Ye]=g.useState(""),[N,z]=g.useState(new Set),[re,ae]=g.useState(!1);g.useRef(null);const Ee=g.useRef(null),Be=g.useRef(null);g.useRef(null);const je=Xt(),{register:Le,handleSubmit:D,setValue:Q,watch:ve,formState:{errors:ye}}=p1({defaultValues:{name:"",lastName:"",bio:"",location:"",website:"",phone:"",birthday:"",work:"",education:"",relationshipStatus:"",hobbies:[],languages:[]}});g.useEffect(()=>{We()},[]),g.useEffect(()=>{e&&(Q("name",e.name||""),Q("lastName",e.lastName||""),Q("bio",e.bio||""),Q("location",e.location||""),Q("website",e.website||""),Q("phone",e.phone||""),Q("birthday",e.birthday||""),Q("work",e.work||""),Q("education",e.education||""),Q("relationshipStatus",e.relationshipStatus||""),Q("hobbies",e.hobbies||[]),Q("languages",e.languages||[]))},[e,Q]);const We=async()=>{try{s(!0),h("");const P=await ls.getCurrentUserProfile();if(!P){je("/login");return}const K={...P,bio:"Люблю програмування, подорожі та хорошу каву. Завжди відкритий до нових знайомств! ☕️",location:"Київ, Україна",website:"https://example.com",phone:"+380501234567",birthday:"1995-05-15",work:"Senior Frontend Developer",education:"КПІ ім. Ігоря Сікорського",hobbies:["Програмування","Фотографія","Подорожі","Музика"],languages:["Українська","English","Русский"],relationshipStatus:"Single",isVerified:Math.random()>.5,isOnline:!0,lastSeen:new Date().toISOString(),friendsCount:Math.floor(Math.random()*500)+50,followersCount:Math.floor(Math.random()*1e3)+100,followingCount:Math.floor(Math.random()*300)+50,postsCount:Math.floor(Math.random()*100)+10,photosCount:Math.floor(Math.random()*200)+20,videosCount:Math.floor(Math.random()*50)+5,achievements:x(),privacy:{showEmail:!0,showPhone:!1,showBirthday:!0,showLocation:!0,allowMessages:!0,allowFriendRequests:!0,profileVisibility:"public"}};t(K),await Promise.all([at(),et(),Ke()])}catch(P){console.error("Error loading profile:",P),h("Помилка при завантаженні профілю")}finally{s(!1)}},at=async()=>{const P=[{id:"1",type:"photo",url:"https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=800&q=80",created_at:"2024-01-15T10:00:00Z",description:"Захід сонця в горах",tags:["природа","гори","захід"],likes:24,comments:5},{id:"2",type:"photo",url:"https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=800&q=80",created_at:"2024-01-14T15:30:00Z",description:"Відпочинок на природі",tags:["відпочинок","природа"],likes:18,comments:3},{id:"3",type:"video",url:"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",created_at:"2024-01-13T20:00:00Z",description:"Мій перший відеоблог",tags:["влог","подорожі"],likes:42,comments:8}];for(let K=4;K<=20;K++)P.push({id:K.toString(),type:Math.random()>.8?"video":"photo",url:`https://images.unsplash.com/photo-${15e11+K*1e5}?auto=format&fit=crop&w=800&q=80`,created_at:new Date(Date.now()-K*24*60*60*1e3).toISOString(),description:`Медіа ${K}`,tags:["тег1","тег2"],likes:Math.floor(Math.random()*50),comments:Math.floor(Math.random()*10)});a(P)},et=async()=>{o([{id:"1",author:e||{id:"",name:"User",lastName:"",avatar:""},content:"Прекрасний день для нових пригод! 🌟 Щойно повернувся з подорожі по Карпатах. Неймовірні краєвиди і свіже повітря зарядили енергією на тиждень вперед!",images:["https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=800&q=80","https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=800&q=80"],created_at:"2024-01-20T10:00:00Z",likes:45,comments:12,isLiked:!1},{id:"2",author:e||{id:"",name:"User",lastName:"",avatar:""},content:"Сьогодні вивчаю нові технології React 18! Concurrent Features виглядають дуже перспективно 💻",images:[],created_at:"2024-01-18T15:30:00Z",likes:28,comments:8,isLiked:!0},{id:"3",author:e||{id:"",name:"User",lastName:"",avatar:""},content:"Ранкова пробіжка в парку! Хто ще любить активний спосіб життя? 🏃‍♂️",images:["https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?auto=format&fit=crop&w=800&q=80"],created_at:"2024-01-16T07:00:00Z",likes:33,comments:6,isLiked:!1}])},Ke=async()=>{const P=[{id:"1",name:"Олександр",lastName:"Петренко",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?auto=format&fit=crop&w=200&q=80",status:"online",mutualFriends:15},{id:"2",name:"Марія",lastName:"Іваненко",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b31c?auto=format&fit=crop&w=200&q=80",status:"away",mutualFriends:8},{id:"3",name:"Андрій",lastName:"Коваленко",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?auto=format&fit=crop&w=200&q=80",status:"offline",mutualFriends:22}];for(let K=4;K<=20;K++)P.push({id:K.toString(),name:`Користувач${K}`,lastName:"Тестовий",avatar:`https://images.unsplash.com/photo-${15e11+K*1e5}?auto=format&fit=crop&w=200&q=80`,status:["online","offline","away"][Math.floor(Math.random()*3)],mutualFriends:Math.floor(Math.random()*30)});d(P)},x=()=>[{id:"1",title:"Перший пост",description:"Опублікував свій перший пост",icon:"🎉",earned_at:"2024-01-01T10:00:00Z",rarity:"common"},{id:"2",title:"Популярний автор",description:"100+ лайків на пості",icon:"⭐",earned_at:"2024-01-10T10:00:00Z",rarity:"rare"},{id:"3",title:"Соціальна бабка",description:"50+ друзів",icon:"👥",earned_at:"2024-01-15T10:00:00Z",rarity:"epic"},{id:"4",title:"Фотограф",description:"Завантажив 100+ фото",icon:"📸",earned_at:"2024-01-20T10:00:00Z",rarity:"legendary"}],S=()=>{j(!0)},R=()=>{var P;(P=Ee.current)==null||P.click()},q=P=>{var _e;const K=(_e=P.target.files)==null?void 0:_e[0];if(K){H(K);const Tt=new FileReader;Tt.onload=_r=>{var gn;J((gn=_r.target)==null?void 0:gn.result)},Tt.readAsDataURL(K)}},B=async()=>{if(!(!T||!e)){$(!0);try{const P=URL.createObjectURL(T);t(K=>K?{...K,avatar:P}:null),j(!1),H(null),J(""),alert("Аватар успішно оновлено!")}catch(P){console.error("Error uploading avatar:",P),alert("Помилка при завантаженні аватара")}finally{$(!1)}}},M=()=>{var P;(P=Be.current)==null||P.click()},ee=P=>{var _e;const K=(_e=P.target.files)==null?void 0:_e[0];if(K){oe(K);const Tt=new FileReader;Tt.onload=_r=>{var gn;me((gn=_r.target)==null?void 0:gn.result),p(!0)},Tt.readAsDataURL(K)}},he=async()=>{if(!(!F||!e)){$(!0);try{const P=URL.createObjectURL(F);t(K=>K?{...K,coverImage:P}:null),p(!1),oe(null),me(""),alert("Обкладинка успішно оновлена!")}catch(P){console.error("Error uploading cover:",P),alert("Помилка при завантаженні обкладинки")}finally{$(!1)}}},ge=async P=>{if(e){$(!0);try{const K={...e,...P};t(K),y(!1),alert("Профіль успішно оновлено!")}catch(K){console.error("Error updating profile:",K),alert("Помилка при оновленні профілю")}finally{$(!1)}}},w=P=>{o(K=>K.map(_e=>_e.id===P?{..._e,isLiked:!_e.isLiked,likes:_e.isLiked?_e.likes-1:_e.likes+1}:_e))},A=P=>{const K=new Set(N);K.has(P)?K.delete(P):K.add(P),z(K),ae(K.size>0)},se=()=>{z(new Set),ae(!1)},pe=async()=>{N.size!==0&&confirm(`Видалити ${N.size} обраних медіафайлів?`)&&(a(P=>P.filter(K=>!N.has(K.id))),se(),alert("Медіафайли успішно видалено!"))},tt=()=>{let P=n;return L==="photos"?P=P.filter(K=>K.type==="photo"):L==="videos"&&(P=P.filter(K=>K.type==="video")),ie&&(P=P.filter(K=>{var _e,Tt;return((_e=K.description)==null?void 0:_e.toLowerCase().includes(ie.toLowerCase()))||((Tt=K.tags)==null?void 0:Tt.some(_r=>_r.toLowerCase().includes(ie.toLowerCase())))})),P},Pt=P=>new Date(P).toLocaleDateString("uk-UA",{year:"numeric",month:"long",day:"numeric"}),ar=P=>{const K=Date.now()-new Date(P).getTime(),_e=Math.floor(K/(1e3*60*60)),Tt=Math.floor(K/(1e3*60*60*24));return _e<24?`${_e} год тому`:`${Tt} дн тому`},Mt=P=>{switch(P){case"online":return"bg-green-500";case"away":return"bg-yellow-500";case"offline":return"bg-gray-400";default:return"bg-gray-400"}},xl=P=>{switch(P){case"common":return"bg-gray-100 text-gray-700";case"rare":return"bg-blue-100 text-blue-700";case"epic":return"bg-purple-100 text-purple-700";case"legendary":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return r?i.jsxs("div",{className:"flex min-h-screen",children:[i.jsx(Xe,{}),i.jsx("div",{className:"flex-1 ml-64 p-8",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),i.jsx("p",{className:"mt-4 text-gray-600",children:"Завантаження профілю..."})]})})]}):u?i.jsxs("div",{className:"flex min-h-screen",children:[i.jsx(Xe,{}),i.jsx("div",{className:"flex-1 ml-64 p-8",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx(kw,{size:48,className:"text-red-500 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Помилка завантаження"}),i.jsx("p",{className:"text-gray-600 mb-4",children:u}),i.jsx("button",{onClick:We,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Спробувати знову"})]})})]}):e?i.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[i.jsx(Xe,{}),i.jsxs("div",{className:"flex-1 ml-64",children:[i.jsxs("div",{className:"relative h-80 bg-gradient-to-r from-purple-500 to-blue-600 overflow-hidden",children:[e.coverImage&&i.jsx("img",{src:e.coverImage,alt:"Cover",className:"w-full h-full object-cover"}),i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20"}),i.jsxs("button",{onClick:M,className:"absolute bottom-4 right-4 flex items-center px-3 py-2 bg-black bg-opacity-50 text-white rounded-lg hover:bg-opacity-70 transition-all",children:[i.jsx(nh,{size:16,className:"mr-2"}),"Змінити обкладинку"]}),i.jsx("input",{ref:Be,type:"file",accept:"image/*",onChange:ee,className:"hidden"})]}),i.jsx("div",{className:"relative bg-white border-b border-gray-200",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-8 py-6",children:[i.jsxs("div",{className:"flex items-end space-x-6 -mt-20",children:[i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"w-32 h-32 bg-white rounded-full border-4 border-white shadow-lg overflow-hidden cursor-pointer group",onClick:S,children:[e.avatar?i.jsx("img",{src:e.avatar,alt:`${e.name} ${e.lastName}`,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}):i.jsxs("div",{className:"w-full h-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-white text-4xl font-bold",children:[(pn=e.name[0])==null?void 0:pn.toUpperCase(),(xu=e.lastName[0])==null?void 0:xu.toUpperCase()]}),i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300 rounded-full",children:i.jsx(nh,{size:24,className:"text-white"})})]}),e.isOnline&&i.jsx("div",{className:"absolute bottom-2 right-2 w-6 h-6 bg-green-500 border-4 border-white rounded-full"})]}),i.jsxs("div",{className:"flex-1 pb-4",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:[e.name," ",e.lastName]}),e.isVerified&&i.jsx(nc,{size:24,className:"text-blue-500"}),e.isOnline?i.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-sm rounded-full",children:"Онлайн"}):i.jsxs("span",{className:"text-sm text-gray-500",children:["Востаннє: ",ar(e.lastSeen||"")]})]}),e.bio&&i.jsx("p",{className:"text-gray-600 mb-3 max-w-2xl",children:e.bio}),i.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500",children:[e.location&&i.jsxs("div",{className:"flex items-center",children:[i.jsx(Hr,{size:16,className:"mr-1"}),e.location]}),e.work&&i.jsxs("div",{className:"flex items-center",children:[i.jsx(sh,{size:16,className:"mr-1"}),e.work]}),e.website&&i.jsxs("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-blue-600 hover:text-blue-800",children:[i.jsx(yi,{size:16,className:"mr-1"}),"Веб-сайт"]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(gi,{size:16,className:"mr-1"}),"Приєднався ",Pt(e.createdAt||"")]})]})]}),i.jsxs("div",{className:"flex space-x-3 pb-4",children:[i.jsxs("button",{onClick:()=>y(!0),className:"flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[i.jsx(Uw,{size:16,className:"mr-2"}),"Редагувати профіль"]}),i.jsxs("button",{onClick:()=>C(!0),className:"flex items-center px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx(gl,{size:16,className:"mr-2"}),"Налаштування"]}),i.jsx("button",{className:"flex items-center px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:i.jsx(dr,{size:16})})]})]}),i.jsxs("div",{className:"flex items-center space-x-8 mt-6 pt-6 border-t border-gray-200",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-gray-900",children:e.postsCount}),i.jsx("div",{className:"text-sm text-gray-500",children:"Постів"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-gray-900",children:e.friendsCount}),i.jsx("div",{className:"text-sm text-gray-500",children:"Друзів"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-gray-900",children:e.followersCount}),i.jsx("div",{className:"text-sm text-gray-500",children:"Підписників"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-gray-900",children:e.photosCount}),i.jsx("div",{className:"text-sm text-gray-500",children:"Фото"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-gray-900",children:e.videosCount}),i.jsx("div",{className:"text-sm text-gray-500",children:"Відео"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-gray-900",children:((vu=e.achievements)==null?void 0:vu.length)||0}),i.jsx("div",{className:"text-sm text-gray-500",children:"Досягнень"})]})]})]})}),i.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-40",children:i.jsx("div",{className:"max-w-7xl mx-auto px-8",children:i.jsx("div",{className:"flex space-x-8",children:[{id:"posts",label:"Пости",icon:Ln,count:e.postsCount},{id:"photos",label:"Фото",icon:la,count:e.photosCount},{id:"videos",label:"Відео",icon:ds,count:e.videosCount},{id:"friends",label:"Друзі",icon:Qt,count:e.friendsCount},{id:"about",label:"Про себе",icon:Aw},{id:"achievements",label:"Досягнення",icon:gp,count:(wu=e.achievements)==null?void 0:wu.length}].map(P=>i.jsxs("button",{onClick:()=>Z(P.id),className:`flex items-center space-x-2 py-4 px-2 border-b-2 transition-colors ${L===P.id?"border-blue-600 text-blue-600":"border-transparent text-gray-700 hover:text-gray-900 hover:border-gray-300"}`,children:[i.jsx(P.icon,{size:20}),i.jsx("span",{className:"font-medium",children:P.label}),P.count!==void 0&&i.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs",children:P.count})]},P.id))})})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-8 py-8",children:[re&&(L==="photos"||L==="videos")&&i.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-blue-800",children:["Обрано ",N.size," файлів"]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:pe,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:"Видалити"}),i.jsx("button",{onClick:se,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm",children:"Скасувати"})]})]})}),(L==="photos"||L==="videos"||L==="friends")&&i.jsxs("div",{className:"mb-6 flex items-center space-x-4",children:[i.jsxs("div",{className:"relative flex-1 max-w-md",children:[i.jsx(mn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),i.jsx("input",{type:"text",placeholder:`Пошук ${L==="friends"?"друзів":"медіа"}...`,value:ie,onChange:P=>Ye(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),ie&&i.jsx("button",{onClick:()=>Ye(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i.jsx(Nt,{size:16})})]}),(L==="photos"||L==="videos")&&i.jsxs("div",{className:"flex border border-gray-300 rounded-lg overflow-hidden",children:[i.jsx("button",{onClick:()=>ne("grid"),className:`p-2 ${Y==="grid"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:i.jsx(ou,{size:18})}),i.jsx("button",{onClick:()=>ne("list"),className:`p-2 ${Y==="list"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:i.jsx(cu,{size:18})})]})]}),L==="posts"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-blue-600 rounded-full flex items-center justify-center text-white font-semibold",children:[(bu=e.name[0])==null?void 0:bu.toUpperCase(),(ju=e.lastName[0])==null?void 0:ju.toUpperCase()]}),i.jsxs("button",{onClick:()=>O(!0),className:"flex-1 text-left px-4 py-3 bg-gray-50 rounded-full text-gray-500 hover:bg-gray-100 transition-colors",children:["Що у вас нового, ",e.name,"?"]})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("button",{className:"flex items-center space-x-2 text-gray-600 hover:text-blue-600 transition-colors",children:[i.jsx(la,{size:20}),i.jsx("span",{children:"Фото/Відео"})]}),i.jsxs("button",{className:"flex items-center space-x-2 text-gray-600 hover:text-green-600 transition-colors",children:[i.jsx(Hr,{size:20}),i.jsx("span",{children:"Локація"})]}),i.jsxs("button",{className:"flex items-center space-x-2 text-gray-600 hover:text-yellow-600 transition-colors",children:[i.jsx(Qt,{size:20}),i.jsx("span",{children:"Відмітити"})]})]})]}),l.map(P=>{var K,_e;return i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[i.jsxs("div",{className:"p-6 pb-4",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-blue-600 rounded-full flex items-center justify-center text-white font-semibold",children:[(K=e.name[0])==null?void 0:K.toUpperCase(),(_e=e.lastName[0])==null?void 0:_e.toUpperCase()]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("h4",{className:"font-semibold text-gray-900",children:[e.name," ",e.lastName]}),i.jsx("p",{className:"text-sm text-gray-500",children:ar(P.created_at)})]}),i.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:i.jsx(dr,{size:20})})]}),i.jsx("p",{className:"mt-4 text-gray-800",children:P.content})]}),P.images.length>0&&i.jsx("div",{className:`grid gap-1 ${P.images.length===1?"grid-cols-1":"grid-cols-2"}`,children:P.images.map((Tt,_r)=>i.jsx("img",{src:Tt,alt:`Post image ${_r+1}`,className:"w-full h-80 object-cover hover:opacity-95 transition-opacity cursor-pointer"},_r))}),i.jsxs("div",{className:"p-6 pt-4",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[i.jsxs("span",{children:[P.likes," вподобань"]}),i.jsxs("span",{children:[P.comments," коментарів"]})]}),i.jsxs("div",{className:"flex items-center space-x-1 pt-4 border-t border-gray-200",children:[i.jsxs("button",{onClick:()=>w(P.id),className:`flex-1 flex items-center justify-center space-x-2 py-2 px-3 rounded-lg transition-colors ${P.isLiked?"text-red-600 bg-red-50 hover:bg-red-100":"text-gray-600 hover:bg-gray-50"}`,children:[i.jsx(An,{size:20,className:P.isLiked?"fill-current":""}),i.jsx("span",{children:"Подобається"})]}),i.jsxs("button",{className:"flex-1 flex items-center justify-center space-x-2 py-2 px-3 rounded-lg text-gray-600 hover:bg-gray-50 transition-colors",children:[i.jsx(Ln,{size:20}),i.jsx("span",{children:"Коментувати"})]}),i.jsxs("button",{className:"flex-1 flex items-center justify-center space-x-2 py-2 px-3 rounded-lg text-gray-600 hover:bg-gray-50 transition-colors",children:[i.jsx(xp,{size:20}),i.jsx("span",{children:"Поділитися"})]})]})]})]},P.id)})]}),(L==="photos"||L==="videos")&&i.jsxs("div",{children:[i.jsx("div",{className:"mb-6",children:i.jsxs("button",{onClick:()=>v(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(nn,{size:20,className:"mr-2"}),"Завантажити ",L==="photos"?"фото":"відео"]})}),Y==="grid"?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:tt().map(P=>i.jsxs("div",{className:"relative group bg-white rounded-lg overflow-hidden shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200",children:[i.jsx("input",{type:"checkbox",checked:N.has(P.id),onChange:()=>A(P.id),className:"absolute top-3 left-3 w-4 h-4 rounded border-gray-300 text-blue-600 z-10"}),i.jsxs("div",{className:"aspect-square relative overflow-hidden",children:[P.type==="video"?i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:P.url,alt:P.description,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"w-12 h-12 bg-black bg-opacity-50 rounded-full flex items-center justify-center",children:i.jsx(ds,{size:20,className:"text-white ml-1"})})})]}):i.jsx("img",{src:P.url,alt:P.description,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),i.jsx("div",{className:"absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx("button",{className:"p-2 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-70",children:i.jsx(dr,{size:16})})})]}),i.jsxs("div",{className:"p-3",children:[i.jsx("p",{className:"text-sm text-gray-800 mb-2 line-clamp-2",children:P.description}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[i.jsx("span",{children:ar(P.created_at)}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("span",{className:"flex items-center",children:[i.jsx(An,{size:12,className:"mr-1"}),P.likes]}),i.jsxs("span",{className:"flex items-center",children:[i.jsx(Ln,{size:12,className:"mr-1"}),P.comments]})]})]})]})]},P.id))}):i.jsx("div",{className:"space-y-4",children:tt().map(P=>i.jsxs("div",{className:"flex items-center space-x-4 bg-white p-4 rounded-lg border border-gray-200 hover:shadow-md transition-all duration-200",children:[i.jsx("input",{type:"checkbox",checked:N.has(P.id),onChange:()=>A(P.id),className:"w-4 h-4 rounded border-gray-300 text-blue-600"}),i.jsxs("div",{className:"w-20 h-20 relative overflow-hidden rounded-lg",children:[i.jsx("img",{src:P.url,alt:P.description,className:"w-full h-full object-cover"}),P.type==="video"&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx(ds,{size:16,className:"text-white"})})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:P.description}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[i.jsx("span",{children:ar(P.created_at)}),i.jsxs("span",{className:"flex items-center",children:[i.jsx(An,{size:14,className:"mr-1"}),P.likes," вподобань"]}),i.jsxs("span",{className:"flex items-center",children:[i.jsx(Ln,{size:14,className:"mr-1"}),P.comments," коментарів"]})]}),P.tags&&i.jsx("div",{className:"flex space-x-1 mt-2",children:P.tags.map(K=>i.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:["#",K]},K))})]}),i.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:i.jsx(dr,{size:20})})]},P.id))})]}),L==="friends"&&i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.filter(P=>ie===""||`${P.name} ${P.lastName}`.toLowerCase().includes(ie.toLowerCase())).map(P=>{var K,_e;return i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:[i.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden",children:P.avatar?i.jsx("img",{src:P.avatar,alt:`${P.name} ${P.lastName}`,className:"w-full h-full object-cover"}):i.jsxs("div",{className:"w-full h-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-white text-lg font-bold",children:[(K=P.name[0])==null?void 0:K.toUpperCase(),(_e=P.lastName[0])==null?void 0:_e.toUpperCase()]})}),i.jsx("div",{className:`absolute bottom-0 right-0 w-4 h-4 rounded-full border-2 border-white ${Mt(P.status||"offline")}`})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("h4",{className:"font-semibold text-gray-900",children:[P.name," ",P.lastName]}),i.jsxs("p",{className:"text-sm text-gray-500",children:[P.mutualFriends," спільних друзів"]})]}),i.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:i.jsx(dr,{size:20})})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Написати"}),i.jsx("button",{className:"flex-1 px-3 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm",children:"Переглянути"})]})]},P.id)})}),L==="about"&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Основна інформація"}),i.jsxs("div",{className:"space-y-4",children:[e.location&&i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Hr,{size:20,className:"text-gray-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900",children:"Живе в"}),i.jsx("p",{className:"text-gray-600",children:e.location})]})]}),e.work&&i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(sh,{size:20,className:"text-gray-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900",children:"Працює"}),i.jsx("p",{className:"text-gray-600",children:e.work})]})]}),e.education&&i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Rw,{size:20,className:"text-gray-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900",children:"Навчався"}),i.jsx("p",{className:"text-gray-600",children:e.education})]})]}),e.relationshipStatus&&i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(An,{size:20,className:"text-gray-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900",children:"Стосунки"}),i.jsx("p",{className:"text-gray-600",children:e.relationshipStatus})]})]}),e.birthday&&i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(gi,{size:20,className:"text-gray-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900",children:"День народження"}),i.jsx("p",{className:"text-gray-600",children:Pt(e.birthday)})]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Контактна інформація"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(pl,{size:20,className:"text-gray-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900",children:"Email"}),i.jsx("p",{className:"text-gray-600",children:e.email})]})]}),e.phone&&((_u=e.privacy)==null?void 0:_u.showPhone)&&i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Dw,{size:20,className:"text-gray-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900",children:"Телефон"}),i.jsx("p",{className:"text-gray-600",children:e.phone})]})]}),e.website&&i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(yi,{size:20,className:"text-gray-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900",children:"Веб-сайт"}),i.jsx("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",children:e.website})]})]})]})]}),e.hobbies&&e.hobbies.length>0&&i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Інтереси та хобі"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:e.hobbies.map((P,K)=>i.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:P},K))})]}),e.languages&&e.languages.length>0&&i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Мови"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:e.languages.map((P,K)=>i.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm",children:P},K))})]})]}),L==="achievements"&&i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(Nu=e.achievements)==null?void 0:Nu.map(P=>i.jsxs("div",{className:`rounded-lg border-2 p-6 text-center ${xl(P.rarity)}`,children:[i.jsx("div",{className:"text-4xl mb-3",children:P.icon}),i.jsx("h4",{className:"font-semibold text-lg mb-2",children:P.title}),i.jsx("p",{className:"text-sm mb-3",children:P.description}),i.jsxs("p",{className:"text-xs opacity-75",children:["Отримано ",Pt(P.earned_at)]}),i.jsx("div",{className:"mt-3",children:i.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${P.rarity==="legendary"?"bg-yellow-200 text-yellow-800":P.rarity==="epic"?"bg-purple-200 text-purple-800":P.rarity==="rare"?"bg-blue-200 text-blue-800":"bg-gray-200 text-gray-800"}`,children:P.rarity==="legendary"?"Легендарне":P.rarity==="epic"?"Епічне":P.rarity==="rare"?"Рідкісне":"Звичайне"})})]},P.id))}),(L==="photos"&&tt().filter(P=>P.type==="photo").length===0||L==="videos"&&tt().filter(P=>P.type==="video").length===0||L==="friends"&&c.length===0)&&i.jsxs("div",{className:"text-center py-12",children:[i.jsxs("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:[L==="photos"&&i.jsx(la,{size:32,className:"text-gray-400"}),L==="videos"&&i.jsx(ds,{size:32,className:"text-gray-400"}),L==="friends"&&i.jsx(Qt,{size:32,className:"text-gray-400"})]}),i.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:[L==="photos"&&"Немає фото",L==="videos"&&"Немає відео",L==="friends"&&"Немає друзів"]}),i.jsx("p",{className:"text-gray-600 mb-4",children:ie?"Спробуйте змінити критерії пошуку":"Поки що тут порожньо"}),!ie&&i.jsxs("button",{onClick:()=>{(L==="photos"||L==="videos")&&v(!0)},className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(nn,{size:20,className:"mr-2"}),L==="photos"&&"Додати фото",L==="videos"&&"Додати відео",L==="friends"&&"Знайти друзів"]})]})]})]}),b&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Змінити аватар"}),i.jsx("button",{onClick:()=>{j(!1),H(null),J("")},className:"text-gray-400 hover:text-gray-600",children:i.jsx(Nt,{size:24})})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-48 h-48 mx-auto mb-6 rounded-full overflow-hidden border-4 border-gray-200",children:G?i.jsx("img",{src:G,alt:"Preview",className:"w-full h-full object-cover"}):e.avatar?i.jsx("img",{src:e.avatar,alt:"Current avatar",className:"w-full h-full object-cover"}):i.jsxs("div",{className:"w-full h-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-white text-6xl font-bold",children:[(ku=e.name[0])==null?void 0:ku.toUpperCase(),(Su=e.lastName[0])==null?void 0:Su.toUpperCase()]})}),i.jsx("input",{ref:Ee,type:"file",accept:"image/*",onChange:q,className:"hidden"}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsxs("button",{onClick:R,className:"flex-1 flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx(du,{size:20,className:"mr-2"}),"Завантажити фото"]}),T&&i.jsx("button",{onClick:B,disabled:E,className:"flex-1 flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:E?"Завантаження...":"Зберегти"})]})]})]})}),k&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Змінити обкладинку"}),i.jsx("button",{onClick:()=>{p(!1),oe(null),me("")},className:"text-gray-400 hover:text-gray-600",children:i.jsx(Nt,{size:24})})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-full h-48 mx-auto mb-6 rounded-lg overflow-hidden border border-gray-200",children:ce?i.jsx("img",{src:ce,alt:"Preview",className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full bg-gradient-to-r from-purple-500 to-blue-600"})}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsx("button",{onClick:()=>{p(!1),oe(null),me("")},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Скасувати"}),i.jsx("button",{onClick:he,disabled:E,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:E?"Завантаження...":"Зберегти"})]})]})]})}),m&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("form",{onSubmit:D(ge),className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Редагувати профіль"}),i.jsx("button",{type:"button",onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600",children:i.jsx(Nt,{size:24})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ім'я"}),i.jsx("input",{...Le("name",{required:"Ім'я обов'язкове"}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),ye.name&&i.jsx("p",{className:"text-red-500 text-sm mt-1",children:ye.name.message})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Прізвище"}),i.jsx("input",{...Le("lastName",{required:"Прізвище обов'язкове"}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),ye.lastName&&i.jsx("p",{className:"text-red-500 text-sm mt-1",children:ye.lastName.message})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Про себе"}),i.jsx("textarea",{...Le("bio"),rows:4,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Розкажіть про себе..."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Місцезнаходження"}),i.jsx("input",{...Le("location"),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Місто, країна"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Веб-сайт"}),i.jsx("input",{...Le("website"),type:"url",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Телефон"}),i.jsx("input",{...Le("phone"),type:"tel",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"+380501234567"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"День народження"}),i.jsx("input",{...Le("birthday"),type:"date",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Робота"}),i.jsx("input",{...Le("work"),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Посада, компанія"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Освіта"}),i.jsx("input",{...Le("education"),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Навчальний заклад"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Сімейний стан"}),i.jsxs("select",{...Le("relationshipStatus"),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"",children:"Не вказано"}),i.jsx("option",{value:"Single",children:"Холостий/Неодружена"}),i.jsx("option",{value:"In a relationship",children:"У стосунках"}),i.jsx("option",{value:"Engaged",children:"Заручений/Заручена"}),i.jsx("option",{value:"Married",children:"Одружений/Одружена"}),i.jsx("option",{value:"Complicated",children:"Все складно"})]})]})]}),i.jsxs("div",{className:"flex justify-end space-x-4 mt-8 pt-6 border-t",children:[i.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Скасувати"}),i.jsx("button",{type:"submit",disabled:E,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:E?"Збереження...":"Зберегти зміни"})]})]})})})]}):null}function y1(){return new URLSearchParams(dn().search)}function x1(){var I,C,E;const[e,t]=g.useState([]),[r,s]=g.useState(null),[n,a]=g.useState([]),[l,o]=g.useState(null),[c,d]=g.useState(""),[u,h]=g.useState(!0),[f,v]=g.useState(!1),b=g.useRef(null),j=y1();g.useEffect(()=>{b.current&&b.current.scrollIntoView({behavior:"smooth"})},[n]),g.useEffect(()=>{k()},[]),g.useEffect(()=>{l&&p()},[l]),g.useEffect(()=>{const $=j.get("user");$&&l&&m($)},[l]);async function k(){const $=await ls.getCurrentUserProfile();o($)}async function p(){h(!0);const{data:$,error:T}=await V.from("conversations").select(`
        *,
        participant1:users!conversations_participant1_id_fkey (id, name, lastName, avatar),
        participant2:users!conversations_participant2_id_fkey (id, name, lastName, avatar)
      `).or(`participant1_id.eq.${l.id},participant2_id.eq.${l.id}`).order("updated_at",{ascending:!1});if(T){t([]),h(!1);return}const H=($||[]).map(G=>{const J=G.participant1_id===l.id?G.participant2:G.participant1;return{id:G.id,participant:J,updated_at:G.updated_at}});t(H),h(!1)}async function m($){let T=e.find(H=>H.participant&&H.participant.id===$);if(!T){const{data:H,error:G}=await V.from("conversations").insert([{participant1_id:l.id,participant2_id:$}]).select(`
          *,
          participant1:users!conversations_participant1_id_fkey (id, name, lastName, avatar),
          participant2:users!conversations_participant2_id_fkey (id, name, lastName, avatar)
        `).single();if(G)return;const J=H.participant1_id===l.id?H.participant2:H.participant1;T={id:H.id,participant:J,updated_at:H.updated_at},t(F=>[T,...F])}s(T),y(T.id)}async function y($){const{data:T,error:H}=await V.from("messages").select("*").eq("conversation_id",$).order("created_at",{ascending:!0});if(H){a([]);return}a(T||[])}async function _($){s($),y($.id)}async function O($){if($.preventDefault(),!c.trim()||!r)return;v(!0);const{error:T}=await V.from("messages").insert([{conversation_id:r.id,sender_id:l.id,content:c.trim()}]);v(!1),d(""),T||y(r.id)}return i.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[i.jsx(Xe,{}),i.jsxs("div",{className:"flex-1 ml-64 flex",children:[i.jsxs("div",{className:"w-80 border-r border-gray-200 bg-white flex flex-col",children:[i.jsx("div",{className:"p-4 border-b border-gray-100",children:i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Діалоги"})}),i.jsx("div",{className:"flex-1 overflow-y-auto",children:u?i.jsx("div",{className:"p-4 text-gray-500",children:"Завантаження..."}):e.length===0?i.jsx("div",{className:"p-4 text-gray-500",children:"Немає діалогів"}):e.map($=>{var T,H,G;return i.jsxs("div",{className:`flex items-center px-4 py-3 cursor-pointer hover:bg-gray-50 ${r&&r.id===$.id?"bg-gray-100":""}`,onClick:()=>_($),children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 overflow-hidden flex items-center justify-center",children:(T=$.participant)!=null&&T.avatar?i.jsx("img",{src:$.participant.avatar,alt:$.participant.name,className:"w-full h-full object-cover"}):i.jsx(Ma,{className:"w-8 h-8 text-gray-400"})}),i.jsxs("div",{className:"ml-4 flex-1",children:[i.jsxs("div",{className:"font-semibold text-gray-900",children:[(H=$.participant)==null?void 0:H.name," ",(G=$.participant)==null?void 0:G.lastName]}),i.jsxs("div",{className:"text-xs text-gray-500",children:["Останнє оновлення: ",new Date($.updated_at).toLocaleString("uk-UA")]})]})]},$.id)})})]}),i.jsx("div",{className:"flex-1 flex flex-col",children:r?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center border-b border-gray-200 px-6 py-4 bg-white",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 overflow-hidden flex items-center justify-center",children:(I=r.participant)!=null&&I.avatar?i.jsx("img",{src:r.participant.avatar,alt:r.participant.name,className:"w-full h-full object-cover"}):i.jsx(Ma,{className:"w-7 h-7 text-gray-400"})}),i.jsx("div",{className:"ml-4",children:i.jsxs("div",{className:"font-semibold text-gray-900",children:[(C=r.participant)==null?void 0:C.name," ",(E=r.participant)==null?void 0:E.lastName]})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4 bg-gray-50",children:n.length===0?i.jsx("div",{className:"text-gray-500 text-center mt-8",children:"Немає повідомлень"}):i.jsxs("div",{className:"space-y-4",children:[n.map($=>i.jsx("div",{className:`flex ${$.sender_id===l.id?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`max-w-xs px-4 py-2 rounded-lg shadow-sm ${$.sender_id===l.id?"bg-blue-600 text-white":"bg-white text-gray-900 border"}`,children:[$.content,i.jsx("div",{className:"text-xs text-gray-300 mt-1 text-right",children:new Date($.created_at).toLocaleTimeString("uk-UA",{hour:"2-digit",minute:"2-digit"})})]})},$.id)),i.jsx("div",{ref:b})]})}),i.jsxs("form",{onSubmit:O,className:"flex items-center px-6 py-4 border-t border-gray-200 bg-white",children:[i.jsx("input",{type:"text",value:c,onChange:$=>d($.target.value),placeholder:"Введіть повідомлення...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:f}),i.jsx("button",{type:"submit",disabled:f||!c.trim(),className:"ml-4 px-4 py-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 disabled:opacity-50",children:i.jsx(yp,{className:"w-5 h-5"})})]})]}):i.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-400 text-xl",children:"Виберіть діалог для перегляду повідомлень"})})]})]})}function v1(){const[e,t]=g.useState([]),[r,s]=g.useState([]),[n,a]=g.useState(""),[l,o]=g.useState(!0);g.useEffect(()=>{c()},[]);const c=async()=>{try{const{data:{user:h}}=await V.auth.getUser();if(!h)return;const{data:f,error:v}=await V.from("friends").select(`
          friend_id,
          friend:users!friend_id (
            id,
            name,
            lastName,
            avatar
          )
        `).eq("user_id",h.id);if(v)throw v;t((f==null?void 0:f.map(b=>b.friend))||[])}catch(h){console.error("Error fetching friends:",h)}finally{o(!1)}},d=async h=>{if(a(h),h.length<2){s([]);return}try{const{data:f,error:v}=await V.from("users").select("id, name, lastName, avatar").or(`name.ilike.%${h}%, lastName.ilike.%${h}%`).limit(10);if(v)throw v;s(f||[])}catch(f){console.error("Error searching users:",f)}},u=async h=>{try{const{data:{user:f}}=await V.auth.getUser();if(!f)return;const{error:v}=await V.from("friends").insert([{user_id:f.id,friend_id:h}]);if(v)throw v;await c()}catch(f){console.error("Error adding friend:",f)}};return i.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[i.jsx(Xe,{}),i.jsx("div",{className:"flex-1 ml-64 p-8",children:i.jsxs("div",{className:"max-w-3xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Пошук друзів"}),i.jsxs("div",{className:"relative",children:[i.jsx(mn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),i.jsx("input",{type:"text",placeholder:"Пошук за ім'ям або прізвищем",value:n,onChange:h=>d(h.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.length>0&&i.jsx("div",{className:"mt-4 bg-white rounded-lg shadow-sm",children:r.map(h=>i.jsxs("div",{className:"flex items-center justify-between p-4 border-b last:border-b-0",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:h.avatar?i.jsx("img",{src:h.avatar,alt:h.name,className:"w-full h-full rounded-full object-cover"}):i.jsx("span",{className:"text-lg text-gray-600",children:h.name[0]})}),i.jsx("div",{className:"ml-3",children:i.jsxs("p",{className:"font-medium text-gray-900",children:[h.name," ",h.lastName]})})]}),i.jsxs("button",{onClick:()=>u(h.id),className:"flex items-center px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(an,{size:18,className:"mr-1"}),"Додати"]})]},h.id))})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Мої друзі"}),l?i.jsx("div",{className:"text-center py-8",children:"Завантаження..."}):e.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map(h=>i.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm flex items-center",children:[i.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:h.avatar?i.jsx("img",{src:h.avatar,alt:h.name,className:"w-full h-full rounded-full object-cover"}):i.jsx("span",{className:"text-xl text-gray-600",children:h.name[0]})}),i.jsxs("div",{className:"ml-4",children:[i.jsxs("p",{className:"font-medium text-gray-900",children:[h.name," ",h.lastName]}),i.jsxs("button",{className:"flex items-center text-sm text-blue-600 hover:text-blue-700 mt-1",children:[i.jsx(oa,{size:16,className:"mr-1"}),"Друзі"]})]})]},h.id))}):i.jsx("div",{className:"text-center py-8 text-gray-600",children:"У вас поки немає друзів"})]})]})})]})}function w1(){const[e,t]=g.useState("profile"),[r,s]=g.useState(!0),n=Xt(),[a,l]=g.useState({name:"",lastName:"",email:"",bio:"",city:"",birthDate:"",notifications:{email:!0,messages:!0,friendRequests:!0},privacy:{profileVisibility:"public",showBirthDate:!0,showEmail:!1},familyStatus:"",status:"",phone:"",website:""});g.useEffect(()=>{o()},[]);const o=async()=>{try{const{data:{user:u},error:h}=await V.auth.getUser();if(h||!u){n("/login");return}const{data:f,error:v}=await V.from("users").select("*").eq("auth_user_id",u.id).single();if(v){console.error("Error fetching user settings:",v);return}l({...a,...f,notifications:f.notifications||a.notifications,privacy:f.privacy||a.privacy})}catch(u){console.error("Error loading user settings:",u)}finally{s(!1)}},c=async u=>{u.preventDefault();try{const{data:{user:h},error:f}=await V.auth.getUser();if(f||!h){n("/login");return}const{error:v}=await V.from("users").update({name:a.name,lastName:a.lastName,bio:a.bio,city:a.city,birthDate:a.birthDate,notifications:a.notifications,privacy:a.privacy,familyStatus:a.familyStatus,status:a.status,phone:a.phone,website:a.website}).eq("auth_user_id",h.id);if(v)throw v;alert("Налаштування збережено успішно")}catch(h){console.error("Error saving settings:",h),alert("Помилка при збереженні налаштувань")}},d=[{id:"profile",label:"Профіль",icon:ac},{id:"privacy",label:"Приватність",icon:br},{id:"notifications",label:"Сповіщення",icon:Ew}];return r?i.jsxs("div",{className:"flex min-h-screen",children:[i.jsx(Xe,{}),i.jsx("div",{className:"flex-1 ml-64 p-8",children:i.jsx("div",{className:"text-center",children:"Завантаження..."})})]}):i.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[i.jsx(Xe,{}),i.jsx("div",{className:"flex-1 ml-64 p-8",children:i.jsxs("div",{className:"max-w-3xl mx-auto",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Налаштування"}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[i.jsx("div",{className:"flex border-b border-gray-200",children:d.map(({id:u,label:h,icon:f})=>i.jsxs("button",{onClick:()=>t(u),className:`flex items-center px-6 py-3 text-sm font-medium ${e===u?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[i.jsx(f,{size:18,className:"mr-2"}),h]},u))}),i.jsxs("div",{className:"p-6",children:[e==="profile"&&i.jsxs("form",{onSubmit:c,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ім'я"}),i.jsx("input",{type:"text",value:a.name,onChange:u=>l({...a,name:u.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Прізвище"}),i.jsx("input",{type:"text",value:a.lastName,onChange:u=>l({...a,lastName:u.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Місто"}),i.jsx("input",{type:"text",value:a.city||"",onChange:u=>l({...a,city:u.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Сімейний стан"}),i.jsx("input",{type:"text",value:a.familyStatus||"",onChange:u=>l({...a,familyStatus:u.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Статус"}),i.jsx("input",{type:"text",value:a.status||"",onChange:u=>l({...a,status:u.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Телефон"}),i.jsx("input",{type:"text",value:a.phone||"",onChange:u=>l({...a,phone:u.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Веб-сайт"}),i.jsx("input",{type:"text",value:a.website||"",onChange:u=>l({...a,website:u.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Дата народження"}),i.jsx("input",{type:"date",value:a.birthDate||"",onChange:u=>l({...a,birthDate:u.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Про мене"}),i.jsx("textarea",{value:a.bio,onChange:u=>l({...a,bio:u.target.value}),rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Зберегти зміни"})})]}),e==="privacy"&&i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Налаштування приватності"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Видимість профілю"}),i.jsxs("select",{value:a.privacy.profileVisibility,onChange:u=>l({...a,privacy:{...a.privacy,profileVisibility:u.target.value}}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[i.jsx("option",{value:"public",children:"Публічний"}),i.jsx("option",{value:"friends",children:"Тільки друзі"}),i.jsx("option",{value:"private",children:"Приватний"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-700",children:"Показувати дату народження"}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:a.privacy.showBirthDate,onChange:u=>l({...a,privacy:{...a.privacy,showBirthDate:u.target.checked}}),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-700",children:"Показувати email"}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:a.privacy.showEmail,onChange:u=>l({...a,privacy:{...a.privacy,showEmail:u.target.checked}}),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]})}),e==="notifications"&&i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Налаштування сповіщень"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-700",children:"Email сповіщення"}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:a.notifications.email,onChange:u=>l({...a,notifications:{...a.notifications,email:u.target.checked}}),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-700",children:"Сповіщення про повідомлення"}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:a.notifications.messages,onChange:u=>l({...a,notifications:{...a.notifications,messages:u.target.checked}}),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-700",children:"Сповіщення про запити в друзі"}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:a.notifications.friendRequests,onChange:u=>l({...a,notifications:{...a.notifications,friendRequests:u.target.checked}}),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]})})]})]})]})})]})}const Ki=["Технології","Мистецтво","Спорт","Музика","Освіта","Бізнес","Подорожі","Їжа","Фотографія","Ігри","Книги","Фільми","Наука","Природа","Мода","Здоров'я","Інше"];function b1(){const[e,t]=g.useState([]),[r,s]=g.useState([]),[n,a]=g.useState([]),[l,o]=g.useState([]),[c,d]=g.useState([]),[u,h]=g.useState([]),[f,v]=g.useState([]),[b,j]=g.useState(""),[k,p]=g.useState("explore"),[m,y]=g.useState(!0),[_,O]=g.useState(null),[I,C]=g.useState(!1),[E,$]=g.useState(!1),[T,H]=g.useState(!1),[G,J]=g.useState("grid"),[F,oe]=g.useState({category:"",memberCount:"all",privacy:"all",activity:"all",sortBy:"activity",sortOrder:"desc",hasAvatar:!1,isVerified:!1}),[ce,me]=g.useState(new Set),[L,Z]=g.useState(!1),Y=Xt(),[ne,ie]=g.useState({name:"",description:"",category:"",isPrivate:!1,avatar:null,cover:null,tags:[],location:"",website:"",rules:[""],contactEmail:""});g.useEffect(()=>{Ye()},[]),g.useEffect(()=>{_&&N()},[_]),g.useEffect(()=>{D()},[b,e,r,n,l,c,F,k]);const Ye=async()=>{try{const{data:{user:w},error:A}=await V.auth.getUser();if(A||!w){Y("/login");return}O(w.id)}catch(w){console.error("Error fetching current user:",w),Y("/login")}},N=async()=>{try{await Promise.all([z(),re(),ae(),Ee(),Be(),je()])}catch(w){console.error("Error fetching data:",w)}finally{y(!1)}},z=async()=>{try{const{data:w,error:A}=await V.from("groups").select("*").eq("isPrivate",!1).order("createdAt",{ascending:!1});if(A)throw A;const se=(w||[]).map(pe=>({...pe,memberCount:Math.floor(Math.random()*1e3)+10,postCount:Math.floor(Math.random()*500),category:Ki[Math.floor(Math.random()*Ki.length)],tags:["react","javascript","frontend"].slice(0,Math.floor(Math.random()*3)+1),isVerified:Math.random()>.8,isActive:Math.random()>.3,lastActivity:new Date(Date.now()-Math.random()*7*24*60*60*1e3).toISOString(),location:Math.random()>.5?"Київ, Україна":void 0,website:Math.random()>.7?"https://example.com":void 0}));t(se)}catch(w){console.error("Error fetching groups:",w),t([])}},re=async()=>{try{if(!_)return;const{data:w,error:A}=await V.from("groups").select("*").eq("creatorId",_).order("createdAt",{ascending:!1});if(A)throw A;s(w||[])}catch(w){console.error("Error fetching my groups:",w),s([])}},ae=async()=>{try{if(!_)return;const{data:w,error:A}=await V.from("group_members").select(`
          groups (*)
        `).eq("userId",_).eq("role","member");if(A)throw A;a((w==null?void 0:w.map(se=>se.groups).filter(Boolean))||[])}catch(w){console.error("Error fetching joined groups:",w),a([])}},Ee=async()=>{try{if(!_)return;const{data:w,error:A}=await V.from("group_members").select(`
          groups (*)
        `).eq("userId",_).in("role",["owner","admin","moderator"]);if(A)throw A;o((w==null?void 0:w.map(se=>se.groups).filter(Boolean))||[])}catch(w){console.error("Error fetching managed groups:",w),o([])}},Be=async()=>{try{if(!_)return;d([])}catch(w){console.error("Error fetching invitations:",w),d([])}},je=async()=>{try{const{data:w,error:A}=await V.from("group_members").select("*");if(A)throw A;v(w||[])}catch(w){console.error("Error fetching group members:",w),v([])}},Le=()=>{switch(k){case"explore":return e;case"my-groups":return r;case"joined":return n;case"managed":return l;case"invitations":return c;default:return e}},D=()=>{let w=Le();b.trim()!==""&&(w=w.filter(A=>{var se,pe,tt;return A.name.toLowerCase().includes(b.toLowerCase())||A.description.toLowerCase().includes(b.toLowerCase())||((se=A.category)==null?void 0:se.toLowerCase().includes(b.toLowerCase()))||((pe=A.tags)==null?void 0:pe.some(Pt=>Pt.toLowerCase().includes(b.toLowerCase())))||((tt=A.location)==null?void 0:tt.toLowerCase().includes(b.toLowerCase()))})),F.category&&(w=w.filter(A=>A.category===F.category)),F.memberCount!=="all"&&(w=w.filter(A=>{const se=A.memberCount||0;switch(F.memberCount){case"small":return se<50;case"medium":return se>=50&&se<200;case"large":return se>=200;default:return!0}})),F.privacy!=="all"&&(w=w.filter(A=>F.privacy==="public"?!A.isPrivate:A.isPrivate)),F.activity!=="all"&&(w=w.filter(A=>F.activity==="active"?A.isActive:!A.isActive)),F.hasAvatar&&(w=w.filter(A=>A.avatar)),F.isVerified&&(w=w.filter(A=>A.isVerified)),w.sort((A,se)=>{let pe=0;switch(F.sortBy){case"name":pe=A.name.localeCompare(se.name);break;case"members":pe=(A.memberCount||0)-(se.memberCount||0);break;case"activity":A.isActive&&!se.isActive?pe=-1:!A.isActive&&se.isActive?pe=1:pe=new Date(se.lastActivity||0).getTime()-new Date(A.lastActivity||0).getTime();break;case"created":pe=new Date(A.createdAt).getTime()-new Date(se.createdAt).getTime();break;case"popularity":pe=(A.memberCount||0)+(A.postCount||0)-((se.memberCount||0)+(se.postCount||0));break}return F.sortOrder==="asc"?pe:-pe}),h(w)},Q=async()=>{if(!(!_||!ne.name.trim())){$(!0);try{const w={name:ne.name.trim(),description:ne.description.trim(),category:ne.category,isPrivate:ne.isPrivate,creatorId:_,createdAt:new Date().toISOString(),tags:ne.tags,location:ne.location.trim()||null,website:ne.website.trim()||null,rules:ne.rules.filter(pe=>pe.trim()),contactEmail:ne.contactEmail.trim()||null},{data:A,error:se}=await V.from("groups").insert([w]).select().single();if(se)throw se;await V.from("group_members").insert([{groupId:A.id,userId:_,role:"owner",joinedAt:new Date().toISOString(),isActive:!0}]),alert("Групу успішно створено!"),C(!1),S(),N()}catch(w){console.error("Error creating group:",w),alert("Помилка при створенні групи")}finally{$(!1)}}},ve=async w=>{if(_)try{if(f.find(se=>se.groupId===w&&se.userId===_)){alert("Ви вже є членом цієї групи!");return}await V.from("group_members").insert([{groupId:w,userId:_,role:"member",joinedAt:new Date().toISOString(),isActive:!0}]),alert("Ви успішно приєдналися до групи!"),N()}catch(A){console.error("Error joining group:",A),alert("Помилка при приєднанні до групи")}},ye=async w=>{if(_)try{await V.from("group_members").delete().eq("groupId",w).eq("userId",_),alert("Ви покинули групу!"),N()}catch(A){console.error("Error leaving group:",A),alert("Помилка при виході з групи")}},We=w=>{const A=f.find(se=>se.groupId===w&&se.userId===_);return(A==null?void 0:A.role)||null},at=w=>w.creatorId===_,et=w=>{const A=new Set(ce);A.has(w)?A.delete(w):A.add(w),me(A),Z(A.size>0)},Ke=()=>{me(new Set),Z(!1)},x=async()=>{for(const w of ce)await ve(w);Ke()},S=()=>{ie({name:"",description:"",category:"",isPrivate:!1,avatar:null,cover:null,tags:[],location:"",website:"",rules:[""],contactEmail:""})},R=()=>{oe({category:"",memberCount:"all",privacy:"all",activity:"all",sortBy:"activity",sortOrder:"desc",hasAvatar:!1,isVerified:!1}),j("")},q=()=>{let w=0;return F.category&&w++,F.memberCount!=="all"&&w++,F.privacy!=="all"&&w++,F.activity!=="all"&&w++,(F.sortBy!=="activity"||F.sortOrder!=="desc")&&w++,F.hasAvatar&&w++,F.isVerified&&w++,w},B=w=>{if(!w)return"Немає активності";const A=Date.now()-new Date(w).getTime(),se=Math.floor(A/(1e3*60*60)),pe=Math.floor(A/(1e3*60*60*24));return se<24?`${se} год тому`:`${pe} дн тому`},M=()=>{ie(w=>({...w,rules:[...w.rules,""]}))},ee=w=>{ie(A=>({...A,rules:A.rules.filter((se,pe)=>pe!==w)}))},he=(w,A)=>{ie(se=>({...se,rules:se.rules.map((pe,tt)=>tt===w?A:pe)}))},ge=w=>{var tt,Pt,ar;const A=We(w.id),se=at(w),pe=ce.has(w.id);return G==="list"?i.jsx("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200 ${pe?"ring-2 ring-blue-500 bg-blue-50":""}`,children:i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"checkbox",checked:pe,onChange:()=>et(w.id),className:"absolute top-0 left-0 w-4 h-4 rounded border-gray-300 text-blue-600"}),i.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-500 to-blue-600 rounded-lg flex items-center justify-center text-white text-2xl font-bold overflow-hidden ml-6",children:w.avatar?i.jsx("img",{src:w.avatar,alt:w.name,className:"w-full h-full object-cover"}):i.jsx("span",{children:(tt=w.name[0])==null?void 0:tt.toUpperCase()})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 truncate",children:w.name}),w.isVerified&&i.jsx(nc,{size:20,className:"text-blue-500"}),w.isPrivate?i.jsx(br,{size:16,className:"text-gray-400"}):i.jsx(yi,{size:16,className:"text-green-500"}),se&&i.jsx(ih,{size:16,className:"text-yellow-500"}),A==="admin"&&i.jsx(lh,{size:16,className:"text-purple-500"})]}),i.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:w.description}),i.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500 mb-3",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Qt,{size:14,className:"mr-1"}),w.memberCount," учасників"]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(gr,{size:14,className:"mr-1"}),w.postCount," постів"]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Nw,{size:14,className:"mr-1"}),B(w.lastActivity)]}),w.location&&i.jsxs("div",{className:"flex items-center",children:[i.jsx(Hr,{size:14,className:"mr-1"}),w.location]})]}),i.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[i.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:w.category}),(Pt=w.tags)==null?void 0:Pt.map(Mt=>i.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:["#",Mt]},Mt))]})]}),i.jsxs("div",{className:"flex flex-col space-y-2",children:[se?i.jsx("button",{onClick:()=>Y(`/groups/${w.id}`),className:"px-4 py-2 bg-green-100 text-green-700 rounded-lg text-sm font-medium",children:"Управління"}):A?i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>Y(`/groups/${w.id}`),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Переглянути"}),i.jsx("button",{onClick:()=>ye(w.id),className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors text-sm",children:"Покинути"})]}):i.jsx("button",{onClick:()=>ve(w.id),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Приєднатися"}),i.jsx("button",{className:"p-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:i.jsx(dr,{size:16})})]})]})},w.id):i.jsx("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-all duration-200 cursor-pointer group hover:scale-105 ${pe?"ring-2 ring-blue-500":""}`,onClick:()=>Y(`/groups/${w.id}`),children:i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"checkbox",checked:pe,onChange:Mt=>{Mt.stopPropagation(),et(w.id)},className:"absolute top-3 left-3 w-4 h-4 rounded border-gray-300 text-blue-600 z-10"}),i.jsxs("div",{className:"h-32 bg-gradient-to-r from-purple-500 to-blue-600 relative",children:[w.cover&&i.jsx("img",{src:w.cover,alt:w.name,className:"w-full h-full object-cover"}),i.jsxs("div",{className:"absolute top-3 right-3 flex space-x-1",children:[w.isVerified&&i.jsx(nc,{size:16,className:"text-white"}),w.isPrivate?i.jsx(br,{size:16,className:"text-white"}):i.jsx(yi,{size:16,className:"text-white"})]})]}),i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex items-start space-x-3 mb-3 -mt-8",children:[i.jsx("div",{className:"w-16 h-16 bg-white rounded-lg border-4 border-white shadow-lg flex items-center justify-center text-purple-600 text-xl font-bold overflow-hidden",children:w.avatar?i.jsx("img",{src:w.avatar,alt:w.name,className:"w-full h-full object-cover rounded-lg"}):i.jsx("span",{children:(ar=w.name[0])==null?void 0:ar.toUpperCase()})}),i.jsx("div",{className:"flex-1 mt-2",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900 group-hover:text-blue-600 transition-colors line-clamp-1",children:w.name}),se&&i.jsx(ih,{size:16,className:"text-yellow-500"}),A==="admin"&&i.jsx(lh,{size:16,className:"text-purple-500"})]})})]}),i.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:w.description}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mb-3",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Qt,{size:14,className:"mr-1"}),w.memberCount]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(gr,{size:14,className:"mr-1"}),w.postCount]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:`w-2 h-2 rounded-full mr-1 ${w.isActive?"bg-green-500":"bg-gray-400"}`}),w.isActive?"Активна":"Неактивна"]})]}),i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:w.category}),w.location&&i.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[i.jsx(Hr,{size:12,className:"mr-1"}),w.location]})]}),i.jsxs("div",{className:"flex space-x-2",onClick:Mt=>Mt.stopPropagation(),children:[se?i.jsxs("button",{onClick:()=>Y(`/groups/${w.id}`),className:"flex-1 flex items-center justify-center px-3 py-2 bg-green-100 text-green-700 rounded-lg text-sm font-medium",children:[i.jsx(gl,{size:16,className:"mr-1"}),"Управління"]}):A?i.jsxs("button",{onClick:()=>ye(w.id),className:"flex-1 flex items-center justify-center px-3 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors text-sm font-medium",children:[i.jsx(Nt,{size:16,className:"mr-1"}),"Покинути"]}):i.jsxs("button",{onClick:()=>ve(w.id),className:"flex-1 flex items-center justify-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:[i.jsx(an,{size:16,className:"mr-1"}),"Приєднатися"]}),i.jsx("button",{className:"flex items-center justify-center px-3 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:i.jsx(xp,{size:16})})]})]})]})},w.id)};return m?i.jsxs("div",{className:"flex min-h-screen",children:[i.jsx(Xe,{}),i.jsx("div",{className:"flex-1 ml-64 p-8",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),i.jsx("p",{className:"mt-4 text-gray-600",children:"Завантаження груп..."})]})})]}):i.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[i.jsx(Xe,{}),i.jsx("div",{className:"flex-1 ml-64 p-8",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-8",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Групи"}),i.jsx("p",{className:"text-gray-600",children:"Знайдіть спільноти за вашими інтересами або створіть власну"})]}),i.jsxs("button",{onClick:()=>C(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(nn,{size:20,className:"mr-2"}),"Створити групу"]})]}),i.jsx("div",{className:"flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg",children:[{id:"explore",label:"Дослідити",count:e.length},{id:"my-groups",label:"Мої групи",count:r.length},{id:"joined",label:"Приєднані",count:n.length},{id:"managed",label:"Керую",count:l.length},{id:"invitations",label:"Запрошення",count:c.length}].map(w=>i.jsxs("button",{onClick:()=>p(w.id),className:`flex-1 px-4 py-3 text-sm font-medium rounded-md transition-colors ${k===w.id?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[w.label," (",w.count,")"]},w.id))}),L&&i.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-blue-800",children:["Обрано ",ce.size," груп"]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:x,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Приєднатися до всіх"}),i.jsx("button",{onClick:Ke,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm",children:"Скасувати"})]})]})}),i.jsxs("div",{className:"mb-6 space-y-4",children:[i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{className:"relative flex-1 max-w-md",children:[i.jsx(mn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),i.jsx("input",{type:"text",placeholder:"Пошук груп...",value:b,onChange:w=>j(w.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),b&&i.jsx("button",{onClick:()=>j(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i.jsx(Nt,{size:18})})]}),i.jsxs("button",{onClick:()=>H(!T),className:`flex items-center px-4 py-3 border rounded-lg transition-colors relative ${T?"bg-blue-50 border-blue-300 text-blue-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[i.jsx(uu,{size:20,className:"mr-2"}),"Фільтри",q()>0&&i.jsx("span",{className:"absolute -top-2 -right-2 bg-blue-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:q()}),i.jsx(lu,{size:16,className:`ml-2 transition-transform ${T?"rotate-180":""}`})]}),i.jsxs("div",{className:"flex border border-gray-300 rounded-lg overflow-hidden",children:[i.jsx("button",{onClick:()=>J("grid"),className:`p-3 ${G==="grid"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:i.jsx(ou,{size:18})}),i.jsx("button",{onClick:()=>J("list"),className:`p-3 ${G==="list"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:i.jsx(cu,{size:18})})]})]}),T&&i.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Категорія"}),i.jsxs("select",{value:F.category,onChange:w=>oe(A=>({...A,category:w.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"",children:"Всі категорії"}),Ki.map(w=>i.jsx("option",{value:w,children:w},w))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Розмір"}),i.jsxs("select",{value:F.memberCount,onChange:w=>oe(A=>({...A,memberCount:w.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"all",children:"Всі розміри"}),i.jsx("option",{value:"small",children:"Мала (<50)"}),i.jsx("option",{value:"medium",children:"Середня (50-200)"}),i.jsx("option",{value:"large",children:"Велика (>200)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Приватність"}),i.jsxs("select",{value:F.privacy,onChange:w=>oe(A=>({...A,privacy:w.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"all",children:"Всі"}),i.jsx("option",{value:"public",children:"Публічні"}),i.jsx("option",{value:"private",children:"Приватні"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Активність"}),i.jsxs("select",{value:F.activity,onChange:w=>oe(A=>({...A,activity:w.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"all",children:"Всі"}),i.jsx("option",{value:"active",children:"Активні"}),i.jsx("option",{value:"inactive",children:"Неактивні"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Сортування"}),i.jsxs("select",{value:F.sortBy,onChange:w=>oe(A=>({...A,sortBy:w.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"activity",children:"Активністю"}),i.jsx("option",{value:"name",children:"Назвою"}),i.jsx("option",{value:"members",children:"Кількістю учасників"}),i.jsx("option",{value:"created",children:"Датою створення"}),i.jsx("option",{value:"popularity",children:"Популярністю"})]})]})]}),i.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t border-gray-200",children:[i.jsxs("div",{className:"flex items-center space-x-6",children:[i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:F.hasAvatar,onChange:w=>oe(A=>({...A,hasAvatar:w.target.checked})),className:"rounded border-gray-300 text-blue-600 mr-2"}),i.jsx("span",{className:"text-sm text-gray-700",children:"Тільки з аватаром"})]}),i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:F.isVerified,onChange:w=>oe(A=>({...A,isVerified:w.target.checked})),className:"rounded border-gray-300 text-blue-600 mr-2"}),i.jsx("span",{className:"text-sm text-gray-700",children:"Тільки верифіковані"})]}),i.jsxs("button",{onClick:()=>oe(w=>({...w,sortOrder:w.sortOrder==="asc"?"desc":"asc"})),className:"flex items-center text-sm text-blue-600 hover:text-blue-800",children:[i.jsx(vp,{size:16,className:"mr-1"}),F.sortOrder==="asc"?"За зростанням":"За спаданням"]})]}),i.jsx("button",{onClick:R,className:"text-sm text-blue-600 hover:text-blue-800",children:"Скинути фільтри"})]})]})]}),i.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[i.jsxs("p",{className:"text-sm text-gray-600",children:[b?`Знайдено ${u.length} груп з ${Le().length}`:`Всього ${u.length} груп`,b&&i.jsxs("span",{children:[' за запитом "',i.jsx("span",{className:"font-semibold",children:b}),'"']})]}),ce.size>0&&i.jsx("button",{onClick:()=>{ce.size===u.length?Ke():(me(new Set(u.map(w=>w.id))),Z(!0))},className:"text-sm text-blue-600 hover:text-blue-800",children:ce.size===u.length?"Скасувати вибір":"Обрати всі"})]}),u.length>0?i.jsx("div",{className:G==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:u.map(ge)}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Qt,{size:32,className:"text-gray-400"})}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Груп не знайдено"}),i.jsx("p",{className:"text-gray-600 mb-4",children:b||q()>0?"Спробуйте змінити критерії пошуку або фільтри":"Поки що немає створених груп"}),b||q()>0?i.jsx("button",{onClick:R,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Скинути всі фільтри"}):i.jsxs("button",{onClick:()=>C(!0),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(nn,{size:20,className:"mr-2"}),"Створити першу групу"]})]})]})}),I&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Створити групу"}),i.jsx("button",{onClick:()=>C(!1),className:"text-gray-400 hover:text-gray-600",children:i.jsx(Nt,{size:24})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Назва групи *"}),i.jsx("input",{type:"text",value:ne.name,onChange:w=>ie(A=>({...A,name:w.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Введіть назву групи"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Опис"}),i.jsx("textarea",{value:ne.description,onChange:w=>ie(A=>({...A,description:w.target.value})),rows:4,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Розкажіть про вашу групу"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Категорія"}),i.jsxs("select",{value:ne.category,onChange:w=>ie(A=>({...A,category:w.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"",children:"Оберіть категорію"}),Ki.map(w=>i.jsx("option",{value:w,children:w},w))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Місцезнаходження"}),i.jsx("input",{type:"text",value:ne.location,onChange:w=>ie(A=>({...A,location:w.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Місто, країна"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Веб-сайт"}),i.jsx("input",{type:"url",value:ne.website,onChange:w=>ie(A=>({...A,website:w.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://example.com"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email для зв'язку"}),i.jsx("input",{type:"email",value:ne.contactEmail,onChange:w=>ie(A=>({...A,contactEmail:w.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"contact@example.com"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Правила групи"}),i.jsxs("div",{className:"space-y-2",children:[ne.rules.map((w,A)=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"text",value:w,onChange:se=>he(A,se.target.value),className:"flex-1 p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:`Правило ${A+1}`}),ne.rules.length>1&&i.jsx("button",{onClick:()=>ee(A),className:"text-red-500 hover:text-red-700",children:i.jsx(Nt,{size:20})})]},A)),i.jsx("button",{onClick:M,className:"text-blue-600 hover:text-blue-800 text-sm",children:"+ Додати правило"})]})]}),i.jsx("div",{children:i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:ne.isPrivate,onChange:w=>ie(A=>({...A,isPrivate:w.target.checked})),className:"rounded border-gray-300 text-blue-600 mr-3"}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-gray-900",children:"Приватна група"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Тільки запрошені користувачі зможуть приєднатися до групи"})]})]})})]}),i.jsxs("div",{className:"flex justify-end space-x-4 mt-8 pt-6 border-t",children:[i.jsx("button",{onClick:()=>C(!1),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Скасувати"}),i.jsx("button",{onClick:Q,disabled:E||!ne.name.trim(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:E?"Створення...":"Створити групу"})]})]})})})]})}function j1(){var Ee,Be,je,Le;const{groupId:e}=Ty(),t=Xt(),[r,s]=g.useState(null),[n,a]=g.useState([]),[l,o]=g.useState([]),[c,d]=g.useState(null),[u,h]=g.useState(null),[f,v]=g.useState(!0),[b,j]=g.useState("posts"),[k,p]=g.useState(""),[m,y]=g.useState([]),[_,O]=g.useState(!1),[I,C]=g.useState(!1),[E,$]=g.useState(""),[T,H]=g.useState(null),[G,J]=g.useState(!1);g.useEffect(()=>{F()},[]),g.useEffect(()=>{c&&e&&(oe(),ce(),me(),L())},[c,e]);const F=async()=>{try{const{data:{user:D},error:Q}=await V.auth.getUser();if(Q||!D){t("/login");return}const{data:ve,error:ye}=await V.from("user_profiles").select("*").eq("auth_user_id",D.id).single();if(ye){console.error("Error fetching user profile:",ye);return}d(ve)}catch(D){console.error("Error fetching current user:",D)}},oe=async()=>{try{const{data:D,error:Q}=await V.from("groups").select(`
          *,
          created_by_profile:user_profiles!groups_created_by_fkey(name, last_name, avatar)
        `).eq("id",e).single();if(Q)throw Q;s(D)}catch(D){console.error("Error fetching group details:",D),t("/groups")}finally{v(!1)}},ce=async()=>{try{const{data:D,error:Q}=await V.from("group_posts").select(`
          *,
          author:user_profiles!group_posts_author_id_fkey(name, last_name, avatar),
          media:group_post_media(*)
        `).eq("group_id",e).order("created_at",{ascending:!1});if(Q)throw Q;a(D||[])}catch(D){console.error("Error fetching group posts:",D)}},me=async()=>{try{const{data:D,error:Q}=await V.from("group_members").select(`
          *,
          user:user_profiles!group_members_user_id_fkey(name, last_name, avatar)
        `).eq("group_id",e).order("joined_at",{ascending:!1});if(Q)throw Q;o(D||[])}catch(D){console.error("Error fetching group members:",D)}},L=async()=>{try{if(!c)return;const{data:D,error:Q}=await V.from("group_members").select("*").eq("group_id",e).eq("user_id",c.id).single();if(Q&&Q.code!=="PGRST116")throw Q;h(D)}catch(D){console.error("Error checking user membership:",D)}},Z=async()=>{try{if(!c)return;const{error:D}=await V.from("group_members").insert([{group_id:e,user_id:c.id,role:"member"}]);if(D)throw D;L(),me(),alert("Ви успішно приєдналися до групи!")}catch(D){console.error("Error joining group:",D),alert("Помилка при приєднанні до групи")}},Y=async()=>{try{if(!c||!u)return;if(u.role==="admin"){alert("Адміністратор не може покинути групу");return}const{error:D}=await V.from("group_members").delete().eq("group_id",e).eq("user_id",c.id);if(D)throw D;h(null),me(),alert("Ви покинули групу")}catch(D){console.error("Error leaving group:",D),alert("Помилка при виході з групи")}},ne=D=>{const Q=Array.from(D.target.files);y(Q)},ie=D=>{y(Q=>Q.filter((ve,ye)=>ye!==D))},Ye=async D=>{if(D.preventDefault(),!(!c||!u||!k.trim()&&m.length===0))try{O(!0);const{data:Q,error:ve}=await V.from("group_posts").insert([{group_id:e,author_id:c.id,content:k.trim()}]).select().single();if(ve)throw ve;if(m.length>0)for(const ye of m){const We=ye.name.split(".").pop(),at=`${Date.now()}-${Math.random().toString(36).substring(7)}.${We}`,et=`group-posts/${e}/${at}`,Ke=ye.type.startsWith("video/")?"video":"image",{error:x}=await V.storage.from("media").upload(et,ye);if(x)throw x;const{data:{publicUrl:S}}=V.storage.from("media").getPublicUrl(et);await V.from("group_post_media").insert([{post_id:Q.id,type:Ke,url:S,filename:ye.name,file_size:ye.size}])}p(""),y([]),ce()}catch(Q){console.error("Error creating post:",Q),alert("Помилка при створенні поста")}finally{O(!1)}},N=D=>new Date(D).toLocaleDateString("uk-UA",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),z=D=>{switch(D){case"admin":return"Адміністратор";case"moderator":return"Модератор";default:return"Учасник"}};if(f)return i.jsxs("div",{className:"flex min-h-screen",children:[i.jsx(Xe,{}),i.jsx("div",{className:"flex-1 ml-64 p-8",children:i.jsx("div",{className:"text-center",children:"Завантаження..."})})]});if(!r)return i.jsxs("div",{className:"flex min-h-screen",children:[i.jsx(Xe,{}),i.jsx("div",{className:"flex-1 ml-64 p-8",children:i.jsx("div",{className:"text-center",children:"Група не знайдена"})})]});const re=!!u,ae=(u==null?void 0:u.role)==="admin";return i.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[i.jsx(Xe,{}),i.jsxs("div",{className:"flex-1 ml-64",children:[i.jsx("div",{className:"bg-white border-b border-gray-200",children:i.jsxs("div",{className:"max-w-6xl mx-auto px-8 py-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("button",{onClick:()=>t("/groups"),className:"mr-4 p-2 hover:bg-gray-100 rounded-lg",children:i.jsx(Sw,{size:20})}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mr-4",children:r.avatar?i.jsx("img",{src:r.avatar,alt:r.name,className:"w-full h-full rounded-full object-cover"}):i.jsx(Qt,{size:24,className:"text-gray-400"})}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mr-2",children:r.name}),r.is_private?i.jsx(br,{size:16,className:"text-gray-500"}):i.jsx(yi,{size:16,className:"text-gray-500"})]}),i.jsxs("div",{className:"flex items-center text-sm text-gray-600 space-x-4",children:[i.jsxs("span",{children:[r.member_count||l.length," учасників"]}),i.jsx("span",{children:"•"}),i.jsxs("span",{children:["Створено ",N(r.created_at)]})]})]})]})]}),i.jsx("div",{className:"flex items-center space-x-3",children:re?i.jsxs(i.Fragment,{children:[!ae&&i.jsxs("button",{onClick:Y,className:"flex items-center px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:[i.jsx(Fw,{size:18,className:"mr-2"}),"Покинути"]}),ae&&i.jsxs("button",{className:"flex items-center px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:[i.jsx(gl,{size:18,className:"mr-2"}),"Керувати"]})]}):i.jsxs("button",{onClick:Z,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[i.jsx(an,{size:18,className:"mr-2"}),"Приєднатися"]})})]}),r.description&&i.jsx("p",{className:"mt-4 text-gray-600",children:r.description})]})}),i.jsx("div",{className:"max-w-6xl mx-auto px-8 py-6",children:re?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"mb-6",children:i.jsxs("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg w-fit",children:[i.jsxs("button",{onClick:()=>j("posts"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${b==="posts"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["Пости (",n.length,")"]}),i.jsxs("button",{onClick:()=>j("members"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${b==="members"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["Учасники (",l.length,")"]}),i.jsx("button",{onClick:()=>j("info"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${b==="info"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Інформація"})]})}),b==="posts"&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:i.jsx("form",{onSubmit:Ye,children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:c!=null&&c.avatar?i.jsx("img",{src:c.avatar,alt:c.name,className:"w-full h-full rounded-full object-cover"}):i.jsx("span",{className:"text-sm text-gray-600",children:(Be=(Ee=c==null?void 0:c.name)==null?void 0:Ee[0])==null?void 0:Be.toUpperCase()})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("textarea",{value:k,onChange:D=>p(D.target.value),placeholder:"Поділіться чимось з групою...",className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:3}),m.length>0&&i.jsx("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-2",children:m.map((D,Q)=>i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:D.type.startsWith("image/")?i.jsx("img",{src:URL.createObjectURL(D),alt:"",className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i.jsx(qw,{size:24,className:"text-gray-400"})})}),i.jsx("button",{type:"button",onClick:()=>ie(Q),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center",children:i.jsx(Nt,{size:12})})]},Q))}),i.jsxs("div",{className:"flex items-center justify-between mt-3",children:[i.jsx("div",{className:"flex items-center space-x-2",children:i.jsxs("label",{className:"flex items-center px-3 py-1 text-gray-600 hover:bg-gray-100 rounded-lg cursor-pointer",children:[i.jsx(la,{size:18,className:"mr-1"}),i.jsx("span",{className:"text-sm",children:"Фото/Відео"}),i.jsx("input",{type:"file",multiple:!0,accept:"image/*,video/*",className:"hidden",onChange:ne})]})}),i.jsxs("button",{type:"submit",disabled:_||!k.trim()&&m.length===0,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[_?i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):i.jsx(yp,{size:16,className:"mr-2"}),_?"Публікація...":"Опублікувати"]})]})]})]})})}),n.length>0?n.map(D=>{var Q,ve,ye,We,at,et;return i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[i.jsx("div",{className:"p-6 pb-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:(Q=D.author)!=null&&Q.avatar?i.jsx("img",{src:D.author.avatar,alt:D.author.name,className:"w-full h-full rounded-full object-cover"}):i.jsx("span",{className:"text-sm text-gray-600",children:(We=(ye=(ve=D.author)==null?void 0:ve.name)==null?void 0:ye[0])==null?void 0:We.toUpperCase()})}),i.jsxs("div",{className:"ml-3",children:[i.jsxs("p",{className:"font-medium text-gray-900",children:[(at=D.author)==null?void 0:at.name," ",(et=D.author)==null?void 0:et.last_name]}),i.jsx("p",{className:"text-sm text-gray-500",children:N(D.created_at)})]})]}),i.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg",children:i.jsx(dr,{size:16,className:"text-gray-400"})})]})}),D.content&&i.jsx("div",{className:"px-6 pb-4",children:i.jsx("p",{className:"text-gray-900",children:D.content})}),D.media&&D.media.length>0&&i.jsx("div",{className:"px-6 pb-4",children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:D.media.map((Ke,x)=>i.jsx("div",{className:"rounded-lg overflow-hidden",children:Ke.type==="image"?i.jsx("img",{src:Ke.url,alt:"",className:"w-full h-64 object-cover"}):i.jsx("video",{src:Ke.url,className:"w-full h-64 object-cover",controls:!0})},x))})}),i.jsx("div",{className:"px-6 py-4 border-t border-gray-100",children:i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center space-x-6",children:[i.jsxs("button",{className:"flex items-center text-gray-600 hover:text-red-500",children:[i.jsx(An,{size:18,className:"mr-1"}),i.jsx("span",{className:"text-sm",children:"Подобається"})]}),i.jsxs("button",{className:"flex items-center text-gray-600 hover:text-blue-500",children:[i.jsx(gr,{size:18,className:"mr-1"}),i.jsx("span",{className:"text-sm",children:"Коментувати"})]}),i.jsxs("button",{className:"flex items-center text-gray-600 hover:text-green-500",children:[i.jsx(Iw,{size:18,className:"mr-1"}),i.jsx("span",{className:"text-sm",children:"Поділитися"})]})]})})})]},D.id)}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(gr,{size:32,className:"text-gray-400"})}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Поки що немає постів"}),i.jsx("p",{className:"text-gray-600",children:"Станьте першим, хто поділиться чимось цікавим!"})]})]}),b==="members"&&i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Учасники групи (",l.length,")"]}),i.jsx("div",{className:"space-y-4",children:l.map(D=>{var Q,ve,ye,We,at,et,Ke;return i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:(Q=D.user)!=null&&Q.avatar?i.jsx("img",{src:D.user.avatar,alt:D.user.name,className:"w-full h-full rounded-full object-cover"}):i.jsx("span",{className:"text-lg text-gray-600",children:(We=(ye=(ve=D.user)==null?void 0:ve.name)==null?void 0:ye[0])==null?void 0:We.toUpperCase()})}),i.jsxs("div",{className:"ml-4",children:[i.jsxs("p",{className:"font-medium text-gray-900",children:[(at=D.user)==null?void 0:at.name," ",(et=D.user)==null?void 0:et.last_name]}),i.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[i.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${D.role==="admin"?"bg-red-100 text-red-800":D.role==="moderator"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:z(D.role)}),i.jsxs("span",{className:"ml-2",children:["Приєднався ",N(D.joined_at)]})]})]})]}),ae&&((Ke=D.user)==null?void 0:Ke.id)!==(c==null?void 0:c.id)&&i.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:i.jsx(dr,{size:16})})]},D.id)})})]})}),b==="info"&&i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 max-w-xl mx-auto",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsxs("div",{className:"relative w-24 h-24 mb-4",children:[i.jsx("img",{src:T?URL.createObjectURL(T):r.avatar||"",alt:"Group avatar",className:"w-24 h-24 rounded-full object-cover border border-gray-200"}),ae&&i.jsxs("label",{className:"absolute bottom-0 right-0 bg-blue-600 text-white rounded-full p-1 cursor-pointer hover:bg-blue-700",children:[i.jsx(du,{size:16}),i.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:D=>H(D.target.files[0])})]})]}),i.jsx("h2",{className:"text-2xl font-bold mb-2",children:r.name}),i.jsxs("div",{className:"text-gray-600 mb-2",children:["Створено: ",N(r.created_at)]}),i.jsxs("div",{className:"text-gray-600 mb-2",children:["Адміністратор: ",((Le=(je=l.find(D=>D.role==="admin"))==null?void 0:je.user)==null?void 0:Le.name)||"—"]}),I?i.jsxs(i.Fragment,{children:[i.jsx("textarea",{className:"w-full border rounded p-2 mb-2",rows:3,value:E,onChange:D=>$(D.target.value)}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:G,onClick:async()=>{J(!0);let D=r.avatar;if(T){const ve=T.name.split(".").pop(),ye=`${Date.now()}-${Math.random().toString(36).substring(7)}.${ve}`,We=`group-avatars/${e}/${ye}`,{error:at}=await V.storage.from("media").upload(We,T);if(!at){const{data:{publicUrl:et}}=V.storage.from("media").getPublicUrl(We);D=et}}const{error:Q}=await V.from("groups").update({description:E,avatar:D}).eq("id",e);Q||(s({...r,description:E,avatar:D}),C(!1),H(null)),J(!1)},children:"Зберегти"}),i.jsx("button",{className:"px-4 py-2 border rounded hover:bg-gray-100",onClick:()=>{C(!1),$(r.description||""),H(null)},children:"Скасувати"})]})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"mb-4 text-gray-800 w-full text-center min-h-[48px]",children:r.description||"Опис відсутній"}),ae&&i.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:()=>{C(!0),$(r.description||"")},children:"Редагувати опис"})]})]})})]}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(br,{size:32,className:"text-gray-400"})}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Приєднайтеся до групи"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Щоб переглядати пости та брати участь в обговореннях, приєднайтеся до групи"}),i.jsxs("button",{onClick:Z,className:"flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 mx-auto",children:[i.jsx(an,{size:18,className:"mr-2"}),"Приєднатися до групи"]})]})})]})]})}function _1(){const[e,t]=g.useState([]),[r,s]=g.useState([]),[n,a]=g.useState([]),[l,o]=g.useState(""),[c,d]=g.useState(!0),[u,h]=g.useState(null),[f,v]=g.useState(!1),[b,j]=g.useState("grid"),[k,p]=g.useState({city:"",onlineStatus:"all",friendStatus:"all",sortBy:"date",sortOrder:"desc",hasAvatar:!1,hasBio:!1}),[m,y]=g.useState([]),[_,O]=g.useState(new Set),[I,C]=g.useState(!1),E=Xt();g.useEffect(()=>{$(),T()},[]),g.useEffect(()=>{G()},[l,e,k,n]);const $=async()=>{try{const{data:{user:N},error:z}=await V.auth.getUser();if(z||!N){E("/login");return}h(N.id);const{data:re,error:ae}=await V.from("users").select("*").order("date",{ascending:!1});if(ae)throw ae;let Ee=re||[];Ee=Ee.filter(je=>je&&je.id&&je.name&&je.lastName&&je.email),Ee=Ee.map(je=>({...je,isOnline:Math.random()>.7,lastSeen:new Date(Date.now()-Math.random()*7*24*60*60*1e3).toISOString(),friendsCount:Math.floor(Math.random()*100),postsCount:Math.floor(Math.random()*50)})),t(Ee);const Be=[...new Set(Ee.filter(je=>je.city).map(je=>je.city))].sort();y(Be)}catch(N){console.error("Error fetching users:",N),t([]),s([])}finally{d(!1)}},T=async()=>{try{const{data:{user:N}}=await V.auth.getUser();if(!N)return;const{data:z,error:re}=await V.from("friends").select("*").or(`user_id.eq.${N.id},friend_id.eq.${N.id}`);if(re)throw re;a(z||[])}catch(N){console.error("Error fetching friend requests:",N)}},H=N=>{if(!u)return"not_friends";if(N===u)return"self";const z=n.find(re=>re.user_id===u&&re.friend_id===N||re.user_id===N&&re.friend_id===u);return z?z.status==="accepted"?"friends":z.status==="pending"?z.user_id===u?"sent":"received":"not_friends":"not_friends"},G=()=>{let N=[...e];l.trim()!==""&&(N=N.filter(z=>z.name.toLowerCase().includes(l.toLowerCase())||z.lastName.toLowerCase().includes(l.toLowerCase())||z.email.toLowerCase().includes(l.toLowerCase())||z.city&&z.city.toLowerCase().includes(l.toLowerCase())||z.bio&&z.bio.toLowerCase().includes(l.toLowerCase()))),k.city&&(N=N.filter(z=>z.city===k.city)),k.onlineStatus!=="all"&&(N=N.filter(z=>k.onlineStatus==="online"?z.isOnline:!z.isOnline)),k.friendStatus!=="all"&&(N=N.filter(z=>{const re=H(z.auth_user_id);switch(k.friendStatus){case"friends":return re==="friends";case"not_friends":return re==="not_friends";case"pending":return re==="sent"||re==="received";default:return!0}})),k.hasAvatar&&(N=N.filter(z=>z.avatar)),k.hasBio&&(N=N.filter(z=>z.bio&&z.bio.trim()!=="")),N.sort((z,re)=>{let ae=0;switch(k.sortBy){case"name":ae=`${z.name} ${z.lastName}`.localeCompare(`${re.name} ${re.lastName}`);break;case"date":ae=new Date(z.date).getTime()-new Date(re.date).getTime();break;case"city":ae=(z.city||"").localeCompare(re.city||"");break;case"lastSeen":z.isOnline&&!re.isOnline?ae=-1:!z.isOnline&&re.isOnline?ae=1:ae=new Date(re.lastSeen||0).getTime()-new Date(z.lastSeen||0).getTime();break;case"popularity":ae=(re.friendsCount||0)-(z.friendsCount||0);break}return k.sortOrder==="asc"?ae:-ae}),s(N)},J=async N=>{try{if(!u)return;if(N===u){alert("Ви не можете додати себе в друзі!");return}if(n.find(ae=>ae.user_id===u&&ae.friend_id===N||ae.user_id===N&&ae.friend_id===u)){alert("Запит на дружбу вже існує!");return}const{error:re}=await V.from("friends").insert([{user_id:u,friend_id:N,status:"pending"}]);if(re)throw re;alert("Запит на дружбу надіслано!"),T()}catch(z){console.error("Error adding friend:",z),alert("Помилка при додаванні в друзі")}},F=async(N,z)=>{try{const{error:re}=await V.from("friends").update({status:z==="accept"?"accepted":"rejected"}).eq("id",N);if(re)throw re;alert(z==="accept"?"Запит прийнято!":"Запит відхилено!"),T()}catch(re){console.error("Error handling friend request:",re),alert("Помилка при обробці запиту")}},oe=async N=>{try{if(!u)return;const{error:z}=await V.from("friends").delete().or(`and(user_id.eq.${u},friend_id.eq.${N}),and(user_id.eq.${N},friend_id.eq.${u})`);if(z)throw z;alert("Користувача видалено з друзів!"),T()}catch(z){console.error("Error removing friend:",z),alert("Помилка при видаленні з друзів")}},ce=N=>{const z=new Set(_);z.has(N)?z.delete(N):z.add(N),O(z),C(z.size>0)},me=()=>{O(new Set),C(!1)},L=async()=>{for(const N of _)await J(N);me()},Z=()=>{p({city:"",onlineStatus:"all",friendStatus:"all",sortBy:"date",sortOrder:"desc",hasAvatar:!1,hasBio:!1}),o("")},Y=N=>new Date(N).toLocaleDateString("uk-UA",{year:"numeric",month:"long",day:"numeric"}),ne=(N,z)=>{if(z)return"Онлайн";if(!N)return"Давно не з'являвся";const re=Date.now()-new Date(N).getTime(),ae=Math.floor(re/(1e3*60)),Ee=Math.floor(re/(1e3*60*60)),Be=Math.floor(re/(1e3*60*60*24));return ae<60?`${ae} хв тому`:Ee<24?`${Ee} год тому`:`${Be} дн тому`},ie=()=>{let N=0;return k.city&&N++,k.onlineStatus!=="all"&&N++,k.friendStatus!=="all"&&N++,(k.sortBy!=="date"||k.sortOrder!=="desc")&&N++,k.hasAvatar&&N++,k.hasBio&&N++,N},Ye=N=>{var ae,Ee,Be,je,Le,D;const z=H(N.auth_user_id),re=_.has(N.id);return b==="list"?i.jsx("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-all duration-200 ${re?"ring-2 ring-blue-500 bg-blue-50":""}`,children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"checkbox",checked:re,onChange:()=>ce(N.id),className:"absolute top-0 left-0 w-4 h-4 rounded border-gray-300 text-blue-600"}),i.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-xl font-bold overflow-hidden ml-6",children:[N.avatar?i.jsx("img",{src:N.avatar,alt:N.name,className:"w-full h-full rounded-full object-cover"}):i.jsxs("span",{children:[(ae=N.name[0])==null?void 0:ae.toUpperCase(),(Ee=N.lastName[0])==null?void 0:Ee.toUpperCase()]}),N.isOnline&&i.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 bg-green-500 border-2 border-white rounded-full"})]})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:[N.name," ",N.lastName]}),((Be=N.privacy)==null?void 0:Be.profileVisibility)==="private"&&i.jsx(br,{size:16,className:"text-gray-400"}),z==="friends"&&i.jsx(oa,{size:16,className:"text-green-500"})]}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mt-1",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(gi,{size:14,className:"mr-1"}),Y(N.date)]}),N.city&&i.jsxs("div",{className:"flex items-center",children:[i.jsx(Hr,{size:14,className:"mr-1"}),N.city]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Zl,{size:14,className:"mr-1"}),ne(N.lastSeen,N.isOnline)]})]}),N.bio&&i.jsx("p",{className:"text-gray-600 text-sm mt-2 line-clamp-2",children:N.bio}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mt-2",children:[i.jsxs("span",{children:[N.friendsCount," друзів"]}),i.jsxs("span",{children:[N.postsCount," постів"]})]})]}),i.jsxs("div",{className:"flex space-x-2",children:[z==="self"?i.jsx("button",{className:"px-4 py-2 bg-green-100 text-green-700 rounded-lg text-sm font-medium cursor-default",disabled:!0,children:"Це ви"}):z==="friends"?i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>oe(N.auth_user_id),className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors text-sm font-medium",children:"Видалити з друзів"}),i.jsx("button",{onClick:()=>E(`/messages?user=${N.id}`),className:"p-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:i.jsx(gr,{size:16})})]}):z==="sent"?i.jsx("button",{className:"px-4 py-2 bg-yellow-100 text-yellow-700 rounded-lg text-sm font-medium cursor-default",disabled:!0,children:"Запит надіслано"}):z==="received"?i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>{const Q=n.find(ve=>ve.user_id===N.auth_user_id);Q&&F(Q.id,"accept")},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium",children:"Прийняти"}),i.jsx("button",{onClick:()=>{const Q=n.find(ve=>ve.user_id===N.auth_user_id);Q&&F(Q.id,"reject")},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-medium",children:"Відхилити"})]}):i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>J(N.auth_user_id),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"Додати в друзі"}),i.jsx("button",{onClick:()=>E(`/messages?user=${N.id}`),className:"p-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:i.jsx(gr,{size:16})})]}),i.jsx("button",{className:"p-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:i.jsx(dr,{size:16})})]})]})},N.id):i.jsx("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-all duration-200 cursor-pointer group hover:scale-105 ${re?"ring-2 ring-blue-500":""}`,onClick:()=>E(`/profile/${N.id}`),children:i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"checkbox",checked:re,onChange:Q=>{Q.stopPropagation(),ce(N.id)},className:"absolute top-3 left-3 w-4 h-4 rounded border-gray-300 text-blue-600 z-10"}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsxs("div",{className:"relative w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-xl font-bold overflow-hidden flex-shrink-0",children:[N.avatar?i.jsx("img",{src:N.avatar,alt:N.name,className:"w-full h-full rounded-full object-cover"}):i.jsxs("span",{children:[(je=N.name[0])==null?void 0:je.toUpperCase(),(Le=N.lastName[0])==null?void 0:Le.toUpperCase()]}),N.isOnline&&i.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 bg-green-500 border-2 border-white rounded-full"})]}),i.jsxs("div",{className:"ml-4 flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-900 group-hover:text-blue-600 transition-colors truncate",children:[N.name," ",N.lastName]}),((D=N.privacy)==null?void 0:D.profileVisibility)==="private"&&i.jsx(br,{size:16,className:"text-gray-400"}),z==="friends"&&i.jsx(oa,{size:16,className:"text-green-500"})]}),i.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-1",children:[i.jsx(Zl,{size:14,className:"mr-1 flex-shrink-0"}),i.jsx("span",{className:"truncate",children:ne(N.lastSeen,N.isOnline)})]})]})]}),N.bio&&i.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-3",children:N.bio}),i.jsxs("div",{className:"space-y-2 mb-4",children:[N.city&&i.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[i.jsx(Hr,{size:14,className:"mr-2 text-gray-400 flex-shrink-0"}),i.jsx("span",{className:"truncate",children:N.city})]}),i.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[i.jsx(gi,{size:14,className:"mr-2 text-gray-400 flex-shrink-0"}),i.jsxs("span",{className:"truncate",children:["Приєднався ",Y(N.date)]})]}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[i.jsxs("span",{children:[N.friendsCount," друзів"]}),i.jsxs("span",{children:[N.postsCount," постів"]})]})]}),i.jsxs("div",{className:"flex space-x-2",onClick:Q=>Q.stopPropagation(),children:[z==="self"?i.jsxs("button",{className:"flex-1 flex items-center justify-center px-3 py-2 bg-green-100 text-green-700 rounded-lg text-sm font-medium cursor-default",disabled:!0,children:[i.jsx(Ma,{size:16,className:"mr-1"}),"Це ви"]}):z==="friends"?i.jsxs("button",{onClick:()=>oe(N.auth_user_id),className:"flex-1 flex items-center justify-center px-3 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors text-sm font-medium",children:[i.jsx(Bw,{size:16,className:"mr-1"}),"Видалити"]}):z==="sent"?i.jsxs("button",{className:"flex-1 flex items-center justify-center px-3 py-2 bg-yellow-100 text-yellow-700 rounded-lg text-sm font-medium cursor-default",disabled:!0,children:[i.jsx(Zl,{size:16,className:"mr-1"}),"Надіслано"]}):z==="received"?i.jsxs("button",{onClick:()=>{const Q=n.find(ve=>ve.user_id===N.auth_user_id);Q&&F(Q.id,"accept")},className:"flex-1 flex items-center justify-center px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium",children:[i.jsx(oa,{size:16,className:"mr-1"}),"Прийняти"]}):i.jsxs("button",{onClick:()=>J(N.auth_user_id),className:"flex-1 flex items-center justify-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:[i.jsx(an,{size:16,className:"mr-1"}),"Додати"]}),z!=="self"&&i.jsx("button",{onClick:()=>E(`/messages?user=${N.id}`),className:"flex items-center justify-center px-3 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",title:"Написати повідомлення",children:i.jsx(gr,{size:16})})]})]})]})},N.id)};return c?i.jsxs("div",{className:"flex min-h-screen",children:[i.jsx(Xe,{}),i.jsx("div",{className:"flex-1 ml-64 p-8",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),i.jsx("p",{className:"mt-4 text-gray-600",children:"Завантаження користувачів..."})]})})]}):i.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[i.jsx(Xe,{}),i.jsx("div",{className:"flex-1 ml-64 p-8",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Всі користувачі"}),i.jsx("p",{className:"text-gray-600",children:"Перегляньте всіх зареєстрованих користувачів нашої соціальної мережі"})]}),I&&i.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-blue-800",children:["Обрано ",_.size," користувачів"]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:L,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Додати всіх в друзі"}),i.jsx("button",{onClick:me,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm",children:"Скасувати"})]})]})}),i.jsxs("div",{className:"mb-6 space-y-4",children:[i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{className:"relative flex-1 max-w-md",children:[i.jsx(mn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),i.jsx("input",{type:"text",placeholder:"Пошук серед всіх користувачів...",value:l,onChange:N=>o(N.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),l&&i.jsx("button",{onClick:()=>o(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i.jsx(Nt,{size:18})})]}),i.jsxs("button",{onClick:()=>v(!f),className:`flex items-center px-4 py-3 border rounded-lg transition-colors relative ${f?"bg-blue-50 border-blue-300 text-blue-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[i.jsx(uu,{size:20,className:"mr-2"}),"Фільтри",ie()>0&&i.jsx("span",{className:"absolute -top-2 -right-2 bg-blue-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:ie()}),i.jsx(lu,{size:16,className:`ml-2 transition-transform ${f?"rotate-180":""}`})]}),i.jsxs("div",{className:"flex border border-gray-300 rounded-lg overflow-hidden",children:[i.jsx("button",{onClick:()=>j("grid"),className:`p-3 ${b==="grid"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:i.jsx(ou,{size:18})}),i.jsx("button",{onClick:()=>j("list"),className:`p-3 ${b==="list"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:i.jsx(cu,{size:18})})]})]}),f&&i.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Місто"}),i.jsxs("select",{value:k.city,onChange:N=>p(z=>({...z,city:N.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"",children:"Всі міста"}),m.map(N=>i.jsx("option",{value:N,children:N},N))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Онлайн статус"}),i.jsxs("select",{value:k.onlineStatus,onChange:N=>p(z=>({...z,onlineStatus:N.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"all",children:"Всі"}),i.jsx("option",{value:"online",children:"Онлайн"}),i.jsx("option",{value:"offline",children:"Офлайн"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Статус дружби"}),i.jsxs("select",{value:k.friendStatus,onChange:N=>p(z=>({...z,friendStatus:N.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"all",children:"Всі"}),i.jsx("option",{value:"friends",children:"Друзі"}),i.jsx("option",{value:"not_friends",children:"Не друзі"}),i.jsx("option",{value:"pending",children:"Очікуючі запити"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Сортувати за"}),i.jsxs("select",{value:k.sortBy,onChange:N=>p(z=>({...z,sortBy:N.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"date",children:"Датою реєстрації"}),i.jsx("option",{value:"name",children:"Ім'ям"}),i.jsx("option",{value:"city",children:"Містом"}),i.jsx("option",{value:"lastSeen",children:"Останньою активністю"}),i.jsx("option",{value:"popularity",children:"Популярністю"})]})]})]}),i.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t border-gray-200",children:[i.jsxs("div",{className:"flex items-center space-x-6",children:[i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:k.hasAvatar,onChange:N=>p(z=>({...z,hasAvatar:N.target.checked})),className:"rounded border-gray-300 text-blue-600 mr-2"}),i.jsx("span",{className:"text-sm text-gray-700",children:"Тільки з фото"})]}),i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:k.hasBio,onChange:N=>p(z=>({...z,hasBio:N.target.checked})),className:"rounded border-gray-300 text-blue-600 mr-2"}),i.jsx("span",{className:"text-sm text-gray-700",children:"Тільки з біографією"})]}),i.jsxs("button",{onClick:()=>p(N=>({...N,sortOrder:N.sortOrder==="asc"?"desc":"asc"})),className:"flex items-center text-sm text-blue-600 hover:text-blue-800",children:[i.jsx(Cw,{size:16,className:"mr-1"}),k.sortOrder==="asc"?"За зростанням":"За спаданням"]})]}),i.jsx("button",{onClick:Z,className:"text-sm text-blue-600 hover:text-blue-800",children:"Скинути фільтри"})]})]})]}),i.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[i.jsxs("p",{className:"text-sm text-gray-600",children:[l?`Знайдено ${r.length} користувачів з ${e.length}`:`Всього ${r.length} користувачів`,l&&i.jsxs("span",{children:[' за запитом "',i.jsx("span",{className:"font-semibold",children:l}),'"']})]}),_.size>0&&i.jsx("button",{onClick:()=>{_.size===r.length?me():(O(new Set(r.map(N=>N.id))),C(!0))},className:"text-sm text-blue-600 hover:text-blue-800",children:_.size===r.length?"Скасувати вибір":"Обрати всіх"})]}),r.length>0?i.jsx("div",{className:b==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:r.map(Ye)}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Qt,{size:32,className:"text-gray-400"})}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Користувачів не знайдено"}),i.jsx("p",{className:"text-gray-600 mb-4",children:l||ie()>0?"Спробуйте змінити критерії пошуку або фільтри":"Поки що немає зареєстрованих користувачів"}),(l||ie()>0)&&i.jsx("button",{onClick:Z,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Скинути всі фільтри"})]})]})})]})}function yu(){const[e,t]=g.useState([]),[r,s]=g.useState([]),[n,a]=g.useState(""),[l,o]=g.useState(!0),[c,d]=g.useState(null),[u,h]=g.useState(!1),[f,v]=g.useState({city:"",sortBy:"date",sortOrder:"desc",showOnlyAvailable:!1}),[b,j]=g.useState([]),k=Xt();g.useEffect(()=>{p()},[]),g.useEffect(()=>{m()},[n,e,f]);const p=async()=>{try{const{data:{user:C},error:E}=await V.auth.getUser();if(E||!C){k("/login");return}d(C.id);const{data:$,error:T}=await V.from("users").select("*").order("date",{ascending:!1});if(T)throw T;let H=($==null?void 0:$.filter(F=>F.auth_user_id!==C.id))||[];H=H.filter(F=>F&&F.id&&F.name&&F.lastName&&F.email);const G=H.filter(F=>!F.privacy||F.privacy.profileVisibility==="public");t(G);const J=[...new Set(G.filter(F=>F.city).map(F=>F.city))].sort();j(J)}catch(C){console.error("Error fetching users:",C),t([]),s([])}finally{o(!1)}},m=()=>{let C=[...e];n.trim()!==""&&(C=C.filter(E=>E.name.toLowerCase().includes(n.toLowerCase())||E.lastName.toLowerCase().includes(n.toLowerCase())||E.email.toLowerCase().includes(n.toLowerCase())||E.city&&E.city.toLowerCase().includes(n.toLowerCase())||E.bio&&E.bio.toLowerCase().includes(n.toLowerCase()))),f.city&&(C=C.filter(E=>E.city===f.city)),C.sort((E,$)=>{let T=0;switch(f.sortBy){case"name":T=`${E.name} ${E.lastName}`.localeCompare(`${$.name} ${$.lastName}`);break;case"date":T=new Date(E.date).getTime()-new Date($.date).getTime();break;case"city":T=(E.city||"").localeCompare($.city||"");break}return f.sortOrder==="asc"?T:-T}),s(C)},y=async C=>{try{if(!c)return;const{data:E}=await V.from("friends").select("*").or(`and(user_id.eq.${c},friend_id.eq.${C}),and(user_id.eq.${C},friend_id.eq.${c})`);if(E&&E.length>0){alert("Запит на дружбу вже існує!");return}const{error:$}=await V.from("friends").insert([{user_id:c,friend_id:C,status:"pending"}]);if($)throw $;alert("Запит на дружбу надіслано!")}catch(E){console.error("Error adding friend:",E),alert("Помилка при додаванні в друзі")}},_=()=>{v({city:"",sortBy:"date",sortOrder:"desc",showOnlyAvailable:!1}),a("")},O=C=>new Date(C).toLocaleDateString("uk-UA",{year:"numeric",month:"long",day:"numeric"}),I=()=>{let C=0;return f.city&&C++,(f.sortBy!=="date"||f.sortOrder!=="desc")&&C++,f.showOnlyAvailable&&C++,C};return l?i.jsxs("div",{className:"flex min-h-screen",children:[i.jsx(Xe,{}),i.jsx("div",{className:"flex-1 ml-64 p-8",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),i.jsx("p",{className:"mt-4 text-gray-600",children:"Завантаження користувачів..."})]})})]}):i.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[i.jsx(Xe,{}),i.jsx("div",{className:"flex-1 ml-64 p-8",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Користувачі"}),i.jsx("p",{className:"text-gray-600",children:"Знайдіть нових друзів та розширте свою мережу"})]}),i.jsxs("div",{className:"mb-6 space-y-4",children:[i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{className:"relative flex-1 max-w-md",children:[i.jsx(mn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),i.jsx("input",{type:"text",placeholder:"Пошук за ім'ям, прізвищем, email, містом або біо",value:n,onChange:C=>a(C.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),n&&i.jsx("button",{onClick:()=>a(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i.jsx(Nt,{size:18})})]}),i.jsxs("button",{onClick:()=>h(!u),className:`flex items-center px-4 py-3 border rounded-lg transition-colors relative ${u?"bg-blue-50 border-blue-300 text-blue-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[i.jsx(uu,{size:20,className:"mr-2"}),"Фільтри",I()>0&&i.jsx("span",{className:"absolute -top-2 -right-2 bg-blue-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:I()}),i.jsx(lu,{size:16,className:`ml-2 transition-transform ${u?"rotate-180":""}`})]})]}),u&&i.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Місто"}),i.jsxs("select",{value:f.city,onChange:C=>v(E=>({...E,city:C.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"",children:"Всі міста"}),b.map(C=>i.jsx("option",{value:C,children:C},C))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Сортувати за"}),i.jsxs("select",{value:f.sortBy,onChange:C=>v(E=>({...E,sortBy:C.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"date",children:"Датою реєстрації"}),i.jsx("option",{value:"name",children:"Ім'ям"}),i.jsx("option",{value:"city",children:"Містом"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Порядок"}),i.jsxs("select",{value:f.sortOrder,onChange:C=>v(E=>({...E,sortOrder:C.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"desc",children:"За спаданням"}),i.jsx("option",{value:"asc",children:"За зростанням"})]})]})]}),i.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t border-gray-200",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",id:"showOnlyAvailable",checked:f.showOnlyAvailable,onChange:C=>v(E=>({...E,showOnlyAvailable:C.target.checked})),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200"}),i.jsx("label",{htmlFor:"showOnlyAvailable",className:"ml-2 text-sm text-gray-700",children:"Показувати тільки доступних користувачів"})]}),i.jsx("button",{onClick:_,className:"text-sm text-blue-600 hover:text-blue-800",children:"Скинути фільтри"})]})]})]}),i.jsx("div",{className:"mb-4 flex items-center justify-between",children:i.jsxs("p",{className:"text-sm text-gray-600",children:["Знайдено ",i.jsx("span",{className:"font-semibold",children:r.length})," ",r.length===1?"користувач":"користувачів",n&&i.jsxs("span",{children:[' за запитом "',i.jsx("span",{className:"font-semibold",children:n}),'"']})]})}),r.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:r.map(C=>{var E,$;return i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-all duration-200 cursor-pointer group hover:scale-105",onClick:()=>k(`/profile/${C.id}`),children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-xl font-bold overflow-hidden flex-shrink-0",children:C.avatar?i.jsx("img",{src:C.avatar,alt:C.name,className:"w-full h-full rounded-full object-cover"}):i.jsxs("span",{children:[(E=C.name[0])==null?void 0:E.toUpperCase(),($=C.lastName[0])==null?void 0:$.toUpperCase()]})}),i.jsxs("div",{className:"ml-4 flex-1 min-w-0",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-900 group-hover:text-blue-600 transition-colors truncate",children:[C.name," ",C.lastName]}),i.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-1",children:[i.jsx(gi,{size:14,className:"mr-1 flex-shrink-0"}),i.jsxs("span",{className:"truncate",children:["Приєднався ",O(C.date)]})]})]})]}),C.bio&&i.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-3",children:C.bio}),i.jsxs("div",{className:"space-y-2 mb-4",children:[C.city&&i.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[i.jsx(Hr,{size:14,className:"mr-2 text-gray-400 flex-shrink-0"}),i.jsx("span",{className:"truncate",children:C.city})]}),(!C.privacy||C.privacy.showEmail)&&i.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[i.jsx(pl,{size:14,className:"mr-2 text-gray-400 flex-shrink-0"}),i.jsx("span",{className:"truncate",children:C.email})]})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs("button",{onClick:T=>{T.stopPropagation(),y(C.auth_user_id)},className:"flex-1 flex items-center justify-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:[i.jsx(an,{size:16,className:"mr-1"}),"Додати"]}),i.jsx("button",{onClick:T=>{T.stopPropagation(),k(`/messages?user=${C.id}`)},className:"flex items-center justify-center px-3 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",title:"Написати повідомлення",children:i.jsx(gr,{size:16})})]})]})},C.id)})}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(yu,{size:32,className:"text-gray-400"})}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Користувачів не знайдено"}),i.jsx("p",{className:"text-gray-600 mb-4",children:n||f.city?"Спробуйте змінити критерії пошуку або фільтри":"Поки що немає зареєстрованих користувачів"}),(n||f.city||I()>0)&&i.jsx("button",{onClick:_,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Скинути всі фільтри"})]})]})})]})}class hr{static async getAllGames(t,r){try{let s=V.from("games").select(`
          *,
          developer:users!games_developer_id_fkey (
            name,
            lastName,
            avatar
          )
        `).eq("is_active",!0).order("created_at",{ascending:!1});t&&t!=="other"&&(s=s.eq("category",t)),r&&r.length>=2&&(s=s.ilike("title",`%${r}%`));const{data:n,error:a}=await s;if(a)throw a;return n||[]}catch(s){return console.error("Error fetching games:",s),[]}}static async getGameById(t){try{const{data:r,error:s}=await V.from("games").select(`
          *,
          developer:users!games_developer_id_fkey (
            name,
            lastName,
            avatar
          )
        `).eq("id",t).eq("is_active",!0).single();if(s)throw s;return r}catch(r){return console.error("Error fetching game:",r),null}}static async createGame(t){try{const r=await ls.getCurrentUserProfile();if(!r)return null;const{data:s,error:n}=await V.from("games").insert([{...t,developer_id:r.id.toString()}]).select(`
          *,
          developer:users!games_developer_id_fkey (
            name,
            lastName,
            avatar
          )
        `).single();if(n)throw n;return s}catch(r){return console.error("Error creating game:",r),null}}static async updateGame(t,r){try{const{error:s}=await V.from("games").update({...r,updated_at:new Date().toISOString()}).eq("id",t);if(s)throw s;return!0}catch(s){return console.error("Error updating game:",s),!1}}static async deleteGame(t){try{const{error:r}=await V.from("games").delete().eq("id",t);if(r)throw r;return!0}catch(r){return console.error("Error deleting game:",r),!1}}static async getGamesByDeveloper(){try{const t=await ls.getCurrentUserProfile();if(!t)return[];const{data:r,error:s}=await V.from("games").select(`
          *,
          developer:users!games_developer_id_fkey (
            name,
            lastName,
            avatar
          )
        `).eq("developer_id",t.id.toString()).order("created_at",{ascending:!1});if(s)throw s;return r||[]}catch(t){return console.error("Error fetching developer games:",t),[]}}static async recordGamePlay(t,r=0){try{const s=await ls.getCurrentUserProfile();if(!s)return!1;const{error:n}=await V.from("game_plays").insert([{game_id:t,user_id:s.id.toString(),duration:r}]);if(n)throw n;return!0}catch(s){return console.error("Error recording game play:",s),!1}}static async rateGame(t,r,s=""){try{const n=await ls.getCurrentUserProfile();if(!n)return!1;const{error:a}=await V.from("game_ratings").upsert([{game_id:t,user_id:n.id.toString(),rating:r,review:s}]);if(a)throw a;return!0}catch(n){return console.error("Error rating game:",n),!1}}static async getGameRatings(t){try{const{data:r,error:s}=await V.from("game_ratings").select(`
          *,
          user:users!game_ratings_user_id_fkey (
            name,
            lastName,
            avatar
          )
        `).eq("game_id",t).order("created_at",{ascending:!1});if(s)throw s;return r||[]}catch(r){return console.error("Error fetching game ratings:",r),[]}}static async getUserGameRating(t){try{const r=await ls.getCurrentUserProfile();if(!r)return null;const{data:s,error:n}=await V.from("game_ratings").select("*").eq("game_id",t).eq("user_id",r.id.toString()).single();if(n){if(n.code==="PGRST116")return null;throw n}return s}catch(r){return console.error("Error fetching user game rating:",r),null}}static async getPopularGames(t=10){try{const{data:r,error:s}=await V.from("games").select(`
          *,
          developer:users!games_developer_id_fkey (
            name,
            lastName,
            avatar
          )
        `).eq("is_active",!0).order("play_count",{ascending:!1}).limit(t);if(s)throw s;return r||[]}catch(r){return console.error("Error fetching popular games:",r),[]}}static async getTopRatedGames(t=10){try{const{data:r,error:s}=await V.from("games").select(`
          *,
          developer:users!games_developer_id_fkey (
            name,
            lastName,
            avatar
          )
        `).eq("is_active",!0).gt("rating",0).order("rating",{ascending:!1}).limit(t);if(s)throw s;return r||[]}catch(r){return console.error("Error fetching top rated games:",r),[]}}}function N1({game:e,onPlay:t}){var n,a,l,o,c,d;const r=u=>({action:"Екшн",puzzle:"Головоломки",strategy:"Стратегія",arcade:"Аркада",adventure:"Пригоди",simulation:"Симулятори",sports:"Спорт",racing:"Гонки",other:"Інше"})[u]||u,s=u=>u>=1e3?`${(u/1e3).toFixed(1)}k`:u.toString();return i.jsxs("div",{className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow overflow-hidden group",children:[i.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-blue-500 to-purple-600 overflow-hidden",children:[e.thumbnail?i.jsx("img",{src:e.thumbnail,alt:e.title,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i.jsx(ds,{className:"text-white opacity-50",size:48})}),i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsxs("button",{onClick:t,className:"flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(ds,{size:20,className:"mr-2"}),"Грати"]})}),i.jsx("div",{className:"absolute top-3 left-3",children:i.jsx("span",{className:"px-2 py-1 bg-black bg-opacity-50 text-white text-xs rounded-full",children:r(e.category)})}),e.rating>0&&i.jsx("div",{className:"absolute top-3 right-3",children:i.jsxs("div",{className:"flex items-center px-2 py-1 bg-black bg-opacity-50 text-white text-xs rounded-full",children:[i.jsx(ic,{size:12,className:"mr-1 fill-current text-yellow-400"}),e.rating.toFixed(1)]})})]}),i.jsxs("div",{className:"p-4",children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2 line-clamp-1",children:e.title}),i.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description||"Немає опису"}),i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center mr-2",children:(n=e.developer)!=null&&n.avatar?i.jsx("img",{src:e.developer.avatar,alt:e.developer.name,className:"w-full h-full rounded-full object-cover"}):i.jsx("span",{className:"text-xs text-gray-600",children:(o=(l=(a=e.developer)==null?void 0:a.name)==null?void 0:l[0])==null?void 0:o.toUpperCase()})}),i.jsxs("span",{className:"text-sm text-gray-600",children:[(c=e.developer)==null?void 0:c.name," ",(d=e.developer)==null?void 0:d.lastName]})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Pw,{size:16,className:"mr-1"}),i.jsxs("span",{children:[s(e.play_count)," грали"]})]}),i.jsx("span",{children:new Date(e.created_at).toLocaleDateString("uk-UA")})]}),i.jsxs("button",{onClick:t,className:"w-full mt-4 flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(ds,{size:18,className:"mr-2"}),"Грати зараз"]})]})]})}const k1=[{value:"action",label:"Екшн"},{value:"puzzle",label:"Головоломки"},{value:"strategy",label:"Стратегія"},{value:"arcade",label:"Аркада"},{value:"adventure",label:"Пригоди"},{value:"simulation",label:"Симулятори"},{value:"sports",label:"Спорт"},{value:"racing",label:"Гонки"},{value:"other",label:"Інше"}];function S1({onClose:e,onSubmit:t}){const[r,s]=g.useState(""),[n,a]=g.useState(""),[l,o]=g.useState(""),[c,d]=g.useState(""),[u,h]=g.useState("other"),[f,v]=g.useState(!1),b=async j=>{if(j.preventDefault(),!(!r.trim()||!c.trim())){v(!0);try{await t({title:r.trim(),description:n.trim(),thumbnail:l.trim()||void 0,game_url:c.trim(),category:u})}finally{v(!1)}}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Додати нову гру"}),i.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:i.jsx(Nt,{size:24})})]}),i.jsxs("form",{onSubmit:b,className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Назва гри *"}),i.jsx("input",{type:"text",value:r,onChange:j=>s(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Введіть назву гри",required:!0,maxLength:100})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Опис гри"}),i.jsx("textarea",{value:n,onChange:j=>a(j.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Розкажіть про вашу гру...",maxLength:500})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Категорія *"}),i.jsx("select",{value:u,onChange:j=>h(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:k1.map(j=>i.jsx("option",{value:j.value,children:j.label},j.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL гри *"}),i.jsxs("div",{className:"relative",children:[i.jsx(Lw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),i.jsx("input",{type:"url",value:c,onChange:j=>d(j.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/game.html",required:!0})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Посилання на HTML файл гри або веб-сторінку з грою"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Зображення гри (URL)"}),i.jsxs("div",{className:"relative",children:[i.jsx(du,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),i.jsx("input",{type:"url",value:l,onChange:j=>o(j.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/thumbnail.jpg"})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Посилання на зображення-превью гри (необов'язково)"})]}),l&&i.jsxs("div",{className:"mt-4",children:[i.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Превью:"}),i.jsx("img",{src:l,alt:"Game thumbnail preview",className:"w-full h-32 object-cover rounded-lg",onError:j=>{j.currentTarget.style.display="none"}})]}),i.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Скасувати"}),i.jsx("button",{type:"submit",disabled:f||!r.trim()||!c.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Додавання...":"Додати гру"})]})]})]})})}function C1({game:e,onClose:t}){var E,$;const[r,s]=g.useState(!1),[n,a]=g.useState(null),[l,o]=g.useState([]),[c,d]=g.useState(0),[u,h]=g.useState(""),[f,v]=g.useState(!1),[b]=g.useState(Date.now()),[j,k]=g.useState(!1);g.useEffect(()=>{p(),m(),y()},[e.id]);const p=async()=>{const T=await hr.getGameRatings(e.id);o(T)},m=async()=>{const T=await hr.getUserGameRating(e.id);a(T),T&&(d(T.rating),h(T.review))},y=async()=>{await hr.recordGamePlay(e.id)},_=async T=>{if(T.preventDefault(),c===0)return;k(!0),await hr.rateGame(e.id,c,u)&&(await p(),await m(),v(!1)),k(!1)},O=async()=>{const T=Math.floor((Date.now()-b)/1e3);T>10&&await hr.recordGamePlay(e.id,T),t()},I=()=>{s(!r)},C=(T,H=!1,G)=>i.jsx("div",{className:"flex",children:[1,2,3,4,5].map(J=>i.jsx("button",{type:H?"button":void 0,onClick:H&&G?()=>G(J):void 0,className:`${H?"cursor-pointer hover:scale-110":"cursor-default"} transition-transform`,disabled:!H,children:i.jsx(ic,{size:20,className:`${J<=T?"text-yellow-400 fill-current":"text-gray-300"}`})},J))});return i.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 ${r?"p-0":"p-4"}`,children:i.jsxs("div",{className:`bg-white rounded-lg shadow-xl ${r?"w-full h-full rounded-none":"w-full max-w-6xl h-[90vh]"} flex flex-col`,children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mr-4",children:e.title}),i.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[i.jsx(ic,{size:16,className:"mr-1 text-yellow-400 fill-current"}),i.jsxs("span",{children:[e.rating.toFixed(1)," (",l.length," відгуків)"]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:I,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg",title:r?"Вийти з повноекранного режиму":"Повноекранний режим",children:i.jsx(zw,{size:20})}),i.jsx("button",{onClick:()=>window.location.reload(),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg",title:"Перезапустити гру",children:i.jsx(Mw,{size:20})}),i.jsx("button",{onClick:O,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg",children:i.jsx(Nt,{size:20})})]})]}),i.jsxs("div",{className:"flex-1 flex",children:[i.jsx("div",{className:"flex-1 bg-gray-100",children:i.jsx("iframe",{src:e.game_url,className:"w-full h-full border-0",title:e.title,allowFullScreen:!0,sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-pointer-lock"})}),!r&&i.jsx("div",{className:"w-80 border-l border-gray-200 bg-gray-50 overflow-y-auto",children:i.jsxs("div",{className:"p-4 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Про гру"}),i.jsx("p",{className:"text-sm text-gray-600 mb-3",children:e.description||"Немає опису"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500",children:"Розробник:"}),i.jsxs("span",{className:"text-gray-900",children:[(E=e.developer)==null?void 0:E.name," ",($=e.developer)==null?void 0:$.lastName]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500",children:"Категорія:"}),i.jsx("span",{className:"text-gray-900",children:e.category})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500",children:"Зіграно:"}),i.jsxs("span",{className:"text-gray-900",children:[e.play_count," разів"]})]})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Оцінка"}),!n&&i.jsx("button",{onClick:()=>v(!0),className:"text-sm text-blue-600 hover:text-blue-700",children:"Оцінити"})]}),f&&i.jsxs("form",{onSubmit:_,className:"mb-4 p-3 bg-white rounded-lg border",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ваша оцінка:"}),C(c,!0,d)]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Відгук (необов'язково):"}),i.jsx("textarea",{value:u,onChange:T=>h(T.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Поділіться враженнями від гри..."})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-3 py-1 text-sm text-gray-600 hover:text-gray-800",children:"Скасувати"}),i.jsx("button",{type:"submit",disabled:j||c===0,className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 disabled:opacity-50",children:j?"Збереження...":"Зберегти"})]})]}),n&&i.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Ваша оцінка:"}),i.jsx("button",{onClick:()=>v(!0),className:"text-sm text-blue-600 hover:text-blue-700",children:"Змінити"})]}),C(n.rating),n.review&&i.jsx("p",{className:"text-sm text-gray-600 mt-2",children:n.review})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[i.jsx(Ln,{size:18,className:"mr-2"}),"Відгуки (",l.length,")"]}),i.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:l.length>0?l.map(T=>{var H,G,J,F,oe,ce;return i.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center mr-2",children:(H=T.user)!=null&&H.avatar?i.jsx("img",{src:T.user.avatar,alt:T.user.name,className:"w-full h-full rounded-full object-cover"}):i.jsx("span",{className:"text-xs text-gray-600",children:(F=(J=(G=T.user)==null?void 0:G.name)==null?void 0:J[0])==null?void 0:F.toUpperCase()})}),i.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[(oe=T.user)==null?void 0:oe.name," ",(ce=T.user)==null?void 0:ce.lastName]})]}),C(T.rating)]}),T.review&&i.jsx("p",{className:"text-sm text-gray-600",children:T.review}),i.jsx("p",{className:"text-xs text-gray-400 mt-2",children:new Date(T.created_at).toLocaleDateString("uk-UA")})]},T.id)}):i.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Поки немає відгуків"})})]})]})})]})]})})}const E1=[{value:"action",label:"Екшн"},{value:"puzzle",label:"Головоломки"},{value:"strategy",label:"Стратегія"},{value:"arcade",label:"Аркада"},{value:"adventure",label:"Пригоди"},{value:"simulation",label:"Симулятори"},{value:"sports",label:"Спорт"},{value:"racing",label:"Гонки"},{value:"other",label:"Інше"}];function P1(){const[e,t]=g.useState([]),[r,s]=g.useState([]),[n,a]=g.useState([]),[l,o]=g.useState(!0),[c,d]=g.useState(""),[u,h]=g.useState(""),[f,v]=g.useState(!1),[b,j]=g.useState(null),[k,p]=g.useState("all");Xt(),g.useEffect(()=>{m(),y(),_()},[]),g.useEffect(()=>{const E=setTimeout(()=>{m()},300);return()=>clearTimeout(E)},[c,u]);const m=async()=>{try{o(!0);const E=await hr.getAllGames(u,c);t(E)}catch(E){console.error("Error loading games:",E)}finally{o(!1)}},y=async()=>{try{const E=await hr.getPopularGames(6);s(E)}catch(E){console.error("Error loading popular games:",E)}},_=async()=>{try{const E=await hr.getTopRatedGames(6);a(E)}catch(E){console.error("Error loading top rated games:",E)}},O=async E=>{const $=await hr.createGame(E);$&&(t(T=>[$,...T]),v(!1))},I=E=>{j(E)},C=()=>{switch(k){case"popular":return r;case"top-rated":return n;default:return e}};return i.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[i.jsx(Xe,{}),i.jsx("div",{className:"flex-1 ml-64 p-8",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-8",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(ah,{className:"h-8 w-8 text-blue-600 mr-3"}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Ігри"})]}),i.jsxs("button",{onClick:()=>v(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(nn,{size:20,className:"mr-2"}),"Додати гру"]})]}),i.jsxs("div",{className:"flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg w-fit",children:[i.jsx("button",{onClick:()=>p("all"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${k==="all"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Всі ігри"}),i.jsxs("button",{onClick:()=>p("popular"),className:`flex items-center px-4 py-2 rounded-md text-sm font-medium transition-colors ${k==="popular"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[i.jsx(vp,{size:16,className:"mr-1"}),"Популярні"]}),i.jsxs("button",{onClick:()=>p("top-rated"),className:`flex items-center px-4 py-2 rounded-md text-sm font-medium transition-colors ${k==="top-rated"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[i.jsx(gp,{size:16,className:"mr-1"}),"Найкращі"]})]}),k==="all"&&i.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(mn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),i.jsx("input",{type:"text",placeholder:"Пошук ігор...",value:c,onChange:E=>d(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Tw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),i.jsxs("select",{value:u,onChange:E=>h(E.target.value),className:"pl-10 pr-8 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[i.jsx("option",{value:"",children:"Всі категорії"}),E1.map(E=>i.jsx("option",{value:E.value,children:E.label},E.value))]})]})]}),l?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),i.jsx("p",{className:"mt-4 text-gray-600",children:"Завантаження ігор..."})]}):C().length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:C().map(E=>i.jsx(N1,{game:E,onPlay:()=>I(E)},E.id))}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx(ah,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:c||u?"Ігри не знайдено":"Немає ігор"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:c||u?"Спробуйте змінити пошуковий запит або фільтр":"Додайте першу гру для спільноти"}),!c&&!u&&i.jsx("div",{className:"mt-6",children:i.jsxs("button",{onClick:()=>v(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[i.jsx(nn,{className:"-ml-1 mr-2 h-5 w-5"}),"Додати гру"]})})]})]})}),f&&i.jsx(S1,{onClose:()=>v(!1),onSubmit:O}),b&&i.jsx(C1,{game:b,onClose:()=>j(null)})]})}function T1(){return g.useEffect(()=>{(async()=>{var r,s,n,a,l,o,c;const{data:{session:t}}=await V.auth.getSession();if(t!=null&&t.user){const{data:d}=await V.from("users").select("id").eq("email",t.user.email).single();d||await V.from("users").insert([{name:((r=t.user.user_metadata)==null?void 0:r.name)||((n=(s=t.user.user_metadata)==null?void 0:s.full_name)==null?void 0:n.split(" ")[0])||((a=t.user.email)==null?void 0:a.split("@")[0])||"User",lastName:((l=t.user.user_metadata)==null?void 0:l.lastName)||((c=(o=t.user.user_metadata)==null?void 0:o.full_name)==null?void 0:c.split(" ").slice(1).join(" "))||"",email:t.user.email,date:new Date().toISOString(),notifications:{email:!0,messages:!0,friendRequests:!0},privacy:{profileVisibility:"public",showBirthDate:!0,showEmail:!1}}])}})()},[]),null}function O1(){return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("header",{className:"bg-white shadow-sm",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(yu,{className:"h-8 w-8 text-blue-600"}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Соціальна мережа"})]}),i.jsxs("div",{className:"flex space-x-4",children:[i.jsx(mi,{to:"/login",className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:"Вхід"}),i.jsx(mi,{to:"/register",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-200",children:"Реєстрація"})]})]})})}),i.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-8",children:"Ласкаво просимо до нашої спільноти"}),i.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Приєднуйтесь до нашої соціальної мережі, щоб спілкуватися з друзями, ділитися моментами та знаходити нові знайомства."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mt-12",children:[i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Спілкування"}),i.jsx("p",{className:"text-gray-600",children:"Спілкуйтеся з друзями та знаходьте нові знайомства"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Контент"}),i.jsx("p",{className:"text-gray-600",children:"Діліться фото, відео та іншими матеріалами"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Приватність"}),i.jsx("p",{className:"text-gray-600",children:"Повний контроль над вашими даними та приватністю"})]})]})]})})]})}function R1(){return i.jsxs(i.Fragment,{children:[i.jsx(T1,{}),i.jsxs(Gy,{children:[i.jsx(wt,{path:"/",element:i.jsx(O1,{})}),i.jsx(wt,{path:"/login",element:i.jsx(Gw,{})}),i.jsx(wt,{path:"/register",element:i.jsx(Hw,{})}),i.jsx(wt,{path:"/profile",element:i.jsx(g1,{})}),i.jsx(wt,{path:"/messages",element:i.jsx(x1,{})}),i.jsx(wt,{path:"/friends",element:i.jsx(v1,{})}),i.jsx(wt,{path:"/people",element:i.jsx(_1,{})}),i.jsx(wt,{path:"/users",element:i.jsx(yu,{})}),i.jsx(wt,{path:"/settings",element:i.jsx(w1,{})}),i.jsx(wt,{path:"/groups",element:i.jsx(b1,{})}),i.jsx(wt,{path:"/groups/:groupId",element:i.jsx(j1,{})}),i.jsx(wt,{path:"/games",element:i.jsx(P1,{})})]})]})}Am(document.getElementById("root")).render(i.jsx(g.StrictMode,{children:i.jsx(Yy,{basename:"/Nexus",children:i.jsx(R1,{})})}));export{Ep as g};
