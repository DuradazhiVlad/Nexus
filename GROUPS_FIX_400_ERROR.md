# –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–∫–∏ 400 –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –≥—Ä—É–ø

## –ü—Ä–æ–±–ª–µ–º–∞

–û—Ç—Ä–∏–º—É—î—Ç–µ –ø–æ–º–∏–ª–∫—É 400 –ø—Ä–∏ —Å–ø—Ä–æ–±—ñ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≥—Ä—É–ø–∏:
```
Failed to load resource: the server responded with a status of 400 ()
Error fetching groups: Object
```

## –ü—Ä–∏—á–∏–Ω–∏ –ø–æ–º–∏–ª–∫–∏ 400

1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ foreign key constraints** - —Ç–∞–±–ª–∏—Ü—è `groups` –ø–æ—Å–∏–ª–∞—î—Ç—å—Å—è –Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É —Ç–∞–±–ª–∏—Ü—é
2. **–í—ñ–¥—Å—É—Ç–Ω—ñ –ø–æ–ª—è** - —É —Ç–∞–±–ª–∏—Ü—ñ `groups` –≤—ñ–¥—Å—É—Ç–Ω—ñ –ø–æ–ª—è, —è–∫—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –≤ –∫–æ–¥—ñ
3. **–ü—Ä–æ–±–ª–µ–º–∏ –∑ RLS –ø–æ–ª—ñ—Ç–∏–∫–∞–º–∏** - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ –ø–æ–ª—ñ—Ç–∏–∫–∏ –±–µ–∑–ø–µ–∫–∏
4. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ —ñ–Ω–¥–µ–∫—Å–∏** - –≤—ñ–¥—Å—É—Ç–Ω—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ —ñ–Ω–¥–µ–∫—Å–∏

## –†—ñ—à–µ–Ω–Ω—è

### 1. –í–∏–∫–æ–Ω–∞–π—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç –¥–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ë–î

–ó–∞–ø—É—Å—Ç—ñ—Ç—å `fix_groups_400_error.sql` –≤ Supabase SQL Editor:

```sql
-- –¶–µ–π —Å–∫—Ä–∏–ø—Ç:
-- 1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—å
-- 2. –î–æ–¥–∞—Å—Ç—å –≤—ñ–¥—Å—É—Ç–Ω—ñ –ø–æ–ª—è
-- 3. –í–∏–ø—Ä–∞–≤–∏—Ç—å foreign key constraints
-- 4. –°—Ç–≤–æ—Ä–∏—Ç—å –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ —ñ–Ω–¥–µ–∫—Å–∏
-- 5. –í–∏–ø—Ä–∞–≤–∏—Ç—å RLS –ø–æ–ª—ñ—Ç–∏–∫–∏
```

### 2. –ö–æ–¥ —Ä–æ–∑–¥—ñ–ª–µ–Ω–∏–π –ø–æ —Ñ–∞–π–ª–∞—Ö

–Ø —Ä–æ–∑–¥—ñ–ª–∏–≤ –∫–æ–¥ –Ω–∞ –æ–∫—Ä–µ–º—ñ —Ñ–∞–π–ª–∏ –¥–ª—è –∫—Ä–∞—â–æ—ó —á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—ñ:

#### –°—Ç–≤–æ—Ä–µ–Ω—ñ —Ñ–∞–π–ª–∏:
- `src/pages/groups/services/groupsService.ts` - —Å–µ—Ä–≤—ñ—Å –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –≥—Ä—É–ø–∞–º–∏
- `src/pages/groups/utils/groupsFilters.ts` - —É—Ç–∏–ª—ñ—Ç–∏ –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó
- `src/pages/groups/components/GroupCard.tsx` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞—Ä—Ç–∫–∏ –≥—Ä—É–ø–∏
- `src/pages/groups/components/GroupsFilters.tsx` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ñ—ñ–ª—å—Ç—Ä—ñ–≤
- `src/pages/groups/components/CreateGroupModal.tsx` - –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≥—Ä—É–ø–∏

#### –û–Ω–æ–≤–ª–µ–Ω–∏–π —Ñ–∞–π–ª:
- `src/pages/groups/hooks/useGroups.ts` - –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∏–π —Ö—É–∫ –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º –Ω–æ–≤–∏—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤

### 3. –û—Å–Ω–æ–≤–Ω—ñ –∑–º—ñ–Ω–∏ –≤ –∫–æ–¥—ñ

#### –í `useGroups.ts`:
```typescript
// –ë—É–ª–æ: –°–∫–ª–∞–¥–µ–Ω–∏–π JOIN –∑–∞–ø–∏—Ç –∑ –ø–æ–º–∏–ª–∫–æ—é 400
const { data, error: groupsError } = await supabase
  .from('groups')
  .select(`
    *,
    creator:user_profiles!groups_created_by_fkey (
      id,
      name,
      last_name,
      avatar
    )
  `);

// –°—Ç–∞–ª–æ: –†–æ–∑–¥—ñ–ª–µ–Ω—ñ –∑–∞–ø–∏—Ç–∏ –±–µ–∑ JOIN
const groupsData = await GroupsService.getAllGroups();
const creatorsMap = await GroupsService.getGroupCreators(creatorIds);
const membershipsMap = await GroupsService.getUserMemberships(user.id);
```

#### –ü–µ—Ä–µ–≤–∞–≥–∏ –Ω–æ–≤–æ–≥–æ –ø—ñ–¥—Ö–æ–¥—É:
- ‚úÖ –£–Ω–∏–∫–∞—î–º–æ —Å–∫–ª–∞–¥–Ω–∏—Ö JOIN –∑–∞–ø–∏—Ç—ñ–≤
- ‚úÖ –ö—Ä–∞—â–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å
- ‚úÖ –õ–µ–≥—à–µ –¥—ñ–∞–≥–Ω–æ—Å—Ç—É–≤–∞—Ç–∏ –ø–æ–º–∏–ª–∫–∏
- ‚úÖ –ö–æ–¥ —Ä–æ–∑–¥—ñ–ª–µ–Ω–∏–π –ø–æ —Ñ–∞–π–ª–∞—Ö
- ‚úÖ –ö—Ä–∞—â–∞ —á–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å

### 4. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤

```
src/pages/groups/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ GroupCard.tsx          # –ö–∞—Ä—Ç–∫–∞ –≥—Ä—É–ø–∏
‚îÇ   ‚îú‚îÄ‚îÄ GroupsFilters.tsx      # –§—ñ–ª—å—Ç—Ä–∏
‚îÇ   ‚îî‚îÄ‚îÄ CreateGroupModal.tsx   # –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îî‚îÄ‚îÄ groupsService.ts       # –°–µ—Ä–≤—ñ—Å –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –ë–î
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îî‚îÄ‚îÄ groupsFilters.ts       # –£—Ç–∏–ª—ñ—Ç–∏ –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îî‚îÄ‚îÄ useGroups.ts          # –û—Å–Ω–æ–≤–Ω–∏–π —Ö—É–∫ (–æ–Ω–æ–≤–ª–µ–Ω–∏–π)
‚îî‚îÄ‚îÄ types.ts                  # –¢–∏–ø–∏
```

### 5. –ö—Ä–æ–∫–∏ –¥–ª—è –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—å

1. **–í–∏–∫–æ–Ω–∞–π—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç**:
   ```sql
   -- –ó–∞–ø—É—Å—Ç—ñ—Ç—å fix_groups_400_error.sql –≤ Supabase SQL Editor
   ```

2. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î**:
   ```sql
   -- –ó–∞–ø—É—Å—Ç—ñ—Ç—å test_groups_functionality.sql –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
   ```

3. **–ö–æ–¥ –≤–∂–µ –æ–Ω–æ–≤–ª–µ–Ω–∏–π** - –≤—Å—ñ —Ñ–∞–π–ª–∏ —Å—Ç–≤–æ—Ä–µ–Ω—ñ —Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω—ñ

4. **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è**:
   - –ó–∞–ø—É—Å—Ç—ñ—Ç—å –¥–æ–¥–∞—Ç–æ–∫
   - –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –≥—Ä—É–ø
   - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
   - –°–ø—Ä–æ–±—É–π—Ç–µ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –≥—Ä—É–ø—É

### 6. –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

#### –Ø–∫—â–æ –≤—Å–µ —â–µ —î –ø–æ–º–∏–ª–∫–∞ 400:

1. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞** - –ø–æ–¥–∏–≤—ñ—Ç—å—Å—è –¥–µ—Ç–∞–ª—å–Ω—É –ø–æ–º–∏–ª–∫—É
2. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ Supabase Dashboard** - –ø–æ–¥–∏–≤—ñ—Ç—å—Å—è –ª–æ–≥–∏ –∑–∞–ø–∏—Ç—ñ–≤
3. **–ó–∞–ø—É—Å—Ç—ñ—Ç—å —Ç–µ—Å—Ç–æ–≤–∏–π –∑–∞–ø–∏—Ç**:
   ```sql
   SELECT * FROM groups WHERE is_active = true LIMIT 5;
   ```

#### –ú–æ–∂–ª–∏–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏:

1. **–¢–∞–±–ª–∏—Ü—è user_profiles –Ω–µ —ñ—Å–Ω—É—î**:
   ```sql
   -- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ —ñ—Å–Ω—É—î —Ç–∞–±–ª–∏—Ü—è
   SELECT EXISTS (
       SELECT FROM information_schema.tables 
       WHERE table_schema = 'public' 
       AND table_name = 'user_profiles'
   );
   ```

2. **RLS –ø–æ–ª—ñ—Ç–∏–∫–∏ –±–ª–æ–∫—É—é—Ç—å –∑–∞–ø–∏—Ç–∏**:
   ```sql
   -- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ RLS –ø–æ–ª—ñ—Ç–∏–∫–∏
   SELECT * FROM pg_policies WHERE tablename = 'groups';
   ```

3. **–í—ñ–¥—Å—É—Ç–Ω—ñ —ñ–Ω–¥–µ–∫—Å–∏**:
   ```sql
   -- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —ñ–Ω–¥–µ–∫—Å–∏
   SELECT * FROM pg_indexes WHERE tablename = 'groups';
   ```

### 7. –õ–æ–≥—É–≤–∞–Ω–Ω—è

–ö–æ–¥ –º—ñ—Å—Ç–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è:
- `üîç` - –ø–æ—á–∞—Ç–æ–∫ –æ–ø–µ—Ä–∞—Ü—ñ—ó
- `‚úÖ` - —É—Å–ø—ñ—à–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
- `‚ùå` - –ø–æ–º–∏–ª–∫–∞

–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.

### 8. –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü—ñ—Å–ª—è –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—å:
- ‚úÖ –ü–æ–º–∏–ª–∫–∞ 400 –±—É–¥–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∞
- ‚úÖ –ì—Ä—É–ø–∏ –±—É–¥—É—Ç—å –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –ö–æ–¥ –±—É–¥–µ –∫—Ä–∞—â–µ –æ—Ä–≥–∞–Ω—ñ–∑–æ–≤–∞–Ω–∏–π
- ‚úÖ –õ–µ–≥—à–µ –¥—ñ–∞–≥–Ω–æ—Å—Ç—É–≤–∞—Ç–∏ –ø—Ä–æ–±–ª–µ–º–∏
- ‚úÖ –ö—Ä–∞—â–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å

### 9. –î–æ–¥–∞—Ç–∫–æ–≤—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏

–Ø–∫—â–æ –ø—Ä–æ–±–ª–µ–º–∏ –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è:

1. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—é** - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–π
2. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ RLS –ø–æ–ª—ñ—Ç–∏–∫–∏** - –º–æ–∂—É—Ç—å –±–ª–æ–∫—É–≤–∞—Ç–∏ –∑–∞–ø–∏—Ç–∏
3. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ foreign key constraints** - –º–æ–∂—É—Ç—å –±—É—Ç–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏
4. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—å** - –≤—Å—ñ –ø–æ–ª—è –ø–æ–≤–∏–Ω–Ω—ñ —ñ—Å–Ω—É–≤–∞—Ç–∏ 