# üéØ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ –≥—Ä—É–ø

## ‚úÖ –©–æ –±—É–ª–æ –∑—Ä–æ–±–ª–µ–Ω–æ:

### 1. **–°—Ç–≤–æ—Ä–µ–Ω–æ –Ω–æ–≤—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—å –≥—Ä—É–ø:**
- `groups` - –æ—Å–Ω–æ–≤–Ω–∞ —Ç–∞–±–ª–∏—Ü—è –≥—Ä—É–ø
- `group_members` - —É—á–∞—Å–Ω–∏–∫–∏ –≥—Ä—É–ø
- `group_posts` - –ø–æ—Å—Ç–∏ –≤ –≥—Ä—É–ø–∞—Ö
- `group_post_media` - –º–µ–¥—ñ–∞ –¥–æ –ø–æ—Å—Ç—ñ–≤ –≥—Ä—É–ø

### 2. **–û–Ω–æ–≤–ª–µ–Ω–æ –∫–æ–¥ –¥–æ–¥–∞—Ç–∫—É:**
- `src/lib/groupsService.ts` - —Å–µ—Ä–≤—ñ—Å –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –≥—Ä—É–ø–∞–º–∏
- `src/types/groups.ts` - —Ç–∏–ø–∏ –¥–ª—è –≥—Ä—É–ø
- `src/pages/groups/Groups.tsx` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –≥—Ä—É–ø

### 3. **–ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –±–µ–∑–ø–µ–∫—É:**
- RLS –ø–æ–ª—ñ—Ç–∏–∫–∏ –¥–ª—è –≤—Å—ñ—Ö —Ç–∞–±–ª–∏—Ü—å
- –ü—Ä–∞–≤–∏–ª—å–Ω—ñ foreign key –æ–±–º–µ–∂–µ–Ω–Ω—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ —Ç—Ä–∏–≥–µ—Ä–∏ –¥–ª—è –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É —É—á–∞—Å–Ω–∏–∫—ñ–≤/–ø–æ—Å—Ç—ñ–≤

## üöÄ –©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑—Ä–æ–±–∏—Ç–∏:

### 1. **–ó–∞–ø—É—Å—Ç—ñ—Ç—å SQL —Å–∫—Ä–∏–ø—Ç:**
```sql
-- –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Ü–µ–π —Å–∫—Ä–∏–ø—Ç –≤ Supabase SQL Editor
-- –§–∞–π–ª: create_groups_tables.sql
```

### 2. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—å:**
```sql
-- –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Ü–µ–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
-- –§–∞–π–ª: test_groups_functionality.sql
```

### 3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å –¥–æ–¥–∞—Ç–æ–∫:**
```bash
npm run dev
```

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–æ–≤–∏—Ö —Ç–∞–±–ª–∏—Ü—å:

### `groups` —Ç–∞–±–ª–∏—Ü—è:
```sql
- id (uuid, primary key)
- name (text, not null)
- description (text)
- avatar (text)
- cover_image (text)
- created_by (uuid, references user_profiles.id)
- created_at (timestamptz)
- updated_at (timestamptz)
- is_public (boolean, default true)
- member_count (integer, default 0)
- post_count (integer, default 0)
```

### `group_members` —Ç–∞–±–ª–∏—Ü—è:
```sql
- id (uuid, primary key)
- group_id (uuid, references groups.id)
- user_id (uuid, references user_profiles.id)
- role (text: 'admin', 'moderator', 'member')
- joined_at (timestamptz)
- is_active (boolean, default true)
```

### `group_posts` —Ç–∞–±–ª–∏—Ü—è:
```sql
- id (uuid, primary key)
- group_id (uuid, references groups.id)
- author_id (uuid, references user_profiles.id)
- content (text, not null)
- media_url (text)
- media_type (text: 'photo', 'video', 'document')
- created_at (timestamptz)
- updated_at (timestamptz)
- likes_count (integer, default 0)
- comments_count (integer, default 0)
- is_pinned (boolean, default false)
```

### `group_post_media` —Ç–∞–±–ª–∏—Ü—è:
```sql
- id (uuid, primary key)
- post_id (uuid, references group_posts.id)
- type (text: 'image', 'video')
- url (text, not null)
- filename (text)
- file_size (integer)
- thumbnail_url (text)
- created_at (timestamptz)
```

## üîí –ë–µ–∑–ø–µ–∫–∞ (RLS –ø–æ–ª—ñ—Ç–∏–∫–∏):

### –ì—Ä—É–ø–∏:
- **–ü–µ—Ä–µ–≥–ª—è–¥**: –ü—É–±–ª—ñ—á–Ω—ñ –≥—Ä—É–ø–∏ –∞–±–æ –≥—Ä—É–ø–∏, –¥–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —î —É—á–∞—Å–Ω–∏–∫–æ–º
- **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è**: –ë—É–¥—å-—è–∫–∏–π –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á
- **–û–Ω–æ–≤–ª–µ–Ω–Ω—è**: –¢—ñ–ª—å–∫–∏ —Å—Ç–≤–æ—Ä—é–≤–∞—á –≥—Ä—É–ø–∏ –∞–±–æ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∏
- **–í–∏–¥–∞–ª–µ–Ω–Ω—è**: –¢—ñ–ª—å–∫–∏ —Å—Ç–≤–æ—Ä—é–≤–∞—á –≥—Ä—É–ø–∏

### –£—á–∞—Å–Ω–∏–∫–∏:
- **–ü–µ—Ä–µ–≥–ª—è–¥**: –¢—ñ–ª—å–∫–∏ —É—á–∞—Å–Ω–∏–∫–∏ –≥—Ä—É–ø–∏
- **–ü—Ä–∏—î–¥–Ω–∞–Ω–Ω—è**: –ë—É–¥—å-—è–∫–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –¥–æ –ø—É–±–ª—ñ—á–Ω–∏—Ö –≥—Ä—É–ø
- **–í–∏—Ö–æ–¥**: –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –º–æ–∂—É—Ç—å –ø–æ–∫–∏–Ω—É—Ç–∏ –≥—Ä—É–ø–∏
- **–†–æ–ª—ñ**: –¢—ñ–ª—å–∫–∏ —Å—Ç–≤–æ—Ä—é–≤–∞—á—ñ —Ç–∞ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∏ –º–æ–∂—É—Ç—å –∑–º—ñ–Ω—é–≤–∞—Ç–∏ —Ä–æ–ª—ñ

### –ü–æ—Å—Ç–∏:
- **–ü–µ—Ä–µ–≥–ª—è–¥**: –¢—ñ–ª—å–∫–∏ —É—á–∞—Å–Ω–∏–∫–∏ –≥—Ä—É–ø–∏
- **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è**: –¢—ñ–ª—å–∫–∏ —É—á–∞—Å–Ω–∏–∫–∏ –≥—Ä—É–ø–∏
- **–û–Ω–æ–≤–ª–µ–Ω–Ω—è**: –ê–≤—Ç–æ—Ä –ø–æ—Å—Ç–∞, —Å—Ç–≤–æ—Ä—é–≤–∞—á –≥—Ä—É–ø–∏, –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∏
- **–í–∏–¥–∞–ª–µ–Ω–Ω—è**: –ê–≤—Ç–æ—Ä –ø–æ—Å—Ç–∞, —Å—Ç–≤–æ—Ä—é–≤–∞—á –≥—Ä—É–ø–∏, –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∏

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó:

### –¢—Ä–∏–≥–µ—Ä–∏:
- **–ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ —É—á–∞—Å–Ω–∏–∫—ñ–≤**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –ø—Ä–∏ –¥–æ–¥–∞–≤–∞–Ω–Ω—ñ/–≤–∏–¥–∞–ª–µ–Ω–Ω—ñ —É—á–∞—Å–Ω–∏–∫—ñ–≤
- **–ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ –ø–æ—Å—Ç—ñ–≤**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ/–≤–∏–¥–∞–ª–µ–Ω–Ω—ñ –ø–æ—Å—Ç—ñ–≤
- **–û–Ω–æ–≤–ª–µ–Ω–Ω—è —á–∞—Å—É**: `updated_at` –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –ø—Ä–∏ –∑–º—ñ–Ω–∞—Ö

## üéØ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è:

### 1. **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≥—Ä—É–ø–∏:**
- –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –≥—Ä—É–ø
- –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–°—Ç–≤–æ—Ä–∏—Ç–∏ –≥—Ä—É–ø—É"
- –ó–∞–ø–æ–≤–Ω—ñ—Ç—å —Ñ–æ—Ä–º—É —Ç–∞ —Å—Ç–≤–æ—Ä—ñ—Ç—å –≥—Ä—É–ø—É

### 2. **–ü—Ä–∏—î–¥–Ω–∞–Ω–Ω—è –¥–æ –≥—Ä—É–ø–∏:**
- –ó–Ω–∞–π–¥—ñ—Ç—å –ø—É–±–ª—ñ—á–Ω—É –≥—Ä—É–ø—É
- –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–ü—Ä–∏—î–¥–Ω–∞—Ç–∏—Å—è"

### 3. **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ—Å—Ç–∞:**
- –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ –≥—Ä—É–ø—É
- –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π –ø–æ—Å—Ç

### 4. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –±–µ–∑–ø–µ–∫–∏:**
- –°–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ –ø—Ä–∏–≤–∞—Ç–Ω–∏—Ö –≥—Ä—É–ø
- –°–ø—Ä–æ–±—É–π—Ç–µ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ –≥—Ä—É–ø–∏ –±–µ–∑ –ø—Ä–∞–≤

## üêõ –Ø–∫—â–æ –≤–∏–Ω–∏–∫–∞—é—Ç—å –ø–æ–º–∏–ª–∫–∏:

### 1. **–ü–æ–º–∏–ª–∫–∞ "Bucket not found":**
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ —Å—Ç–≤–æ—Ä–µ–Ω—ñ –≤—Å—ñ —Ç–∞–±–ª–∏—Ü—ñ
- –ó–∞–ø—É—Å—Ç—ñ—Ç—å `test_groups_functionality.sql`

### 2. **–ü–æ–º–∏–ª–∫–∞ "Foreign key constraint":**
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ foreign keys
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ `user_profiles` —Ç–∞–±–ª–∏—Ü—è —ñ—Å–Ω—É—î

### 3. **–ü–æ–º–∏–ª–∫–∞ "RLS policy":**
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ —Å—Ç–≤–æ—Ä–µ–Ω—ñ –≤—Å—ñ RLS –ø–æ–ª—ñ—Ç–∏–∫–∏
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–π

### 4. **–ü–æ–º–∏–ª–∫–∞ "Table does not exist":**
- –ó–∞–ø—É—Å—Ç—ñ—Ç—å `create_groups_tables.sql` —â–µ —Ä–∞–∑
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –≤—Å—ñ —Ç–∞–±–ª–∏—Ü—ñ —Å—Ç–≤–æ—Ä–µ–Ω—ñ

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞:

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–∞—é—Ç—å –ø—Ä–æ–±–ª–µ–º–∏:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –ø–æ–º–∏–ª–∫–∏
2. –ó–∞–ø—É—Å—Ç—ñ—Ç—å `test_groups_functionality.sql` –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
3. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤—Å—ñ SQL —Å–∫—Ä–∏–ø—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω—ñ —É—Å–ø—ñ—à–Ω–æ 